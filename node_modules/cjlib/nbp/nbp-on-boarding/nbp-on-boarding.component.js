var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { Component, Input, Output, EventEmitter, TemplateRef, HostListener, ElementRef } from '@angular/core';
import { NbpSize } from './../nbp-commons/nbp-commons.enums';
import { coerceBooleanProperty } from './../../utility/lib-utility';
/**
 * Componente tooltip con funzionalità di navigazione pagine al suo interno
 */
var NbpOnBoardingComponent = (function () {
    function NbpOnBoardingComponent(element) {
        this.element = element;
        this._tooltipSize = NbpSize;
        this._isVisible = false;
        this._stepIndex = 0;
        /**
          * Strategia di apertura tooltip, 'load', 'click' o 'hover':
          * load -> comportamento di apertura al caricamento della pagina.
          * click -> comportamento popover con apertura e chiusura su click (più pulsante x all'interno del tooltip)
          * hover -> comportamento tooltip classico apertura su hover , chiusura sulla perdita dell'hover
          * Valore di default: hover
         */
        this.nbpVisibilityStrategy = 'hover';
        /**
         * (Opzionale) Enum che definisce il la posizione del tooltip rispetto all’oggetto al quale è ancorato:
         * “Top” | “Right” | “Bottom” | “Left” | “Top-Left” | “Top-Right” | “Bottom-Left” | “Bottom-Right”
         * Default: “Top”
         */
        this.nbpPosition = 'Top'; // enum;
        /**
         * (Opzionale) Enum che definisce il tipo di icona da visualizzare nel tooltip:
         * “Warning” | “Help” | ”Info”
         * Default: nessuna icona
         * Funzionante solo se non presente nbpTemplate
         */
        // TODO NON VIENE MAI USATA QUESTA PROPERTY -- COMMENTATA PER EVITARE REFUSI
        /*@Input() nbpType: object; // enum; Non presente nelle nuove StyleGuide: nuovo componente icona (?)/(!)/(i) -> tooltip?*/
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.nbpSize = NbpSize.SM;
        this._nbpHidden = false;
        /**
        * Evento lanciato al click rinuncia messaggi
        */
        this.stepGiveUp = new EventEmitter();
    }
    Object.defineProperty(NbpOnBoardingComponent.prototype, "hidden", {
        /**
         * Booleano che abilita/disabilita la visualizzazione del tooltip.
        * Attributo "hidden" standard di HTML5 element
         */
        get: function () { return this._nbpHidden; },
        set: function (value) {
            this._isVisible = !value;
            this._nbpHidden = coerceBooleanProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    ;
    ;
    NbpOnBoardingComponent.prototype.stepGiveUpAction = function (event) {
        this.stepGiveUp.emit(event);
    };
    //******************************************************* */
    //---modificaReply
    NbpOnBoardingComponent.prototype.onClick = function (target) {
        event.stopPropagation();
        if (this.nbpVisibilityStrategy !== 'load') {
            if (!this.element.nativeElement.contains(target)) {
                this._closePopover(target);
            }
            if (!this._isVisibilityStrategyHover()) {
                this._closePopover(target);
            }
        }
    };
    //---------------------
    NbpOnBoardingComponent.prototype._open = function () {
        var _this = this;
        setTimeout(function () {
            _this._isVisible = true;
        }, 0);
    };
    NbpOnBoardingComponent.prototype._close = function () {
        this._isVisible = false;
    };
    NbpOnBoardingComponent.prototype._closePopover = function (target) {
        var parentFound = false;
        while (target != null && !parentFound) {
            if (target === this.element.nativeElement) {
                parentFound = true;
            }
            target = target.parentElement;
        }
        if (!parentFound) {
            this._isVisible = false;
        }
    };
    NbpOnBoardingComponent.prototype._toggleVisibility = function () {
        if ((this.nbpVisibilityStrategy === 'hover') || (this.nbpVisibilityStrategy === 'load')) {
            return;
        }
        if (this._isVisible) {
            this._close();
        }
        else {
            this._open();
        }
    };
    NbpOnBoardingComponent.prototype._isVisibilityStrategyHover = function () {
        return this.nbpVisibilityStrategy === 'hover';
    };
    NbpOnBoardingComponent.prototype.ngOnInit = function () {
        if (this.nbpVisibilityStrategy === 'load') {
            this._isVisible = true;
            this._open();
        }
    };
    return NbpOnBoardingComponent;
}());
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpOnBoardingComponent.prototype, "name", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpVisibilityStrategy", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpPosition", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NbpOnBoardingComponent.prototype, "nbpSize", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpText", void 0);
__decorate([
    Input(),
    __metadata("design:type", TemplateRef)
], NbpOnBoardingComponent.prototype, "nbpTemplate", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], NbpOnBoardingComponent.prototype, "nbpTemplateData", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Object])
], NbpOnBoardingComponent.prototype, "hidden", null);
__decorate([
    Input(),
    __metadata("design:type", Object)
], NbpOnBoardingComponent.prototype, "nbpTemplateDataStep", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NbpOnBoardingComponent.prototype, "stepGiveUp", void 0);
__decorate([
    HostListener('document: click', ['$event.target']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [HTMLElement]),
    __metadata("design:returntype", void 0)
], NbpOnBoardingComponent.prototype, "onClick", null);
NbpOnBoardingComponent = __decorate([
    Component({
        selector: 'nbp-on-boarding',template: "<span [ngClass]=\"{ 'nbp-on-boarding': _isVisibilityStrategyHover(), 'nbp-popover': !_isVisibilityStrategyHover() }\"><span (click)=\"_toggleVisibility(); $event.stopPropagation()\" [class.clickable]=\"!_isVisibilityStrategyHover()\"><ng-content></ng-content></span><span [hidden]=\"hidden\" [ngClass]=\"{ 'tooltip-content': _isVisibilityStrategyHover(), 'popover-content': !_isVisibilityStrategyHover(), 'top': nbpPosition=='Top', 'bottom': nbpPosition=='Bottom', 'right': nbpPosition=='Right', 'left': nbpPosition=='Left', 'top-left': nbpPosition=='Top-Left', 'top-right': nbpPosition=='Top-Right', 'bottom-left': nbpPosition=='Bottom-Left', 'bottom-right': nbpPosition=='Bottom-Right', 'sm':(nbpSize === _tooltipSize.SM) && !nbpTemplateDataStep, 'md':(nbpSize === _tooltipSize.MD) && !nbpTemplateDataStep, 'lg':(nbpSize === _tooltipSize.LG) && !nbpTemplateDataStep, 'opened': !_isVisibilityStrategyHover() && _isVisible, 'stepSize':!!nbpTemplateDataStep }\"><ng-container *ngIf=\"(!nbpTemplate); else nbpTemplateContainer\"><span *ngIf=\"!nbpTemplateDataStep\" [ngClass]=\"{ 'tooltip-text': _isVisibilityStrategyHover() , 'popover-text': !_isVisibilityStrategyHover() }\"><div class=\"row\"><div class=\"col-md-24\" [ngClass]=\"{'pad-b-12': !_isVisibilityStrategyHover(), 'tooltip-text': 'true' }\">{{nbpText}}</div></div></span><div class=\"step-conteiner\" *ngIf=\"nbpTemplateDataStep && nbpTemplateDataStep.length>0\"><div class=\"row\"><div class=\"col-md-24\"><div class=\"tooltip-text-step\"><span class=\"text-info-step\">{{nbpTemplateDataStep[_stepIndex].text}}</span></div><span class=\"ico-azioni-elimina ico-azioni-elimina-19px pull-right clickable\" (click)=\"_close(); $event.stopPropagation()\"></span></div></div><div class=\"row\" style=\"margin-top: 5px;\"><div class=\"text-give-up clickable\" (click)=\"stepGiveUpAction($event)\">NON MOSTRARMI PIÙ QUESTI MESSAGGI</div></div><div class=\"row\" style=\"margin-top:10px\"><button class=\"button-step pull-left\" *ngIf=\"_stepIndex>0\" (click)=\"(_stepIndex = _stepIndex - 1);$event.stopPropagation()\"><span class=\"span-text-al prev-info icomoon-Simboli_Risorsa-12\"></span> <span class=\"span-text-al text-prec\">PRECEDENTE</span></button> <button class=\"button-step pull-right\" *ngIf=\"_stepIndex<(nbpTemplateDataStep.length-1)\" (click)=\"(_stepIndex = _stepIndex + 1);$event.stopPropagation()\"><span class=\"span-text-al text-prec\">SUCCESSIVO</span> <span class=\"span-text-al next-info icomoon-Simboli_Risorsa-13\"></span></button></div></div></ng-container><ng-template #nbpTemplateContainer [ngTemplateOutlet]=\"nbpTemplate\" [ngTemplateOutletContext]=\"nbpTemplateData\"></ng-template></span></span>",
        styles: [".bottom .icon-position,.bottom-left .icon-position,.bottom-right .icon-position,.right .icon-position,.top .icon-position,.top-left .icon-position,.top-right .icon-position{position:absolute;top:1.3125em;right:1.3125em;color:#fa9600;font-weight:700}.text-padding-click{padding:20px 80px 20px 20px;text-align:left;font-size:14px;font-family:Arial}.text-padding-hover{padding:.5em 1em .5em 1em}.left .icon-position{position:absolute;top:.3125em;left:.3125em;color:#fa9600;font-weight:700}.nbp-on-boarding,.nbp-popover{position:relative;display:inline-block;opacity:.9;z-index:99}.clickable{cursor:pointer}.stepSize{width:470px}.step-conteiner{padding:20px;max-width:470px}.step-conteiner .ico-azioni-elimina-19px:before{width:19px;height:19px;color:#fa9600;font-weight:700}.step-conteiner .ico-azioni-elimina-19px:before{width:19px;height:19px;color:#fa9600;font-weight:700}.step-conteiner .prev-info{font-size:20px;padding-right:5px}.step-conteiner .next-info{font-size:20px;padding-left:5px}.step-conteiner .tooltip-text-step{width:90%;text-align:left;font-weight:400;font-size:12px;font-weight:400;font-family:'Arial Bold',Arial;float:left}.step-conteiner .text-info-step{margin:0;text-rendering:optimizeLegibility;font-feature-settings:\"kern\" 1;-webkit-font-feature-settings:\"kern\";-moz-font-feature-settings:\"kern\";-moz-font-feature-settings:\"kern=1\";font-kerning:normal}.step-conteiner .text-give-up{float:left;text-align:left;margin-left:5px;padding-top:5px;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:12px;color:#fa9600}.step-conteiner .text-prec{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:12px;color:#fa9600}.step-conteiner .button-step{background-color:transparent;border:0;color:#fa9600}.step-conteiner .span-text-al{vertical-align:middle}.nbp-on-boarding .tooltip-content,.nbp-popover .popover-content{visibility:hidden;background-color:#323232;color:#fff;padding:.3125em 0;position:absolute;z-index:1;display:inline-block!important}.nbp-on-boarding .tooltip-content .tooltip-text,.nbp-popover .popover-content .tooltip-text{text-align:center;font-weight:400}.nbp-on-boarding .tooltip-content .popover-text,.nbp-popover .popover-content .popover-text{text-align:center;font-weight:400}.nbp-on-boarding .tooltip-content.md,.nbp-popover .popover-content.md{width:21.875em}.nbp-on-boarding .tooltip-content.sm,.nbp-popover .popover-content.sm{width:14.5em}.nbp-on-boarding .tooltip-content.lg,.nbp-popover .popover-content.lg{width:31.25em}.nbp-on-boarding .tooltip-content.right,.nbp-popover .popover-content.right{top:50%!important;left:100%!important;margin-left:.625em;transform:translateY(-50%)}.nbp-on-boarding .tooltip-content.right::after,.nbp-popover .popover-content.right::after{content:\"\";position:absolute;top:50%;right:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent #323232 transparent transparent}.nbp-on-boarding .tooltip-content.left,.nbp-popover .popover-content.left{top:50%;right:100%;margin-right:.625em;transform:translateY(-50%)}.nbp-on-boarding .tooltip-content.left::after,.nbp-popover .popover-content.left::after{content:\"\";position:absolute;top:50%;left:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent transparent transparent #323232}.nbp-on-boarding .tooltip-content.top,.nbp-popover .popover-content.top{bottom:100%;left:62%;margin-bottom:.8125em;transform:translateX(-50%)}.nbp-on-boarding .tooltip-content.top::after,.nbp-popover .popover-content.top::after{content:\"\";position:absolute;top:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.bottom,.nbp-popover .popover-content.bottom{top:100%;left:50%;margin-top:.9375em;transform:translateX(-50%)}.nbp-on-boarding .tooltip-content.bottom::after,.nbp-popover .popover-content.bottom::after{content:\"\";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding .tooltip-content.top-left,.nbp-popover .popover-content.top-left{bottom:100%;left:-4px;margin-bottom:.9375em}.nbp-on-boarding .tooltip-content.top-left::after,.nbp-popover .popover-content.top-left::after{content:\"\";position:absolute;top:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.top-right,.nbp-popover .popover-content.top-right{bottom:100%;right:-14px;margin-bottom:.9375em}.nbp-on-boarding .tooltip-content.top-right::after,.nbp-popover .popover-content.top-right::after{content:\"\";position:absolute;top:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.bottom-left,.nbp-popover .popover-content.bottom-left{top:100%;left:-4px;margin-top:.9375em}.nbp-on-boarding .tooltip-content.bottom-left::after,.nbp-popover .popover-content.bottom-left::after{content:\"\";position:absolute;bottom:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding .tooltip-content.bottom-right,.nbp-popover .popover-content.bottom-right{top:100%;right:-14px;margin-top:.9375em}.nbp-on-boarding .tooltip-content.bottom-right::after,.nbp-popover .popover-content.bottom-right::after{content:\"\";position:absolute;bottom:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding:hover .tooltip-content,.nbp-popover .popover-content.opened{visibility:visible}:host-context(.contrasto-on) .bottom .icon-position,:host-context(.contrasto-on) .bottom-left .icon-position,:host-context(.contrasto-on) .bottom-right .icon-position,:host-context(.contrasto-on) .right .icon-position,:host-context(.contrasto-on) .top .icon-position,:host-context(.contrasto-on) .top-left .icon-position,:host-context(.contrasto-on) .top-right .icon-position{color:#fff}:host-context(.contrasto-on) .left .icon-position{color:#fff}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content,:host-context(.contrasto-on) .nbp-popover .popover-content{background-color:#000}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.right::after{border-color:transparent #000 transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.left::after{border-color:transparent transparent transparent #000}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top-left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top-left::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top-right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top-right::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom-left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-left::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom-right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-right::after{border-color:transparent transparent #000 transparent} /*# sourceMappingURL=nbp-on-boarding.component.css.map */ "]
    }),
    __metadata("design:paramtypes", [ElementRef])
], NbpOnBoardingComponent);
export { NbpOnBoardingComponent };
