/**
  * @license Customer journey v0.2.31-Cdc
  */
import { APP_INITIALIZER, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactoryResolver, ContentChild, ContentChildren, Directive, ElementRef, ErrorHandler, EventEmitter, HostBinding, HostListener, Inject, Injectable, InjectionToken, Injector, Input, IterableDiffers, KeyValueDiffers, NgModule, NgZone, Optional, Output, Pipe, QueryList, Renderer2, TemplateRef, ViewChild, ViewChildren, ViewContainerRef, forwardRef } from '@angular/core';
import { CommonModule, CurrencyPipe, DOCUMENT, DatePipe, DecimalPipe, LowerCasePipe, PercentPipe, SlicePipe, UpperCasePipe } from '@angular/common';
import { FlexLayoutModule } from '@angular/flex-layout';
import { BrowserAnimationsModule } from '@angular/platform-browser/animations';
import { FormControl, FormsModule, NG_ASYNC_VALIDATORS, NG_VALIDATORS, NG_VALUE_ACCESSOR, NgControl, NgForm, NgModel, RequiredValidator, Validators } from '@angular/forms';
import { NgbDateParserFormatter, NgbDatepickerI18n, NgbDatepickerModule, NgbInputDatepicker } from '@ng-bootstrap/ng-bootstrap';
import { Subject } from 'rxjs/Subject';
import { filter } from 'rxjs/operator/filter';
import { Observable } from 'rxjs/Observable';
import 'rxjs/add/observable/of';
import 'rxjs/add/operator/map';
import { DOCUMENT as DOCUMENT$1 } from '@angular/platform-browser';
import { ActivatedRoute, Router, RouterModule } from '@angular/router';
import { HttpClient, HttpClientModule, HttpErrorResponse, HttpHeaders, HttpResponse } from '@angular/common/http';
import 'rxjs/add/operator/concatMap';
import 'rxjs/add/operator/catch';
import { ReplaySubject } from 'rxjs/ReplaySubject';
import 'rxjs/add/observable/fromEvent';
import 'rxjs/add/operator/filter';
import { BehaviorSubject } from 'rxjs/BehaviorSubject';
import 'rxjs/add/operator/partition';
import 'rxjs/add/operator/windowWhen';
import 'rxjs/add/observable/timer';
import 'rxjs/add/operator/merge';
import 'rxjs/add/operator/delay';
import 'rxjs/add/operator/bufferWhen';
import 'rxjs/add/operator/count';
import 'rxjs/add/operator/combineLatest';
import 'rxjs/add/operator/bufferToggle';
import 'rxjs/add/observable/interval';
import 'rxjs/add/operator/do';
import 'rxjs/add/observable/throw';
import { animate, query, state, style, transition, trigger } from '@angular/animations';
import 'rxjs/add/operator/mergeMap';
import { TranslateService } from '@ngx-translate/core';
import { Http } from '@angular/http';
import { create } from 'nouislider';
import * as noUiSlider from 'nouislider';
import { FileUploadModule, FileUploader } from 'ng2-file-upload';
import { ClickOutsideModule } from 'ng4-click-outside';
import 'rxjs/add/operator/toPromise';
import 'rxjs/add/operator/debounceTime';
import 'rxjs/add/operator/startWith';
import 'rxjs/add/operator/mergeMapTo';
import 'rxjs/add/operator/scan';

let APP_CONFIG = new InjectionToken('app.config');
let APP_ALERT_DEF = new InjectionToken('ApplicationAlertDefinition');

class NgbDate {
    constructor(year, month, day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }
    static from(date) {
        return date ? new NgbDate(date.year, date.month, date.day ? date.day : 1) : null;
    }
    equals(other) {
        return other && this.year === other.year && this.month === other.month && this.day === other.day;
    }
    before(other) {
        if (!other) {
            return false;
        }
        if (this.year === other.year) {
            if (this.month === other.month) {
                return this.day === other.day ? false : this.day < other.day;
            }
            else {
                return this.month < other.month;
            }
        }
        else {
            return this.year < other.year;
        }
    }
    after(other) {
        if (!other) {
            return false;
        }
        if (this.year === other.year) {
            if (this.month === other.month) {
                return this.day === other.day ? false : this.day > other.day;
            }
            else {
                return this.month > other.month;
            }
        }
        else {
            return this.year > other.year;
        }
    }
    toStruct() { return { year: this.year, month: this.month, day: this.day }; }
    toString() { return `${this.year}-${this.month}-${this.day}`; }
}

function toInteger(value) {
    return parseInt(`${value}`, 10);
}
function toString(value) {
    return (value !== undefined && value !== null) ? `${value}` : '';
}


function isNumber(value) {
    return !isNaN(toInteger(value));
}
function isInteger(value) {
    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;
}

function padNumber(value) {
    if (isNumber(value)) {
        return `0${value}`.slice(-2);
    }
    else {
        return '';
    }
}

var __decorate$4 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function fromJSDate(jsDate) {
    return new NgbDate(jsDate.getFullYear(), jsDate.getMonth() + 1, jsDate.getDate());
}
function toJSDate(date) {
    const jsDate = new Date(date.year, date.month - 1, date.day, 12);
    // this is done avoid 30 -> 1930 conversion
    if (!isNaN(jsDate.getTime())) {
        jsDate.setFullYear(date.year);
    }
    return jsDate;
}
let NgbCalendar = class NgbCalendar {
};
NgbCalendar = __decorate$4([
    Injectable()
], NgbCalendar);
let NgbCalendarGregorian = class NgbCalendarGregorian extends NgbCalendar {
    getDaysPerWeek() { return 7; }
    getMonths() { return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; }
    getWeeksPerMonth() { return 6; }
    getNext(date, period = 'd', number = 1) {
        let jsDate = toJSDate(date);
        switch (period) {
            case 'y':
                return new NgbDate(date.year + number, 1, 1);
            case 'm':
                jsDate = new Date(date.year, date.month + number - 1, 1, 12);
                break;
            case 'd':
                jsDate.setDate(jsDate.getDate() + number);
                break;
            default:
                return date;
        }
        return fromJSDate(jsDate);
    }
    getPrev(date, period = 'd', number = 1) { return this.getNext(date, period, -number); }
    getWeekday(date) {
        let jsDate = toJSDate(date);
        let day = jsDate.getDay();
        // in JS Date Sun=0, in ISO 8601 Sun=7
        return day === 0 ? 7 : day;
    }
    getWeekNumber(week, firstDayOfWeek) {
        // in JS Date Sun=0, in ISO 8601 Sun=7
        if (firstDayOfWeek === 7) {
            firstDayOfWeek = 0;
        }
        const thursdayIndex = (4 + 7 - firstDayOfWeek) % 7;
        let date = week[thursdayIndex];
        const jsDate = toJSDate(date);
        jsDate.setDate(jsDate.getDate() + 4 - (jsDate.getDay() || 7)); // Thursday
        const time = jsDate.getTime();
        jsDate.setMonth(0); // Compare with Jan 1
        jsDate.setDate(1);
        return Math.floor(Math.round((time - jsDate.getTime()) / 86400000) / 7) + 1;
    }
    getToday() { return fromJSDate(new Date()); }
    isValid(date) {
        if (!date || !isInteger(date.year) || !isInteger(date.month) || !isInteger(date.day)) {
            return false;
        }
        const jsDate = toJSDate(date);
        return !isNaN(jsDate.getTime()) && jsDate.getFullYear() === date.year && jsDate.getMonth() + 1 === date.month &&
            jsDate.getDate() === date.day;
    }
};
NgbCalendarGregorian = __decorate$4([
    Injectable()
], NgbCalendarGregorian);

function isChangedDate(prev, next) {
    return !dateComparator(prev, next);
}
function dateComparator(prev, next) {
    return (!prev && !next) || (!!prev && !!next && prev.equals(next));
}
function checkMinBeforeMax(minDate, maxDate) {
    if (maxDate && minDate && maxDate.before(minDate)) {
        throw new Error(`'maxDate' ${maxDate} should be greater than 'minDate' ${minDate}`);
    }
}
function checkDateInRange(date, minDate, maxDate) {
    if (date && minDate && date.before(minDate)) {
        return NgbDate.from(minDate);
    }
    if (date && maxDate && date.after(maxDate)) {
        return NgbDate.from(maxDate);
    }
    return date;
}
function isDateSelectable(months, date) {
    let selectable = false;
    const month = months.find(curMonth => curMonth.year === date.year && curMonth.number === date.month);
    if (month) {
        month.weeks.find(week => {
            const day = week.days.find(day => date.equals(day.date));
            if (day && !day.context.disabled) {
                selectable = true;
            }
            return !!day;
        });
    }
    return selectable;
}
function buildMonths(calendar, months, date, minDate, maxDate, displayMonths, firstDayOfWeek, markDisabled, force) {
    const newMonths = [];
    for (let i = 0; i < displayMonths; i++) {
        const newDate = calendar.getNext(date, 'm', i);
        const index = months.findIndex(month => month.firstDate.equals(newDate));
        if (force || index === -1) {
            newMonths.push(buildMonth(calendar, newDate, minDate, maxDate, firstDayOfWeek, markDisabled));
        }
        else {
            newMonths.push(months[index]);
        }
    }
    return newMonths;
}
function buildMonth(calendar, date, minDate, maxDate, firstDayOfWeek, markDisabled) {
    const month = { firstDate: null, lastDate: null, number: date.month, year: date.year, weeks: [], weekdays: [] };
    date = getFirstViewDate(calendar, date, firstDayOfWeek);
    // month has weeks
    for (let week = 0; week < calendar.getWeeksPerMonth(); week++) {
        const days = [];
        // week has days
        for (let day = 0; day < calendar.getDaysPerWeek(); day++) {
            if (week === 0) {
                month.weekdays.push(calendar.getWeekday(date));
            }
            const newDate = new NgbDate(date.year, date.month, date.day);
            const nextDate = calendar.getNext(newDate);
            // marking date as disabled
            let disabled = !!((minDate && newDate.before(minDate)) || (maxDate && newDate.after(maxDate)));
            if (!disabled && markDisabled) {
                disabled = markDisabled(newDate, { month: month.number, year: month.year });
            }
            // saving first date of the month
            if (month.firstDate === null && newDate.month === month.number) {
                month.firstDate = newDate;
            }
            // saving last date of the month
            if (newDate.month === month.number && nextDate.month !== month.number) {
                month.lastDate = newDate;
            }
            days.push({
                date: newDate,
                context: {
                    date: { year: newDate.year, month: newDate.month, day: newDate.day },
                    currentMonth: month.number,
                    disabled: disabled,
                    focused: false,
                    selected: false
                }
            });
            date = nextDate;
        }
        month.weeks.push({ number: calendar.getWeekNumber(days.map(day => NgbDate.from(day.date)), firstDayOfWeek), days: days });
    }
    return month;
}
function getFirstViewDate(calendar, date, firstDayOfWeek) {
    const currentMonth = date.month;
    let today = new NgbDate(date.year, date.month, date.day);
    let yesterday = calendar.getPrev(today);
    const firstDayOfCurrentMonthIsAlsoFirstDayOfWeek = () => { return today.month !== yesterday.month && firstDayOfWeek === calendar.getWeekday(today); };
    const reachedTheFirstDayOfTheLastWeekOfPreviousMonth = () => { return today.month !== currentMonth && firstDayOfWeek === calendar.getWeekday(today); };
    // going back in time
    while (!reachedTheFirstDayOfTheLastWeekOfPreviousMonth() && !firstDayOfCurrentMonthIsAlsoFirstDayOfWeek()) {
        today = new NgbDate(yesterday.year, yesterday.month, yesterday.day);
        yesterday = calendar.getPrev(yesterday);
    }
    return today;
}

var __decorate$5 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$1 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerService = class NgbDatepickerService {
    constructor(_calendar) {
        this._calendar = _calendar;
        this._model$ = new Subject();
        this._state = { disabled: false, displayMonths: 1, firstDayOfWeek: 1, focusVisible: false, months: [], selectedDate: null };
    }
    get model$() { return filter.call(this._model$.asObservable(), model => model.months.length > 0); }
    set disabled(disabled) {
        if (this._state.disabled !== disabled) {
            this._nextState({ disabled: disabled });
        }
    }
    set displayMonths(months) {
        if (isInteger(months) && months > 0 && this._state.displayMonths !== months) {
            this._nextState({ displayMonths: months });
        }
    }
    set firstDayOfWeek(firstDayOfWeek) {
        if (isInteger(firstDayOfWeek) && firstDayOfWeek >= 0 && this._state.firstDayOfWeek !== firstDayOfWeek) {
            this._nextState({ firstDayOfWeek: firstDayOfWeek });
        }
    }
    set focusVisible(focusVisible) {
        if (this._state.focusVisible !== focusVisible && !this._state.disabled) {
            this._nextState({ focusVisible: focusVisible });
        }
    }
    set maxDate(date) {
        if (date === undefined || this._calendar.isValid(date) && isChangedDate(this._state.maxDate, date)) {
            this._nextState({ maxDate: date });
        }
    }
    set markDisabled(markDisabled) {
        if (this._state.markDisabled !== markDisabled) {
            this._nextState({ markDisabled: markDisabled });
        }
    }
    set minDate(date) {
        if (date === undefined || this._calendar.isValid(date) && isChangedDate(this._state.minDate, date)) {
            this._nextState({ minDate: date });
        }
    }
    focus(date) {
        if (!this._state.disabled && this._calendar.isValid(date) && isChangedDate(this._state.focusDate, date)) {
            this._nextState({ focusDate: date });
        }
    }
    focusMove(period, number) {
        this.focus(this._calendar.getNext(this._state.focusDate, period, number));
    }
    focusSelect() {
        if (isDateSelectable(this._state.months, this._state.focusDate)) {
            this.select(this._state.focusDate);
        }
    }
    open(date) {
        if (!this._state.disabled && this._calendar.isValid(date)) {
            this._nextState({ firstDate: date });
        }
    }
    select(date) {
        const validDate = this.toValidDate(date, null);
        if (!this._state.disabled && isChangedDate(this._state.selectedDate, validDate)) {
            this._nextState({ selectedDate: validDate });
        }
    }
    toValidDate(date, defaultValue) {
        const ngbDate = NgbDate.from(date);
        if (defaultValue === undefined) {
            defaultValue = this._calendar.getToday();
        }
        return this._calendar.isValid(ngbDate) ? ngbDate : defaultValue;
    }
    _nextState(patch) {
        const newState = this._updateState(patch);
        this._patchContexts(newState);
        this._state = newState;
        this._model$.next(this._state);
    }
    _patchContexts(state$$1) {
        state$$1.months.forEach(month => {
            month.weeks.forEach(week => {
                week.days.forEach(day => {
                    // patch focus flag
                    if (state$$1.focusDate) {
                        day.context.focused = state$$1.focusDate.equals(day.date) && state$$1.focusVisible;
                    }
                    // override context disabled
                    if (state$$1.disabled === true) {
                        day.context.disabled = true;
                    }
                    // patch selection flag
                    if (state$$1.selectedDate !== undefined) {
                        day.context.selected = state$$1.selectedDate !== null && state$$1.selectedDate.equals(day.date);
                    }
                });
            });
        });
    }
    _updateState(patch) {
        // patching fields
        const state$$1 = Object.assign({}, this._state, patch);
        let startDate = state$$1.firstDate;
        // min/max dates changed
        if ('minDate' in patch || 'maxDate' in patch) {
            checkMinBeforeMax(state$$1.minDate, state$$1.maxDate);
            state$$1.focusDate = checkDateInRange(state$$1.focusDate, state$$1.minDate, state$$1.maxDate);
            state$$1.firstDate = checkDateInRange(state$$1.firstDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.focusDate;
        }
        // disabled
        if ('disabled' in patch) {
            state$$1.focusVisible = false;
        }
        // focus date changed
        if ('focusDate' in patch) {
            state$$1.focusDate = checkDateInRange(state$$1.focusDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.focusDate;
            // nothing to rebuild if only focus changed and it is still visible
            if (state$$1.months.length !== 0 && !state$$1.focusDate.before(state$$1.firstDate) &&
                !state$$1.focusDate.after(state$$1.lastDate)) {
                return state$$1;
            }
        }
        // first date changed
        if ('firstDate' in patch) {
            state$$1.firstDate = checkDateInRange(state$$1.firstDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.firstDate;
        }
        // rebuilding months
        if (startDate) {
            const forceRebuild = 'firstDayOfWeek' in patch || 'markDisabled' in patch || 'minDate' in patch ||
                'maxDate' in patch || 'disabled' in patch;
            const months = buildMonths(this._calendar, state$$1.months, startDate, state$$1.minDate, state$$1.maxDate, state$$1.displayMonths, state$$1.firstDayOfWeek, state$$1.markDisabled, forceRebuild);
            // updating months and boundary dates
            state$$1.months = months;
            state$$1.firstDate = months.length > 0 ? months[0].firstDate : undefined;
            state$$1.lastDate = months.length > 0 ? months[months.length - 1].lastDate : undefined;
            // adjusting focus after months were built
            if ('firstDate' in patch) {
                if (state$$1.focusDate === undefined || state$$1.focusDate.before(state$$1.firstDate) ||
                    state$$1.focusDate.after(state$$1.lastDate)) {
                    state$$1.focusDate = startDate;
                }
            }
        }
        return state$$1;
    }
};
NgbDatepickerService = __decorate$5([
    Injectable(),
    __metadata$1("design:paramtypes", [NgbCalendar])
], NgbDatepickerService);

var __decorate$6 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$2 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var Key;
(function (Key) {
    Key[Key["Enter"] = 13] = "Enter";
    Key[Key["Space"] = 32] = "Space";
    Key[Key["PageUp"] = 33] = "PageUp";
    Key[Key["PageDown"] = 34] = "PageDown";
    Key[Key["End"] = 35] = "End";
    Key[Key["Home"] = 36] = "Home";
    Key[Key["ArrowLeft"] = 37] = "ArrowLeft";
    Key[Key["ArrowUp"] = 38] = "ArrowUp";
    Key[Key["ArrowRight"] = 39] = "ArrowRight";
    Key[Key["ArrowDown"] = 40] = "ArrowDown";
})(Key || (Key = {}));
let NgbDatepickerKeyMapService = class NgbDatepickerKeyMapService {
    constructor(_service, _calendar) {
        this._service = _service;
        this._calendar = _calendar;
        _service.model$.subscribe(model => {
            this._minDate = model.minDate;
            this._maxDate = model.maxDate;
            this._firstViewDate = model.firstDate;
            this._lastViewDate = model.lastDate;
        });
    }
    processKey(event) {
        if (Key[toString(event.which)]) {
            switch (event.which) {
                case Key.PageUp:
                    this._service.focusMove(event.shiftKey ? 'y' : 'm', -1);
                    break;
                case Key.PageDown:
                    this._service.focusMove(event.shiftKey ? 'y' : 'm', 1);
                    break;
                case Key.End:
                    this._service.focus(event.shiftKey ? this._maxDate : this._lastViewDate);
                    break;
                case Key.Home:
                    this._service.focus(event.shiftKey ? this._minDate : this._firstViewDate);
                    break;
                case Key.ArrowLeft:
                    this._service.focusMove('d', -1);
                    break;
                case Key.ArrowUp:
                    this._service.focusMove('d', -this._calendar.getDaysPerWeek());
                    break;
                case Key.ArrowRight:
                    this._service.focusMove('d', 1);
                    break;
                case Key.ArrowDown:
                    this._service.focusMove('d', this._calendar.getDaysPerWeek());
                    break;
                case Key.Enter:
                case Key.Space:
                    this._service.focusSelect();
                    break;
                default:
                    return;
            }
            event.preventDefault();
            event.stopPropagation();
        }
    }
};
NgbDatepickerKeyMapService = __decorate$6([
    Injectable(),
    __metadata$2("design:paramtypes", [NgbDatepickerService, NgbCalendar])
], NgbDatepickerKeyMapService);

// clang-format on
var NavigationEvent;
(function (NavigationEvent) {
    NavigationEvent[NavigationEvent["PREV"] = 0] = "PREV";
    NavigationEvent[NavigationEvent["NEXT"] = 1] = "NEXT";
    NavigationEvent[NavigationEvent["PREVYEAR"] = 2] = "PREVYEAR";
    NavigationEvent[NavigationEvent["NEXTYEAR"] = 3] = "NEXTYEAR";
})(NavigationEvent || (NavigationEvent = {}));

var __decorate$7 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
/**
 * Configuration service for the NgbDatepicker component.
 * You can inject this service, typically in your root component, and customize the values of its properties in
 * order to provide default values for all the datepickers used in the application.
 */
let NgbDatepickerConfig = class NgbDatepickerConfig {
    /**
     * Configuration service for the NgbDatepicker component.
     * You can inject this service, typically in your root component, and customize the values of its properties in
     * order to provide default values for all the datepickers used in the application.
     */
    constructor() {
        this.displayMonths = 1;
        this.firstDayOfWeek = 1;
        this.navigation = 'select';
        this.outsideDays = 'visible';
        this.showWeekdays = true;
        this.showWeekNumbers = false;
    }
};
NgbDatepickerConfig = __decorate$7([
    Injectable()
], NgbDatepickerConfig);

var __decorate$8 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
const WEEKDAYS_SHORT = ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su'];
const MONTHS_SHORT = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
const MONTHS_FULL = [
    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November',
    'December'
];
/**
 * Type of the service supplying month and weekday names to to NgbDatepicker component.
 * See the i18n demo for how to extend this class and define a custom provider for i18n.
 */
let NgbDatepickerI18n$1 = class NgbDatepickerI18n$$1 {
};
NgbDatepickerI18n$1 = __decorate$8([
    Injectable()
], NgbDatepickerI18n$1);
let NgbDatepickerI18nDefault = class NgbDatepickerI18nDefault extends NgbDatepickerI18n$1 {
    getWeekdayShortName(weekday) { return WEEKDAYS_SHORT[weekday - 1]; }
    getMonthShortName(month) { return MONTHS_SHORT[month - 1]; }
    getMonthFullName(month) { return MONTHS_FULL[month - 1]; }
};
NgbDatepickerI18nDefault = __decorate$8([
    Injectable()
], NgbDatepickerI18nDefault);

var __decorate$3 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const NGB_DATEPICKER_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => RplDatepicker),
    multi: true
};
/**
 * A lightweight and highly configurable datepicker directive
 */
let RplDatepicker = class RplDatepicker {
    constructor(_keyMapService, _service, _calendar, i18n, config, _cd, _elementRef) {
        this._keyMapService = _keyMapService;
        this._service = _service;
        this._calendar = _calendar;
        this.i18n = i18n;
        this._cd = _cd;
        this._elementRef = _elementRef;
        /**
         * An event fired when navigation happens and currently displayed month changes.
         * See NgbDatepickerNavigateEvent for the payload info.
         */
        this.navigate = new EventEmitter();
        this.onChange = (_) => { };
        this.onTouched = () => { };
        this.dayTemplate = config.dayTemplate;
        this.displayMonths = config.displayMonths;
        this.firstDayOfWeek = config.firstDayOfWeek;
        this.markDisabled = config.markDisabled;
        this.minDate = config.minDate;
        this.maxDate = config.maxDate;
        this.navigation = config.navigation;
        this.outsideDays = config.outsideDays;
        this.showWeekdays = config.showWeekdays;
        this.showWeekNumbers = config.showWeekNumbers;
        this.startDate = config.startDate;
        this._subscription = _service.model$.subscribe(model => {
            const newDate = model.firstDate;
            const oldDate = this.model ? this.model.firstDate : null;
            const newSelectedDate = model.selectedDate;
            const oldSelectedDate = this.model ? this.model.selectedDate : null;
            this.model = model;
            // handling selection change
            if (isChangedDate(newSelectedDate, oldSelectedDate)) {
                this.onTouched();
                this.onChange(newSelectedDate ? { year: newSelectedDate.year, month: newSelectedDate.month, day: newSelectedDate.day } :
                    null);
            }
            // emitting navigation event if the first month changes
            if (!newDate.equals(oldDate)) {
                this.navigate.emit({
                    current: oldDate ? { year: oldDate.year, month: oldDate.month } : null,
                    next: { year: newDate.year, month: newDate.month }
                });
            }
            _cd.markForCheck();
        });
    }
    /**
     * Manually focus the datepicker
     */
    focus() { this._elementRef.nativeElement.focus(); }
    getHeaderHeight() {
        const h = this.showWeekdays ? 6.25 : 4.25;
        return this.displayMonths === 1 || this.navigation !== 'select' ? h - 2 : h;
    }
    getHeaderMargin() {
        const m = this.showWeekdays ? 2 : 0;
        return this.displayMonths !== 1 || this.navigation !== 'select' ? m + 2 : m;
    }
    /**
     * Navigates current view to provided date.
     * With default calendar we use ISO 8601: 'month' is 1=Jan ... 12=Dec.
     * If nothing or invalid date provided calendar will open current month.
     * Use 'startDate' input as an alternative
     */
    navigateTo(date) {
        this._service.open(date ? new NgbDate(date.year, date.month, 1) : this._calendar.getToday());
    }
    ngOnDestroy() { this._subscription.unsubscribe(); }
    ngOnInit() {
        if (this.model === undefined) {
            this._service.displayMonths = toInteger(this.displayMonths);
            this._service.markDisabled = this.markDisabled;
            this._service.firstDayOfWeek = this.firstDayOfWeek;
            this._setDates();
        }
    }
    ngOnChanges(changes) {
        if (changes['displayMonths']) {
            this._service.displayMonths = toInteger(this.displayMonths);
        }
        if (changes['markDisabled']) {
            this._service.markDisabled = this.markDisabled;
        }
        if (changes['firstDayOfWeek']) {
            this._service.firstDayOfWeek = this.firstDayOfWeek;
        }
        this._setDates();
    }
    onDateSelect(date) {
        this._service.focus(date);
        this.writeValue(date);
    }
    onKeyDown(event) { this._keyMapService.processKey(event); }
    onNavigateDateSelect(date) { this._service.open(date); }
    onNavigateEvent(event) {
        switch (event) {
            case NavigationEvent.PREV:
                this._service.open(this._calendar.getPrev(this.model.firstDate, 'm', 1));
                break;
            case NavigationEvent.NEXT:
                this._service.open(this._calendar.getNext(this.model.firstDate, 'm', 1));
                break;
            case NavigationEvent.PREVYEAR:
                this._service.open(this._calendar.getPrev(this.model.firstDate, 'm', 12));
                break;
            case NavigationEvent.NEXTYEAR:
                this._service.open(this._calendar.getNext(this.model.firstDate, 'm', 12));
                break;
        }
    }
    registerOnChange(fn) { this.onChange = fn; }
    registerOnTouched(fn) { this.onTouched = fn; }
    setDisabledState(isDisabled) { this._service.disabled = isDisabled; }
    showFocus(focusVisible) { this._service.focusVisible = focusVisible; }
    writeValue(value) { this._service.select(value); }
    _setDates() {
        const startDate = this._service.toValidDate(this.startDate, this._calendar.getToday());
        const minDate = this._service.toValidDate(this.minDate, this._calendar.getPrev(startDate, 'y', 10));
        const maxDate = this._service.toValidDate(this.maxDate, this._calendar.getPrev(this._calendar.getNext(startDate, 'y', 11)));
        this.minDate = { year: minDate.year, month: minDate.month, day: minDate.day };
        this.maxDate = { year: maxDate.year, month: maxDate.month, day: maxDate.day };
        this._service.minDate = minDate;
        this._service.maxDate = maxDate;
        this.navigateTo(startDate);
    }
};
__decorate$3([
    Input(),
    __metadata("design:type", TemplateRef)
], RplDatepicker.prototype, "dayTemplate", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Number)
], RplDatepicker.prototype, "displayMonths", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Number)
], RplDatepicker.prototype, "firstDayOfWeek", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Function)
], RplDatepicker.prototype, "markDisabled", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Object)
], RplDatepicker.prototype, "maxDate", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Object)
], RplDatepicker.prototype, "minDate", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", String)
], RplDatepicker.prototype, "navigation", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", String)
], RplDatepicker.prototype, "outsideDays", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Boolean)
], RplDatepicker.prototype, "showWeekdays", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Boolean)
], RplDatepicker.prototype, "showWeekNumbers", void 0);
__decorate$3([
    Input(),
    __metadata("design:type", Object)
], RplDatepicker.prototype, "startDate", void 0);
__decorate$3([
    Output(),
    __metadata("design:type", Object)
], RplDatepicker.prototype, "navigate", void 0);
RplDatepicker = __decorate$3([
    Component({
        exportAs: 'rplDatepicker',
        selector: 'rpl-datepicker',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'd-inline-block rounded',
            'tabindex': '0',
            '[attr.tabindex]': 'model.disabled ? undefined : "0"',
            '(blur)': 'showFocus(false)',
            '(focus)': 'showFocus(true)',
            '(keydown)': 'onKeyDown($event)'
        },
        template: "<ng-template #dt let-date=\"date\" let-currentMonth=\"currentMonth\" let-selected=\"selected\" let-disabled=\"disabled\" let-focused=\"focused\"><div ngbDatepickerDayView [date]=\"date\" [currentMonth]=\"currentMonth\" [selected]=\"selected\" [disabled]=\"disabled\" [focused]=\"focused\"></div></ng-template><div class=\"ngb-dp-header bg-faded pt-1 rounded-top\" [style.height.rem]=\"getHeaderHeight()\" [style.marginBottom.rem]=\"-getHeaderMargin()\"><ngb-datepicker-navigation *ngIf=\"navigation !== 'none'\" [date]=\"model.firstDate\" [minDate]=\"model.minDate\" [maxDate]=\"model.maxDate\" [months]=\"model.months.length\" [disabled]=\"model.disabled\" [showWeekNumbers]=\"showWeekNumbers\" [showSelect]=\"navigation === 'select'\" (navigate)=\"onNavigateEvent($event)\" (select)=\"onNavigateDateSelect($event)\"></ngb-datepicker-navigation></div><div class=\"ngb-dp-months d-flex px-1 pb-1\"><ng-template ngFor let-month [ngForOf]=\"model.months\" let-i=\"index\"><div class=\"ngb-dp-month d-block ml-3\"><div *ngIf=\"navigation !== 'select' || displayMonths > 1\" class=\"ngb-dp-month-name text-center\">{{ i18n.getMonthFullName(month.number) }} {{ month.year }}</div><ngb-datepicker-month-view [month]=\"month\" [dayTemplate]=\"dayTemplate || dt\" [showWeekdays]=\"showWeekdays\" [showWeekNumbers]=\"showWeekNumbers\" [outsideDays]=\"(displayMonths === 1 ? outsideDays : 'hidden')\" (select)=\"onDateSelect($event)\"></ngb-datepicker-month-view></div></ng-template></div>",
        styles: [":host{border:1px solid rgba(0,0,0,.125)}.ngb-dp-header{border-bottom:1px solid rgba(0,0,0,.125)}.ngb-dp-month{pointer-events:none}ngb-datepicker-month-view{pointer-events:auto}.ngb-dp-month:first-child{margin-left:0!important}.ngb-dp-month-name{font-size:larger;font:Arial regular;height:2rem;line-height:2rem} /*# sourceMappingURL=datepicker.css.map */ "],
        providers: [NGB_DATEPICKER_VALUE_ACCESSOR, NgbDatepickerService, NgbDatepickerKeyMapService]
    }),
    __metadata("design:paramtypes", [NgbDatepickerKeyMapService, NgbDatepickerService,
        NgbCalendar, NgbDatepickerI18n$1, NgbDatepickerConfig,
        ChangeDetectorRef, ElementRef])
], RplDatepicker);

var __decorate$9 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$3 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerMonthView = class NgbDatepickerMonthView {
    constructor(i18n) {
        this.i18n = i18n;
        this.select = new EventEmitter();
    }
    doSelect(day) {
        if (!day.context.disabled && !this.isHidden(day)) {
            this.select.emit(NgbDate.from(day.date));
        }
    }
    isCollapsed(week) {
        return this.outsideDays === 'collapsed' && week.days[0].date.month !== this.month.number &&
            week.days[week.days.length - 1].date.month !== this.month.number;
    }
    isHidden(day) {
        return (this.outsideDays === 'hidden' || this.outsideDays === 'collapsed') && this.month.number !== day.date.month;
    }
};
__decorate$9([
    Input(),
    __metadata$3("design:type", TemplateRef)
], NgbDatepickerMonthView.prototype, "dayTemplate", void 0);
__decorate$9([
    Input(),
    __metadata$3("design:type", Object)
], NgbDatepickerMonthView.prototype, "month", void 0);
__decorate$9([
    Input(),
    __metadata$3("design:type", String)
], NgbDatepickerMonthView.prototype, "outsideDays", void 0);
__decorate$9([
    Input(),
    __metadata$3("design:type", Object)
], NgbDatepickerMonthView.prototype, "showWeekdays", void 0);
__decorate$9([
    Input(),
    __metadata$3("design:type", Object)
], NgbDatepickerMonthView.prototype, "showWeekNumbers", void 0);
__decorate$9([
    Output(),
    __metadata$3("design:type", Object)
], NgbDatepickerMonthView.prototype, "select", void 0);
NgbDatepickerMonthView = __decorate$9([
    Component({
        selector: 'ngb-datepicker-month-view',
        host: { 'class': 'd-block' },
        template: "<div *ngIf=\"showWeekdays\" class=\"ngb-dp-week d-flex\"><div *ngIf=\"showWeekNumbers\" class=\"ngb-dp-weekday\"></div><div *ngFor=\"let w of month.weekdays\" class=\"ngb-dp-weekday small text-center text-info font-italic\">{{ i18n.getWeekdayShortName(w) }}</div></div><ng-template ngFor let-week [ngForOf]=\"month.weeks\"><div *ngIf=\"!isCollapsed(week)\" class=\"ngb-dp-week d-flex\"><div *ngIf=\"showWeekNumbers\" class=\"ngb-dp-week-number small text-center font-italic text-muted\">{{ week.number }}</div><div *ngFor=\"let day of week.days\" (click)=\"doSelect(day)\" class=\"ngb-dp-day\" [class.disabled]=\"day.context.disabled\" [class.hidden]=\"isHidden(day)\"><ng-template [ngIf]=\"!isHidden(day)\"><ng-template [ngTemplateOutlet]=\"dayTemplate\" [ngOutletContext]=\"day.context\"></ng-template></ng-template></div></div></ng-template>",
        styles: [".ngb-dp-week-number,.ngb-dp-weekday{line-height:35px}.ngb-dp-day{width:45px!important;height:45px!important}.ngb-dp-week-number,.ngb-dp-weekday{width:45px!important;height:35px!important}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default} /*# sourceMappingURL=datepicker-month-view.css.map */ "],
    }),
    __metadata$3("design:paramtypes", [NgbDatepickerI18n$1])
], NgbDatepickerMonthView);

var __decorate$10 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$4 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerNavigation = class NgbDatepickerNavigation {
    constructor(i18n, _calendar) {
        this.i18n = i18n;
        this._calendar = _calendar;
        this.navigation = NavigationEvent;
        this.navigate = new EventEmitter();
        this.select = new EventEmitter();
    }
    doNavigate(event) {
        this.navigate.emit(event);
    }
    nextDisabled() {
        return this.disabled || (this.maxDate && this._calendar.getNext(this.date, 'm').after(this.maxDate));
    }
    prevDisabled() {
        const prevDate = this._calendar.getPrev(this.date, 'm');
        return this.disabled || (this.minDate && prevDate.year <= this.minDate.year && prevDate.month < this.minDate.month);
    }
    selectDate(date) { this.select.emit(date); }
};
__decorate$10([
    Input(),
    __metadata$4("design:type", NgbDate)
], NgbDatepickerNavigation.prototype, "date", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", Boolean)
], NgbDatepickerNavigation.prototype, "disabled", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", NgbDate)
], NgbDatepickerNavigation.prototype, "maxDate", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", NgbDate)
], NgbDatepickerNavigation.prototype, "minDate", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", Number)
], NgbDatepickerNavigation.prototype, "months", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", Boolean)
], NgbDatepickerNavigation.prototype, "showSelect", void 0);
__decorate$10([
    Input(),
    __metadata$4("design:type", Boolean)
], NgbDatepickerNavigation.prototype, "showWeekNumbers", void 0);
__decorate$10([
    Output(),
    __metadata$4("design:type", Object)
], NgbDatepickerNavigation.prototype, "navigate", void 0);
__decorate$10([
    Output(),
    __metadata$4("design:type", Object)
], NgbDatepickerNavigation.prototype, "select", void 0);
NgbDatepickerNavigation = __decorate$10([
    Component({
        selector: 'ngb-datepicker-navigation',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: { 'class': 'd-flex justify-content-between', '[class.collapsed]': '!showSelect' },
        template: "<span><button type=\"button\" class=\"btn btn-sm btn-link camillo\" style=\"width:45px\" (click)=\"!!doNavigate(navigation.PREVYEAR)\" [disabled]=\"prevDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron camillo\" style=\"width:50%\"></span> <span class=\"ngb-dp-navigation-chevron camillo\" style=\"margin-left:-0.8em!important\"></span></button> <button type=\"button\" class=\"btn btn-sm btn-link camillo\" style=\"width:45px; margin-left:-0.2em!important\" (click)=\"!!doNavigate(navigation.PREV)\" [disabled]=\"prevDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron camillo\"></span></button></span><ngb-datepicker-navigation-select *ngIf=\"showSelect\" class=\"d-block\" [style.width.rem]=\"months * 9\" [date]=\"date\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [disabled]=\"disabled\" (select)=\"selectDate($event)\"></ngb-datepicker-navigation-select><span><button type=\"button\" style=\"width:45px; margin-right:-0.23em!important;\" class=\"btn btn-sm btn-link camillo\" (click)=\"!!doNavigate(navigation.NEXT)\" [disabled]=\"nextDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron right camillo\"></span></button> <button type=\"button\" style=\"width:45px\" class=\"btn btn-sm btn-link camillo\" (click)=\"!!doNavigate(navigation.NEXTYEAR)\" [disabled]=\"nextDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron right camillo\" style=\"width:50%; margin-right: -0.8em!important;\"></span> <span class=\"ngb-dp-navigation-chevron right camillo\"></span></button></span>",
        styles: [":host{height:2rem;line-height:1.85rem}:host.collapsed{margin-bottom:-2rem}.btn-link{width:2.8rem;min-height:100%!important}caption,table,tbody,td,tfoot,th,thead,tr{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:0 0}.camillo{display:inline-block;margin:0;padding:0;border:none}.ngb-dp-navigation-chevron::before{border-style:solid;border-width:.2em .2em 0 0;content:'';display:inline-block;height:.75em;transform:rotate(-135deg);-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);width:.75em;margin:0 0 0 .5rem}.ngb-dp-navigation-chevron.right:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin:0 .5rem 0 0} /*# sourceMappingURL=datepicker-navigation.css.map */ "],
    }),
    __metadata$4("design:paramtypes", [NgbDatepickerI18n$1, NgbCalendar])
], NgbDatepickerNavigation);

/**
 * Abstract type serving as a DI token for the service parsing and formatting dates for the NgbInputDatepicker
 * directive. A default implementation using the ISO 8601 format is provided, but you can provide another implementation
 * to use an alternative format.
 */
class NgbDateParserFormatter$1 {
}
class NgbDateISOParserFormatter extends NgbDateParserFormatter$1 {
    parse(value) {
        if (value) {
            const dateParts = value.trim().split('-');
            if (dateParts.length === 1 && isNumber(dateParts[0])) {
                return { year: toInteger(dateParts[0]), month: null, day: null };
            }
            else if (dateParts.length === 2 && isNumber(dateParts[0]) && isNumber(dateParts[1])) {
                return { year: toInteger(dateParts[0]), month: toInteger(dateParts[1]), day: null };
            }
            else if (dateParts.length === 3 && isNumber(dateParts[0]) && isNumber(dateParts[1]) && isNumber(dateParts[2])) {
                return { year: toInteger(dateParts[0]), month: toInteger(dateParts[1]), day: toInteger(dateParts[2]) };
            }
        }
        return null;
    }
    format(date) {
        return date ?
            `${date.year}-${isNumber(date.month) ? padNumber(date.month) : ''}-${isNumber(date.day) ? padNumber(date.day) : ''}` :
            '';
    }
}

// previous version:
// https://github.com/angular-ui/bootstrap/blob/07c31d0731f7cb068a1932b8e01d2312b796b4ec/src/position/position.js
// previous version:
class Positioning {
    getStyle(element, prop) { return window.getComputedStyle(element)[prop]; }
    isStaticPositioned(element) {
        return (this.getStyle(element, 'position') || 'static') === 'static';
    }
    offsetParent(element) {
        let offsetParentEl = element.offsetParent || document.documentElement;
        while (offsetParentEl && offsetParentEl !== document.documentElement && this.isStaticPositioned(offsetParentEl)) {
            offsetParentEl = offsetParentEl.offsetParent;
        }
        return offsetParentEl || document.documentElement;
    }
    position(element, round = true) {
        let elPosition;
        let parentOffset = { width: 0, height: 0, top: 0, bottom: 0, left: 0, right: 0 };
        if (this.getStyle(element, 'position') === 'fixed') {
            elPosition = element.getBoundingClientRect();
        }
        else {
            const offsetParentEl = this.offsetParent(element);
            elPosition = this.offset(element, false);
            if (offsetParentEl !== document.documentElement) {
                parentOffset = this.offset(offsetParentEl, false);
            }
            parentOffset.top += offsetParentEl.clientTop;
            parentOffset.left += offsetParentEl.clientLeft;
        }
        elPosition.top -= parentOffset.top;
        elPosition.bottom -= parentOffset.top;
        elPosition.left -= parentOffset.left;
        elPosition.right -= parentOffset.left;
        if (round) {
            elPosition.top = Math.round(elPosition.top);
            elPosition.bottom = Math.round(elPosition.bottom);
            elPosition.left = Math.round(elPosition.left);
            elPosition.right = Math.round(elPosition.right);
        }
        return elPosition;
    }
    offset(element, round = true) {
        const elBcr = element.getBoundingClientRect();
        const viewportOffset = {
            top: window.pageYOffset - document.documentElement.clientTop,
            left: window.pageXOffset - document.documentElement.clientLeft
        };
        let elOffset = {
            height: elBcr.height || element.offsetHeight,
            width: elBcr.width || element.offsetWidth,
            top: elBcr.top + viewportOffset.top,
            bottom: elBcr.bottom + viewportOffset.top,
            left: elBcr.left + viewportOffset.left,
            right: elBcr.right + viewportOffset.left
        };
        if (round) {
            elOffset.height = Math.round(elOffset.height);
            elOffset.width = Math.round(elOffset.width);
            elOffset.top = Math.round(elOffset.top);
            elOffset.bottom = Math.round(elOffset.bottom);
            elOffset.left = Math.round(elOffset.left);
            elOffset.right = Math.round(elOffset.right);
        }
        return elOffset;
    }
    positionElements(hostElement, targetElement, placement, appendToBody) {
        const hostElPosition = appendToBody ? this.offset(hostElement, false) : this.position(hostElement, false);
        const targetElBCR = targetElement.getBoundingClientRect();
        const placementPrimary = placement.split('-')[0] || 'top';
        const placementSecondary = placement.split('-')[1] || 'center';
        let targetElPosition = {
            'height': targetElBCR.height || targetElement.offsetHeight,
            'width': targetElBCR.width || targetElement.offsetWidth,
            'top': 0,
            'bottom': targetElBCR.height || targetElement.offsetHeight,
            'left': 0,
            'right': targetElBCR.width || targetElement.offsetWidth
        };
        switch (placementPrimary) {
            case 'top':
                targetElPosition.top = hostElPosition.top - targetElement.offsetHeight;
                break;
            case 'bottom':
                targetElPosition.top = hostElPosition.top + hostElPosition.height;
                break;
            case 'left':
                targetElPosition.left = hostElPosition.left - targetElement.offsetWidth;
                break;
            case 'right':
                targetElPosition.left = hostElPosition.left + hostElPosition.width;
                break;
        }
        switch (placementSecondary) {
            case 'top':
                targetElPosition.top = hostElPosition.top;
                break;
            case 'bottom':
                targetElPosition.top = hostElPosition.top + hostElPosition.height - targetElement.offsetHeight;
                break;
            case 'left':
                targetElPosition.left = hostElPosition.left;
                break;
            case 'right':
                targetElPosition.left = hostElPosition.left + hostElPosition.width - targetElement.offsetWidth;
                break;
            case 'center':
                if (placementPrimary === 'top' || placementPrimary === 'bottom') {
                    targetElPosition.left = hostElPosition.left + hostElPosition.width / 2 - targetElement.offsetWidth / 2;
                }
                else {
                    targetElPosition.top = hostElPosition.top + hostElPosition.height / 2 - targetElement.offsetHeight / 2;
                }
                break;
        }
        targetElPosition.top = Math.round(targetElPosition.top);
        targetElPosition.bottom = Math.round(targetElPosition.bottom);
        targetElPosition.left = Math.round(targetElPosition.left);
        targetElPosition.right = Math.round(targetElPosition.right);
        return targetElPosition;
    }
}
const positionService = new Positioning();
function positionElements(hostElement, targetElement, placement, appendToBody) {
    const pos = positionService.positionElements(hostElement, targetElement, placement, appendToBody);
    targetElement.style.top = `${pos.top}px`;
    targetElement.style.left = `${pos.left}px`;
}

var __decorate$11 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$5 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const NGB_DATEPICKER_VALUE_ACCESSOR$1 = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NgbInputDatepicker$1),
    multi: true
};
const NGB_DATEPICKER_VALIDATOR = {
    provide: NG_VALIDATORS,
    useExisting: forwardRef(() => NgbInputDatepicker$1),
    multi: true
};
/**
 * A directive that makes it possible to have datepickers on input fields.
 * Manages integration with the input field itself (data entry) and ngModel (validation etc.).
 */
let NgbInputDatepicker$1 = class NgbInputDatepicker$$1 {
    constructor(_parserFormatter, _elRef, _vcRef, _renderer, _cfr, ngZone, _service, _calendar) {
        this._parserFormatter = _parserFormatter;
        this._elRef = _elRef;
        this._vcRef = _vcRef;
        this._renderer = _renderer;
        this._cfr = _cfr;
        this._service = _service;
        this._calendar = _calendar;
        this._cRef = null;
        /**
         * Placement of a datepicker popup. Accepts: "top", "bottom", "left", "right", "bottom-left",
         * "bottom-right" etc.
         */
        this.placement = 'bottom-left';
        /**
         * An event fired when navigation happens and currently displayed month changes.
         * See NgbDatepickerNavigateEvent for the payload info.
         */
        this.navigate = new EventEmitter();
        this._onChange = (_) => { };
        this._onTouched = () => { };
        this._validatorChange = () => { };
        this._zoneSubscription = ngZone.onStable.subscribe(() => {
            if (this._cRef) {
                positionElements(this._elRef.nativeElement, this._cRef.location.nativeElement, this.placement);
            }
        });
    }
    registerOnChange(fn) { this._onChange = fn; }
    registerOnTouched(fn) { this._onTouched = fn; }
    registerOnValidatorChange(fn) { this._validatorChange = fn; }
    ;
    setDisabledState(isDisabled) {
        this._renderer.setProperty(this._elRef.nativeElement, 'disabled', isDisabled);
        if (this.isOpen()) {
            this._cRef.instance.setDisabledState(isDisabled);
        }
    }
    validate(c) {
        const value = c.value;
        if (value === null || value === undefined) {
            return null;
        }
        if (!this._calendar.isValid(value)) {
            return { 'ngbDate': { invalid: c.value } };
        }
        if (this.minDate && NgbDate.from(value).before(NgbDate.from(this.minDate))) {
            return { 'ngbDate': { requiredBefore: this.minDate } };
        }
        if (this.maxDate && NgbDate.from(value).after(NgbDate.from(this.maxDate))) {
            return { 'ngbDate': { requiredAfter: this.maxDate } };
        }
    }
    writeValue(value) {
        const ngbDate = value ? new NgbDate(value.year, value.month, value.day) : null;
        this._model = this._calendar.isValid(value) ? ngbDate : null;
        this._writeModelValue(this._model);
    }
    manualDateChange(value, updateView = false) {
        this._model = this._service.toValidDate(this._parserFormatter.parse(value), null);
        this._onChange(this._model ? this._model.toStruct() : (value === '' ? null : value));
        if (updateView && this._model) {
            this._writeModelValue(this._model);
        }
    }
    isOpen() { return !!this._cRef; }
    /**
     * Opens the datepicker with the selected date indicated by the ngModel value.
     */
    open() {
        if (!this.isOpen()) {
            const cf = this._cfr.resolveComponentFactory(RplDatepicker);
            this._cRef = this._vcRef.createComponent(cf);
            this._applyPopupStyling(this._cRef.location.nativeElement);
            this._cRef.instance.writeValue(this._model);
            this._applyDatepickerInputs(this._cRef.instance);
            this._subscribeForDatepickerOutputs(this._cRef.instance);
            this._cRef.instance.ngOnInit();
            // date selection event handling
            this._cRef.instance.registerOnChange((selectedDate) => {
                this.writeValue(selectedDate);
                this._onChange(selectedDate);
                this.close();
            });
            // focus handling
            this._cRef.instance.focus();
        }
    }
    /**
     * Closes the datepicker popup.
     */
    close() {
        if (this.isOpen()) {
            this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView));
            this._cRef = null;
        }
    }
    /**
     * Toggles the datepicker popup (opens when closed and closes when opened).
     */
    toggle() {
        if (this.isOpen()) {
            this.close();
        }
        else {
            this.open();
        }
    }
    /**
     * Navigates current view to provided date.
     * With default calendar we use ISO 8601: 'month' is 1=Jan ... 12=Dec.
     * If nothing or invalid date provided calendar will open current month.
     * Use 'startDate' input as an alternative
     */
    navigateTo(date) {
        if (this.isOpen()) {
            this._cRef.instance.navigateTo(date);
        }
    }
    onBlur() { this._onTouched(); }
    ngOnChanges(changes) {
        if (changes['minDate'] || changes['maxDate']) {
            this._validatorChange();
        }
    }
    ngOnDestroy() {
        this.close();
        this._zoneSubscription.unsubscribe();
    }
    _applyDatepickerInputs(datepickerInstance) {
        ['dayTemplate', 'displayMonths', 'firstDayOfWeek', 'markDisabled', 'minDate', 'maxDate', 'navigation',
            'outsideDays', 'showNavigation', 'showWeekdays', 'showWeekNumbers']
            .forEach((optionName) => {
            if (this[optionName] !== undefined) {
                datepickerInstance[optionName] = this[optionName];
            }
        });
        datepickerInstance.startDate = this.startDate || this._model;
    }
    _applyPopupStyling(nativeElement) {
        this._renderer.addClass(nativeElement, 'dropdown-menu');
        this._renderer.setStyle(nativeElement, 'padding', '0');
    }
    _subscribeForDatepickerOutputs(datepickerInstance) {
        datepickerInstance.navigate.subscribe((date) => this.navigate.emit(date));
    }
    _writeModelValue(model) {
        this._renderer.setProperty(this._elRef.nativeElement, 'value', this._parserFormatter.format(model));
        if (this.isOpen()) {
            this._cRef.instance.writeValue(model);
            this._onTouched();
        }
    }
};
__decorate$11([
    Input(),
    __metadata$5("design:type", TemplateRef)
], NgbInputDatepicker$1.prototype, "dayTemplate", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Number)
], NgbInputDatepicker$1.prototype, "displayMonths", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Number)
], NgbInputDatepicker$1.prototype, "firstDayOfWeek", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Function)
], NgbInputDatepicker$1.prototype, "markDisabled", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Object)
], NgbInputDatepicker$1.prototype, "minDate", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Object)
], NgbInputDatepicker$1.prototype, "maxDate", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", String)
], NgbInputDatepicker$1.prototype, "navigation", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", String)
], NgbInputDatepicker$1.prototype, "outsideDays", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Object)
], NgbInputDatepicker$1.prototype, "placement", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Boolean)
], NgbInputDatepicker$1.prototype, "showWeekdays", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Boolean)
], NgbInputDatepicker$1.prototype, "showWeekNumbers", void 0);
__decorate$11([
    Input(),
    __metadata$5("design:type", Object)
], NgbInputDatepicker$1.prototype, "startDate", void 0);
__decorate$11([
    Output(),
    __metadata$5("design:type", Object)
], NgbInputDatepicker$1.prototype, "navigate", void 0);
NgbInputDatepicker$1 = __decorate$11([
    Directive({
        selector: 'input[rplDatepicker]',
        exportAs: 'rplDatepicker',
        host: {
            '(input)': 'manualDateChange($event.target.value)',
            '(change)': 'manualDateChange($event.target.value, true)',
            '(keyup.esc)': 'close()',
            '(blur)': 'onBlur()'
        },
        providers: [NGB_DATEPICKER_VALUE_ACCESSOR$1, NGB_DATEPICKER_VALIDATOR, NgbDatepickerService]
    }),
    __metadata$5("design:paramtypes", [NgbDateParserFormatter$1, ElementRef, ViewContainerRef,
        Renderer2, ComponentFactoryResolver, NgZone,
        NgbDatepickerService, NgbCalendar])
], NgbInputDatepicker$1);

var __decorate$12 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$6 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerDayView = class NgbDatepickerDayView {
    isMuted() { return !this.selected && (this.date.month !== this.currentMonth || this.disabled); }
};
__decorate$12([
    Input(),
    __metadata$6("design:type", Number)
], NgbDatepickerDayView.prototype, "currentMonth", void 0);
__decorate$12([
    Input(),
    __metadata$6("design:type", Object)
], NgbDatepickerDayView.prototype, "date", void 0);
__decorate$12([
    Input(),
    __metadata$6("design:type", Boolean)
], NgbDatepickerDayView.prototype, "disabled", void 0);
__decorate$12([
    Input(),
    __metadata$6("design:type", Boolean)
], NgbDatepickerDayView.prototype, "focused", void 0);
__decorate$12([
    Input(),
    __metadata$6("design:type", Boolean)
], NgbDatepickerDayView.prototype, "selected", void 0);
NgbDatepickerDayView = __decorate$12([
    Component({
        selector: '[ngbDatepickerDayView]',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'btn-secondary',
            '[class.bg-primary]': 'selected',
            '[class.text-white]': 'selected',
            '[class.text-muted]': 'isMuted()',
            '[class.outside]': 'isMuted()',
            '[class.active]': 'focused'
        },
        template: "<div class=\"ngbdatepickerdayview\">{{ date.day }}</div>",
        styles: [":host{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem}:host.outside{opacity:.5}.ngbdatepickerdayview{border-radius:0!important;box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:45px!important;vertical-align:middle} /*# sourceMappingURL=datepicker-day-view.css.map */ "],
    })
], NgbDatepickerDayView);

var __decorate$13 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$7 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerNavigationSelect = class NgbDatepickerNavigationSelect {
    constructor(i18n, calendar) {
        this.i18n = i18n;
        this.calendar = calendar;
        this.years = [];
        this.select = new EventEmitter();
        this.months = calendar.getMonths();
    }
    ngOnChanges(changes) {
        if (changes['maxDate'] || changes['minDate'] || changes['date']) {
            this._generateYears();
            this._generateMonths();
        }
    }
    changeMonth(month) { this.select.emit(new NgbDate(this.date.year, toInteger(month), 1)); }
    changeYear(year) { this.select.emit(new NgbDate(toInteger(year), this.date.month, 1)); }
    _generateMonths() {
        this.months = this.calendar.getMonths();
        if (this.date && this.date.year === this.minDate.year) {
            const index = this.months.findIndex(month => month === this.minDate.month);
            this.months = this.months.slice(index);
        }
        if (this.date && this.date.year === this.maxDate.year) {
            const index = this.months.findIndex(month => month === this.maxDate.month);
            this.months = this.months.slice(0, index + 1);
        }
    }
    _generateYears() {
        this.years = Array.from({ length: this.maxDate.year - this.minDate.year + 1 }, (e, i) => this.minDate.year + i);
    }
};
__decorate$13([
    Input(),
    __metadata$7("design:type", NgbDate)
], NgbDatepickerNavigationSelect.prototype, "date", void 0);
__decorate$13([
    Input(),
    __metadata$7("design:type", Boolean)
], NgbDatepickerNavigationSelect.prototype, "disabled", void 0);
__decorate$13([
    Input(),
    __metadata$7("design:type", NgbDate)
], NgbDatepickerNavigationSelect.prototype, "maxDate", void 0);
__decorate$13([
    Input(),
    __metadata$7("design:type", NgbDate)
], NgbDatepickerNavigationSelect.prototype, "minDate", void 0);
__decorate$13([
    Output(),
    __metadata$7("design:type", Object)
], NgbDatepickerNavigationSelect.prototype, "select", void 0);
NgbDatepickerNavigationSelect = __decorate$13([
    Component({
        selector: 'ngb-datepicker-navigation-select',
        changeDetection: ChangeDetectionStrategy.OnPush,
        template: "<select [disabled]=\"disabled\" class=\"custom-select d-inline-block\" [value]=\"date?.month\" (change)=\"changeMonth($event.target.value)\" tabindex=\"-1\"><option *ngFor=\"let m of months\" [value]=\"m\">{{ i18n.getMonthShortName(m) }}</option></select> <select [disabled]=\"disabled\" class=\"custom-select d-inline-block\" [value]=\"date?.year\" (change)=\"changeYear($event.target.value)\" tabindex=\"-1\"><option *ngFor=\"let y of years\" [value]=\"y\">{{ y }}</option></select>",
        styles: ["select{padding:.25rem .5rem;font-size:.875rem;line-height:1.25;height:inherit;width:50%} /*# sourceMappingURL=datepicker-navigation-select.css.map */ "],
    }),
    __metadata$7("design:paramtypes", [NgbDatepickerI18n$1, NgbCalendar])
], NgbDatepickerNavigationSelect);

var __decorate$15 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NgbCalendarHijri = class NgbCalendarHijri extends NgbCalendar {
    getDaysPerWeek() { return 7; }
    getMonths() { return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; }
    getWeeksPerMonth() { return 6; }
    isValid(date) {
        return date && isNumber(date.year) && isNumber(date.month) && isNumber(date.day) &&
            !isNaN(this.toGregorian(date).getTime());
    }
    setDay(date, day) {
        day = +day;
        let mDays = this.getDaysInIslamicMonth(date.month, date.year);
        if (day <= 0) {
            while (day <= 0) {
                date = this.setMonth(date, date.month - 1);
                mDays = this.getDaysInIslamicMonth(date.month, date.year);
                day += mDays;
            }
        }
        else if (day > mDays) {
            while (day > mDays) {
                day -= mDays;
                date = this.setMonth(date, date.month + 1);
                mDays = this.getDaysInIslamicMonth(date.month, date.year);
            }
        }
        date.day = day;
        return date;
    }
    setMonth(date, month) {
        month = +month;
        date.year = date.year + Math.floor((month - 1) / 12);
        date.month = Math.floor(((month - 1) % 12 + 12) % 12) + 1;
        return date;
    }
    setYear(date, yearValue) {
        date.year = +yearValue;
        return date;
    }
    _isIslamicLeapYear(year) { return (14 + 11 * year) % 30 < 11; }
    /**
     * Returns the start of Hijri Month.
     * `month` is 0 for Muharram, 1 for Safar, etc.
     * `year` is any Hijri year.
     */
    _getMonthStart(year, month) {
        return Math.ceil(29.5 * month) + (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0);
    }
    /**
     * Returns the start of Hijri year.
     * `year` is any Hijri year.
     */
    _getYearStart(year) { return (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0); }
};
NgbCalendarHijri = __decorate$15([
    Injectable()
], NgbCalendarHijri);

var __decorate$14 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function isGregorianLeapYear(date) {
    const year = date.getFullYear();
    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
}
function mod(a, b) {
    return a - b * Math.floor(a / b);
}
/**
 * The civil calendar is one type of Hijri calendars used in islamic countries.
 * Uses a fixed cycle of alternating 29- and 30-day months,
 * with a leap day added to the last month of 11 out of every 30 years.
 * http://cldr.unicode.org/development/development-process/design-proposals/islamic-calendar-types
 * All the calculations here are based on the equations from "Calendrical Calculations" By Edward M. Reingold, Nachum
 * Dershowitz.
 */
const GREGORIAN_EPOCH = 1721425.5;
const ISLAMIC_EPOCH = 1948439.5;
let NgbCalendarIslamicCivil = class NgbCalendarIslamicCivil extends NgbCalendarHijri {
    /**
     * Returns the equivalent islamic(civil) date value for a give input Gregorian date.
     * `gdate` is a JS Date to be converted to Hijri.
     */
    fromGregorian(gdate) {
        const date = new Date(gdate);
        const gYear = date.getFullYear(), gMonth = date.getMonth(), gDay = date.getDate();
        let julianDay = GREGORIAN_EPOCH - 1 + 365 * (gYear - 1) + Math.floor((gYear - 1) / 4) +
            -Math.floor((gYear - 1) / 100) + Math.floor((gYear - 1) / 400) +
            Math.floor((367 * (gMonth + 1) - 362) / 12 + (gMonth + 1 <= 2 ? 0 : isGregorianLeapYear(date) ? -1 : -2) + gDay);
        julianDay = Math.floor(julianDay) + 0.5;
        const days = julianDay - ISLAMIC_EPOCH;
        const hYear = Math.floor((30 * days + 10646) / 10631.0);
        let hMonth = Math.ceil((days - 29 - this._getYearStart(hYear)) / 29.5);
        hMonth = Math.min(hMonth, 11);
        const hDay = Math.ceil(days - this._getMonthStart(hYear, hMonth)) + 1;
        return new NgbDate(hYear, hMonth + 1, hDay);
    }
    /**
     * Returns the equivalent JS date value for a give input islamic(civil) date.
     * `hijriDate` is an islamic(civil) date to be converted to Gregorian.
     */
    toGregorian(hijriDate) {
        const hYear = hijriDate.year;
        const hMonth = hijriDate.month - 1;
        const hDate = hijriDate.day;
        const julianDay = hDate + Math.ceil(29.5 * hMonth) + (hYear - 1) * 354 + Math.floor((3 + 11 * hYear) / 30) + ISLAMIC_EPOCH - 1;
        const wjd = Math.floor(julianDay - 0.5) + 0.5, depoch = wjd - GREGORIAN_EPOCH, quadricent = Math.floor(depoch / 146097), dqc = mod(depoch, 146097), cent = Math.floor(dqc / 36524), dcent = mod(dqc, 36524), quad = Math.floor(dcent / 1461), dquad = mod(dcent, 1461), yindex = Math.floor(dquad / 365);
        let year = quadricent * 400 + cent * 100 + quad * 4 + yindex;
        if (!(cent === 4 || yindex === 4)) {
            year++;
        }
        const gYearStart = GREGORIAN_EPOCH + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400);
        const yearday = wjd - gYearStart;
        const tjd = GREGORIAN_EPOCH - 1 + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400) + Math.floor(739 / 12 + (isGregorianLeapYear(new Date(year, 3, 1)) ? -1 : -2) + 1);
        const leapadj = wjd < tjd ? 0 : isGregorianLeapYear(new Date(year, 3, 1)) ? 1 : 2;
        const month = Math.floor(((yearday + leapadj) * 12 + 373) / 367);
        const tjd2 = GREGORIAN_EPOCH - 1 + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400) +
            Math.floor((367 * month - 362) / 12 + (month <= 2 ? 0 : isGregorianLeapYear(new Date(year, month - 1, 1)) ? -1 : -2) +
                1);
        const day = wjd - tjd2 + 1;
        return new Date(year, month - 1, day);
    }
    /**
     * Returns the number of days in a specific Hijri month.
     * `month` is 1 for Muharram, 2 for Safar, etc.
     * `year` is any Hijri year.
     */
    getDaysInIslamicMonth(month, year) {
        year = year + Math.floor(month / 13);
        month = ((month - 1) % 12) + 1;
        let length = 29 + month % 2;
        if (month === 12 && this._isIslamicLeapYear(year)) {
            length++;
        }
        return length;
    }
    getNext(date, period = 'd', number = 1) {
        date = NgbDate.from(date);
        switch (period) {
            case 'y':
                date = this.setYear(date, date.year + number);
                date.month = 1;
                date.day = 1;
                return date;
            case 'm':
                date = this.setMonth(date, date.month + number);
                date.day = 1;
                return date;
            case 'd':
                return this.setDay(date, date.day + number);
            default:
                return date;
        }
    }
    getPrev(date, period = 'd', number = 1) { return this.getNext(date, period, -number); }
    getWeekday(date) {
        const day = this.toGregorian(date).getDay();
        // in JS Date Sun=0, in ISO 8601 Sun=7
        return day === 0 ? 7 : day;
    }
    getWeekNumber(week, firstDayOfWeek) {
        // in JS Date Sun=0, in ISO 8601 Sun=7
        if (firstDayOfWeek === 7) {
            firstDayOfWeek = 0;
        }
        const thursdayIndex = (4 + 7 - firstDayOfWeek) % 7;
        const date = week[thursdayIndex];
        const jsDate = this.toGregorian(date);
        jsDate.setDate(jsDate.getDate() + 4 - (jsDate.getDay() || 7)); // Thursday
        const time = jsDate.getTime();
        const MuhDate = this.toGregorian(new NgbDate(date.year, 1, 1)); // Compare with Muharram 1
        return Math.floor(Math.round((time - MuhDate.getTime()) / 86400000) / 7) + 1;
    }
    getToday() { return this.fromGregorian(new Date()); }
};
NgbCalendarIslamicCivil = __decorate$14([
    Injectable()
], NgbCalendarIslamicCivil);

var __decorate$2 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let RplDatepickerModule = RplDatepickerModule_1 = class RplDatepickerModule {
    static forRoot() {
        return {
            ngModule: RplDatepickerModule_1,
            providers: [
                { provide: NgbCalendar, useClass: NgbCalendarGregorian },
                { provide: NgbDatepickerI18n$1, useClass: NgbDatepickerI18nDefault },
                { provide: NgbDateParserFormatter$1, useClass: NgbDateISOParserFormatter }, NgbDatepickerConfig
            ]
        };
    }
};
RplDatepickerModule = RplDatepickerModule_1 = __decorate$2([
    NgModule({
        declarations: [
            RplDatepicker, NgbDatepickerMonthView, NgbDatepickerNavigation, NgbDatepickerNavigationSelect, NgbDatepickerDayView,
            NgbInputDatepicker$1
        ],
        exports: [RplDatepicker, NgbInputDatepicker$1],
        imports: [CommonModule, FormsModule],
        entryComponents: [RplDatepicker]
    })
], RplDatepickerModule);
var RplDatepickerModule_1;

/** Coerces a data-bound value (typically a string) to a boolean. */
/** Coerces a data-bound value (typically a string) to a boolean. */ function coerceBooleanProperty(value) {
    return value != null && `${value}` !== 'false';
}
function valueFormStringPathReducer() {
    return (objectPartialData, property) => {
        return objectPartialData[property];
    };
}
function stringPathToValueReducer(lastIndexOfArrayToReduce) {
    return (objectPartialData, property, idx) => {
        objectPartialData[property] = (idx === lastIndexOfArrayToReduce) ? null : {};
        return objectPartialData[property];
    };
}
function getPropertyValueByPath(obj, stringPath) {
    return stringPath ? stringPath.split('.').reduce(valueFormStringPathReducer(), obj) : null;
}
function generateObjectFromStringPath(obj, stringPath) {
    let arrayToReduceInObject = stringPath.split('.');
    arrayToReduceInObject.reduce(stringPathToValueReducer(arrayToReduceInObject.length - 1), obj);
    return obj;
}
function scrollToTopPage() {
    if (document.body.scrollTop !== 0 || document.documentElement.scrollTop !== 0) {
        document.body.scrollTop = 0; // For Chrome, Safari and Opera 
        document.documentElement.scrollTop = 0; // For IE and Firefox
        console.log('Scrolling to top...');
    }
}

/**
 *  Implements the Control Value Accessor pattern from Angular
 */
class NbpValueAccessorBase {
    constructor() {
        this.changed = new Array();
        this.touched = new Array();
    }
    get value() {
        return this.innerValue;
    }
    set value(value) {
        if (this.innerValue !== value) {
            this.innerValue = value;
            this.changed.forEach(f => f(value));
        }
    }
    touch() {
        this.touched.forEach(f => f());
    }
    /**
     * Used to update the value of our control
     * @param {T} value argument of our control
     */
    writeValue(value) {
        this.innerValue = value;
    }
    registerOnChange(fn) {
        this.changed.push(fn);
    }
    registerOnTouched(fn) {
        this.touched.push(fn);
    }
}

// Observable operators
const normalizeValidator = (validator) => {
    const func = validator.validate.bind(validator); // estrae la funzione "validate" dalla direttiva
    if (typeof func === 'function') {
        return (c) => func(c);
    }
    else {
        return validator;
    }
};
const composeValidators = (validators, isAsync = false) => {
    if (validators == null || validators.length === 0) {
        return null;
    }
    return isAsync
        ? Validators.composeAsync(validators.map(normalizeValidator))
        : Validators.compose(validators.map(normalizeValidator));
};
const validate = (validators, asyncValidators) => {
    return (control) => {
        const synchronousValid = () => {
            let syncValidators = composeValidators(validators);
            if (syncValidators) {
                return syncValidators(control);
            }
            else {
                return null;
            }
        };
        if (asyncValidators) {
            const asyncValidator = composeValidators(asyncValidators, true);
            // (c: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null>;
            let asynchronousValid = asyncValidator(control);
            return asynchronousValid.map((v) => {
                const secondary = synchronousValid();
                if (secondary || v) {
                    return Object.assign({}, secondary, v); // fixme: qui dovrebbe essere un Observalble.of(...) ? forse no. sta funzionando
                }
            });
        }
        if (validators) {
            return Observable.of(synchronousValid());
        }
        return Observable.of(null);
    };
};
/**
 * message list for standard validation error
 */
const message = (validator, key) => {
    switch (key) {
        case 'required':
            return ' Campo obbligatorio';
        case 'pattern':
            return ' Campo non valido';
        case 'minlength':
            return ' Il campo non rispetta la lunghezza minima';
        case 'maxlength':
            return ' Il campo non rispetta la lunghezza massima';
        // modificareply
        case 'dateInvalid':
            return 'La Data non è nel formato corretto';
    }
    switch (typeof validator[key]) {
        case 'string':
            return validator[key];
        default:
            return ` Validazione fallita: ${key}`;
    }
};

// Observable operators
/**
 *  Provides observable values to its parent about its validity state.
 *  Each element will need to know its validity state for rendering purposes.
 */
class NbpInputElementBase extends NbpValueAccessorBase {
    // we will ultimately get these arguments from @Inject on the derived class
    constructor(validators, asyncValidators) {
        super();
        this.validators = validators;
        this.asyncValidators = asyncValidators;
    }
    /**
     * Can be used in the control and it works off of validators
     * injected through hierarchical dependency injection
     * (eg. a required or minlength directive).
     * @return {Observable<ValidationResult>} result of validation chain
     */
    validate() {
        return validate(this.validators, this.asyncValidators)(this.model.control);
    }
    /**
     * Array of validator
     * @return Observable<boolean>
     */
    get invalid() {
        return this.validate().map(v => Object.keys(v || {}).length > 0);
    }
    /**
     * Array of validation error messages
     * @return { Observable<Array<string>> }
     */
    get failures() {
        return this.validate().map(v => Object.keys(v).map(k => message(v, k)));
    }
}

var __decorate$17 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$9 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici per nbpForm component */
let nextId$1 = 0;
let NbpFormContainerComponent = class NbpFormContainerComponent {
    // Methods
    constructor() {
        /**
         * id univoco che identifica la form
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-form-${++nextId$1}`;
        this._nbpShowValidation = false;
    }
    /**
     * Proprietà che determina la visualizzazione delle informazioni di validazione
     */
    get nbpShowValidation() { return this._nbpShowValidation; }
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
};
__decorate$17([
    Input(),
    __metadata$9("design:type", String)
], NbpFormContainerComponent.prototype, "name", void 0);
__decorate$17([
    Input(),
    __metadata$9("design:type", Object)
], NbpFormContainerComponent.prototype, "id", void 0);
__decorate$17([
    Input(),
    __metadata$9("design:type", Boolean),
    __metadata$9("design:paramtypes", [Object])
], NbpFormContainerComponent.prototype, "nbpShowValidation", null);
__decorate$17([
    Input(),
    __metadata$9("design:type", Boolean)
], NbpFormContainerComponent.prototype, "disabled", void 0);
NbpFormContainerComponent = __decorate$17([
    Component({
        selector: 'nbp-form-container',template: "<ng-content></ng-content>",
        styles: [" /*# sourceMappingURL=nbp-form-container.component.css.map */ "]
    }),
    __metadata$9("design:paramtypes", [])
], NbpFormContainerComponent);

var __decorate$18 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$10 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const I18N_VALUES = {
    'it': {
        weekdays: ['Lu', 'Ma', 'Me', 'Gi', 'Ve', 'Sa', 'Do'],
        months: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],
        fullMonths: ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
            'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre']
    }
    // other languages you would support
};
// Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
// use the Angular LOCALE_ID value
let I18n = class I18n {
    // Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
    // use the Angular LOCALE_ID value
    constructor() {
        this.language = 'it';
    }
};
I18n = __decorate$18([
    Injectable()
], I18n);
// Define custom service providing the months and weekdays translations
let NbpDatepickerItI18n = class NbpDatepickerItI18n extends NgbDatepickerI18n$1 {
    constructor(_i18n) {
        super();
        this._i18n = _i18n;
        this.model = { year: 2017, month: 8, day: 8 };
    }
    getWeekdayShortName(weekday) {
        return I18N_VALUES[this._i18n.language].weekdays[weekday - 1];
    }
    getMonthShortName(month) {
        return I18N_VALUES[this._i18n.language].months[month - 1];
    }
    getMonthFullName(month) {
        return I18N_VALUES[this._i18n.language].fullMonths[month - 1];
    }
};
NbpDatepickerItI18n = __decorate$18([
    Injectable(),
    __metadata$10("design:paramtypes", [I18n])
], NbpDatepickerItI18n);
let NbpDatepickerConfiguration = class NbpDatepickerConfiguration {
    constructor() {
        this.separator = '.';
    }
};
NbpDatepickerConfiguration = __decorate$18([
    Injectable()
], NbpDatepickerConfiguration);
let NbpItDateParserFormatter = class NbpItDateParserFormatter extends NgbDateParserFormatter$1 {
    constructor(configuration) {
        super();
        this.configuration = configuration;
    }
    padNumber(value) {
        if (this.isNumber(value)) {
            return `0${value}`.slice(-2);
        }
        else {
            return '';
        }
    }
    isNumber(value) {
        return !isNaN(this.toInteger(value));
    }
    toInteger(value) {
        return parseInt(`${value}`, 10);
    }
    parse(value) {
        if (value) {
            const dateParts = value.trim().split('.');
            if (dateParts.length === 1 && this.isNumber(dateParts[0])) {
                return { day: this.toInteger(dateParts[0]), month: null, year: null };
            }
            else if (dateParts.length === 2 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: null };
            }
            else if (dateParts.length === 3 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1]) && this.isNumber(dateParts[2])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: this.toInteger(dateParts[2]) };
            }
        }
        return null;
    }
    format(date) {
        return date ?
            `${this.isNumber(date.day) ? this.padNumber(date.day) : ''}${this.configuration.separator}${this.isNumber(date.month) ? this.padNumber(date.month) : ''}${this.configuration.separator}${date.year}` : '';
    }
};
NbpItDateParserFormatter = __decorate$18([
    Injectable(),
    __metadata$10("design:paramtypes", [NbpDatepickerConfiguration])
], NbpItDateParserFormatter);

var __decorate$16 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$8 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-datepicker-generic to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_DATEPICKER_GENERIC_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpDatepickerGenericComponent),
    multi: true
};
const NBP_INPUT_DATEPICKER_GENERIC_ELEMENT_BASE = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpDatepickerGenericComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpCombo component */
let nextId = 0;
let NbpDatepickerGenericComponent = class NbpDatepickerGenericComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer, element, inj) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.element = element;
        this.inj = inj;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-datepicker-generic-${++nextId}`;
        /**
         * testo del placeholder
         * Valore di Default: "dd.mm.yyyy"
         */
        this.placeholder = 'dd.mm.yyyy';
        this.ngbMaxDate = { day: 1, month: 1, year: 2050 };
        this.nbpMaxDate = new Date(this.ngbMaxDate.year, (this.ngbMaxDate.month - 1), this.ngbMaxDate.day);
        // set maxDate(maxDate: Date) {
        //   this.nbpMaxDate = maxDate;
        //   this.ngbMaxDate = this.parseDateStructFromDate(maxDate) as NgbDateStruct;
        // }
        this.ngbMinDate = { day: 1, month: 1, year: 1970 };
        this.nbpMinDate = new Date(this.ngbMinDate.year, (this.ngbMinDate.month - 1), this.ngbMinDate.day);
        this.nbpOnNavigate = new EventEmitter();
    }
    /**
   * (Opzionale)
   * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
   * Valore di default false
   */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * La massima data accettata dal componente e visualizzata nel calendario
     * Valore di Default: 01.01.2050
     */
    get maxDate() {
        return this.nbpMaxDate;
    }
    /**
     * Flag che abilita/disabilita le funzionalità associate al datepicker
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato al datepicker
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
    }
    _ngbModelChanged(event) {
        this.value = this.parseDateFromDateStruct(event);
    }
    parseDateFromDateStruct(value) {
        return (value && value instanceof Date) ? new Date(value.year, value.month - 1, value.day) : value;
    }
    parseDateStructFromDate(value) {
        return (value && value instanceof Date)
            ? { day: value.getUTCDate(), month: (value.getUTCMonth() + 1), year: value.getUTCFullYear() }
            : value;
    }
    writeValue(value) {
        this._ngbModel = this.parseDateStructFromDate(value);
        this.value = value;
    }
    _onNavigate(navigateEvent) {
        let _current = navigateEvent.current
            ? new Date(navigateEvent.current.year, (navigateEvent.current.month - 1), 1)
            : navigateEvent.current;
        let _next = navigateEvent.next.year
            ? new Date(navigateEvent.next.year, (navigateEvent.next.month - 1), 1)
            : navigateEvent.next.year;
        this.nbpOnNavigate.emit({ current: _current, next: _next });
    }
};
__decorate$16([
    Input(),
    __metadata$8("design:type", RegExp)
], NbpDatepickerGenericComponent.prototype, "pattern", void 0);
__decorate$16([
    Input(),
    __metadata$8("design:type", String)
], NbpDatepickerGenericComponent.prototype, "name", void 0);
__decorate$16([
    Input(),
    __metadata$8("design:type", String)
], NbpDatepickerGenericComponent.prototype, "id", void 0);
__decorate$16([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$8("design:type", Boolean),
    __metadata$8("design:paramtypes", [Object])
], NbpDatepickerGenericComponent.prototype, "nbpShowValidation", null);
__decorate$16([
    Input(),
    __metadata$8("design:type", String)
], NbpDatepickerGenericComponent.prototype, "placeholder", void 0);
__decorate$16([
    Input(),
    __metadata$8("design:type", String)
], NbpDatepickerGenericComponent.prototype, "nbpErrorMessage", void 0);
__decorate$16([
    Input(),
    __metadata$8("design:type", Object),
    __metadata$8("design:paramtypes", [])
], NbpDatepickerGenericComponent.prototype, "maxDate", null);
__decorate$16([
    Input(),
    __metadata$8("design:type", Boolean),
    __metadata$8("design:paramtypes", [Object])
], NbpDatepickerGenericComponent.prototype, "disabled", null);
__decorate$16([
    Input(),
    __metadata$8("design:type", Boolean),
    __metadata$8("design:paramtypes", [Object])
], NbpDatepickerGenericComponent.prototype, "required", null);
__decorate$16([
    Output(),
    __metadata$8("design:type", EventEmitter)
], NbpDatepickerGenericComponent.prototype, "nbpOnNavigate", void 0);
__decorate$16([
    ViewChild('rplDatepicker'),
    __metadata$8("design:type", NgbInputDatepicker$1)
], NbpDatepickerGenericComponent.prototype, "rplDatepicker", void 0);
__decorate$16([
    ViewChild(NgModel),
    __metadata$8("design:type", NgModel)
], NbpDatepickerGenericComponent.prototype, "model", void 0);
NbpDatepickerGenericComponent = __decorate$16([
    Component({
        selector: 'nbp-datepicker-generic',
        template: "<div class=\"form-group\"><div class=\"input-group\"><input #rplDatepicker=\"rplDatepicker\" rplDatepicker [id]=\"id\" [name]=\"name\" [ngModel]=\"_ngbModel\" (ngModelChange)=\"_ngbModelChanged($event)\" [required]=\"required\" [disabled]=\"disabled\" [maxDate]=\"ngbMaxDate\" [minDate]=\"ngbMinDate\" (navigate)=\"_onNavigate($event)\" navigation=\"arrows\" class=\"form-control\" [pattern]=\"pattern\" placeholder=\"dd.mm.yyyy\"><i class=\"icon-calendar button-icon\" [ngClass]=\"{'disabled': disabled}\" (click)=\"rplDatepicker.toggle()\"></i></div></div>",
        styles: [".form-control::-ms-clear{display:none;width:0;height:0}.day{border-radius:0!important;box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:2.6em!important;vertical-align:middle;color:#258900;border-left:#d3d3d3 solid 1px;border-right:#d3d3d3 solid 1px;border-bottom:#d3d3d3 solid 1px;border-collapse:separate;border-spacing:0}.icon{width:2rem;height:2rem}.day.greyed{color:#d3d3d3}.day:hover{color:#fff;background-color:#258900;cursor:pointer}:host::ng-deep .form-inline{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1em}:host::ng-deep .form-inline .form-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:0}:host::ng-deep .input-group{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}:host::ng-deep .input-group .form-control,:host::ng-deep .input-group-addon,:host::ng-deep .input-group-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}:host::ng-deep .form-control{display:block;width:100%;height:3.125em;color:#464a4c;background-color:#fff;background-image:none;background-clip:padding-box;border-radius:.15em!important;transition:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid #323232!important}:host::ng-deep .form-control:active:not([disabled]),:host::ng-deep .form-control:focus:not([disabled]){border:1px solid #258900!important}:host::ng-deep .form-control[disabled]{border:1px solid #ccc!important;color:#ccc;user-select:none}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host::ng-deep .input-group-addon{padding:.5em .75em;margin-bottom:0;font-size:1em;font-weight:400;line-height:1.25;color:#258900;text-align:center;background-color:#fff!important;border-top-color:rgba(0,0,0,.15);border-top-style:solid;border-top-width:1px;border-right-color:rgba(0,0,0,.15);border-right-style:solid;border-right-width:1px;border-bottom-color:rgba(0,0,0,.15);border-bottom-style:solid;border-bottom-width:1px;border-left-style:none!important;border-left-width:0!important;border-left-color:none!important}:host::ng-deep .input-group-addon img{width:1.2em;height:1em;cursor:pointer}:host::ng-deep .form-control+.input-group-addon:not(:first-child){border-left:0}:host::ng-deep .button-calendar{background-color:#fff;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:none;color:#258900;right:21px;position:relative;margin-right:-21px}:host::ng-deep .dropdown-menu{position:absolute;top:100%;left:0;display:none;float:left;min-width:10em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#1d1d1d;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;padding:0;top:24px;left:0;border-radius:0!important;border:none!important}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep .rounded{border-radius:.25em}:host::ng-deep .ngb-dp-header{height:4em!important;margin-bottom:-1.5em!important;border-bottom:none!important}:host::ng-deep .pt-1{padding-top:0!important;height:4.25em;margin-bottom:-2em}:host::ng-deep .rounded-top{border-top-right-radius:.25em;border-top-left-radius:.25em;border-radius:0!important}:host::ng-deep .bg-faded{background-color:#fff!important}:host::ng-deep ngb-datepicker-navigation{height:2em;line-height:1.85em}:host::ng-deep .justify-content-between{-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}:host::ng-deep .d-flex{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}:host::ng-deep .btn-link{cursor:pointer;outline:#d3d3d3 solid 1px!important}:host::ng-deep .btn-link,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:focus{border-color:transparent}:host::ng-deep .btn-link,:host::ng-deep .btn-link.active,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:disabled{background-color:transparent}:host::ng-deep .btn-link{font-weight:400;color:#258900;border-radius:0}:host::ng-deep button,:host::ng-deep input,:host::ng-deep select,:host::ng-deep textarea{line-height:inherit}:host::ng-deep [role=button],:host::ng-deep a,:host::ng-deep area,:host::ng-deep button,:host::ng-deep input,:host::ng-deep label,:host::ng-deep select,:host::ng-deep summary,:host::ng-deep textarea{-ms-touch-action:manipulation;touch-action:manipulation}:host::ng-deep button{-webkit-appearance:button}:host::ng-deep button,:host::ng-deep select{text-transform:none}:host::ng-deep button,:host::ng-deep input{overflow:visible}:host::ng-deep button,:host::ng-deep input,:host::ng-deep optgroup,:host::ng-deep select,:host::ng-deep textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}:host::ng-deep .ngb-dp-navigation-chevron::before{border-style:solid;border-width:.1em .1em 0 0!important;content:'';display:inline-block;height:.75em!important;transform:rotate(-135deg);-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);width:.75em!important;margin:0 0 0 .5em!important;color:grey}:host::ng-deep .ngb-dp-navigation-chevron.right:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin:0 .5em 0 0!important}:host::ng-deep .d-block{display:block!important}:host::ng-deep ngb-datepicker-navigation-select.d-block{width:9em!important}:host::ng-deep select{padding:.25em .5em;font-size:.875em;line-height:1.25;height:inherit;width:50%}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep select.custom-select.d-inline-block{padding:.25em .5rem!important;font-size:.875em!important;line-height:1.25;height:inherit;width:50%}:host::ng-deep .custom-select{display:inline-block;max-width:100%;height:calc(4.25em);padding:.375em 1.75em .375em .75em;line-height:1.25;color:#464a4c;vertical-align:middle;border:1px solid rgba(0,0,0,.15);border-radius:.25em;-moz-appearance:none;-webkit-appearance:none}:host::ng-deep .px-1{padding-left:0!important;padding-right:0!important}:host::ng-deep .pb-1{padding-bottom:.25em!important}:host::ng-deep .ngb-dp-month:first-child{margin-left:0!important}:host::ng-deep .ngb-dp-month{pointer-events:none}:host::ng-deep .ml-3{margin-left:1em!important}:host::ng-deep .ngb-dp-day{width:45px!important;height:45px!important}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{width:45px!important;height:35px!important}:host::ng-deep .ngb-dp-day{position:relative;box-sizing:border-box}:host::ng-deep .ngb-dp-week.d-flex:not(:first-child){border-top:.5px solid #d3d3d3;border-bottom:.5px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week.d-flex:first-child{border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-bottom:.5px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep ngb-datepicker-navigation.d-flex{height:2.5em!important;line-height:1.8em!important;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{line-height:35px!important}:host::ng-deep .text-info{color:#5bc0de!important}:host::ng-deep .font-italic{font-style:italic}:host::ng-deep .outside{opacity:.5}:host::ng-deep ngb-dp-day>div{text-align:center;width:45px;height:45px;line-height:45px;border-radius:0!important}:host::ng-deep div[ngbdatepickerdayview]{border-radius:0!important;box-sizing:border-box;text-align:center;width:45px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important}:host::ng-deep .text-muted{color:#636c72!important}:host::ng-deep .btn-secondary{color:#258900;background-color:#fff;border-color:#ccc;font-weight:700;font-size:.8em}:host::ng-deep .text-white{color:#fff!important}:host::ng-deep .bg-primary{background-color:#258900!important}:host::ng-deep .bg-primary::before{border-bottom:8px solid #fff;border-left:8px solid transparent;border-right:8px solid transparent;position:absolute;top:0;right:-8px;content:'';display:inline-block;width:0;height:0;margin:0;padding:0;transform:rotate(45deg);transform-origin:top}:host::ng-deep .text-center{text-align:center!important}:host::ng-deep .small,:host::ng-deep small{font-size:80%;font-weight:400}:host::ng-deep .ngb-dp-months.pb-1{padding:0!important}:host::ng-deep .input-group>input.form-control{padding-left:.625em;padding-right:2.5em}:host::ng-deep .ngb-dp-day:not(:first-child)>.btn-secondary{border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-weekday.font-italic{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal!important;font-size:.75em;color:#6f6f6f!important;text-align:center;text-transform:uppercase}:host::ng-deep button.btn-link{color:#258900!important}:host::ng-deep .collapsed{margin-bottom:-2em!important}:host::ng-deep .ngb-dp-month-name{font-size:.8em!important;padding-top:1em!important;font-weight:700;text-transform:uppercase;color:#258900;position:absolute;text-align:center!important;top:0;height:3.2em!important;width:11.4em;line-height:1.42857143em!important;word-wrap:break-word;word-break:break-word;left:0;right:0;margin-left:auto;margin-right:auto}:host::ng-deep .ngb-dp-weekday{width:2.666666666666667em!important}.button-icon{cursor:pointer;position:relative;top:.001em;right:1.6em;z-index:2;color:#258900;font-size:1.625em;line-height:2.083em}.button-icon.disabled{cursor:default;pointer-events:none;color:#ccc}:host-context(.contrasto-on) .button-icon{color:#000} /*# sourceMappingURL=nbp-datepicker-generic.component.css.map */ "],
        providers: [
            I18n,
            NbpDatepickerConfiguration,
            { provide: NgbDatepickerI18n$1, useClass: NbpDatepickerItI18n },
            { provide: NgbDateParserFormatter$1, useClass: NbpItDateParserFormatter },
            NBP_DATEPICKER_GENERIC_CONTROL_VALUE_ACCESSOR,
            NBP_INPUT_DATEPICKER_GENERIC_ELEMENT_BASE
        ]
    }),
    __param(0, Optional()), __param(0, Inject(NG_VALIDATORS)),
    __param(1, Optional()), __param(1, Inject(NG_ASYNC_VALIDATORS)),
    __param(2, Optional()),
    __metadata$8("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        ElementRef,
        Injector])
], NbpDatepickerGenericComponent);

class NgbDate$1 {
    constructor(year, month, day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }
    static from(date) {
        return date ? new NgbDate$1(date.year, date.month, date.day ? date.day : 1) : null;
    }
    equals(other) {
        return other && this.year === other.year && this.month === other.month && this.day === other.day;
    }
    before(other) {
        if (!other) {
            return false;
        }
        if (this.year === other.year) {
            if (this.month === other.month) {
                return this.day === other.day ? false : this.day < other.day;
            }
            else {
                return this.month < other.month;
            }
        }
        else {
            return this.year < other.year;
        }
    }
    after(other) {
        if (!other) {
            return false;
        }
        if (this.year === other.year) {
            if (this.month === other.month) {
                return this.day === other.day ? false : this.day > other.day;
            }
            else {
                return this.month > other.month;
            }
        }
        else {
            return this.year > other.year;
        }
    }
    toStruct() { return { year: this.year, month: this.month, day: this.day }; }
    toString() { return `${this.year}-${this.month}-${this.day}`; }
}

function toInteger$1(value) {
    return parseInt(`${value}`, 10);
}
function toString$1(value) {
    return (value !== undefined && value !== null) ? `${value}` : '';
}


function isNumber$1(value) {
    return !isNaN(toInteger$1(value));
}
function isInteger$1(value) {
    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;
}

function padNumber$1(value) {
    if (isNumber$1(value)) {
        return `0${value}`.slice(-2);
    }
    else {
        return '';
    }
}

var __decorate$21 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function fromJSDate$1(jsDate) {
    return new NgbDate$1(jsDate.getFullYear(), jsDate.getMonth() + 1, jsDate.getDate());
}
function toJSDate$1(date) {
    const jsDate = new Date(date.year, date.month - 1, date.day, 12);
    // this is done avoid 30 -> 1930 conversion
    if (!isNaN(jsDate.getTime())) {
        jsDate.setFullYear(date.year);
    }
    return jsDate;
}
let NgbCalendar$1 = class NgbCalendar {
};
NgbCalendar$1 = __decorate$21([
    Injectable()
], NgbCalendar$1);
let NgbCalendarGregorian$1 = class NgbCalendarGregorian extends NgbCalendar$1 {
    getDaysPerWeek() { return 7; }
    getMonths() { return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; }
    getWeeksPerMonth() { return 6; }
    getNext(date, period = 'd', number = 1) {
        let jsDate = toJSDate$1(date);
        switch (period) {
            case 'y':
                return new NgbDate$1(date.year + number, 1, 1);
            case 'm':
                jsDate = new Date(date.year, date.month + number - 1, 1, 12);
                break;
            case 'd':
                jsDate.setDate(jsDate.getDate() + number);
                break;
            default:
                return date;
        }
        return fromJSDate$1(jsDate);
    }
    getPrev(date, period = 'd', number = 1) { return this.getNext(date, period, -number); }
    getWeekday(date) {
        let jsDate = toJSDate$1(date);
        let day = jsDate.getDay();
        // in JS Date Sun=0, in ISO 8601 Sun=7
        return day === 0 ? 7 : day;
    }
    getWeekNumber(week, firstDayOfWeek) {
        // in JS Date Sun=0, in ISO 8601 Sun=7
        if (firstDayOfWeek === 7) {
            firstDayOfWeek = 0;
        }
        const thursdayIndex = (4 + 7 - firstDayOfWeek) % 7;
        let date = week[thursdayIndex];
        const jsDate = toJSDate$1(date);
        jsDate.setDate(jsDate.getDate() + 4 - (jsDate.getDay() || 7)); // Thursday
        const time = jsDate.getTime();
        jsDate.setMonth(0); // Compare with Jan 1
        jsDate.setDate(1);
        return Math.floor(Math.round((time - jsDate.getTime()) / 86400000) / 7) + 1;
    }
    getToday() { return fromJSDate$1(new Date()); }
    isValid(date) {
        if (!date || !isInteger$1(date.year) || !isInteger$1(date.month) || !isInteger$1(date.day)) {
            return false;
        }
        const jsDate = toJSDate$1(date);
        return !isNaN(jsDate.getTime()) && jsDate.getFullYear() === date.year && jsDate.getMonth() + 1 === date.month &&
            jsDate.getDate() === date.day;
    }
};
NgbCalendarGregorian$1 = __decorate$21([
    Injectable()
], NgbCalendarGregorian$1);

function isChangedDate$1(prev, next) {
    return !dateComparator$1(prev, next);
}
function dateComparator$1(prev, next) {
    return (!prev && !next) || (!!prev && !!next && prev.equals(next));
}
function checkMinBeforeMax$1(minDate, maxDate) {
    if (maxDate && minDate && maxDate.before(minDate)) {
        throw new Error(`'maxDate' ${maxDate} should be greater than 'minDate' ${minDate}`);
    }
}
function checkDateInRange$1(date, minDate, maxDate) {
    if (date && minDate && date.before(minDate)) {
        return NgbDate$1.from(minDate);
    }
    if (date && maxDate && date.after(maxDate)) {
        return NgbDate$1.from(maxDate);
    }
    return date;
}
function isDateSelectable$1(months, date) {
    let selectable = false;
    const month = months.find(curMonth => curMonth.year === date.year && curMonth.number === date.month);
    if (month) {
        month.weeks.find(week => {
            const day = week.days.find(day => date.equals(day.date));
            if (day && !day.context.disabled) {
                selectable = true;
            }
            return !!day;
        });
    }
    return selectable;
}
function buildMonths$1(calendar, months, date, minDate, maxDate, displayMonths, firstDayOfWeek, markDisabled, force) {
    const newMonths = [];
    for (let i = 0; i < displayMonths; i++) {
        const newDate = calendar.getNext(date, 'm', i);
        const index = months.findIndex(month => month.firstDate.equals(newDate));
        if (force || index === -1) {
            newMonths.push(buildMonth$1(calendar, newDate, minDate, maxDate, firstDayOfWeek, markDisabled));
        }
        else {
            newMonths.push(months[index]);
        }
    }
    return newMonths;
}
function buildMonth$1(calendar, date, minDate, maxDate, firstDayOfWeek, markDisabled) {
    const month = { firstDate: null, lastDate: null, number: date.month, year: date.year, weeks: [], weekdays: [] };
    date = getFirstViewDate$1(calendar, date, firstDayOfWeek);
    // month has weeks
    for (let week = 0; week < calendar.getWeeksPerMonth(); week++) {
        const days = [];
        // week has days
        for (let day = 0; day < calendar.getDaysPerWeek(); day++) {
            if (week === 0) {
                month.weekdays.push(calendar.getWeekday(date));
            }
            const newDate = new NgbDate$1(date.year, date.month, date.day);
            const nextDate = calendar.getNext(newDate);
            // marking date as disabled
            let disabled = !!((minDate && newDate.before(minDate)) || (maxDate && newDate.after(maxDate)));
            if (!disabled && markDisabled) {
                disabled = markDisabled(newDate, { month: month.number, year: month.year });
            }
            // saving first date of the month
            if (month.firstDate === null && newDate.month === month.number) {
                month.firstDate = newDate;
            }
            // saving last date of the month
            if (newDate.month === month.number && nextDate.month !== month.number) {
                month.lastDate = newDate;
            }
            days.push({
                date: newDate,
                context: {
                    date: { year: newDate.year, month: newDate.month, day: newDate.day },
                    currentMonth: month.number,
                    disabled: disabled,
                    focused: false,
                    selected: false
                }
            });
            date = nextDate;
        }
        month.weeks.push({ number: calendar.getWeekNumber(days.map(day => NgbDate$1.from(day.date)), firstDayOfWeek), days: days });
    }
    return month;
}
function getFirstViewDate$1(calendar, date, firstDayOfWeek) {
    const currentMonth = date.month;
    let today = new NgbDate$1(date.year, date.month, date.day);
    let yesterday = calendar.getPrev(today);
    const firstDayOfCurrentMonthIsAlsoFirstDayOfWeek = () => { return today.month !== yesterday.month && firstDayOfWeek === calendar.getWeekday(today); };
    const reachedTheFirstDayOfTheLastWeekOfPreviousMonth = () => { return today.month !== currentMonth && firstDayOfWeek === calendar.getWeekday(today); };
    // going back in time
    while (!reachedTheFirstDayOfTheLastWeekOfPreviousMonth() && !firstDayOfCurrentMonthIsAlsoFirstDayOfWeek()) {
        today = new NgbDate$1(yesterday.year, yesterday.month, yesterday.day);
        yesterday = calendar.getPrev(yesterday);
    }
    return today;
}

var __decorate$22 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$12 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerService$1 = class NgbDatepickerService {
    constructor(_calendar) {
        this._calendar = _calendar;
        this._model$ = new Subject();
        this._state = { disabled: false, displayMonths: 1, firstDayOfWeek: 1, focusVisible: false, months: [], selectedDate: null };
    }
    get model$() { return filter.call(this._model$.asObservable(), model => model.months.length > 0); }
    set disabled(disabled) {
        if (this._state.disabled !== disabled) {
            this._nextState({ disabled: disabled });
        }
    }
    set displayMonths(months) {
        if (isInteger$1(months) && months > 0 && this._state.displayMonths !== months) {
            this._nextState({ displayMonths: months });
        }
    }
    set firstDayOfWeek(firstDayOfWeek) {
        if (isInteger$1(firstDayOfWeek) && firstDayOfWeek >= 0 && this._state.firstDayOfWeek !== firstDayOfWeek) {
            this._nextState({ firstDayOfWeek: firstDayOfWeek });
        }
    }
    set focusVisible(focusVisible) {
        if (this._state.focusVisible !== focusVisible && !this._state.disabled) {
            this._nextState({ focusVisible: focusVisible });
        }
    }
    set maxDate(date) {
        if (date === undefined || this._calendar.isValid(date) && isChangedDate$1(this._state.maxDate, date)) {
            this._nextState({ maxDate: date });
        }
    }
    set markDisabled(markDisabled) {
        if (this._state.markDisabled !== markDisabled) {
            this._nextState({ markDisabled: markDisabled });
        }
    }
    set minDate(date) {
        if (date === undefined || this._calendar.isValid(date) && isChangedDate$1(this._state.minDate, date)) {
            this._nextState({ minDate: date });
        }
    }
    focus(date) {
        if (!this._state.disabled && this._calendar.isValid(date) && isChangedDate$1(this._state.focusDate, date)) {
            this._nextState({ focusDate: date });
        }
    }
    focusMove(period, number) {
        this.focus(this._calendar.getNext(this._state.focusDate, period, number));
    }
    focusSelect() {
        if (isDateSelectable$1(this._state.months, this._state.focusDate)) {
            this.select(this._state.focusDate);
        }
    }
    open(date) {
        if (!this._state.disabled && this._calendar.isValid(date)) {
            this._nextState({ firstDate: date });
        }
    }
    select(date) {
        const validDate = this.toValidDate(date, null);
        if (!this._state.disabled && isChangedDate$1(this._state.selectedDate, validDate)) {
            this._nextState({ selectedDate: validDate });
        }
    }
    toValidDate(date, defaultValue) {
        const ngbDate = NgbDate$1.from(date);
        if (defaultValue === undefined) {
            defaultValue = this._calendar.getToday();
        }
        return this._calendar.isValid(ngbDate) ? ngbDate : defaultValue;
    }
    _nextState(patch) {
        const newState = this._updateState(patch);
        this._patchContexts(newState);
        this._state = newState;
        this._model$.next(this._state);
    }
    _patchContexts(state$$1) {
        state$$1.months.forEach(month => {
            month.weeks.forEach(week => {
                week.days.forEach(day => {
                    // patch focus flag
                    if (state$$1.focusDate) {
                        day.context.focused = state$$1.focusDate.equals(day.date) && state$$1.focusVisible;
                    }
                    // override context disabled
                    if (state$$1.disabled === true) {
                        day.context.disabled = true;
                    }
                    // patch selection flag
                    if (state$$1.selectedDate !== undefined) {
                        day.context.selected = state$$1.selectedDate !== null && state$$1.selectedDate.equals(day.date);
                    }
                });
            });
        });
    }
    _updateState(patch) {
        // patching fields
        const state$$1 = Object.assign({}, this._state, patch);
        let startDate = state$$1.firstDate;
        // min/max dates changed
        if ('minDate' in patch || 'maxDate' in patch) {
            checkMinBeforeMax$1(state$$1.minDate, state$$1.maxDate);
            state$$1.focusDate = checkDateInRange$1(state$$1.focusDate, state$$1.minDate, state$$1.maxDate);
            state$$1.firstDate = checkDateInRange$1(state$$1.firstDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.focusDate;
        }
        // disabled
        if ('disabled' in patch) {
            state$$1.focusVisible = false;
        }
        // focus date changed
        if ('focusDate' in patch) {
            state$$1.focusDate = checkDateInRange$1(state$$1.focusDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.focusDate;
            // nothing to rebuild if only focus changed and it is still visible
            if (state$$1.months.length !== 0 && !state$$1.focusDate.before(state$$1.firstDate) &&
                !state$$1.focusDate.after(state$$1.lastDate)) {
                return state$$1;
            }
        }
        // first date changed
        if ('firstDate' in patch) {
            state$$1.firstDate = checkDateInRange$1(state$$1.firstDate, state$$1.minDate, state$$1.maxDate);
            startDate = state$$1.firstDate;
        }
        // rebuilding months
        if (startDate) {
            const forceRebuild = 'firstDayOfWeek' in patch || 'markDisabled' in patch || 'minDate' in patch ||
                'maxDate' in patch || 'disabled' in patch;
            const months = buildMonths$1(this._calendar, state$$1.months, startDate, state$$1.minDate, state$$1.maxDate, state$$1.displayMonths, state$$1.firstDayOfWeek, state$$1.markDisabled, forceRebuild);
            // updating months and boundary dates
            state$$1.months = months;
            state$$1.firstDate = months.length > 0 ? months[0].firstDate : undefined;
            state$$1.lastDate = months.length > 0 ? months[months.length - 1].lastDate : undefined;
            // adjusting focus after months were built
            if ('firstDate' in patch) {
                if (state$$1.focusDate === undefined || state$$1.focusDate.before(state$$1.firstDate) ||
                    state$$1.focusDate.after(state$$1.lastDate)) {
                    state$$1.focusDate = startDate;
                }
            }
        }
        return state$$1;
    }
};
NgbDatepickerService$1 = __decorate$22([
    Injectable(),
    __metadata$12("design:paramtypes", [NgbCalendar$1])
], NgbDatepickerService$1);

var __decorate$23 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$13 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var Key$1;
(function (Key) {
    Key[Key["Enter"] = 13] = "Enter";
    Key[Key["Space"] = 32] = "Space";
    Key[Key["PageUp"] = 33] = "PageUp";
    Key[Key["PageDown"] = 34] = "PageDown";
    Key[Key["End"] = 35] = "End";
    Key[Key["Home"] = 36] = "Home";
    Key[Key["ArrowLeft"] = 37] = "ArrowLeft";
    Key[Key["ArrowUp"] = 38] = "ArrowUp";
    Key[Key["ArrowRight"] = 39] = "ArrowRight";
    Key[Key["ArrowDown"] = 40] = "ArrowDown";
})(Key$1 || (Key$1 = {}));
let NgbDatepickerKeyMapService$1 = class NgbDatepickerKeyMapService {
    constructor(_service, _calendar) {
        this._service = _service;
        this._calendar = _calendar;
        _service.model$.subscribe(model => {
            this._minDate = model.minDate;
            this._maxDate = model.maxDate;
            this._firstViewDate = model.firstDate;
            this._lastViewDate = model.lastDate;
        });
    }
    processKey(event) {
        if (Key$1[toString$1(event.which)]) {
            switch (event.which) {
                case Key$1.PageUp:
                    this._service.focusMove(event.shiftKey ? 'y' : 'm', -1);
                    break;
                case Key$1.PageDown:
                    this._service.focusMove(event.shiftKey ? 'y' : 'm', 1);
                    break;
                case Key$1.End:
                    this._service.focus(event.shiftKey ? this._maxDate : this._lastViewDate);
                    break;
                case Key$1.Home:
                    this._service.focus(event.shiftKey ? this._minDate : this._firstViewDate);
                    break;
                case Key$1.ArrowLeft:
                    this._service.focusMove('d', -1);
                    break;
                case Key$1.ArrowUp:
                    this._service.focusMove('d', -this._calendar.getDaysPerWeek());
                    break;
                case Key$1.ArrowRight:
                    this._service.focusMove('d', 1);
                    break;
                case Key$1.ArrowDown:
                    this._service.focusMove('d', this._calendar.getDaysPerWeek());
                    break;
                case Key$1.Enter:
                case Key$1.Space:
                    this._service.focusSelect();
                    break;
                default:
                    return;
            }
            event.preventDefault();
            event.stopPropagation();
        }
    }
};
NgbDatepickerKeyMapService$1 = __decorate$23([
    Injectable(),
    __metadata$13("design:paramtypes", [NgbDatepickerService$1, NgbCalendar$1])
], NgbDatepickerKeyMapService$1);

// clang-format on
var NavigationEvent$1;
(function (NavigationEvent) {
    NavigationEvent[NavigationEvent["PREV"] = 0] = "PREV";
    NavigationEvent[NavigationEvent["NEXT"] = 1] = "NEXT";
    NavigationEvent[NavigationEvent["PREVYEAR"] = 2] = "PREVYEAR";
    NavigationEvent[NavigationEvent["NEXTYEAR"] = 3] = "NEXTYEAR";
})(NavigationEvent$1 || (NavigationEvent$1 = {}));

var __decorate$24 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
/**
 * Configuration service for the NgbDatepicker component.
 * You can inject this service, typically in your root component, and customize the values of its properties in
 * order to provide default values for all the datepickers used in the application.
 */
let NgbDatepickerConfig$1 = class NgbDatepickerConfig {
    /**
     * Configuration service for the NgbDatepicker component.
     * You can inject this service, typically in your root component, and customize the values of its properties in
     * order to provide default values for all the datepickers used in the application.
     */
    constructor() {
        this.displayMonths = 1;
        this.firstDayOfWeek = 1;
        this.navigation = 'select';
        this.outsideDays = 'visible';
        this.showWeekdays = true;
        this.showWeekNumbers = false;
    }
};
NgbDatepickerConfig$1 = __decorate$24([
    Injectable()
], NgbDatepickerConfig$1);

var __decorate$25 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
const WEEKDAYS_SHORT$1 = ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su'];
const MONTHS_SHORT$1 = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
const MONTHS_FULL$1 = [
    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November',
    'December'
];
/**
 * Type of the service supplying month and weekday names to to NgbDatepicker component.
 * See the i18n demo for how to extend this class and define a custom provider for i18n.
 */
let NgbDatepickerI18n$2 = class NgbDatepickerI18n$$1 {
};
NgbDatepickerI18n$2 = __decorate$25([
    Injectable()
], NgbDatepickerI18n$2);
let NgbDatepickerI18nDefault$1 = class NgbDatepickerI18nDefault extends NgbDatepickerI18n$2 {
    getWeekdayShortName(weekday) { return WEEKDAYS_SHORT$1[weekday - 1]; }
    getMonthShortName(month) { return MONTHS_SHORT$1[month - 1]; }
    getMonthFullName(month) { return MONTHS_FULL$1[month - 1]; }
};
NgbDatepickerI18nDefault$1 = __decorate$25([
    Injectable()
], NgbDatepickerI18nDefault$1);

var __decorate$26 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let EnabledRangeService = class EnabledRangeService {
    constructor() {
        this.startDate = {};
        this.endDate = {};
    }
};
EnabledRangeService = __decorate$26([
    Injectable()
], EnabledRangeService);

var __decorate$20 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$11 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const NGB_CALENDAR_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => RplCalendar),
    multi: true
};
/**
 * A lightweight and highly configurable datepicker directive
 */
let RplCalendar = class RplCalendar {
    // startDateEnabled: string;
    // endDateEnabled: string;
    constructor(enabledRange, _keyMapService, _service, _calendar, i18n, config, _cd, _elementRef) {
        this.enabledRange = enabledRange;
        this._keyMapService = _keyMapService;
        this._service = _service;
        this._calendar = _calendar;
        this.i18n = i18n;
        this._cd = _cd;
        this._elementRef = _elementRef;
        // /**
        //  * Start date Enabled
        //  */
        // @Input() startDateEnabled: { year: number, month: number, day: number };
        // /**
        //  * End date Enabled 
        //  */
        // @Input() endDateEnabled: { year: number, month: number, day: number };
        /**
        * In questa variabile sono memorizzati i dati iniziali che scenderanno l'albero dei template
        */
        this.dataTemplate = { template: 0, day: 0, month: 0, year: 0, valid: false };
        /**
         * An event fired when navigation happens and currently displayed month changes.
         * See NgbDatepickerNavigateEvent for the payload info.
         */
        this.navigate = new EventEmitter();
        /**
         * Template da Adoperare
         */
        this.template = 0;
        this.mesi = [
            [
                { name: "GEN", number: 1, disabled: false, selected: false, focused: false },
                { name: "FEB", number: 2, disabled: false, selected: false, focused: false },
                { name: "MAR", number: 3, disabled: false, selected: false, focused: false },
                { name: "APR", number: 4, disabled: false, selected: false, focused: false }
            ],
            [
                { name: "MAG", number: 5, disabled: false, selected: false, focused: false },
                { name: "GIU", number: 6, disabled: false, selected: false, focused: false },
                { name: "LUG", number: 7, disabled: false, selected: false, focused: false },
                { name: "AGO", number: 8, disabled: false, selected: false, focused: false }
            ],
            [
                { name: "SET", number: 9, disabled: false, selected: false, focused: false },
                { name: "OTT", number: 10, disabled: false, selected: false, focused: false },
                { name: "NOV", number: 11, disabled: false, selected: false, focused: false },
                { name: "DIC", number: 12, disabled: false, selected: false, focused: false }
            ]
        ];
        this.years = [
            [
                { name: "2018", number: 2018, disabled: false, selected: false, focused: false },
                { name: "2019", number: 2019, disabled: false, selected: false, focused: false },
                { name: "2020", number: 2020, disabled: false, selected: false, focused: false },
                { name: "2021", number: 2021, disabled: false, selected: false, focused: false }
            ],
            [
                { name: "2022", number: 2022, disabled: false, selected: false, focused: false },
                { name: "2023", number: 2023, disabled: false, selected: false, focused: false },
                { name: "2024", number: 2024, disabled: false, selected: false, focused: false },
                { name: "2025", number: 2025, disabled: false, selected: false, focused: false }
            ],
            [
                { name: "2026", number: 2026, disabled: false, selected: false, focused: false },
                { name: "2027", number: 2027, disabled: false, selected: false, focused: false },
                { name: "2028", number: 2028, disabled: false, selected: false, focused: false },
                { name: "2029", number: 2029, disabled: false, selected: false, focused: false }
            ]
        ];
        this.onChange = (_) => { };
        this.onTouched = () => { };
        this.dayTemplate = config.dayTemplate;
        this.displayMonths = config.displayMonths;
        this.firstDayOfWeek = config.firstDayOfWeek;
        this.markDisabled = config.markDisabled;
        this.minDate = config.minDate;
        this.maxDate = config.maxDate;
        this.navigation = config.navigation;
        this.outsideDays = config.outsideDays;
        this.showWeekdays = config.showWeekdays;
        this.showWeekNumbers = config.showWeekNumbers;
        this.startDate = config.startDate;
        this.startDateEnabled = enabledRange.startDate;
        this.endDateEnabled = enabledRange.endDate;
        // alert("finale Start : " +  this.startDateEnabled)
        // alert("finale End   : " +  this.endDateEnabled)
        this._subscription = _service.model$.subscribe(model => {
            const newDate = model.firstDate;
            const oldDate = this.model ? this.model.firstDate : null;
            const newSelectedDate = model.selectedDate;
            const oldSelectedDate = this.model ? this.model.selectedDate : null;
            this.model = model;
            // handling selection change
            if (isChangedDate$1(newSelectedDate, oldSelectedDate)) {
                this.onTouched();
                this.onChange(newSelectedDate ? { year: newSelectedDate.year, month: newSelectedDate.month, day: newSelectedDate.day } :
                    null);
            }
            // emitting navigation event if the first month changes
            if (!newDate.equals(oldDate)) {
                this.navigate.emit({
                    current: oldDate ? { year: oldDate.year, month: oldDate.month } : null,
                    next: { year: newDate.year, month: newDate.month }
                });
            }
            _cd.markForCheck();
        });
    }
    abilitaMesi(data) {
        if (this.startDateEnabled.month <= data && data <= this.endDateEnabled.month && (this.startDateEnabled.year <= this.dataTemplate.year && this.dataTemplate.year <= this.endDateEnabled.year)) {
            return true;
        }
        return false;
    }
    abilitaAnni(data) {
        if (this.startDateEnabled.year <= data && data <= this.endDateEnabled.year) {
            return true;
        }
        return false;
    }
    setNewTemplate(selectedTemplate) {
        this.setMesi(this.dataTemplate.month, true);
        this.updateYears(this.dataTemplate.year);
        this.setYear(this.dataTemplate.year, true);
        this.template = selectedTemplate;
    }
    setMesi(position, selected) {
        if (!this.abilitaMesi(position))
            return;
        let nRow = 0, nCol = 0;
        if (position == 4)
            nRow = 0;
        else if (position == 8)
            nRow = 1;
        else if (position == 12)
            nRow = 2;
        else
            nRow = Math.trunc(position / 4);
        nCol = position - (nRow * 4) - 1;
        this.mesi[nRow][nCol].selected = selected;
    }
    updateYears(startYearValue) {
        for (let j = 0; j < 3; j++) {
            for (let i = 0; i < 4; i++) {
                this.years[j][i].number = startYearValue + i + j * 4;
                this.years[j][i].name = this.years[j][i].number + "";
            }
        }
    }
    setYear(yearValue, selected) {
        if (!this.abilitaAnni(yearValue))
            return;
        this.years.forEach((row) => {
            row.forEach((year) => {
                if (year.number == yearValue)
                    year.selected = selected;
            });
        });
    }
    /**
     * Manually focus the calendar
     */
    focus() { this._elementRef.nativeElement.focus(); }
    getHeaderHeight() {
        const h = this.showWeekdays ? 6.25 : 4.25;
        return this.displayMonths === 1 || this.navigation !== 'select' ? h - 2 : h;
    }
    getHeaderMargin() {
        const m = this.showWeekdays ? 2 : 0;
        return this.displayMonths !== 1 || this.navigation !== 'select' ? m + 2 : m;
    }
    /**
     * Navigates current view to provided date.
     * With default calendar we use ISO 8601: 'month' is 1=Jan ... 12=Dec.
     * If nothing or invalid date provided calendar will open current month.
     * Use 'startDate' input as an alternative
     */
    navigateTo(date) {
        this._service.open(date ? new NgbDate$1(date.year, date.month, 1) : this._calendar.getToday());
    }
    ngOnDestroy() { this._subscription.unsubscribe(); }
    ngOnInit() {
        if (this.model === undefined) {
            this._service.displayMonths = toInteger$1(this.displayMonths);
            this._service.markDisabled = this.markDisabled;
            this._service.firstDayOfWeek = this.firstDayOfWeek;
            this._setDates();
            // inixializzazione dataTemplate alla data selezionata
            if (!this.startDate) {
                this.startDate = { year: null, month: null, day: null };
                let today = new Date();
                let dd = today.getDate();
                let mm = today.getMonth() + 1; //January is 0!
                let yyyy = today.getFullYear();
                this.startDate.day = dd;
                this.startDate.month = mm;
                this.startDate.year = yyyy;
            }
            this.dataTemplate.day = this.startDate.day;
            this.dataTemplate.month = this.startDate.month;
            this.dataTemplate.year = this.startDate.year;
            this.dataTemplate.valid = false;
        }
    }
    ngOnChanges(changes) {
        if (changes['displayMonths']) {
            this._service.displayMonths = toInteger$1(this.displayMonths);
        }
        if (changes['markDisabled']) {
            this._service.markDisabled = this.markDisabled;
        }
        if (changes['firstDayOfWeek']) {
            this._service.firstDayOfWeek = this.firstDayOfWeek;
        }
        this._setDates();
    }
    onDateSelect(date) {
        this._service.focus(date);
        this.writeValue(date);
    }
    onKeyDown(event) { this._keyMapService.processKey(event); }
    onNavigateDateSelect(date) {
        this._service.open(date);
    }
    onNavigateEvent(event) {
        let bufferData;
        this.model.firstDate.month = this.dataTemplate.month;
        this.model.firstDate.year = this.dataTemplate.year;
        if (event == NavigationEvent$1.PREV && this.template == 0) {
            bufferData = this._calendar.getPrev(this.model.firstDate, 'm', 1);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
        }
        else if (NavigationEvent$1.NEXT && this.template == 0) {
            bufferData = this._calendar.getNext(this.model.firstDate, 'm', 1);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
        }
        else if (event == NavigationEvent$1.PREV && this.template == 1) {
            bufferData = this._calendar.getPrev(this.model.firstDate, 'm', 12);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
        }
        else if (event == NavigationEvent$1.NEXT && this.template == 1) {
            bufferData = this._calendar.getNext(this.model.firstDate, 'm', 12);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
        }
        else if (event == NavigationEvent$1.PREV && this.template == 2) {
            bufferData = this._calendar.getPrev(this.model.firstDate, 'm', 120);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
            this.updateYears(this.dataTemplate.year);
        }
        else if (event == NavigationEvent$1.NEXT && this.template == 2) {
            bufferData = this._calendar.getNext(this.model.firstDate, 'm', 120);
            this._service.open(bufferData);
            this.updateDataTemplate(bufferData);
            this.updateYears(this.dataTemplate.year);
        }
    }
    onChangeTemplate(dataTemplate) {
        this.template = dataTemplate.template;
    }
    updateDataTemplate(date) {
        this.dataTemplate.day = date.day;
        this.dataTemplate.month = date.month;
        this.dataTemplate.year = date.year;
    }
    registerOnChange(fn) { this.onChange = fn; }
    registerOnTouched(fn) { this.onTouched = fn; }
    setDisabledState(isDisabled) { this._service.disabled = isDisabled; }
    showFocus(focusVisible) { this._service.focusVisible = focusVisible; }
    writeValue(value) { this._service.select(value); }
    _setDates() {
        const startDate = this._service.toValidDate(this.startDate, this._calendar.getToday());
        const minDate = this._service.toValidDate(this.minDate, this._calendar.getPrev(startDate, 'y', 10));
        const maxDate = this._service.toValidDate(this.maxDate, this._calendar.getPrev(this._calendar.getNext(startDate, 'y', 11)));
        this.minDate = { year: minDate.year, month: minDate.month, day: minDate.day };
        this.maxDate = { year: maxDate.year, month: maxDate.month, day: maxDate.day };
        this._service.minDate = minDate;
        this._service.maxDate = maxDate;
        this.navigateTo(startDate);
    }
};
__decorate$20([
    Input(),
    __metadata$11("design:type", TemplateRef)
], RplCalendar.prototype, "dayTemplate", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Number)
], RplCalendar.prototype, "displayMonths", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Number)
], RplCalendar.prototype, "firstDayOfWeek", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Function)
], RplCalendar.prototype, "markDisabled", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "maxDate", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "minDate", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", String)
], RplCalendar.prototype, "navigation", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", String)
], RplCalendar.prototype, "outsideDays", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Boolean)
], RplCalendar.prototype, "showWeekdays", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Boolean)
], RplCalendar.prototype, "showWeekNumbers", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "startDate", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "startDateEnabled", void 0);
__decorate$20([
    Input(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "endDateEnabled", void 0);
__decorate$20([
    Output(),
    __metadata$11("design:type", Object)
], RplCalendar.prototype, "navigate", void 0);
RplCalendar = __decorate$20([
    Component({
        exportAs: 'rplCalendar',
        selector: 'rpl-calendar',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'd-inline-block rounded',
            'tabindex': '0',
            '[attr.tabindex]': 'model.disabled ? undefined : "0"',
            '(blur)': 'showFocus(false)',
            '(focus)': 'showFocus(true)',
            '(keydown)': 'onKeyDown($event)'
        },
        template: "<div class=\"ngb-dp-header bg-faded pt-1 rounded-top\" [style.height.rem]=\"getHeaderHeight()\" [style.marginBottom.rem]=\"-getHeaderMargin()\"><ngb-datepicker-navigation *ngIf=\"navigation !== 'none'\" [date]=\"model.firstDate\" [minDate]=\"model.minDate\" [maxDate]=\"model.maxDate\" [months]=\"model.months.length\" [template]=\"template\" [disabled]=\"model.disabled\" [showWeekNumbers]=\"showWeekNumbers\" [showSelect]=\"navigation === 'select'\" (navigate)=\"onNavigateEvent($event)\" (select)=\"onNavigateDateSelect($event)\" (newTemplate)=\"setNewTemplate($event)\"></ngb-datepicker-navigation></div><div class=\"ngb-dp-months d-flex px-1 pb-1\"><ng-template ngFor let-month [ngForOf]=\"model.months\" let-i=\"index\"><div class=\"ngb-dp-month d-block ml-3\"><div *ngIf=\"navigation !== 'select' || displayMonths > 1\" style=\"min-width:150px\" class=\"ngb-dp-month-name text-center\"><div [ngSwitch]=\"template\"><div *ngSwitchCase=\"0\">{{ i18n.getMonthFullName(dataTemplate.month) }} {{ dataTemplate.year }}</div><div *ngSwitchCase=\"1\">{{ dataTemplate.year }}</div><div *ngSwitchCase=\"2\">{{ dataTemplate.year }} - {{ dataTemplate.year + 11 }}</div></div></div><ngb-datepicker-routing-view [mesi]=\"mesi\" [years]=\"years\" [dataTemplate]=\"dataTemplate\" [date]=\"model.firstDate\" [currentTemplate]=\"template\" [month]=\"month\" [showWeekdays]=\"showWeekdays\" [showWeekNumbers]=\"showWeekNumbers\" [startDateEnabled]=\"startDateEnabled\" [endDateEnabled]=\"endDateEnabled\" [outsideDays]=\"(displayMonths === 1 ? outsideDays : 'hidden')\" (select)=\"onDateSelect($event)\" (changeTemplate)=\"onChangeTemplate($event)\"></ngb-datepicker-routing-view></div></ng-template></div>",
        styles: [":host{border:1px solid rgba(0,0,0,.125)}.ngb-dp-header{border-bottom:1px solid rgba(0,0,0,.125)}.ngb-dp-month{pointer-events:none}ngb-datepicker-routing-view{pointer-events:auto}.ngb-dp-month:first-child{margin-left:0!important}.ngb-dp-month-name{font-size:larger;font:Arial regular;height:2rem;line-height:2rem} /*# sourceMappingURL=datepicker.css.map */ "],
        providers: [NGB_CALENDAR_VALUE_ACCESSOR, NgbDatepickerService$1, NgbDatepickerKeyMapService$1]
    }),
    __metadata$11("design:paramtypes", [EnabledRangeService,
        NgbDatepickerKeyMapService$1,
        NgbDatepickerService$1,
        NgbCalendar$1,
        NgbDatepickerI18n$2, NgbDatepickerConfig$1,
        ChangeDetectorRef,
        ElementRef])
], RplCalendar);

var __decorate$27 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$14 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerRoutingView = class NgbDatepickerRoutingView {
    constructor(i18n) {
        this.i18n = i18n;
        this.select = new EventEmitter();
        this.changeTemplate = new EventEmitter();
    }
    ngOnInit() {
        // alert("in select in routing : " + this.startDateEnabled)
        // alert("in select in routing : " + this.endDateEnabled)
    }
    doSelect(day) {
        if (!this.abilitaGiorni(day.date))
            return;
        if (this.dataTemplate.valid) {
            // il day si prende quello selezionato e non quello del dataTemplate
            // day.date.day = this.dataTemplate.day;
            day.date.month = this.dataTemplate.month;
            day.date.year = this.dataTemplate.year;
            this.select.emit(NgbDate$1.from(day.date));
        }
        else {
            if (!day.context.disabled && !this.isHidden(day)) {
                this.select.emit(NgbDate$1.from(day.date));
            }
        }
    }
    abilitaGiorni(data) {
        let buffer = new Date(data.year, data.month - 1, data.day);
        let startDate = new Date(this.startDateEnabled.year, this.startDateEnabled.month - 1, this.startDateEnabled.day);
        let endDate = new Date(this.endDateEnabled.year, this.endDateEnabled.month - 1, this.endDateEnabled.day);
        if (startDate <= buffer && buffer <= endDate) {
            return true;
        }
        return false;
    }
    abilitaMesi(data) {
        if ((this.startDateEnabled.month <= data.number && data.number <= this.endDateEnabled.month) && (this.startDateEnabled.year <= this.dataTemplate.year && this.dataTemplate.year <= this.endDateEnabled.year)) {
            return true;
        }
        return false;
    }
    abilitaAnni(data) {
        if (this.startDateEnabled.year <= data.number && data.number <= this.endDateEnabled.year) {
            return true;
        }
        return false;
    }
    doSelectMonth(mese) {
        if (!this.abilitaMesi(mese))
            return;
        this.currentTemplate = 0;
        this.dataTemplate.template = this.currentTemplate;
        // reset giorni
        this.month.weeks.forEach((week) => { week.days.forEach((day) => { day.context.selected = false; }); });
        this.mesi.forEach((row) => { row.forEach((mese) => { mese.selected = false; }); });
        this.dataTemplate.month = mese.number;
        this.dataTemplate.valid = true;
        this.changeTemplate.emit(this.dataTemplate);
    }
    doSelectYear(year) {
        if (!this.abilitaAnni(year))
            return;
        this.currentTemplate = 1;
        this.dataTemplate.template = this.currentTemplate;
        // resetta mesi e anno
        this.mesi.forEach((row) => { row.forEach((mese) => { mese.selected = false; }); });
        this.years.forEach((row) => { row.forEach((year) => { year.selected = false; }); });
        this.dataTemplate.year = year.number;
        this.dataTemplate.valid = true;
        this.changeTemplate.emit(this.dataTemplate);
    }
    isCollapsed(week) {
        return this.outsideDays === 'collapsed' && week.days[0].date.month !== this.month.number &&
            week.days[week.days.length - 1].date.month !== this.month.number;
    }
    isHidden(day) {
        return (this.outsideDays === 'hidden' || this.outsideDays === 'collapsed') && this.month.number !== day.date.month;
    }
};
__decorate$27([
    Input(),
    __metadata$14("design:type", TemplateRef)
], NgbDatepickerRoutingView.prototype, "dayTemplate", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", TemplateRef)
], NgbDatepickerRoutingView.prototype, "monthTemplate", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", TemplateRef)
], NgbDatepickerRoutingView.prototype, "yearsTemplate", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Number)
], NgbDatepickerRoutingView.prototype, "currentTemplate", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "mesi", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "years", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "date", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "dataTemplate", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "month", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", String)
], NgbDatepickerRoutingView.prototype, "outsideDays", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "showWeekdays", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "showWeekNumbers", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "startDateEnabled", void 0);
__decorate$27([
    Input(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "endDateEnabled", void 0);
__decorate$27([
    Output(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "select", void 0);
__decorate$27([
    Output(),
    __metadata$14("design:type", Object)
], NgbDatepickerRoutingView.prototype, "changeTemplate", void 0);
NgbDatepickerRoutingView = __decorate$27([
    Component({
        selector: 'ngb-datepicker-routing-view',
        host: { 'class': 'd-block' },
        template: "<div [ngSwitch]=\"currentTemplate\"><div *ngSwitchCase=\"0\"><div *ngIf=\"showWeekdays\" class=\"ngb-dp-week d-flex\"><div *ngIf=\"showWeekNumbers\" class=\"ngb-dp-weekday\"></div><div *ngFor=\"let w of month.weekdays\" class=\"ngb-dp-weekday small text-center text-info font-italic\">{{ i18n.getWeekdayShortName(w) }}</div></div><ng-template ngFor let-week [ngForOf]=\"month.weeks\"><div *ngIf=\"!isCollapsed(week)\" class=\"ngb-dp-week d-flex\"><div *ngIf=\"showWeekNumbers\" class=\"ngb-dp-week-number small text-center font-italic text-muted\">{{ week.number }}</div><div *ngFor=\"let day of week.days\" (click)=\"doSelect(day)\" class=\"ngb-dp-day\" [class.disabled]=\"day.context.disabled\" [class.hidden]=\"isHidden(day)\"><ng-template [ngIf]=\"!isHidden(day)\"><div ngbDatepickerDayView [date]=\"day.context.date\" [currentMonth]=\"day.context.currentMonth\" [selected]=\"day.context.selected\" [disabled]=\"day.context.disabled\" [focused]=\"day.context.focused\" [startDateEnabled]=\"startDateEnabled\" [endDateEnabled]=\"endDateEnabled\"></div></ng-template></div></div></ng-template></div><div *ngSwitchCase=\"1\"><div *ngFor=\"let row of mesi\" class=\"d-flex ngb-dp-mese\"><div *ngFor=\"let mese of row\" (click)=\"doSelectMonth(mese)\"><div ngbDatepickerReplyMonthView [mese]=\"mese\" [year]=\"dataTemplate.year\" [selected]=\"mese.selected\" [disabled]=\"mese.disabled\" [focused]=\"mese.focused\" [startDateEnabled]=\"startDateEnabled\" [endDateEnabled]=\"endDateEnabled\"></div></div></div></div><div *ngSwitchCase=\"2\"><div *ngFor=\"let row of years\" class=\"d-flex ngb-dp-mese\"><div *ngFor=\"let year of row\" (click)=\"doSelectYear(year)\"><div ngbDatepickerReplyYearsView [year]=\"year\" [selected]=\"year.selected\" [disabled]=\"year.disabled\" [focused]=\"year.focused\" [startDateEnabled]=\"startDateEnabled\" [endDateEnabled]=\"endDateEnabled\"></div></div></div></div><div *ngSwitchDefault>errore template</div></div>",
        styles: [".ngb-dp-week-number,.ngb-dp-weekday{line-height:35px}.ngb-dp-mese{height:45px!important;cursor:pointer}.ngb-dp-week-number,.ngb-dp-weekday{width:45px!important;height:35px!important}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default} /*# sourceMappingURL=datepicker-routing-view.css.map */ "],
    }),
    __metadata$14("design:paramtypes", [NgbDatepickerI18n$2])
], NgbDatepickerRoutingView);

var __decorate$28 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$15 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerNavigation$1 = class NgbDatepickerNavigation {
    constructor(i18n, _calendar) {
        this.i18n = i18n;
        this._calendar = _calendar;
        this.navigation = NavigationEvent$1;
        this.template = 0;
        this.navigate = new EventEmitter();
        this.select = new EventEmitter();
        this.newTemplate = new EventEmitter();
    }
    doNavigate(event) {
        this.navigate.emit(event);
    }
    nextDisabled() {
        return this.disabled || (this.maxDate && this._calendar.getNext(this.date, 'm').after(this.maxDate));
    }
    prevDisabled() {
        const prevDate = this._calendar.getPrev(this.date, 'm');
        return this.disabled || (this.minDate && prevDate.year <= this.minDate.year && prevDate.month < this.minDate.month);
    }
    selectDate(date) {
        this.select.emit(date);
    }
    setTemplate() {
        this.template = (this.template + 1) % 3;
        this.newTemplate.emit(this.template);
    }
};
__decorate$28([
    Input(),
    __metadata$15("design:type", NgbDate$1)
], NgbDatepickerNavigation$1.prototype, "date", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", Boolean)
], NgbDatepickerNavigation$1.prototype, "disabled", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", NgbDate$1)
], NgbDatepickerNavigation$1.prototype, "maxDate", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", NgbDate$1)
], NgbDatepickerNavigation$1.prototype, "minDate", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", Number)
], NgbDatepickerNavigation$1.prototype, "months", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", Boolean)
], NgbDatepickerNavigation$1.prototype, "showSelect", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", Boolean)
], NgbDatepickerNavigation$1.prototype, "showWeekNumbers", void 0);
__decorate$28([
    Input(),
    __metadata$15("design:type", Number)
], NgbDatepickerNavigation$1.prototype, "template", void 0);
__decorate$28([
    Output(),
    __metadata$15("design:type", Object)
], NgbDatepickerNavigation$1.prototype, "navigate", void 0);
__decorate$28([
    Output(),
    __metadata$15("design:type", Object)
], NgbDatepickerNavigation$1.prototype, "select", void 0);
__decorate$28([
    Output(),
    __metadata$15("design:type", Object)
], NgbDatepickerNavigation$1.prototype, "newTemplate", void 0);
NgbDatepickerNavigation$1 = __decorate$28([
    Component({
        selector: 'ngb-datepicker-navigation',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: { 'class': 'd-flex justify-content-between', '[class.collapsed]': '!showSelect' },
        template: "<span><button type=\"button\" class=\"btn btn-sm btn-link camillo\" style=\"width:45px;\" (click)=\"!!doNavigate(navigation.PREV)\" [disabled]=\"prevDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron camillo\"></span></button></span><div class=\"header-navigation-date\" (click)=\"setTemplate()\"><ngb-datepicker-navigation-select *ngIf=\"showSelect\" class=\"d-block\" [style.width.rem]=\"months * 9\" [date]=\"date\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [disabled]=\"disabled\" (select)=\"selectDate($event)\"></ngb-datepicker-navigation-select></div><span><button type=\"button\" style=\"width:45px\" class=\"btn btn-sm btn-link camillo\" (click)=\"!!doNavigate(navigation.NEXT)\" [disabled]=\"nextDisabled()\" tabindex=\"-1\"><span class=\"ngb-dp-navigation-chevron right camillo\"></span></button></span>",
        styles: [":host{height:2rem;line-height:1.85rem}:host.collapsed{margin-bottom:-2rem}.btn-link{width:2.8rem;min-height:100%!important}caption,table,tbody,td,tfoot,th,thead,tr{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:0 0}.camillo{display:inline-block;margin:0;padding:0;border:none}.ngb-dp-navigation-chevron::before{border-style:solid;border-width:.2em .2em 0 0;content:'';display:inline-block;height:.75em;transform:rotate(-135deg);-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);width:.75em;margin:0 0 0 .5rem}.ngb-dp-navigation-chevron.right:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin:0 .5rem 0 0} /*# sourceMappingURL=datepicker-navigation.css.map */ "],
    }),
    __metadata$15("design:paramtypes", [NgbDatepickerI18n$2, NgbCalendar$1])
], NgbDatepickerNavigation$1);

/**
 * Abstract type serving as a DI token for the service parsing and formatting dates for the NgbInputDatepicker
 * directive. A default implementation using the ISO 8601 format is provided, but you can provide another implementation
 * to use an alternative format.
 */
class NgbDateParserFormatter$2 {
}
class NgbDateISOParserFormatter$1 extends NgbDateParserFormatter$2 {
    parse(value) {
        if (value) {
            const dateParts = value.trim().split('-');
            if (dateParts.length === 1 && isNumber$1(dateParts[0])) {
                return { year: toInteger$1(dateParts[0]), month: null, day: null };
            }
            else if (dateParts.length === 2 && isNumber$1(dateParts[0]) && isNumber$1(dateParts[1])) {
                return { year: toInteger$1(dateParts[0]), month: toInteger$1(dateParts[1]), day: null };
            }
            else if (dateParts.length === 3 && isNumber$1(dateParts[0]) && isNumber$1(dateParts[1]) && isNumber$1(dateParts[2])) {
                return { year: toInteger$1(dateParts[0]), month: toInteger$1(dateParts[1]), day: toInteger$1(dateParts[2]) };
            }
        }
        return null;
    }
    format(date) {
        return date ?
            `${date.year}-${isNumber$1(date.month) ? padNumber$1(date.month) : ''}-${isNumber$1(date.day) ? padNumber$1(date.day) : ''}` :
            '';
    }
}

// previous version:
// https://github.com/angular-ui/bootstrap/blob/07c31d0731f7cb068a1932b8e01d2312b796b4ec/src/position/position.js
// previous version:
class Positioning$1 {
    getStyle(element, prop) { return window.getComputedStyle(element)[prop]; }
    isStaticPositioned(element) {
        return (this.getStyle(element, 'position') || 'static') === 'static';
    }
    offsetParent(element) {
        let offsetParentEl = element.offsetParent || document.documentElement;
        while (offsetParentEl && offsetParentEl !== document.documentElement && this.isStaticPositioned(offsetParentEl)) {
            offsetParentEl = offsetParentEl.offsetParent;
        }
        return offsetParentEl || document.documentElement;
    }
    position(element, round = true) {
        let elPosition;
        let parentOffset = { width: 0, height: 0, top: 0, bottom: 0, left: 0, right: 0 };
        if (this.getStyle(element, 'position') === 'fixed') {
            elPosition = element.getBoundingClientRect();
        }
        else {
            const offsetParentEl = this.offsetParent(element);
            elPosition = this.offset(element, false);
            if (offsetParentEl !== document.documentElement) {
                parentOffset = this.offset(offsetParentEl, false);
            }
            parentOffset.top += offsetParentEl.clientTop;
            parentOffset.left += offsetParentEl.clientLeft;
        }
        elPosition.top -= parentOffset.top;
        elPosition.bottom -= parentOffset.top;
        elPosition.left -= parentOffset.left;
        elPosition.right -= parentOffset.left;
        if (round) {
            elPosition.top = Math.round(elPosition.top);
            elPosition.bottom = Math.round(elPosition.bottom);
            elPosition.left = Math.round(elPosition.left);
            elPosition.right = Math.round(elPosition.right);
        }
        return elPosition;
    }
    offset(element, round = true) {
        const elBcr = element.getBoundingClientRect();
        const viewportOffset = {
            top: window.pageYOffset - document.documentElement.clientTop,
            left: window.pageXOffset - document.documentElement.clientLeft
        };
        let elOffset = {
            height: elBcr.height || element.offsetHeight,
            width: elBcr.width || element.offsetWidth,
            top: elBcr.top + viewportOffset.top,
            bottom: elBcr.bottom + viewportOffset.top,
            left: elBcr.left + viewportOffset.left,
            right: elBcr.right + viewportOffset.left
        };
        if (round) {
            elOffset.height = Math.round(elOffset.height);
            elOffset.width = Math.round(elOffset.width);
            elOffset.top = Math.round(elOffset.top);
            elOffset.bottom = Math.round(elOffset.bottom);
            elOffset.left = Math.round(elOffset.left);
            elOffset.right = Math.round(elOffset.right);
        }
        return elOffset;
    }
    positionElements(hostElement, targetElement, placement, appendToBody) {
        const hostElPosition = appendToBody ? this.offset(hostElement, false) : this.position(hostElement, false);
        const targetElBCR = targetElement.getBoundingClientRect();
        const placementPrimary = placement.split('-')[0] || 'top';
        const placementSecondary = placement.split('-')[1] || 'center';
        let targetElPosition = {
            'height': targetElBCR.height || targetElement.offsetHeight,
            'width': targetElBCR.width || targetElement.offsetWidth,
            'top': 0,
            'bottom': targetElBCR.height || targetElement.offsetHeight,
            'left': 0,
            'right': targetElBCR.width || targetElement.offsetWidth
        };
        switch (placementPrimary) {
            case 'top':
                targetElPosition.top = hostElPosition.top - targetElement.offsetHeight;
                break;
            case 'bottom':
                targetElPosition.top = hostElPosition.top + hostElPosition.height;
                break;
            case 'left':
                targetElPosition.left = hostElPosition.left - targetElement.offsetWidth;
                break;
            case 'right':
                targetElPosition.left = hostElPosition.left + hostElPosition.width;
                break;
        }
        switch (placementSecondary) {
            case 'top':
                targetElPosition.top = hostElPosition.top;
                break;
            case 'bottom':
                targetElPosition.top = hostElPosition.top + hostElPosition.height - targetElement.offsetHeight;
                break;
            case 'left':
                targetElPosition.left = hostElPosition.left;
                break;
            case 'right':
                targetElPosition.left = hostElPosition.left + hostElPosition.width - targetElement.offsetWidth;
                break;
            case 'center':
                if (placementPrimary === 'top' || placementPrimary === 'bottom') {
                    targetElPosition.left = hostElPosition.left + hostElPosition.width / 2 - targetElement.offsetWidth / 2;
                }
                else {
                    targetElPosition.top = hostElPosition.top + hostElPosition.height / 2 - targetElement.offsetHeight / 2;
                }
                break;
        }
        targetElPosition.top = Math.round(targetElPosition.top);
        targetElPosition.bottom = Math.round(targetElPosition.bottom);
        targetElPosition.left = Math.round(targetElPosition.left);
        targetElPosition.right = Math.round(targetElPosition.right);
        return targetElPosition;
    }
}
const positionService$1 = new Positioning$1();
function positionElements$1(hostElement, targetElement, placement, appendToBody) {
    const pos = positionService$1.positionElements(hostElement, targetElement, placement, appendToBody);
    targetElement.style.top = `${pos.top}px`;
    targetElement.style.left = `${pos.left}px`;
}

var __decorate$29 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$16 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const NGB_DATEPICKER_VALUE_ACCESSOR$2 = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NgbInputDatepicker$2),
    multi: true
};
const NGB_DATEPICKER_VALIDATOR$1 = {
    provide: NG_VALIDATORS,
    useExisting: forwardRef(() => NgbInputDatepicker$2),
    multi: true
};
/**
 * A directive that makes it possible to have datepickers on input fields.
 * Manages integration with the input field itself (data entry) and ngModel (validation etc.).
 */
let NgbInputDatepicker$2 = class NgbInputDatepicker$$1 {
    constructor(_parserFormatter, _elRef, _vcRef, _renderer, _cfr, ngZone, _service, _calendar) {
        this._parserFormatter = _parserFormatter;
        this._elRef = _elRef;
        this._vcRef = _vcRef;
        this._renderer = _renderer;
        this._cfr = _cfr;
        this._service = _service;
        this._calendar = _calendar;
        this._cRef = null;
        /**
         * Placement of a datepicker popup. Accepts: "top", "bottom", "left", "right", "bottom-left",
         * "bottom-right" etc.
         */
        this.placement = 'bottom-left';
        /**
         * An event fired when navigation happens and currently displayed month changes.
         * See NgbDatepickerNavigateEvent for the payload info.
         */
        this.navigate = new EventEmitter();
        this._onChange = (_) => { };
        this._onTouched = () => { };
        this._validatorChange = () => { };
        this._zoneSubscription = ngZone.onStable.subscribe(() => {
            if (this._cRef) {
                positionElements$1(this._elRef.nativeElement, this._cRef.location.nativeElement, this.placement);
            }
        });
    }
    registerOnChange(fn) { this._onChange = fn; }
    registerOnTouched(fn) { this._onTouched = fn; }
    registerOnValidatorChange(fn) { this._validatorChange = fn; }
    ;
    setDisabledState(isDisabled) {
        this._renderer.setProperty(this._elRef.nativeElement, 'disabled', isDisabled);
        if (this.isOpen()) {
            this._cRef.instance.setDisabledState(isDisabled);
        }
    }
    validate(c) {
        const value = c.value;
        if (value === null || value === undefined) {
            return null;
        }
        if (!this._calendar.isValid(value)) {
            return { 'ngbDate': { invalid: c.value } };
        }
        if (this.minDate && NgbDate$1.from(value).before(NgbDate$1.from(this.minDate))) {
            return { 'ngbDate': { requiredBefore: this.minDate } };
        }
        if (this.maxDate && NgbDate$1.from(value).after(NgbDate$1.from(this.maxDate))) {
            return { 'ngbDate': { requiredAfter: this.maxDate } };
        }
    }
    writeValue(value) {
        const ngbDate = value ? new NgbDate$1(value.year, value.month, value.day) : null;
        this._model = this._calendar.isValid(value) ? ngbDate : null;
        this._writeModelValue(this._model);
    }
    manualDateChange(value, updateView = false) {
        this._model = this._service.toValidDate(this._parserFormatter.parse(value), null);
        this._onChange(this._model ? this._model.toStruct() : (value === '' ? null : value));
        if (updateView && this._model) {
            this._writeModelValue(this._model);
        }
    }
    isOpen() { return !!this._cRef; }
    /**
     * Opens the datepicker with the selected date indicated by the ngModel value.
     */
    open() {
        if (!this.isOpen()) {
            const cf = this._cfr.resolveComponentFactory(RplCalendar);
            this._cRef = this._vcRef.createComponent(cf);
            this._applyPopupStyling(this._cRef.location.nativeElement);
            this._cRef.instance.writeValue(this._model);
            this._applyDatepickerInputs(this._cRef.instance);
            this._subscribeForDatepickerOutputs(this._cRef.instance);
            this._cRef.instance.ngOnInit();
            // date selection event handling
            this._cRef.instance.registerOnChange((selectedDate) => {
                this.writeValue(selectedDate);
                this._onChange(selectedDate);
                this.close();
            });
            // focus handling
            this._cRef.instance.focus();
        }
    }
    /**
     * Closes the datepicker popup.
     */
    close() {
        if (this.isOpen()) {
            this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView));
            this._cRef = null;
        }
    }
    /**
     * Toggles the datepicker popup (opens when closed and closes when opened).
     */
    toggle() {
        if (this.isOpen()) {
            this.close();
        }
        else {
            this.open();
        }
    }
    /**
     * Navigates current view to provided date.
     * With default calendar we use ISO 8601: 'month' is 1=Jan ... 12=Dec.
     * If nothing or invalid date provided calendar will open current month.
     * Use 'startDate' input as an alternative
     */
    navigateTo(date) {
        if (this.isOpen()) {
            this._cRef.instance.navigateTo(date);
        }
    }
    onBlur() { this._onTouched(); }
    ngOnChanges(changes) {
        if (changes['minDate'] || changes['maxDate']) {
            this._validatorChange();
        }
    }
    ngOnDestroy() {
        this.close();
        this._zoneSubscription.unsubscribe();
    }
    _applyDatepickerInputs(datepickerInstance) {
        ['dayTemplate', 'displayMonths', 'firstDayOfWeek', 'markDisabled', 'minDate', 'maxDate', 'navigation',
            'outsideDays', 'showNavigation', 'showWeekdays', 'showWeekNumbers']
            .forEach((optionName) => {
            if (this[optionName] !== undefined) {
                datepickerInstance[optionName] = this[optionName];
            }
        });
        datepickerInstance.startDate = this.startDate || this._model;
    }
    _applyPopupStyling(nativeElement) {
        this._renderer.addClass(nativeElement, 'dropdown-menu');
        this._renderer.setStyle(nativeElement, 'padding', '0');
    }
    _subscribeForDatepickerOutputs(datepickerInstance) {
        datepickerInstance.navigate.subscribe((date) => this.navigate.emit(date));
    }
    _writeModelValue(model) {
        this._renderer.setProperty(this._elRef.nativeElement, 'value', this._parserFormatter.format(model));
        if (this.isOpen()) {
            this._cRef.instance.writeValue(model);
            this._onTouched();
        }
    }
};
__decorate$29([
    Input(),
    __metadata$16("design:type", TemplateRef)
], NgbInputDatepicker$2.prototype, "dayTemplate", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Number)
], NgbInputDatepicker$2.prototype, "displayMonths", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Number)
], NgbInputDatepicker$2.prototype, "firstDayOfWeek", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Function)
], NgbInputDatepicker$2.prototype, "markDisabled", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Object)
], NgbInputDatepicker$2.prototype, "minDate", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Object)
], NgbInputDatepicker$2.prototype, "maxDate", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", String)
], NgbInputDatepicker$2.prototype, "navigation", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", String)
], NgbInputDatepicker$2.prototype, "outsideDays", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Object)
], NgbInputDatepicker$2.prototype, "placement", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Boolean)
], NgbInputDatepicker$2.prototype, "showWeekdays", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Boolean)
], NgbInputDatepicker$2.prototype, "showWeekNumbers", void 0);
__decorate$29([
    Input(),
    __metadata$16("design:type", Object)
], NgbInputDatepicker$2.prototype, "startDate", void 0);
__decorate$29([
    Output(),
    __metadata$16("design:type", Object)
], NgbInputDatepicker$2.prototype, "navigate", void 0);
NgbInputDatepicker$2 = __decorate$29([
    Directive({
        selector: 'input[rplCalendar]',
        exportAs: 'rplCalendar',
        host: {
            '(input)': 'manualDateChange($event.target.value)',
            '(change)': 'manualDateChange($event.target.value, true)',
            '(keyup.esc)': 'close()',
            '(blur)': 'onBlur()'
        },
        providers: [NGB_DATEPICKER_VALUE_ACCESSOR$2, NGB_DATEPICKER_VALIDATOR$1, NgbDatepickerService$1]
    }),
    __metadata$16("design:paramtypes", [NgbDateParserFormatter$2, ElementRef, ViewContainerRef,
        Renderer2, ComponentFactoryResolver, NgZone,
        NgbDatepickerService$1, NgbCalendar$1])
], NgbInputDatepicker$2);

var __decorate$30 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$17 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerDayView$1 = class NgbDatepickerDayView {
    isMuted() { return !this.selected && (this.date.month !== this.currentMonth || this.disabled); }
    abilitaGiorni(data) {
        let buffer = new Date(data.year, data.month - 1, data.day);
        let startDate = new Date(this.startDateEnabled.year, this.startDateEnabled.month - 1, this.startDateEnabled.day);
        let endDate = new Date(this.endDateEnabled.year, this.endDateEnabled.month - 1, this.endDateEnabled.day);
        if (startDate <= buffer && buffer <= endDate) {
            return true;
        }
        return false;
    }
};
__decorate$30([
    Input(),
    __metadata$17("design:type", Number)
], NgbDatepickerDayView$1.prototype, "currentMonth", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Object)
], NgbDatepickerDayView$1.prototype, "date", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Boolean)
], NgbDatepickerDayView$1.prototype, "disabled", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Boolean)
], NgbDatepickerDayView$1.prototype, "focused", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Boolean)
], NgbDatepickerDayView$1.prototype, "selected", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Object)
], NgbDatepickerDayView$1.prototype, "startDateEnabled", void 0);
__decorate$30([
    Input(),
    __metadata$17("design:type", Object)
], NgbDatepickerDayView$1.prototype, "endDateEnabled", void 0);
NgbDatepickerDayView$1 = __decorate$30([
    Component({
        selector: '[ngbDatepickerDayView]',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'btn-secondary',
            '[class.bg-primary]': 'selected',
            '[class.text-white]': 'selected',
            '[class.text-muted]': 'isMuted()',
            '[class.outside]': 'isMuted()',
            '[class.active]': 'focused'
        },
        template: "<div [ngClass]=\" abilitaGiorni(date) ? 'ngbdatepickerdayview' : 'ngbdatepickerdayviewdisabled'\">{{ date.day }}</div>",
        styles: [":host{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem}:host.outside{opacity:.5}.ngbdatepickerdayview{border-radius:0!important;box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:45px!important;vertical-align:middle}.ngbdatepickerdayviewdisabled{box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:45px!important;vertical-align:middle;background-color:gray;color:#fff} /*# sourceMappingURL=datepicker-day-view.css.map */ "],
    })
], NgbDatepickerDayView$1);

var __decorate$31 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$18 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerReplyYearsView = class NgbDatepickerReplyYearsView {
    isMuted() { return false; }
    ;
    abilitaAnni(data) {
        if (this.startDateEnabled.year <= data.number && data.number <= this.endDateEnabled.year) {
            return true;
        }
        return false;
    }
};
__decorate$31([
    Input(),
    __metadata$18("design:type", Number)
], NgbDatepickerReplyYearsView.prototype, "currentMonth", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Object)
], NgbDatepickerReplyYearsView.prototype, "year", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Boolean)
], NgbDatepickerReplyYearsView.prototype, "disabled", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Boolean)
], NgbDatepickerReplyYearsView.prototype, "focused", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Boolean)
], NgbDatepickerReplyYearsView.prototype, "selected", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Object)
], NgbDatepickerReplyYearsView.prototype, "startDateEnabled", void 0);
__decorate$31([
    Input(),
    __metadata$18("design:type", Object)
], NgbDatepickerReplyYearsView.prototype, "endDateEnabled", void 0);
NgbDatepickerReplyYearsView = __decorate$31([
    Component({
        selector: '[ngbDatepickerReplyYearsView]',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'btn-secondary-years',
            '[class.bg-primary]': 'selected',
            '[class.text-white]': 'selected',
            '[class.text-muted]': 'isMuted()',
            '[class.outside]': 'isMuted()',
            '[class.active]': 'focused'
        },
        template: "<div [ngClass]=\" abilitaAnni(year) ? 'ngbDatepickerReplyYearsView' : 'ngbDatepickerReplyYearsViewdisabled disabledView'\">{{ year.name }}</div>",
        styles: [":host{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem}:host.outside{opacity:.5} /*# sourceMappingURL=datepicker-reply-years-view.css.map */ "],
    })
], NgbDatepickerReplyYearsView);

var __decorate$32 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$19 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerReplyMonthView = class NgbDatepickerReplyMonthView {
    isMuted() { return false; }
    ;
    abilitaMesi(data) {
        if (this.startDateEnabled.month <= data.number && data.number <= this.endDateEnabled.month && (this.startDateEnabled.year <= this.year && this.year <= this.endDateEnabled.year)) {
            return true;
        }
        return false;
    }
};
__decorate$32([
    Input(),
    __metadata$19("design:type", Number)
], NgbDatepickerReplyMonthView.prototype, "currentMonth", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Object)
], NgbDatepickerReplyMonthView.prototype, "mese", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Object)
], NgbDatepickerReplyMonthView.prototype, "year", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Boolean)
], NgbDatepickerReplyMonthView.prototype, "disabled", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Boolean)
], NgbDatepickerReplyMonthView.prototype, "focused", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Boolean)
], NgbDatepickerReplyMonthView.prototype, "selected", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Object)
], NgbDatepickerReplyMonthView.prototype, "startDateEnabled", void 0);
__decorate$32([
    Input(),
    __metadata$19("design:type", Object)
], NgbDatepickerReplyMonthView.prototype, "endDateEnabled", void 0);
NgbDatepickerReplyMonthView = __decorate$32([
    Component({
        selector: '[ngbDatepickerReplyMonthView]',
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: {
            'class': 'btn-secondary-month',
            '[class.bg-primary]': 'selected',
            '[class.text-white]': 'selected',
            '[class.text-muted]': 'isMuted()',
            '[class.outside]': 'isMuted()',
            '[class.active]': 'focused'
        },
        template: "<div [ngClass]=\" abilitaMesi(mese) ? 'ngbdatepickerreplymonthview' : 'ngbdatepickerreplymonthviewdisabled disabledView'\">{{ mese.name }}</div>",
        styles: [":host{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem}:host.outside{opacity:.5} /*# sourceMappingURL=datepicker-reply-month-view.css.map */ "],
    })
], NgbDatepickerReplyMonthView);

var __decorate$33 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$20 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NgbDatepickerNavigationSelect$1 = class NgbDatepickerNavigationSelect {
    constructor(i18n, calendar) {
        this.i18n = i18n;
        this.calendar = calendar;
        this.years = [];
        this.select = new EventEmitter();
        this.months = calendar.getMonths();
    }
    ngOnChanges(changes) {
        if (changes['maxDate'] || changes['minDate'] || changes['date']) {
            this._generateYears();
            this._generateMonths();
        }
    }
    changeMonth(month) { this.select.emit(new NgbDate$1(this.date.year, toInteger$1(month), 1)); }
    changeYear(year) { this.select.emit(new NgbDate$1(toInteger$1(year), this.date.month, 1)); }
    _generateMonths() {
        this.months = this.calendar.getMonths();
        if (this.date && this.date.year === this.minDate.year) {
            const index = this.months.findIndex(month => month === this.minDate.month);
            this.months = this.months.slice(index);
        }
        if (this.date && this.date.year === this.maxDate.year) {
            const index = this.months.findIndex(month => month === this.maxDate.month);
            this.months = this.months.slice(0, index + 1);
        }
    }
    _generateYears() {
        this.years = Array.from({ length: this.maxDate.year - this.minDate.year + 1 }, (e, i) => this.minDate.year + i);
    }
};
__decorate$33([
    Input(),
    __metadata$20("design:type", NgbDate$1)
], NgbDatepickerNavigationSelect$1.prototype, "date", void 0);
__decorate$33([
    Input(),
    __metadata$20("design:type", Boolean)
], NgbDatepickerNavigationSelect$1.prototype, "disabled", void 0);
__decorate$33([
    Input(),
    __metadata$20("design:type", NgbDate$1)
], NgbDatepickerNavigationSelect$1.prototype, "maxDate", void 0);
__decorate$33([
    Input(),
    __metadata$20("design:type", NgbDate$1)
], NgbDatepickerNavigationSelect$1.prototype, "minDate", void 0);
__decorate$33([
    Output(),
    __metadata$20("design:type", Object)
], NgbDatepickerNavigationSelect$1.prototype, "select", void 0);
NgbDatepickerNavigationSelect$1 = __decorate$33([
    Component({
        selector: 'ngb-datepicker-navigation-select',
        changeDetection: ChangeDetectionStrategy.OnPush,
        template: "<select [disabled]=\"disabled\" class=\"custom-select d-inline-block\" [value]=\"date?.month\" (change)=\"changeMonth($event.target.value)\" tabindex=\"-1\"><option *ngFor=\"let m of months\" [value]=\"m\">{{ i18n.getMonthShortName(m) }}</option></select> <select [disabled]=\"disabled\" class=\"custom-select d-inline-block\" [value]=\"date?.year\" (change)=\"changeYear($event.target.value)\" tabindex=\"-1\"><option *ngFor=\"let y of years\" [value]=\"y\">{{ y }}</option></select>",
        styles: ["select{padding:.25rem .5rem;font-size:.875rem;line-height:1.25;height:inherit;width:50%} /*# sourceMappingURL=datepicker-navigation-select.css.map */ "],
    }),
    __metadata$20("design:paramtypes", [NgbDatepickerI18n$2, NgbCalendar$1])
], NgbDatepickerNavigationSelect$1);

var __decorate$35 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NgbCalendarHijri$1 = class NgbCalendarHijri extends NgbCalendar$1 {
    getDaysPerWeek() { return 7; }
    getMonths() { return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; }
    getWeeksPerMonth() { return 6; }
    isValid(date) {
        return date && isNumber$1(date.year) && isNumber$1(date.month) && isNumber$1(date.day) &&
            !isNaN(this.toGregorian(date).getTime());
    }
    setDay(date, day) {
        day = +day;
        let mDays = this.getDaysInIslamicMonth(date.month, date.year);
        if (day <= 0) {
            while (day <= 0) {
                date = this.setMonth(date, date.month - 1);
                mDays = this.getDaysInIslamicMonth(date.month, date.year);
                day += mDays;
            }
        }
        else if (day > mDays) {
            while (day > mDays) {
                day -= mDays;
                date = this.setMonth(date, date.month + 1);
                mDays = this.getDaysInIslamicMonth(date.month, date.year);
            }
        }
        date.day = day;
        return date;
    }
    setMonth(date, month) {
        month = +month;
        date.year = date.year + Math.floor((month - 1) / 12);
        date.month = Math.floor(((month - 1) % 12 + 12) % 12) + 1;
        return date;
    }
    setYear(date, yearValue) {
        date.year = +yearValue;
        return date;
    }
    _isIslamicLeapYear(year) { return (14 + 11 * year) % 30 < 11; }
    /**
     * Returns the start of Hijri Month.
     * `month` is 0 for Muharram, 1 for Safar, etc.
     * `year` is any Hijri year.
     */
    _getMonthStart(year, month) {
        return Math.ceil(29.5 * month) + (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0);
    }
    /**
     * Returns the start of Hijri year.
     * `year` is any Hijri year.
     */
    _getYearStart(year) { return (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0); }
};
NgbCalendarHijri$1 = __decorate$35([
    Injectable()
], NgbCalendarHijri$1);

var __decorate$34 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function isGregorianLeapYear$1(date) {
    const year = date.getFullYear();
    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
}
function mod$1(a, b) {
    return a - b * Math.floor(a / b);
}
/**
 * The civil calendar is one type of Hijri calendars used in islamic countries.
 * Uses a fixed cycle of alternating 29- and 30-day months,
 * with a leap day added to the last month of 11 out of every 30 years.
 * http://cldr.unicode.org/development/development-process/design-proposals/islamic-calendar-types
 * All the calculations here are based on the equations from "Calendrical Calculations" By Edward M. Reingold, Nachum
 * Dershowitz.
 */
const GREGORIAN_EPOCH$1 = 1721425.5;
const ISLAMIC_EPOCH$1 = 1948439.5;
let NgbCalendarIslamicCivil$1 = class NgbCalendarIslamicCivil extends NgbCalendarHijri$1 {
    /**
     * Returns the equivalent islamic(civil) date value for a give input Gregorian date.
     * `gdate` is a JS Date to be converted to Hijri.
     */
    fromGregorian(gdate) {
        const date = new Date(gdate);
        const gYear = date.getFullYear(), gMonth = date.getMonth(), gDay = date.getDate();
        let julianDay = GREGORIAN_EPOCH$1 - 1 + 365 * (gYear - 1) + Math.floor((gYear - 1) / 4) +
            -Math.floor((gYear - 1) / 100) + Math.floor((gYear - 1) / 400) +
            Math.floor((367 * (gMonth + 1) - 362) / 12 + (gMonth + 1 <= 2 ? 0 : isGregorianLeapYear$1(date) ? -1 : -2) + gDay);
        julianDay = Math.floor(julianDay) + 0.5;
        const days = julianDay - ISLAMIC_EPOCH$1;
        const hYear = Math.floor((30 * days + 10646) / 10631.0);
        let hMonth = Math.ceil((days - 29 - this._getYearStart(hYear)) / 29.5);
        hMonth = Math.min(hMonth, 11);
        const hDay = Math.ceil(days - this._getMonthStart(hYear, hMonth)) + 1;
        return new NgbDate$1(hYear, hMonth + 1, hDay);
    }
    /**
     * Returns the equivalent JS date value for a give input islamic(civil) date.
     * `hijriDate` is an islamic(civil) date to be converted to Gregorian.
     */
    toGregorian(hijriDate) {
        const hYear = hijriDate.year;
        const hMonth = hijriDate.month - 1;
        const hDate = hijriDate.day;
        const julianDay = hDate + Math.ceil(29.5 * hMonth) + (hYear - 1) * 354 + Math.floor((3 + 11 * hYear) / 30) + ISLAMIC_EPOCH$1 - 1;
        const wjd = Math.floor(julianDay - 0.5) + 0.5, depoch = wjd - GREGORIAN_EPOCH$1, quadricent = Math.floor(depoch / 146097), dqc = mod$1(depoch, 146097), cent = Math.floor(dqc / 36524), dcent = mod$1(dqc, 36524), quad = Math.floor(dcent / 1461), dquad = mod$1(dcent, 1461), yindex = Math.floor(dquad / 365);
        let year = quadricent * 400 + cent * 100 + quad * 4 + yindex;
        if (!(cent === 4 || yindex === 4)) {
            year++;
        }
        const gYearStart = GREGORIAN_EPOCH$1 + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400);
        const yearday = wjd - gYearStart;
        const tjd = GREGORIAN_EPOCH$1 - 1 + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400) + Math.floor(739 / 12 + (isGregorianLeapYear$1(new Date(year, 3, 1)) ? -1 : -2) + 1);
        const leapadj = wjd < tjd ? 0 : isGregorianLeapYear$1(new Date(year, 3, 1)) ? 1 : 2;
        const month = Math.floor(((yearday + leapadj) * 12 + 373) / 367);
        const tjd2 = GREGORIAN_EPOCH$1 - 1 + 365 * (year - 1) + Math.floor((year - 1) / 4) - Math.floor((year - 1) / 100) +
            Math.floor((year - 1) / 400) +
            Math.floor((367 * month - 362) / 12 + (month <= 2 ? 0 : isGregorianLeapYear$1(new Date(year, month - 1, 1)) ? -1 : -2) +
                1);
        const day = wjd - tjd2 + 1;
        return new Date(year, month - 1, day);
    }
    /**
     * Returns the number of days in a specific Hijri month.
     * `month` is 1 for Muharram, 2 for Safar, etc.
     * `year` is any Hijri year.
     */
    getDaysInIslamicMonth(month, year) {
        year = year + Math.floor(month / 13);
        month = ((month - 1) % 12) + 1;
        let length = 29 + month % 2;
        if (month === 12 && this._isIslamicLeapYear(year)) {
            length++;
        }
        return length;
    }
    getNext(date, period = 'd', number = 1) {
        date = NgbDate$1.from(date);
        switch (period) {
            case 'y':
                date = this.setYear(date, date.year + number);
                date.month = 1;
                date.day = 1;
                return date;
            case 'm':
                date = this.setMonth(date, date.month + number);
                date.day = 1;
                return date;
            case 'd':
                return this.setDay(date, date.day + number);
            default:
                return date;
        }
    }
    getPrev(date, period = 'd', number = 1) { return this.getNext(date, period, -number); }
    getWeekday(date) {
        const day = this.toGregorian(date).getDay();
        // in JS Date Sun=0, in ISO 8601 Sun=7
        return day === 0 ? 7 : day;
    }
    getWeekNumber(week, firstDayOfWeek) {
        // in JS Date Sun=0, in ISO 8601 Sun=7
        if (firstDayOfWeek === 7) {
            firstDayOfWeek = 0;
        }
        const thursdayIndex = (4 + 7 - firstDayOfWeek) % 7;
        const date = week[thursdayIndex];
        const jsDate = this.toGregorian(date);
        jsDate.setDate(jsDate.getDate() + 4 - (jsDate.getDay() || 7)); // Thursday
        const time = jsDate.getTime();
        const MuhDate = this.toGregorian(new NgbDate$1(date.year, 1, 1)); // Compare with Muharram 1
        return Math.floor(Math.round((time - MuhDate.getTime()) / 86400000) / 7) + 1;
    }
    getToday() { return this.fromGregorian(new Date()); }
};
NgbCalendarIslamicCivil$1 = __decorate$34([
    Injectable()
], NgbCalendarIslamicCivil$1);

var __decorate$19 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let RplCalendarModule = RplCalendarModule_1 = class RplCalendarModule {
    static forRoot() {
        return {
            ngModule: RplCalendarModule_1,
            providers: [
                { provide: NgbCalendar$1, useClass: NgbCalendarGregorian$1 },
                { provide: NgbDatepickerI18n$2, useClass: NgbDatepickerI18nDefault$1 },
                { provide: NgbDateParserFormatter$2, useClass: NgbDateISOParserFormatter$1 }, NgbDatepickerConfig$1
            ]
        };
    }
};
RplCalendarModule = RplCalendarModule_1 = __decorate$19([
    NgModule({
        declarations: [
            RplCalendar,
            NgbDatepickerRoutingView,
            NgbDatepickerNavigation$1,
            NgbDatepickerNavigationSelect$1,
            NgbDatepickerDayView$1,
            NgbDatepickerReplyMonthView,
            NgbDatepickerReplyYearsView,
            NgbInputDatepicker$2
        ],
        exports: [RplCalendar, NgbInputDatepicker$2],
        imports: [CommonModule, FormsModule],
        entryComponents: [RplCalendar]
    })
], RplCalendarModule);
var RplCalendarModule_1;

var __decorate$37 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$22 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const I18N_VALUES$1 = {
    'it': {
        weekdays: ['Lu', 'Ma', 'Me', 'Gi', 'Ve', 'Sa', 'Do'],
        months: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],
        fullMonths: ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
            'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre']
    }
    // other languages you would support
};
// Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
// use the Angular LOCALE_ID value
let I18n$1 = class I18n {
    // Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
    // use the Angular LOCALE_ID value
    constructor() {
        this.language = 'it';
    }
};
I18n$1 = __decorate$37([
    Injectable()
], I18n$1);
// Define custom service providing the months and weekdays translations
let NbpDatepickerItI18n$1 = class NbpDatepickerItI18n extends NgbDatepickerI18n$2 {
    constructor(_i18n) {
        super();
        this._i18n = _i18n;
        this.model = { year: 2017, month: 8, day: 8 };
    }
    getWeekdayShortName(weekday) {
        return I18N_VALUES$1[this._i18n.language].weekdays[weekday - 1];
    }
    getMonthShortName(month) {
        return I18N_VALUES$1[this._i18n.language].months[month - 1];
    }
    getMonthFullName(month) {
        return I18N_VALUES$1[this._i18n.language].fullMonths[month - 1];
    }
};
NbpDatepickerItI18n$1 = __decorate$37([
    Injectable(),
    __metadata$22("design:paramtypes", [I18n$1])
], NbpDatepickerItI18n$1);
let NbpDatepickerConfiguration$1 = class NbpDatepickerConfiguration {
    constructor() {
        this.separator = '.';
    }
};
NbpDatepickerConfiguration$1 = __decorate$37([
    Injectable()
], NbpDatepickerConfiguration$1);
let NbpItDateParserFormatter$1 = class NbpItDateParserFormatter extends NgbDateParserFormatter$2 {
    constructor(configuration) {
        super();
        this.configuration = configuration;
    }
    padNumber(value) {
        if (this.isNumber(value)) {
            return `0${value}`.slice(-2);
        }
        else {
            return '';
        }
    }
    isNumber(value) {
        return !isNaN(this.toInteger(value));
    }
    toInteger(value) {
        return parseInt(`${value}`, 10);
    }
    parse(value) {
        if (value) {
            const dateParts = value.trim().split('.');
            if (dateParts.length === 1 && this.isNumber(dateParts[0])) {
                return { day: this.toInteger(dateParts[0]), month: null, year: null };
            }
            else if (dateParts.length === 2 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: null };
            }
            else if (dateParts.length === 3 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1]) && this.isNumber(dateParts[2])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: this.toInteger(dateParts[2]) };
            }
        }
        return null;
    }
    format(date) {
        return date ?
            `${this.isNumber(date.day) ? this.padNumber(date.day) : ''}${this.configuration.separator}${this.isNumber(date.month) ? this.padNumber(date.month) : ''}${this.configuration.separator}${date.year}` : '';
    }
};
NbpItDateParserFormatter$1 = __decorate$37([
    Injectable(),
    __metadata$22("design:paramtypes", [NbpDatepickerConfiguration$1])
], NbpItDateParserFormatter$1);

var __decorate$36 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$21 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$1 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-calendar-generic to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_CALENDAR_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpCalendarGenericComponent),
    multi: true
};
const NBP_INPUT_CALENDAR_ELEMENT_BASE = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpCalendarGenericComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpCombo component */
let nextId$2 = 0;
let NbpCalendarGenericComponent = class NbpCalendarGenericComponent extends NbpInputElementBase {
    constructor(enabledRange, validatori, asyncValidatori, parentFormContainer, element, inj) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.enabledRange = enabledRange;
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.element = element;
        this.inj = inj;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-calendar-generic-${++nextId$2}`;
        /**
         * testo del placeholder
         * Valore di Default: "dd.mm.yyyy"
         */
        this.placeholder = 'dd.mm.yyyy';
        this.showErrorLabel = true;
        this.ngbMaxDate = { day: 31, month: 12, year: 2050 };
        this.nbpMaxDate = new Date(this.ngbMaxDate.year, (this.ngbMaxDate.month - 1), this.ngbMaxDate.day);
        // set maxDate(maxDate: Date) {
        //   this.nbpMaxDate = maxDate;
        //   this.ngbMaxDate = this.parseDateStructFromDate(maxDate) as NgbDateStruct;
        // }
        this.ngbMinDate = { day: 1, month: 1, year: 1970 };
        this.nbpMinDate = new Date(this.ngbMinDate.year, (this.ngbMinDate.month - 1), this.ngbMinDate.day);
        this.nbpOnNavigate = new EventEmitter();
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
    }
    /**
   * (Opzionale)
   * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
   * Valore di default false
   */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * La massima data accettata dal componente e visualizzata nel calendario
     * Valore di Default: 31.12.2050
     */
    get maxDate() {
        return this.nbpMaxDate;
    }
    /**
     * La minima data accettata dal componente e visualizzata nel calendario
     * Valore di Default: 01.01.1970
     */
    get minDate() {
        return this.nbpMinDate;
    }
    /**
     * Data di inizio delle date abilitate/selezionabili.
     */
    get startDateEnabled() {
        return this._startDateEnabled;
    }
    ;
    set startDateEnabled(value) { this._startDateEnabled = value ? value : this.ngbMinDate; }
    /**
     * Data di fine delle date abilitate/selezionabili.
     */
    get endDateEnabled() {
        return this._endDateEnabled;
    }
    ;
    set endDateEnabled(value) { this._endDateEnabled = value ? value : this.ngbMaxDate; }
    /**
     * Flag che abilita/disabilita le funzionalità associate al calendar
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato al calendar
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        this.ngControl = this.inj.get(NgControl);
        this.enabledRange.startDate = this.ngbMinDate;
        this.enabledRange.endDate = this.ngbMaxDate;
        if (this.startDateEnabled)
            this.enabledRange.startDate = this.startDateEnabled;
        if (this.endDateEnabled)
            this.enabledRange.endDate = this.endDateEnabled;
        if (this.firstFocus) {
            this.elementRef.nativeElement.focus();
            this.elementRef.nativeElement.click();
            // this._focusActive = true;
        }
    }
    validaData(data) {
        let buffer = new Date(data.year, data.month - 1, data.day);
        let startDate = new Date(this._startDateEnabled.year, this._startDateEnabled.month - 1, this._startDateEnabled.day);
        let endDate = new Date(this._endDateEnabled.year, this._endDateEnabled.month - 1, this._endDateEnabled.day);
        if (startDate <= buffer && buffer <= endDate) {
            return true;
        }
        return false;
    }
    _ngbModelChanged(event) {
        // if(!this.validaData(event)){
        //   return this._ngbModel.invalid = true;
        // }
        this.value = this.parseDateFromDateStruct(event);
    }
    parseDateFromDateStruct(value) {
        return (value && value instanceof Date) ? new Date(value.year, value.month - 1, value.day) : value;
    }
    _onNavigate(navigateEvent) {
        let _current = navigateEvent.current
            ? new Date(navigateEvent.current.year, (navigateEvent.current.month - 1), 1)
            : navigateEvent.current;
        let _next = navigateEvent.next.year
            ? new Date(navigateEvent.next.year, (navigateEvent.next.month - 1), 1)
            : navigateEvent.next.year;
        this.nbpOnNavigate.emit({ current: _current, next: _next });
    }
};
__decorate$36([
    Input(),
    __metadata$21("design:type", RegExp)
], NbpCalendarGenericComponent.prototype, "pattern", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", String)
], NbpCalendarGenericComponent.prototype, "name", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", String)
], NbpCalendarGenericComponent.prototype, "id", void 0);
__decorate$36([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$21("design:type", Boolean),
    __metadata$21("design:paramtypes", [Object])
], NbpCalendarGenericComponent.prototype, "nbpShowValidation", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", String)
], NbpCalendarGenericComponent.prototype, "placeholder", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", String)
], NbpCalendarGenericComponent.prototype, "nbpErrorMessage", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", Boolean)
], NbpCalendarGenericComponent.prototype, "showErrorLabel", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", Object),
    __metadata$21("design:paramtypes", [])
], NbpCalendarGenericComponent.prototype, "maxDate", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", Object),
    __metadata$21("design:paramtypes", [])
], NbpCalendarGenericComponent.prototype, "minDate", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", Object),
    __metadata$21("design:paramtypes", [Object])
], NbpCalendarGenericComponent.prototype, "startDateEnabled", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", Object),
    __metadata$21("design:paramtypes", [Object])
], NbpCalendarGenericComponent.prototype, "endDateEnabled", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", Boolean),
    __metadata$21("design:paramtypes", [Object])
], NbpCalendarGenericComponent.prototype, "disabled", null);
__decorate$36([
    Input(),
    __metadata$21("design:type", Boolean),
    __metadata$21("design:paramtypes", [Object])
], NbpCalendarGenericComponent.prototype, "required", null);
__decorate$36([
    Output(),
    __metadata$21("design:type", EventEmitter)
], NbpCalendarGenericComponent.prototype, "nbpOnNavigate", void 0);
__decorate$36([
    ViewChild('rplDatepicker'),
    __metadata$21("design:type", NgbInputDatepicker$2)
], NbpCalendarGenericComponent.prototype, "rplDatepicker", void 0);
__decorate$36([
    ViewChild(NgModel),
    __metadata$21("design:type", NgModel)
], NbpCalendarGenericComponent.prototype, "model", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", Boolean)
], NbpCalendarGenericComponent.prototype, "firstFocus", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", Boolean)
], NbpCalendarGenericComponent.prototype, "focusOn", void 0);
__decorate$36([
    Input(),
    __metadata$21("design:type", Number)
], NbpCalendarGenericComponent.prototype, "tabindex", void 0);
__decorate$36([
    ViewChild('autoFocusCalendar'),
    __metadata$21("design:type", ElementRef)
], NbpCalendarGenericComponent.prototype, "elementRef", void 0);
NbpCalendarGenericComponent = __decorate$36([
    Component({
        selector: 'nbp-calendar-generic',
        template: "<div class=\"form-group\"><div class=\"input-group\"><input rplCalendar #rplCalendar=\"rplCalendar\" [id]=\"id\" [name]=\"name\" [ngModel]=\"value\" (ngModelChange)=\"_ngbModelChanged($event)\" [required]=\"required\" [disabled]=\"disabled\" [maxDate]=\"ngbMaxDate\" [minDate]=\"ngbMinDate\" (navigate)=\"_onNavigate($event)\" navigation=\"arrows\" class=\"form-control\" [pattern]=\"pattern\" placeholder=\"dd.mm.yyyy\" [tabindex]=\"tabindex\" #autoFocusCalendar><i class=\"icon-calendar button-icon\" [ngClass]=\"{'disabled': disabled}\" (click)=\"rplCalendar.toggle()\"></i></div></div>",
        styles: [".form-control::-ms-clear{display:none;width:0;height:0}.day{border-radius:0!important;box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:2.6em!important;vertical-align:middle;color:#258900;border-left:#d3d3d3 solid 1px;border-right:#d3d3d3 solid 1px;border-bottom:#d3d3d3 solid 1px;border-collapse:separate;border-spacing:0}.icon{width:2rem;height:2rem}.day.greyed{color:#d3d3d3}.day:hover{color:#fff;background-color:#258900;cursor:pointer}:host::ng-deep .header-navigation-date{min-width:133px;min-height:100%;cursor:pointer}:host::ng-deep div[ngbdatepickerreplymonthview]{border-radius:0!important;box-sizing:border-box;text-align:center;min-width:79.2px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important;color:#258900;border-right:#d3d3d3 solid 1px;border-top:#d3d3d3 solid 1px;border-collapse:collapse;border-spacing:0}:host::ng-deep div[ngbdatepickerreplymonthview]:hover .ngbdatepickerreplymonthview{background-color:#c7ecbb;color:#000}:host::ng-deep div[ngbdatepickerreplyyearsview]{border-radius:0!important;box-sizing:border-box;text-align:center;min-width:79.2px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important;color:#258900;border-right:#d3d3d3 solid 1px;border-top:#d3d3d3 solid 1px;border-collapse:collapse;border-spacing:0}:host::ng-deep div[ngbdatepickerreplyyearsview]:hover .ngbDatepickerReplyYearsViewdisabled{background-color:#c7ecbb;color:#000}:host::ng-deep .form-inline{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1em}:host::ng-deep .form-inline .form-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:0}:host::ng-deep .input-group{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host::ng-deep .input-group .form-control,:host::ng-deep .input-group-addon,:host::ng-deep .input-group-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}:host::ng-deep .form-control{display:block;width:100%;height:3.125em;color:#464a4c;background-color:#fff;background-image:none;background-clip:padding-box;border-radius:.15em!important;transition:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid #323232!important}:host::ng-deep .form-control:active:not([disabled]),:host::ng-deep .form-control:focus:not([disabled]){border:1px solid #258900!important}:host::ng-deep .form-control[disabled]{border:1px solid #ccc!important;color:#ccc;user-select:none}:host::ng-deep .input-group-addon{padding:.5em .75em;margin-bottom:0;font-size:1em;font-weight:400;line-height:1.25;color:#258900;text-align:center;background-color:#fff!important;border-top-color:rgba(0,0,0,.15);border-top-style:solid;border-top-width:1px;border-right-color:rgba(0,0,0,.15);border-right-style:solid;border-right-width:1px;border-bottom-color:rgba(0,0,0,.15);border-bottom-style:solid;border-bottom-width:1px;border-left-style:none!important;border-left-width:0!important;border-left-color:none!important}:host::ng-deep .input-group-addon img{width:1.2em;height:1em;cursor:pointer}:host::ng-deep .form-control+.input-group-addon:not(:first-child){border-left:0}:host::ng-deep .button-calendar{background-color:#fff;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:none;color:#258900;right:21px;position:relative;margin-right:-21px}:host::ng-deep .dropdown-menu{position:absolute;top:100%;left:0;display:none;float:left;min-width:10em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#1d1d1d;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;padding:0;top:24px;left:0;border-radius:0!important;border:none!important}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep .rounded{border-radius:.25em}:host::ng-deep .ngb-dp-header{height:4em!important;margin-bottom:-1.5em!important;border-bottom:none!important}:host::ng-deep .pt-1{padding-top:0!important;height:4.25em;margin-bottom:-2em}:host::ng-deep .rounded-top{border-top-right-radius:.25em;border-top-left-radius:.25em;border-radius:0!important}:host::ng-deep .bg-faded{background-color:#fff!important}:host::ng-deep ngb-datepicker-navigation{height:2em;line-height:1.85em}:host::ng-deep .justify-content-between{-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}:host::ng-deep .d-flex{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}:host::ng-deep .btn-link{cursor:pointer;outline:#d3d3d3 solid 1px!important}:host::ng-deep .btn-link,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:focus{border-color:transparent}:host::ng-deep .btn-link,:host::ng-deep .btn-link.active,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:disabled{background-color:transparent}:host::ng-deep .btn-link{font-weight:400;color:#258900;border-radius:0}:host::ng-deep button,:host::ng-deep input,:host::ng-deep select,:host::ng-deep textarea{line-height:inherit}:host::ng-deep [role=button],:host::ng-deep a,:host::ng-deep area,:host::ng-deep button,:host::ng-deep input,:host::ng-deep label,:host::ng-deep select,:host::ng-deep summary,:host::ng-deep textarea{-ms-touch-action:manipulation;touch-action:manipulation}:host::ng-deep button{-webkit-appearance:button}:host::ng-deep button,:host::ng-deep select{text-transform:none}:host::ng-deep button,:host::ng-deep input{overflow:visible}:host::ng-deep button,:host::ng-deep input,:host::ng-deep optgroup,:host::ng-deep select,:host::ng-deep textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}:host::ng-deep .ngb-dp-navigation-chevron::before{border-style:solid;border-width:.1em .1em 0 0!important;content:'';display:inline-block;height:.75em!important;transform:rotate(-135deg);-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);width:.75em!important;margin:0 0 0 .5em!important;color:grey}:host::ng-deep .ngb-dp-navigation-chevron.right:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin:0 .5em 0 0!important}:host::ng-deep .d-block{display:block!important}:host::ng-deep ngb-datepicker-navigation-select.d-block{width:9em!important}:host::ng-deep select{padding:.25em .5em;font-size:.875em;line-height:1.25;height:inherit;width:50%}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep select.custom-select.d-inline-block{padding:.25em .5rem!important;font-size:.875em!important;line-height:1.25;height:inherit;width:50%}:host::ng-deep .custom-select{display:inline-block;max-width:100%;height:calc(4.25em);padding:.375em 1.75em .375em .75em;line-height:1.25;color:#464a4c;vertical-align:middle;border:1px solid rgba(0,0,0,.15);border-radius:.25em;-moz-appearance:none;-webkit-appearance:none}:host::ng-deep .px-1{padding-left:0!important;padding-right:0!important}:host::ng-deep .pb-1{padding-bottom:.25em!important}:host::ng-deep .ngb-dp-month:first-child{margin-left:0!important}:host::ng-deep .ngb-dp-month{pointer-events:none}:host::ng-deep .ml-3{margin-left:1em!important}:host::ng-deep .ngb-dp-day{width:45px!important;height:45px!important;cursor:pointer}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{width:45px!important;height:35px!important}:host::ng-deep .ngb-dp-day{position:relative;box-sizing:border-box}:host::ng-deep .ngb-dp-week.d-flex:not(:first-child){border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week.d-flex:first-child{border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep ngb-datepicker-navigation.d-flex{height:2.5em!important;line-height:1.8em!important;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{line-height:35px!important}:host::ng-deep .text-info{color:#5bc0de!important}:host::ng-deep .font-italic{font-style:italic}:host::ng-deep .outside{opacity:.5}:host::ng-deep ngb-dp-day>div{text-align:center;width:45px;height:45px;line-height:45px;border-radius:0!important}:host::ng-deep div[ngbdatepickerdayview]{border-radius:0!important;box-sizing:border-box;text-align:center;width:45px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important}:host::ng-deep div[ngbdatepickerdayviewdisabled]{border-radius:0!important;box-sizing:border-box;text-align:center;width:45px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important}:host::ng-deep .ngbdatepickerdayviewdisabled{cursor:default}:host::ng-deep .ngbdatepickerreplymonthviewdisabled{cursor:default;opacity:.5;color:#258900!important}:host::ng-deep .ngbdatepickerreplymonthviewdisabled:hover{background-color:#fff!important}:host::ng-deep .ngbDatepickerReplyYearsViewdisabled{cursor:default;opacity:.5;background-color:#fff!important;color:#258900!important}:host::ng-deep .ngbDatepickerReplyYearsViewdisabled:hover{background-color:#fff!important}:host::ng-deep .text-muted{color:#636c72!important}:host::ng-deep .btn-secondary{color:#258900;background-color:#fff;border-color:#ccc;font-weight:700;font-size:.8em}:host::ng-deep .btn-secondary-month{color:#258900;background-color:#fff;border-color:#ccc;font-weight:700;font-size:.8em}:host::ng-deep .btn-secondary-years{color:#258900;background-color:#fff;border-color:#ccc;font-weight:700;font-size:.8em}:host::ng-deep .text-white{color:#fff!important}:host::ng-deep .bg-primary :not(.disabledView){background-color:#258900!important}:host::ng-deep .bg-primary::before{border-bottom:8px solid #fff;border-left:8px solid transparent;border-right:8px solid transparent;position:absolute;top:0;right:-8px;content:'';display:inline-block;width:0;height:0;margin:0;padding:0;transform:rotate(45deg);transform-origin:top}:host::ng-deep .text-center{text-align:center!important}:host::ng-deep .small,:host::ng-deep small{font-size:80%;font-weight:400}:host::ng-deep .ngb-dp-months.pb-1{padding:0!important}:host::ng-deep .input-group>input.form-control{padding-left:.625em;padding-right:2.5em}:host::ng-deep .ngb-dp-day:not(:first-child)>.btn-secondary{border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-day:not(:first-child)>.btn-secondary-month{border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-day:not(:first-child)>.btn-secondary-years{border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-weekday.font-italic{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal!important;font-size:.75em;color:#6f6f6f!important;text-align:center;text-transform:uppercase}:host::ng-deep button.btn-link{color:#258900!important}:host::ng-deep .collapsed{margin-bottom:-2em!important}:host::ng-deep .ngb-dp-month-name{font-size:.8em!important;padding-top:1em!important;font-weight:700;text-transform:uppercase;color:#258900;position:absolute;text-align:center!important;top:0;height:3.2em!important;width:11.4em;line-height:1.42857143em!important;word-wrap:break-word;word-break:break-word;left:0;right:0;margin-left:auto;margin-right:auto}:host::ng-deep .ngb-dp-weekday{width:2.666666666666667em!important}.button-icon{cursor:pointer;position:relative;top:.001em;right:1.6em;z-index:2;color:#258900;font-size:1.5em;line-height:2.083em}.button-icon.disabled{cursor:not-allowed;pointer-events:none;color:#ccc}.contrasto-on :host::ng-deep div[ngbdatepickerdayview]{color:#000}.contrasto-on :host::ng-deep .bg-primary :not(.disabledView){color:#fff!important;background-color:#000!important}.contrasto-on :host::ng-deep div[ngbdatepickerreplymonthview]{color:#000;border:#d3d3d3 solid 1px}.contrasto-on :host::ng-deep div[ngbdatepickerreplymonthview]:hover .ngbdatepickerreplymonthview{background-color:#000;color:#fff}.contrasto-on :host::ng-deep div[ngbdatepickerreplyyearsview]{color:#000;border:#d3d3d3 solid 1px}.contrasto-on :host::ng-deep div[ngbdatepickerreplyyearsview]:hover .ngbDatepickerReplyYearsView{background-color:#000;color:#fff}.contrasto-on :host::ng-deep .ngb-dp-month-name{color:#000}.contrasto-on :host::ng-deep .ngb-dp-weekda{color:#000!important}.contrasto-on :host::ng-deep .ngbdatepickerdayviewdisabled{color:#fff!important;background-color:#000!important;opacity:.5}.contrasto-on :host::ng-deep .ngb-dp-navigation-chevron::before{color:#000!important}.contrasto-on :host::ng-deep .ngb-dp-weekday{color:#000!important}.contrasto-on :host::ng-deep .ngbdatepickerreplymonthviewdisabled{color:#000!important}.contrasto-on :host::ng-deep .ngbDatepickerReplyYearsViewdisabled{color:#000!important}:host-context(.contrasto-on) .button-icon{color:#000} /*# sourceMappingURL=nbp-calendar-generic.component.css.map */ "],
        providers: [
            EnabledRangeService,
            I18n$1,
            NbpDatepickerConfiguration$1,
            { provide: NgbDatepickerI18n$2, useClass: NbpDatepickerItI18n$1 },
            { provide: NgbDateParserFormatter$2, useClass: NbpItDateParserFormatter$1 },
            NBP_CALENDAR_CONTROL_VALUE_ACCESSOR,
            NBP_INPUT_CALENDAR_ELEMENT_BASE
        ]
    }),
    __param$1(1, Optional()), __param$1(1, Inject(NG_VALIDATORS)),
    __param$1(2, Optional()), __param$1(2, Inject(NG_ASYNC_VALIDATORS)),
    __param$1(3, Optional()),
    __metadata$21("design:paramtypes", [EnabledRangeService, Array, Array, NbpFormContainerComponent,
        ElementRef,
        Injector])
], NbpCalendarGenericComponent);

/**
 * Enum per la definizione del colore dei componenti della libreria
 * PRIMARY - Green
 * SECONDARY - White
 * DEFAULT - Grey
 * OUTLINE - Background transparent
 * DEFAULT_L - Grey + Float left
 * DEFAULT_R - Grey + Float right
 * PRIMARY_L - Green + Float left
 * PRIMARY_R - Green + Float right
 */
/**
 * Enum per la definizione del colore dei componenti della libreria
 * PRIMARY - Green
 * SECONDARY - White
 * DEFAULT - Grey
 * OUTLINE - Background transparent
 * DEFAULT_L - Grey + Float left
 * DEFAULT_R - Grey + Float right
 * PRIMARY_L - Green + Float left
 * PRIMARY_R - Green + Float right
 */ var NbpStyle;
(function (NbpStyle) {
    NbpStyle[NbpStyle["PRIMARY"] = 0] = "PRIMARY";
    NbpStyle[NbpStyle["SECONDARY"] = 1] = "SECONDARY";
    NbpStyle[NbpStyle["DEFAULT"] = 2] = "DEFAULT";
    NbpStyle[NbpStyle["OUTLINE"] = 3] = "OUTLINE";
    //modificareply
    NbpStyle[NbpStyle["BACKGROUNDGREEN"] = 4] = "BACKGROUNDGREEN";
    NbpStyle[NbpStyle["BACKGROUNDGRAY"] = 5] = "BACKGROUNDGRAY";
    NbpStyle[NbpStyle["BACKGROUNDGRAYPRIMARY"] = 6] = "BACKGROUNDGRAYPRIMARY";
    NbpStyle[NbpStyle["CHECK"] = 7] = "CHECK";
    NbpStyle[NbpStyle["PROFILE"] = 8] = "PROFILE";
    NbpStyle[NbpStyle["DEFAULT_L"] = 9] = "DEFAULT_L";
    NbpStyle[NbpStyle["DEFAULT_R"] = 10] = "DEFAULT_R";
    NbpStyle[NbpStyle["PRIMARY_L"] = 11] = "PRIMARY_L";
    NbpStyle[NbpStyle["PRIMARY_R"] = 12] = "PRIMARY_R";
})(NbpStyle || (NbpStyle = {}));
/**
 * Enum per la definizione della dimensione dei componenti della libreria
 * LG - Large
 * MD - Medium
 */
var NbpSize;
(function (NbpSize) {
    NbpSize[NbpSize["SM"] = 0] = "SM";
    NbpSize[NbpSize["LG"] = 1] = "LG";
    NbpSize[NbpSize["MD"] = 2] = "MD";
})(NbpSize || (NbpSize = {}));
/**
 * Enum per la definizione della grandezza del font da utilizzare
 */
var NbpFontSize;
(function (NbpFontSize) {
    NbpFontSize[NbpFontSize["SMALL"] = 0] = "SMALL";
    NbpFontSize[NbpFontSize["MEDIUM"] = 1] = "MEDIUM";
    NbpFontSize[NbpFontSize["LARGE"] = 2] = "LARGE";
})(NbpFontSize || (NbpFontSize = {}));
var NbpPipe;
(function (NbpPipe) {
    NbpPipe[NbpPipe["CURRENCY"] = 0] = "CURRENCY";
    NbpPipe[NbpPipe["DATE"] = 1] = "DATE";
    NbpPipe[NbpPipe["DECIMAL"] = 2] = "DECIMAL";
    NbpPipe[NbpPipe["LOWERCASE"] = 3] = "LOWERCASE";
    NbpPipe[NbpPipe["PERCENT"] = 4] = "PERCENT";
    NbpPipe[NbpPipe["UPPERCASE"] = 5] = "UPPERCASE";
    NbpPipe[NbpPipe["CONTO"] = 6] = "CONTO";
})(NbpPipe || (NbpPipe = {}));
/**
 * Enum per la definizione del canale applicativo
 */
var NbpChannel;
(function (NbpChannel) {
    NbpChannel[NbpChannel["ABC"] = 0] = "ABC";
    NbpChannel[NbpChannel["INTRANET"] = 1] = "INTRANET";
    NbpChannel[NbpChannel["IB"] = 2] = "IB";
})(NbpChannel || (NbpChannel = {}));
var NbpLoadingStatus;
(function (NbpLoadingStatus) {
    NbpLoadingStatus[NbpLoadingStatus["START"] = 0] = "START";
    NbpLoadingStatus[NbpLoadingStatus["STOP"] = 1] = "STOP";
})(NbpLoadingStatus || (NbpLoadingStatus = {}));
var NbpAlertType;
(function (NbpAlertType) {
    NbpAlertType[NbpAlertType["INFORMATIVA"] = 0] = "INFORMATIVA";
    NbpAlertType[NbpAlertType["INFORMATIVA_POSITIVA"] = 1] = "INFORMATIVA_POSITIVA";
    NbpAlertType[NbpAlertType["INFORMATIVA_PROMOZIONALE"] = 2] = "INFORMATIVA_PROMOZIONALE";
    NbpAlertType[NbpAlertType["WARNING"] = 3] = "WARNING";
    NbpAlertType[NbpAlertType["WARNING_BLOCCANTE"] = 4] = "WARNING_BLOCCANTE";
})(NbpAlertType || (NbpAlertType = {}));
var NbpStepDimension;
(function (NbpStepDimension) {
    NbpStepDimension[NbpStepDimension["PICCOLO"] = 1] = "PICCOLO";
    NbpStepDimension[NbpStepDimension["MEDIO"] = 2] = "MEDIO";
    NbpStepDimension[NbpStepDimension["GRANDE"] = 3] = "GRANDE";
})(NbpStepDimension || (NbpStepDimension = {}));
/**
 * Enum dei tipi di Eventi/Messaggi gestiti per NDCE
 */
var NbpEmbeddingMessageType;
(function (NbpEmbeddingMessageType) {
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["CJ_READY"] = 1] = "CJ_READY";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["CJ_STEP"] = 2] = "CJ_STEP";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["ERROR"] = 3] = "ERROR";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["FLOATING_MENU_ON"] = 4] = "FLOATING_MENU_ON";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["FLOATING_MENU_OFF"] = 5] = "FLOATING_MENU_OFF";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["GOTO"] = 6] = "GOTO";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["LOADING_WINDOW_START"] = 7] = "LOADING_WINDOW_START";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["LOADING_WINDOW_STOP"] = 8] = "LOADING_WINDOW_STOP";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["MODAL_WINDOW_SHOW"] = 9] = "MODAL_WINDOW_SHOW";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["MODAL_WINDOW_HIDE"] = 10] = "MODAL_WINDOW_HIDE";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["PAGE_SCROLL"] = 11] = "PAGE_SCROLL";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["PAGE_SIZE"] = 12] = "PAGE_SIZE";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["SET_CONTRAST_OFF"] = 13] = "SET_CONTRAST_OFF";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["SET_CONTRAST_ON"] = 14] = "SET_CONTRAST_ON";
    NbpEmbeddingMessageType[NbpEmbeddingMessageType["SET_FONT_SIZE"] = 15] = "SET_FONT_SIZE";
})(NbpEmbeddingMessageType || (NbpEmbeddingMessageType = {}));

/**
 * Enum necessaria per la definizione del tipo di pulsante
 */
/**
 * Enum necessaria per la definizione del tipo di pulsante
 */ var NbpButtonType;
(function (NbpButtonType) {
    NbpButtonType[NbpButtonType["ACTION"] = 0] = "ACTION";
    NbpButtonType[NbpButtonType["SELECT"] = 1] = "SELECT";
    NbpButtonType[NbpButtonType["GENERATIVE"] = 2] = "GENERATIVE";
    // modificareply
    NbpButtonType[NbpButtonType["CHECK"] = 3] = "CHECK";
    NbpButtonType[NbpButtonType["PROFILE"] = 4] = "PROFILE";
})(NbpButtonType || (NbpButtonType = {}));

var __decorate$38 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$23 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente per l’inserimento di pulsanti nella pagina. La prima versione del
 * componente conterrà un insieme minimale delle funzionalità, ad esempio sarà possibile
 * utilizzare solo button senza icona.
 *
 */
let NbpButtonComponent = class NbpButtonComponent {
    constructor() {
        /**
         * (Opzionale) Enum per impostare lo stile del pulsante.
         * "DEFAULT" | "PRIMARY" | "SECONDRY" | "OUTLINE"
         *  Valore default: "DEFAULT"
         */
        this.nbpStyle = NbpStyle.DEFAULT;
        /**
          * (Opzionale) Enum, che indica la dimensione dei pulsanti.
          * Proprietà che agisce solo sui pulsanti di tipo SELECT (vedi Style Guide)
          * “LG” | “MD”
          * Valore default : “MD”
          */
        this.nbpSize = NbpSize.MD;
        /**
         * (Opzionale) Enum, che indica la tipologia dei pulsanti.
         * "ACTION" | "SELECT" | "GENERATIVE"
         * Valore default : “ACTION”
         */
        this.nbpType = NbpButtonType.ACTION;
        /**
         * Evento emesso al click sul pulsante.
         * @param {EventEmitter<any>}  nbpClick
         */
        this.nbpClick = new EventEmitter();
        this._isSelectButtonChecked = false;
        /**
         * Parametro usato per attivare e disattivare il focus al tab.
         */
        this.focusOn = false;
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this._style = NbpStyle;
        this._type = NbpButtonType;
        this._size = NbpSize;
        this._isSelectButtonSizeLarge = false;
    }
    get disabled() { return this._nbpDisabled; }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * (Opzionale) Agiste solo sui button con nbpType = 'SELECT'
     */
    get nbpChecked() { return this._isSelectButtonChecked; }
    set nbpChecked(value) { this._isSelectButtonChecked = coerceBooleanProperty(value); }
    ngOnInit() {
        this.nbpSize = this.nbpSize !== NbpSize.SM ? this.nbpSize : NbpSize.MD;
        this._configureButton();
        if (this.firstFocus) {
            this.focusOn = true;
            this.elementRef.nativeElement.focus(this.focusFn());
        }
    }
    focusFn() {
        this.focusOn = true;
    }
    _onClickButton() {
        this.focusOn = false;
        this._isSelectButtonChecked = (NbpButtonType.SELECT === this.nbpType || NbpButtonType.CHECK === this.nbpType || NbpButtonType.PROFILE === this.nbpType) ? !this._isSelectButtonChecked : false;
        this.nbpClick.emit();
    }
    _configureButton() {
        this._ifSelectButtonPrimarySetDefault();
    }
    _tabFocusOn() {
        this.focusOn = true;
    }
    _tabFocusOff() {
        this.focusOn = false;
    }
    _shiftTabFocusOn() {
        this.focusOn = true;
    }
    _shiftTabFocusOff() {
        this.focusOn = false;
    }
    _ifSelectButtonPrimarySetDefault() {
        if (this.nbpStyle === this._style.PRIMARY && this.nbpType === this._type.SELECT) {
            this.nbpStyle = this._style.DEFAULT;
        }
    }
    _ifSelectButtonIgnoreStyle() {
        if (this.nbpType === this._type.SELECT) {
            this.nbpStyle = this._style.DEFAULT;
            console.log("I pulsanti di tipo SELECT non supportano gli Stili");
        }
    }
};
__decorate$38([
    Input(),
    __metadata$23("design:type", String)
], NbpButtonComponent.prototype, "nbpLabel", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", String)
], NbpButtonComponent.prototype, "nbpIcon", void 0);
__decorate$38([
    HostBinding('class.nbp-global-disable'),
    Input(),
    __metadata$23("design:type", Boolean),
    __metadata$23("design:paramtypes", [Object])
], NbpButtonComponent.prototype, "disabled", null);
__decorate$38([
    Input(),
    __metadata$23("design:type", Number)
], NbpButtonComponent.prototype, "nbpStyle", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", Number)
], NbpButtonComponent.prototype, "nbpSize", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", Number)
], NbpButtonComponent.prototype, "nbpType", void 0);
__decorate$38([
    Output(),
    __metadata$23("design:type", EventEmitter)
], NbpButtonComponent.prototype, "nbpClick", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", Boolean),
    __metadata$23("design:paramtypes", [Object])
], NbpButtonComponent.prototype, "nbpChecked", null);
__decorate$38([
    Input(),
    __metadata$23("design:type", Boolean)
], NbpButtonComponent.prototype, "firstFocus", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", Boolean)
], NbpButtonComponent.prototype, "focusOn", void 0);
__decorate$38([
    Input(),
    __metadata$23("design:type", Number)
], NbpButtonComponent.prototype, "tabindex", void 0);
__decorate$38([
    ViewChild('autoFocusButton'),
    __metadata$23("design:type", ElementRef)
], NbpButtonComponent.prototype, "elementRef", void 0);
NbpButtonComponent = __decorate$38([
    Component({
        selector: 'nbp-button',template: "<button class=\"btn button\" (click)=\"_onClickButton()\" (focusout)=\"_tabFocusOff()\" (keydown.tab)=\"_tabFocusOff()\" (keyup.tab)=\"_tabFocusOn()\" (keydown.shift.tab)=\"_shiftTabFocusOff()\" (keyup.shift.tab)=\"_shiftTabFocusOn()\" [disabled]=\"disabled\" [ngClass]=\"{'default': nbpStyle === _style.DEFAULT, 'default-l': nbpStyle === _style.DEFAULT_L, 'default-r': nbpStyle === _style.DEFAULT_R, 'primary':  nbpStyle === _style.PRIMARY, 'primary-l': nbpStyle === _style.PRIMARY_L, 'primary-r': nbpStyle === _style.PRIMARY_R, 'secondary':  nbpStyle === _style.SECONDARY, 'btn-fill-container': nbpType === _type.ACTION, 'outline' : nbpStyle === _style.OUTLINE, 'select' : nbpType === _type.SELECT, 'check' : nbpType === _type.CHECK, 'lg' : nbpSize === _size.LG,  'on': nbpChecked, 'background-green': nbpStyle === _style.BACKGROUNDGREEN,             'background-gray': nbpStyle === _style.BACKGROUNDGRAY, 'background-gray-primary': nbpStyle === _style.BACKGROUNDGRAYPRIMARY, 'profileStyle': nbpStyle === _style.PROFILE, 'profile' : nbpType === _type.PROFILE, 'tabFocusOn': focusOn }\" [tabindex]=\"tabindex\" #autoFocusButton><div *ngIf=\"nbpType != _type.PROFILE\" [ngClass]=\"{'allineamento-select':nbpType === _type.SELECT}\"><span *ngIf=\"nbpType === _type.CHECK\" class=\"icon button-icon-check icomoon-Simboli_Risorsa-182\"></span> <span *ngIf=\"!!nbpIcon\" class=\"icon button-icon {{nbpIcon}}\" [ngClass]=\"{'icon-with-text': !!nbpLabel, 'button-icon-check': nbpType === _type.CHECK}\"></span> <span *ngIf=\"!!nbpLabel\" [ngClass]=\"{'button-label-icon': nbpIcon, 'button-label': !nbpIcon}\">{{nbpLabel}}</span></div><div *ngIf=\"nbpType === _type.PROFILE\" class=\"allineamento-select\"><span [hidden]=\"!nbpIcon\" class=\"icon button-icon-profile {{nbpIcon}}\"></span> <span *ngIf=\"_isSelectButtonChecked\" class=\"icon button-icon-check icomoon-Simboli_Risorsa-182\"></span><br><br><span [ngClass]=\"{'button-label-icon': nbpIcon}\">{{nbpLabel}}</span></div></button>",
        styles: [".btn{border-radius:2px!important}.button{font-weight:700;font-size:.75em;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;text-transform:uppercase;height:4.167em;min-width:9.167em;box-shadow:none!important}.button.check.tabFocusOn{box-shadow:0 0 .05em .2em rgba(37,137,0,.6)!important}.tabFocusOn{box-shadow:0 0 .05em .2em rgba(37,137,0,.6)!important}.button.primary{color:#fff;background-color:#258900;border-color:#258900}.button.primary:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.primary-l{color:#fff;background-color:#258900;border-color:#258900;float:left}.button.primary-l:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.primary-r{color:#fff;background-color:#258900;border-color:#258900;float:right;margin-right:5px}.button.primary-r:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.default{color:#258900;background-color:#f8f8f8;border-color:#258900}.button.default:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.default-l{color:#258900;background-color:#f8f8f8;border-color:#258900;float:left;margin-left:5px}.button.default-l:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.default-r{color:#258900;background-color:#f8f8f8;border-color:#258900;float:right}.button.default-r:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.background-green{background-color:#fff;border-color:#258900;color:#258900}.button.background-green:hover{background-color:#323232;color:#fff;border-color:#323232}.button.background-green[disabled]{opacity:.5}.button.background-gray{background-color:#fff;border-color:#258900;color:#258900}.button.background-gray:hover{background-color:#323232;color:#fff;border-color:#323232}.button.background-gray[disabled]{opacity:.5}.button.background-gray-primary{background-color:#258900;border-color:#258900;color:#fff}.button.background-gray-primary:hover{background-color:#323232;color:#fff;border-color:#323232}.button.background-gray-primary[disabled]{opacity:.5}.button.secondary{color:#6f6f6f;background-color:#fff;border-color:#6f6f6f}.button.secondary:hover:not(.select){background-color:#323232;color:#fff;border-color:#323232}.button.outline{color:#f2f2f2;background-color:Transparent;background-repeat:no-repeat;border-color:#f2f2f2}.button.outline:hover:not(.select){background-color:#258900;color:#f2f2f2;border-color:#258900}.btn.primary[disabled]{opacity:.5}.btn.primary[disabled]:hover{color:#fff;background-color:#258900!important;border-color:#258900!important;cursor:not-allowed}.btn.default[disabled]{opacity:.5}.btn.default[disabled]:hover{color:#ccc;background-color:#fff!important;border-color:#f2f2f2!important;cursor:not-allowed}.btn.secondary[disabled]:hover{color:#6f6f6f;background-color:#fff!important;border-color:#f2f2f2!important;cursor:not-allowed}.btn.outline[disabled]{color:#ccc;background-color:Transparent!important;border-color:#ccc!important;cursor:not-allowed}.btn.outline[disabled]:hover{color:#ccc;background-color:Transparent!important;border-color:#ccc!important;cursor:not-allowed}.button-icon{font-size:2em!important;display:table-cell!important;position:relative}.button-label-icon{padding-left:.625em;display:table-cell!important;vertical-align:middle}.button.selection-button{width:29.6875em;height:5.625em;background-color:#f2f2f2;border:none;border-radius:1.5625em!important;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;font-size:1em;color:#258900;text-align:left}.button.selection-button:hover{background-color:#258900;color:#fff}.button.selection-button .button-label-icon{padding-bottom:0;padding-left:4.8em;text-transform:none;font-weight:400}.button.selection-button .button-icon{top:.12em;left:1em}.button.action{color:#323232;background-color:#f2f2f2;border-color:#f2f2f2}.button.action .button-icon{color:#258900}.button.action:hover{background-color:#323232;color:#fff;border:none}.button.action:hover .button-icon{color:#fff}.btn.action[disabled]{color:#6f6f6f;background-color:#f8f8f8!important;border-color:#f2f2f2!important;opacity:.5}.btn.action[disabled]:hover{color:#6f6f6f;background-color:#f8f8f8!important;border:.063em solid #f2f2f2!important;cursor:default}.btn.action[disabled]:hover .button-icon{color:#258900}.btn.action[disabled].green .button-icon{color:#258900!important}.button.select{color:#258900;border-color:#258900;height:4.167em;min-width:7em;border-radius:2.5625em!important}.button.select.on{background-color:#258900!important;color:#fff!important}.button.select .button-icon{left:.7em;top:0}.button.select .icon-with-text{left:1em}.button.select .button-label-icon{padding-bottom:.1125em;padding-left:3.225em;padding-right:3.225em}.button.select .button-label{padding-bottom:.1125em;padding-left:3.225em;padding-right:3.225em}.button.select[disabled]{opacity:.5}.button.select[disabled]:hover{opacity:1!important;background-color:#fff!important;color:#ccc}.button.select[disabled] .button-icon{color:#f2f2f2}.button.select.lg{color:#258900;height:5.625em!important;min-width:14.375em!important;border-radius:1.5625em!important;font-weight:400;font-size:1em;text-transform:uppercase;box-shadow:none!important}.button.select.lg.outline{color:#f2f2f2;background-color:Transparent;background-repeat:no-repeat;border-color:#f2f2f2}.button.select.lg.outline:hover{color:#f2f2f2;background-color:Transparent;background-repeat:no-repeat;border-color:#f2f2f2}.button.select.lg.outline .button-icon{color:#f2f2f2}.button.select.lg.on{background-color:#258900!important;color:#fff!important}.button.select.lg.on .button-icon{color:#fff!important}.button.select.lg .button-icon{left:0;top:0;font-size:1.875em!important;color:#258900}.button.select.lg .button-label-icon{padding-left:2.225em;white-space:normal;width:.0625em;padding-bottom:0;text-transform:capitalize}.button.select.lg .allineamento-select{text-align:justify;vertical-align:middle!important;display:inline-block!important}.button.select.lg .button-icon-check{position:absolute;margin-left:-1.375em;margin-top:-.188em;width:1em;height:1.125em;font-size:1.35em!important}.button.select.lg[disabled]{opacity:1!important;background-color:#fff!important;color:#ccc}.button.select.lg[disabled] .button-icon{color:#f2f2f2}.button.check{height:4.167em;color:#258900;border:.063em solid #258900;background-color:transparent;border-radius:2.5625em!important;font-weight:700;font-size:.75em;text-transform:uppercase;box-shadow:none!important;min-width:9.167em}.button.check.on{background-color:#258900;color:#fff}.button.check .button-label{padding-bottom:.1125em;padding-left:3.225em;padding-right:3.225em}.button.check .button-icon{color:#258900;margin-right:.313em;top:-.1em}.button.check .allineamento-select{margin-left:1.25em;margin-right:1.25em}.button.check .button-icon-check{position:absolute;margin-top:-.188em;width:1em;height:1.125em;font-size:1.35em!important;color:#fff}.button.profile{border-radius:1.563em!important;height:8.75em;width:7.5em;min-width:7.5em;color:#258900;background-color:#fff;border:.063em solid #258900;font-weight:400!important;font-size:1em!important;text-transform:capitalize!important}.button.profile.on{background-color:#258900;color:#fff}.button.profile.on .checkbox-label{color:#fff!important}.button.profile .icheckbox-container{display:block;top:-3.0625em;position:relative}.button.profile .checkbox-label{color:#258900;font-weight:400!important;font-size:1em!important;text-transform:initial;display:block;white-space:normal;word-wrap:break-word;width:4.375em;text-align:left;margin-top:.625em!important}.button.profile .icheckbox_intesa{display:block}.button.profile .button-icon-profile{top:0;width:3.125em!important;height:3.125em!important}.button.profile .button-icon-profile:before{font-size:2.625em}.button.profile .button-icon-check{top:-.7em;font-size:1.35em!important;display:inline;position:relative;width:1.5em!important;height:1.313em!important;margin-left:.3em}.button.profile .button-label-icon{top:0;font-size:.75em;font-weight:700;font-family:Arial;white-space:normal;word-wrap:break-word;line-height:1.2em;padding-left:0!important}.button.profile .allineamento-select{margin-top:-1em;padding-top:.625em}.button.select.outline{color:#f2f2f2;background-color:Transparent;background-repeat:no-repeat;border-color:#f2f2f2}.button.select.outline:hover{color:#f2f2f2;background-color:Transparent;background-repeat:no-repeat;border-color:#f2f2f2}.button.select.outline[disabled]{color:#6f6f6f!important;background-color:Transparent!important;background-repeat:no-repeat;border-color:#6f6f6f!important}.button.select.outline[disabled]:hover{color:#6f6f6f;background-color:Transparent!important;background-repeat:no-repeat;border-color:#6f6f6f}.button.select.outline[disabled] .button-icon{color:#6f6f6f!important}.button.select.outline .button-icon{color:#f2f2f2}.button.select-profile{height:8.75em;width:14.375em;color:#258900;background-color:#fff;border:.063em solid #ccc;font-weight:400!important;font-size:1em!important;text-transform:capitalize!important}.button.select-profile.on{background-color:#258900;color:#fff}.button.select-profile.on .checkbox-label{color:#fff!important}.button.select-profile .icheckbox-container{display:block;top:-3.0625em;position:relative}.button.select-profile .checkbox-label{color:#258900;font-weight:400!important;font-size:1em!important;text-transform:initial;display:block;white-space:normal;word-wrap:break-word;width:4.375em;text-align:left;margin-top:.625em!important}.button.select-profile .icheckbox_intesa{display:block}.button.select-profile .button-icon{top:0;left:1.7em;font-size:4.375em!important}.button.select-icon-text{height:3em;min-width:18.75em;border-radius:1.5em!important;color:#323232;background-color:#f2f2f2;font-weight:700;font-size:1em;text-transform:uppercase}.button.select-icon-text.on{background-color:#c4dbbc;color:#258900}.button.select-icon-text.on .button-icon{background-color:#258900;color:#fff}.button.select-icon-text .button-icon{top:-.5125em;left:-.3em;font-size:1.625em!important;padding:.225em .425em;display:inline-block;-moz-border-radius:6.25em;-webkit-border-radius:6.25em;border-radius:6.25em;border-color:#ccc;background-color:#ccc}.button.select-icon-text .button-icon:before{top:.125em;position:relative}.button.select-icon-text .button-label-icon{padding-bottom:1.3125em;padding-left:2.225em}.button.select-icon-text.white{background-color:#fff;border:.063em solid #ccc}.button.select-icon-text.white.on{background-color:#c4dbbc}.button.select-icon-text.white.on .button-icon{background-color:#258900;color:#fff}.button.generative-1{height:3.334em;width:18.334em;background-color:#f2f2f2;color:#323232}.button.generative-1:hover{background-color:#323232;color:#fff}.button.generative-1:hover .button-icon{color:#fff}.button.generative-1 .button-icon{color:#258900;font-size:2.001em!important}.button.generative-2{height:3.334em;width:18.334em;border:.063em dashed #ccc;border-radius:1.5625em!important;background-color:#fff;color:#6f6f6f}.button.generative-2:hover{color:#258900;border:.063em dashed #258900}.button.generative-2:hover .button-icon{color:#258900}.button.generative-2 .button-icon{color:#6f6f6f;font-size:1.425em!important}.button.generative-3{color:#258900;background-color:#fff}.button.generative-3:hover .button-icon{color:#fff;-moz-box-shadow:0 0 .125em #258900;-webkit-box-shadow:0 0 .125em #258900;box-shadow:0 0 .125em #258900;background-color:#258900}.button.generative-3 .button-icon{color:#ccc;padding:.063em .188em;display:inline-block;-moz-border-radius:6.25em;-webkit-border-radius:6.25em;border-radius:6.25em;-moz-box-shadow:0 0 .125em #ccc;-webkit-box-shadow:0 0 .125em #ccc;box-shadow:0 0 .125em #ccc}.button.generative-3 .button-icon.ico-comuni-aggiungi:before{content:\"\e01f\";position:relative;top:.125em}.allineamento-generative{display:inline-block!important;text-align:center}.green-event{background-color:#258900!important;color:#fff!important}.gray-event{background-color:#f2f2f2!important;color:#6f6f6f!important;border-color:#f2f2f2!important}:host-context(.contrasto-on) .button.action,:host-context(.contrasto-on) .button.background-gray,:host-context(.contrasto-on) .button.background-gray-primary,:host-context(.contrasto-on) .button.background-green,:host-context(.contrasto-on) .button.default,:host-context(.contrasto-on) .button.default-l,:host-context(.contrasto-on) .button.default-r,:host-context(.contrasto-on) .button.outline,:host-context(.contrasto-on) .button.primary,:host-context(.contrasto-on) .button.primary-l,:host-context(.contrasto-on) .button.primary-r,:host-context(.contrasto-on) .button.secondary{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.action:hover:not(.select),:host-context(.contrasto-on) .button.background-gray-primary:hover:not(.select),:host-context(.contrasto-on) .button.background-gray:hover:not(.select),:host-context(.contrasto-on) .button.background-green:hover:not(.select),:host-context(.contrasto-on) .button.default-l:hover:not(.select),:host-context(.contrasto-on) .button.default-r:hover:not(.select),:host-context(.contrasto-on) .button.default:hover:not(.select),:host-context(.contrasto-on) .button.outline:hover:not(.select),:host-context(.contrasto-on) .button.primary-l:hover:not(.select),:host-context(.contrasto-on) .button.primary-r:hover:not(.select),:host-context(.contrasto-on) .button.primary:hover:not(.select),:host-context(.contrasto-on) .button.secondary:hover:not(.select){color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .btn.default[disabled],:host-context(.contrasto-on) .btn.outline[disabled],:host-context(.contrasto-on) .btn.primary[disabled],:host-context(.contrasto-on) .btn.secondary[disabled],:host-context(.contrasto-on) .button.action[disabled]{opacity:1;color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .btn.default[disabled]:hover,:host-context(.contrasto-on) .btn.outline[disabled]:hover,:host-context(.contrasto-on) .btn.primary[disabled]:hover,:host-context(.contrasto-on) .btn.secondary[disabled]:hover,:host-context(.contrasto-on) .button.action[disabled]:hover{color:#000;background-color:#fff;border-color:#000;cursor:default}:host-context(.contrasto-on) .button.generative-1,:host-context(.contrasto-on) .button.generative-2,:host-context(.contrasto-on) .button.generative-3,:host-context(.contrasto-on) .button.selection-button{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.generative-1:hover,:host-context(.contrasto-on) .button.generative-2:hover,:host-context(.contrasto-on) .button.generative-3:hover,:host-context(.contrasto-on) .button.selection-button:hover{color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .button.action .button-icon,:host-context(.contrasto-on) .button.generative-1 .button-icon,:host-context(.contrasto-on) .button.generative-2 .button-icon,:host-context(.contrasto-on) .button.generative-3 .button-icon{color:#000}:host-context(.contrasto-on) .button.action:hover.button-icon,:host-context(.contrasto-on) .button.generative-1:hover.button-icon,:host-context(.contrasto-on) .button.generative-2:hover.button-icon,:host-context(.contrasto-on) .button.generative-3:hover.button-icon{color:#fff}:host-context(.contrasto-on) .btn.action[disabled] .button-icon{color:#000}:host-context(.contrasto-on) .btn.action[disabled]:hover .button-icon{color:#000}:host-context(.contrasto-on) .btn.action[disabled].green .button-icon{color:#000}:host-context(.contrasto-on) .button.check,:host-context(.contrasto-on) .button.profile,:host-context(.contrasto-on) .button.select,:host-context(.contrasto-on) .button.select-icon-text,:host-context(.contrasto-on) .button.select-profile{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check.on,:host-context(.contrasto-on) .button.profile.on,:host-context(.contrasto-on) .button.select-icon-text.on,:host-context(.contrasto-on) .button.select-profile.on,:host-context(.contrasto-on) .button.select.on{color:#fff!important;background-color:#000!important;border-color:#fff}:host-context(.contrasto-on) .button.check[disabled],:host-context(.contrasto-on) .button.profile[disabled],:host-context(.contrasto-on) .button.select-icon-text[disabled],:host-context(.contrasto-on) .button.select-profile[disabled],:host-context(.contrasto-on) .button.select[disabled]{opacity:1;color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check[disabled]:hover,:host-context(.contrasto-on) .button.profile[disabled]:hover,:host-context(.contrasto-on) .button.select-icon-text[disabled]:hover,:host-context(.contrasto-on) .button.select-profile[disabled]:hover,:host-context(.contrasto-on) .button.select[disabled]:hover{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check[disabled] .button-icon,:host-context(.contrasto-on) .button.profile[disabled] .button-icon,:host-context(.contrasto-on) .button.select-icon-text[disabled] .button-icon,:host-context(.contrasto-on) .button.select-profile[disabled] .button-icon,:host-context(.contrasto-on) .button.select[disabled] .button-icon{color:#000}:host-context(.contrasto-on) .button.check.lg,:host-context(.contrasto-on) .button.profile.lg,:host-context(.contrasto-on) .button.select-icon-text.lg,:host-context(.contrasto-on) .button.select-profile.lg,:host-context(.contrasto-on) .button.select.lg{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check.lg.outline,:host-context(.contrasto-on) .button.profile.lg.outline,:host-context(.contrasto-on) .button.select-icon-text.lg.outline,:host-context(.contrasto-on) .button.select-profile.lg.outline,:host-context(.contrasto-on) .button.select.lg.outline{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check.lg.outline:hover,:host-context(.contrasto-on) .button.profile.lg.outline:hover,:host-context(.contrasto-on) .button.select-icon-text.lg.outline:hover,:host-context(.contrasto-on) .button.select-profile.lg.outline:hover,:host-context(.contrasto-on) .button.select.lg.outline:hover{color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .button.check.lg.outline.button-icon,:host-context(.contrasto-on) .button.profile.lg.outline.button-icon,:host-context(.contrasto-on) .button.select-icon-text.lg.outline.button-icon,:host-context(.contrasto-on) .button.select-profile.lg.outline.button-icon,:host-context(.contrasto-on) .button.select.lg.outline.button-icon{color:#fff}:host-context(.contrasto-on) .button.check.lg.on,:host-context(.contrasto-on) .button.profile.lg.on,:host-context(.contrasto-on) .button.select-icon-text.lg.on,:host-context(.contrasto-on) .button.select-profile.lg.on,:host-context(.contrasto-on) .button.select.lg.on{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check.lg.on.button-icon,:host-context(.contrasto-on) .button.profile.lg.on.button-icon,:host-context(.contrasto-on) .button.select-icon-text.lg.on.button-icon,:host-context(.contrasto-on) .button.select-profile.lg.on.button-icon,:host-context(.contrasto-on) .button.select.lg.on.button-icon{color:#000}:host-context(.contrasto-on) .button.check.lg.button-icon,:host-context(.contrasto-on) .button.profile.lg.button-icon,:host-context(.contrasto-on) .button.select-icon-text.lg.button-icon,:host-context(.contrasto-on) .button.select-profile.lg.button-icon,:host-context(.contrasto-on) .button.select.lg.button-icon{color:#000}:host-context(.contrasto-on) .button.check.lg[disabled],:host-context(.contrasto-on) .button.profile.lg[disabled],:host-context(.contrasto-on) .button.select-icon-text.lg[disabled],:host-context(.contrasto-on) .button.select-profile.lg[disabled],:host-context(.contrasto-on) .button.select.lg[disabled]{opacity:1;color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.check.lg[disabled] .button-icon,:host-context(.contrasto-on) .button.profile.lg[disabled] .button-icon,:host-context(.contrasto-on) .button.select-icon-text.lg[disabled] .button-icon,:host-context(.contrasto-on) .button.select-profile.lg[disabled] .button-icon,:host-context(.contrasto-on) .button.select.lg[disabled] .button-icon{color:#000}:host-context(.contrasto-on) .button.check .button-icon,:host-context(.contrasto-on) .button.select-icon-text .button-icon,:host-context(.contrasto-on) .button.select.outline .button-icon{color:#000}:host-context(.contrasto-on) .button.check .button-icon-check,:host-context(.contrasto-on) .button.select-icon-text .button-icon-check,:host-context(.contrasto-on) .button.select.outline .button-icon-check{color:#fff}:host-context(.contrasto-on) .button.profile .checkbox-label,:host-context(.contrasto-on) .button.select-profile .checkbox-label{color:#fff} /*# sourceMappingURL=nbp-button.component.css.map */ "],
    }),
    __metadata$23("design:paramtypes", [])
], NbpButtonComponent);

var __decorate$39 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$24 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente per l’inserimento di pulsanti nella pagina. La prima versione del
 * componente conterrà un insieme minimale delle funzionalità, ad esempio sarà possibile
 * utilizzare solo button senza icona.
 *
 */
let NbpButtonGenerationComponent = class NbpButtonGenerationComponent {
    constructor() {
        /**
         * (Opzionale) Nome della classe icona da visualizzare nel pulsante
         */
        this.nbpIcon = 'true';
        /**
         * (Opzionale) Enum, che indica la dimensione dei pulsanti.
         * Proprietà che agisce solo sui pulsanti di tipo SELECT (vedi Style Guide)
         * “LG” | “MD”
         * Valore default : “MD”
         */
        this.nbpSize = NbpSize.LG;
        /**
         * (Opzionale) Enum, che indica la tipologia dei pulsanti.
         * "DEFAULT" | "ROUND" | "DEFAULT_L" | "ROUND_L" | "DEFAULT_R" | "ROUND_R"
         * Valore default : “DEFAULT”
         */
        this.nbpType = "DEFAULT";
        /**
        * Evento emesso al click sul pulsante.
        * @param {EventEmitter<any>}  nbpClick
        */
        this.nbpClick = new EventEmitter();
        this._isSelectButtonChecked = false;
        this.hover = false;
        /**
         * Parametro usato per attivare e disattivare il focus al tab.
         */
        this.focusOn = false;
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this._size = NbpSize;
        this._isSelectButtonSizeLarge = false;
        this.switchType = "DEFAULT";
    }
    get disabled() { return this._nbpDisabled; }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    ngOnInit() {
        this.nbpType = this.nbpType.toUpperCase();
        if (this.nbpType != "DEFAULT" && this.nbpType != "ROUND" && this.nbpType != "DEFAULT_L" && this.nbpType != "ROUND_L" && this.nbpType != "DEFAULT_R" && this.nbpType != "ROUND_R")
            this.nbpType = "DEFAULT";
        if (this.nbpType == "ROUND" || this.nbpType == "ROUND_L" || this.nbpType == "ROUND_R")
            this.switchType = "ROUND";
        this.nbpSize = this.nbpSize !== NbpSize.SM ? this.nbpSize : NbpSize.MD;
        if (this.firstFocus) {
            this.focusOn = true;
            this.elementRef.nativeElement.focus(this.focusFn());
        }
    }
    focusFn() {
        this.focusOn = true;
    }
    _onClickButton() {
        this.focusOn = false;
        this.nbpClick.emit();
    }
    _tabFocusOn() {
        this.focusOn = true;
    }
    _tabFocusOff() {
        this.focusOn = false;
    }
    _shiftTabFocusOn() {
        this.focusOn = true;
    }
    _shiftTabFocusOff() {
        this.focusOn = false;
    }
};
__decorate$39([
    Input(),
    __metadata$24("design:type", String)
], NbpButtonGenerationComponent.prototype, "nbpLabel", void 0);
__decorate$39([
    Input(),
    __metadata$24("design:type", String)
], NbpButtonGenerationComponent.prototype, "nbpIcon", void 0);
__decorate$39([
    HostBinding('class.nbp-global-disable'),
    Input(),
    __metadata$24("design:type", Boolean),
    __metadata$24("design:paramtypes", [Object])
], NbpButtonGenerationComponent.prototype, "disabled", null);
__decorate$39([
    Input(),
    __metadata$24("design:type", Number)
], NbpButtonGenerationComponent.prototype, "nbpSize", void 0);
__decorate$39([
    Input(),
    __metadata$24("design:type", String)
], NbpButtonGenerationComponent.prototype, "nbpType", void 0);
__decorate$39([
    Output(),
    __metadata$24("design:type", EventEmitter)
], NbpButtonGenerationComponent.prototype, "nbpClick", void 0);
__decorate$39([
    Input(),
    __metadata$24("design:type", Boolean)
], NbpButtonGenerationComponent.prototype, "firstFocus", void 0);
__decorate$39([
    Input(),
    __metadata$24("design:type", Boolean)
], NbpButtonGenerationComponent.prototype, "focusOn", void 0);
__decorate$39([
    Input(),
    __metadata$24("design:type", Number)
], NbpButtonGenerationComponent.prototype, "tabindex", void 0);
__decorate$39([
    ViewChild('autoFocusButtonGeneration'),
    __metadata$24("design:type", ElementRef)
], NbpButtonGenerationComponent.prototype, "elementRef", void 0);
NbpButtonGenerationComponent = __decorate$39([
    Component({
        selector: 'nbp-button-generation',template: "<button class=\"btn button\" #autoFocusButtonGeneration (click)=\"_onClickButton()\" (focusout)=\"_tabFocusOff()\" (keydown.tab)=\"_tabFocusOff()\" (keyup.tab)=\"_tabFocusOn()\" (keydown.shift.tab)=\"_shiftTabFocusOff()\" (keyup.shift.tab)=\"_shiftTabFocusOn()\" [disabled]=\"disabled\" [tabindex]=\"tabindex\" [ngClass]=\"{ 'default': nbpType == 'DEFAULT', 'default-l': nbpType == 'DEFAULT_L', 'default-r': nbpType == 'DEFAULT_R', 'round':  nbpType == 'ROUND', 'round-l': nbpType == 'ROUND_L', 'round-r': nbpType == 'ROUND_R', 'tabFocusOn': focusOn }\"><ng-container [ngSwitch]=\"switchType\"><ng-container *ngSwitchCase=\"'ROUND'\"><span *ngIf=\"!!nbpIcon\" class=\"icon button-icon-round icomoon-Simboli_Risorsa-24\"></span> <span *ngIf=\"!!nbpIcon\" class=\"icon button-icon-round icomoon-Simboli_Risorsa-25\"></span><span *ngIf=\"!!nbpLabel\" (mouseenter)=\"hover=true\" (mouseleave)=\"hover=false\" [ngClass]=\"{'button-label-icon-round': nbpIcon, 'button-label-round': !nbpIcon}\">{{nbpLabel}}</span></ng-container><ng-container *ngSwitchDefault><span *ngIf=\"!!nbpIcon\" class=\"icon button-icon {{nbpIcon}}\"></span><span *ngIf=\"!!nbpLabel\" [ngClass]=\"{'button-label-icon': nbpIcon, 'button-label': !nbpIcon}\">{{nbpLabel}}</span></ng-container></ng-container></button>",
        styles: [".btn{border-radius:2px!important}.button{font-weight:700;font-size:.75em;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;text-transform:uppercase;height:4.167em;min-width:9.167em;box-shadow:none!important}.button.check.tabFocusOn{box-shadow:0 0 .05em .2em rgba(37,137,0,.6)!important}.tabFocusOn{box-shadow:0 0 .05em .2em rgba(37,137,0,.6)!important}.button.default{color:#258900;background-color:#f8f8f8;border-color:#258900;border-radius:3px!important}.button.default:hover:not(.select){color:#fff;background-color:#258900}.button.default-l{color:#258900;background-color:#f8f8f8;border-color:#258900;float:left;margin-left:5px}.button.default-l:hover:not(.select){color:#fff;background-color:#258900}.button.default-r{color:#258900;background-color:#f8f8f8;border-color:#258900;float:right}.button.default-r:hover:not(.select){color:#fff;background-color:#258900}.button-icon{padding-left:.625em;font-size:2em!important;display:table-cell!important;position:relative}.button-label-icon{padding-left:2em;padding-right:2.625em;display:table-cell!important;vertical-align:middle;font:Arial 12 Bold}.icomoon-Simboli_Risorsa-25{display:none!important}.button.round{border:0;color:#258900;background-color:transparent;border-color:#258900;border-radius:3px!important}.button.round:hover .icomoon-Simboli_Risorsa-25{display:table-cell!important;color:#258900}.button.round:hover .icomoon-Simboli_Risorsa-24{display:none!important}.button.round-l{border:0;color:#258900;background-color:transparent;border-color:#258900;float:left;margin-left:5px}.button.round-l:hover .icomoon-Simboli_Risorsa-25{display:table-cell!important;color:#258900}.button.round-l:hover .icomoon-Simboli_Risorsa-24{display:none!important}.button.round-r{border:0;color:#258900;background-color:transparent;border-color:#258900;float:right}.button.round-r:hover .icomoon-Simboli_Risorsa-25{display:table-cell!important;color:#258900}.button.round-r:hover .icomoon-Simboli_Risorsa-24{display:none!important}.button-icon-round{font-size:30px!important;display:table-cell;position:relative;border-color:#258900;color:#323232}.button-icon-round:hover{color:#258900}.button-label-icon-round{padding-left:10px;padding-right:10px;display:table-cell!important;vertical-align:middle;font:Arial 12 Bold}:host-context(.contrasto-on) .button.default,:host-context(.contrasto-on) .button.default-l,:host-context(.contrasto-on) .button.default-r{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.default-l:hover:not(.select),:host-context(.contrasto-on) .button.default-r:hover:not(.select),:host-context(.contrasto-on) .button.default:hover:not(.select){color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .button.round,:host-context(.contrasto-on) .button.round-l,:host-context(.contrasto-on) .button.round-r{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .button.round-l:hover,:host-context(.contrasto-on) .button.round-r:hover,:host-context(.contrasto-on) .button.round:hover{color:#000}:host-context(.contrasto-on) .button.round-l:hover .icomoon-Simboli_Risorsa-25,:host-context(.contrasto-on) .button.round-r:hover .icomoon-Simboli_Risorsa-25,:host-context(.contrasto-on) .button.round:hover .icomoon-Simboli_Risorsa-25{color:#000} /*# sourceMappingURL=nbp-button-generation.component.css.map */ "],
    }),
    __metadata$24("design:paramtypes", [])
], NbpButtonGenerationComponent);

var __decorate$40 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$25 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpLabelComponent = class NbpLabelComponent {
    constructor() { }
    ngOnInit() {
    }
};
__decorate$40([
    Input(),
    __metadata$25("design:type", String)
], NbpLabelComponent.prototype, "nbpText", void 0);
__decorate$40([
    Input(),
    __metadata$25("design:type", Boolean)
], NbpLabelComponent.prototype, "nbpRequired", void 0);
__decorate$40([
    Input(),
    __metadata$25("design:type", String)
], NbpLabelComponent.prototype, "for", void 0);
NbpLabelComponent = __decorate$40([
    Component({selector: 'nbp-label',
        template: "<label [for]=\"for\">{{nbpText}}</label><span *ngIf=\"nbpRequired\">*</span>",
        styles: [".nbp-label{background-color:#ff0} /*# sourceMappingURL=nbp-label.component.css.map */ "]
    }),
    __metadata$25("design:paramtypes", [])
], NbpLabelComponent);

var __decorate$42 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NbpImportoPipe = class NbpImportoPipe {
    transform(value, args) {
        let parsedValue = value;
        let decimalPrecision = parseInt(args || 2, 10);
        if (typeof value == 'string') {
            value = value.replace(',', '.');
            parsedValue = parseFloat(value).toFixed(decimalPrecision);
        }
        if (typeof value == 'number') {
            parsedValue = value.toFixed(decimalPrecision);
        }
        if (!isNaN(parsedValue) && !!parsedValue) {
            let valueStr = parsedValue.toString();
            let valueStrDec = valueStr.slice(-decimalPrecision);
            let valueFormat = [];
            valueStr = valueStr.substring(0, valueStr.length - (decimalPrecision + 1));
            while (valueStr.length > 3) {
                valueFormat.unshift(valueStr.slice(-3));
                valueStr = valueStr.substring(0, valueStr.length - 3);
            }
            valueFormat.unshift(valueStr);
            if (valueFormat[0] !== '-') {
                return valueFormat.join('.') + ',' + valueStrDec;
            }
        }
        else {
            return '';
        }
    }
};
NbpImportoPipe = __decorate$42([
    Pipe({
        name: 'nbpImporto'
    })
], NbpImportoPipe);

var __decorate$41 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$26 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$2 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-input to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_INPUT_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpInputTextComponent),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpInputTextComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpInput component */
let nextId$3 = 0;
/**
 * Componente per la implementazione dei textfield, supporta tutti gli attributi standard html per il tag input.
 * personalizzabile per la gestione di currency grazie all'applicaizone di opportuni pipes
 * definiti dalla libreria.
 */
let NbpInputTextComponent = class NbpInputTextComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer, inj) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.inj = inj;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-input-${++nextId$3}`;
        this._nbpShowValidation = false;
        //modificareply
        this.showErrorLabel = false;
        /**
         * testo del placeholder
         */
        this.placeholder = '';
        this._nbpRoundBorder = false;
        this.ALLOWED_INPUT_TYPES = ["text", "password", "number"];
        this.DEFAULT_INPUT_TYPE = this.ALLOWED_INPUT_TYPES[0];
        /**
         * (Opzionale) Tipo dell'input
         */
        this.nbpInputType = this.DEFAULT_INPUT_TYPE;
        /**
         * (Opzionale) Lunghezza massima dell'input. Blocca l'inserimento una volta superata.
         */
        this.maxlength = null;
        /**
         * (Opzionale) Funzione custom di validazione del campo
         */
        this.nbpValidation = new EventEmitter();
        //modificareply
        this.tmpValue = '';
        //modificareply
        this.nbpForcedTouched = false;
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
    }
    /**
     * (Opzionale)
     * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
     * Valore di default false
     */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * Flag che abilita/disabilita il campo di input.
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled !== null) {
            this._nbpDisabled = this.parentFormContainer.disabled;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Flag che abilita/disabilita il required sul campo di input.
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
     * Se presente, l’attributo abilita arrotondamento dei bordi del campo di input
     */
    get nbpRoundBorder() { return this._nbpRoundBorder; }
    ;
    set nbpRoundBorder(value) { this._nbpRoundBorder = coerceBooleanProperty(value); }
    ;
    /**
     * (opzionale ) Booleano che gestisce  l’attributo  bordo giallo del campo di input.
     * Al primo click/focus tornerà alla versione di default.
     * valore default false
     */
    get nbpHighlightedDefault() { return this._nbpHighlightedDefault; }
    ;
    set nbpHighlightedDefault(value) { this._nbpHighlightedDefault = coerceBooleanProperty(value); }
    ;
    /**
     * funzione pubblica che consente di triggerare la validazione, ad esempio se il contenuto
     * è stato modificato cambiando il model e non con inserimento diretto.
     * (simula il comportamento che si avrebbe inserendo i dati nel componente e cambiando focus).
     */
    triggerValidation() {
        this._onTouchedEvent();
        this.nbpForcedTouched = true;
    }
    formatViewOnFocus(importo) {
        if (!!importo) {
            for (var i = 0; i < importo.split('.').length; i++) {
                this.tmpValue += importo.split('.')[i];
            }
            importo = this.tmpValue.replace(/\./g, '');
            this.tmpValue = '';
            return importo;
        }
        return null;
    }
    ;
    _onInputEvent(event) {
        this.nbpValidation.emit(this.model);
    }
    _onFocusEvent() {
        if (this._nbpHighlightedDefault) {
            this._nbpHighlightedDefault = false;
        }
        //modificareply
        if (this.nbpFormat === "currency") {
            this.value = this.formatViewOnFocus(this.value);
        }
    }
    _onTouchedEvent() {
        this.touch();
        //modificareply
        if (this.nbpFormat === "currency") {
            this.value = new NbpImportoPipe().transform(this.value);
        }
        this.showErrorLabel = true;
    }
    _onResetEvent() {
        // console.log('RESET!');
    }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        // Validazione @Input componente
        if (this.ALLOWED_INPUT_TYPES.indexOf(this.nbpInputType) === -1) {
            this.nbpInputType = this.DEFAULT_INPUT_TYPE;
        }
        if (this.firstFocus) {
            this.elementRef.nativeElement.focus();
        }
    }
};
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "name", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "id", void 0);
__decorate$41([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$26("design:type", Boolean),
    __metadata$26("design:paramtypes", [Object])
], NbpInputTextComponent.prototype, "nbpShowValidation", null);
__decorate$41([
    Input(),
    __metadata$26("design:type", RegExp)
], NbpInputTextComponent.prototype, "pattern", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", Boolean),
    __metadata$26("design:paramtypes", [Object])
], NbpInputTextComponent.prototype, "disabled", null);
__decorate$41([
    Input(),
    __metadata$26("design:type", Boolean),
    __metadata$26("design:paramtypes", [Object])
], NbpInputTextComponent.prototype, "required", null);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "placeholder", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", Boolean),
    __metadata$26("design:paramtypes", [Object])
], NbpInputTextComponent.prototype, "nbpRoundBorder", null);
__decorate$41([
    Input(),
    __metadata$26("design:type", Boolean),
    __metadata$26("design:paramtypes", [Object])
], NbpInputTextComponent.prototype, "nbpHighlightedDefault", null);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "nbpFormat", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "nbpIcon", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "nbpErrorMessage", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", String)
], NbpInputTextComponent.prototype, "nbpInputType", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", Number)
], NbpInputTextComponent.prototype, "maxlength", void 0);
__decorate$41([
    Output(),
    __metadata$26("design:type", EventEmitter)
], NbpInputTextComponent.prototype, "nbpValidation", void 0);
__decorate$41([
    ViewChild(NgModel),
    __metadata$26("design:type", NgModel)
], NbpInputTextComponent.prototype, "model", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", Boolean)
], NbpInputTextComponent.prototype, "firstFocus", void 0);
__decorate$41([
    Input(),
    __metadata$26("design:type", Number)
], NbpInputTextComponent.prototype, "tabindex", void 0);
__decorate$41([
    ViewChild('autoFocusInput'),
    __metadata$26("design:type", ElementRef)
], NbpInputTextComponent.prototype, "elementRef", void 0);
NbpInputTextComponent = __decorate$41([
    Component({
        selector: 'nbp-input-text',template: "<input class=\"textfield-box form-control\" [ngClass]=\"{'round-borders':nbpRoundBorder, 'highlight-default':nbpHighlightedDefault, 'show-validation':nbpShowValidation, 'forced-touched':nbpForcedTouched}\" [type]=\"nbpInputType\" [name]=\"name\" [id]=\"id\" [(ngModel)]=\"value\" [disabled]=\"disabled\" [required]=\"required\" [placeholder]=\"placeholder\" (input)=\"_onInputEvent($event)\" (focus)=\"_onFocusEvent()\" (focusout)=\"_onTouchedEvent()\" [pattern]=\"pattern\" [maxlength]=\"maxlength\" [tabindex]=\"tabindex\" #autoFocusInput> <span *ngIf=\"!!nbpIcon\" class=\"icon icon-inside\" [ngClass]=\"nbpIcon\"></span>",
        styles: [":host{position:relative;display:block}:host(.ng-invalid) input.show-validation.forced-touched,:host(.ng-invalid) input.show-validation.ng-touched,input.ng-invalid.forced-touched.show-validation,input.ng-invalid.ng-touched.show-validation{border:2px solid #c83200}.textfield-box{margin:0 0 .625em 0;padding:.625em;color:#323232;border:1px solid #323232;border-radius:2px;font-size:1em;height:3.125em}.textfield-box:focus{border:2px solid #89bc72;outline:0;box-shadow:none!important}.textfield-box[disabled]{opacity:.5;cursor:default!important}::placeholder{color:#6f6f6f;opacity:1}:-ms-input-placeholder{color:#6f6f6f}::-ms-input-placeholder{color:#6f6f6f}:host(.show-validation.ng-dirty.ng-invalid,.show-validation.nbp-show-validation.ng-invalid) .textfield-box{border:2px solid #c83200!important;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}:host(.show-validation.ng-dirty.ng-invalid,.show-validation.nbp-show-validation.ng-invalid) .textfield-box:focus{border:2px solid #c83200}.highlight-default{border:2px solid #fce07f}.round-borders{border-radius:25px}.icon-inside{position:absolute;top:50%;right:25px;font-size:26px;transform:translateY(-50%)}.icon-inside:before{color:#258900}:host-context(.contrasto-on) .input-label{color:#000}:host-context(.contrasto-on) .highlight-default{border:2px solid #000}:host-context(.contrasto-on) .input-box{color:#000;border:1px solid #000}:host-context(.contrasto-on) .input-box:focus{border:2px solid #000}:host-context(.contrasto-on) .input-box::-webkit-input-placeholder{color:#000}:host-context(.contrasto-on) .input-box[disabled]{color:#fff;background-color:#000;opacity:1}:host-context(.contrasto-on) .has-error .input-box{border:2px solid #000;-webkit-box-shadow:inset 0 0 0 #000;box-shadow:inset 0 0 0 #000}:host-context(.contrasto-on) .has-error .input-box:focus{border:2px solid #000}:host-context(.contrasto-on) .yellow-border{border:2px solid #000} /*# sourceMappingURL=nbp-input-text.component.css.map */ "],
        providers: [NBP_INPUT_CONTROL_VALUE_ACCESSOR, NBP_INPUT_ELEMENT_BASE]
    }),
    __param$2(0, Optional()), __param$2(0, Inject(NG_VALIDATORS)),
    __param$2(1, Optional()), __param$2(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$2(2, Optional()),
    __metadata$26("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        Injector])
], NbpInputTextComponent);

var __decorate$43 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$27 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpInputContainerComponent = class NbpInputContainerComponent {
    constructor() {
    }
};
__decorate$43([
    Input(),
    __metadata$27("design:type", String)
], NbpInputContainerComponent.prototype, "nbpLabel", void 0);
__decorate$43([
    ContentChild(NbpInputElementBase),
    __metadata$27("design:type", Object)
], NbpInputContainerComponent.prototype, "innerNgInput", void 0);
__decorate$43([
    ViewChild('nbp-input-text'),
    __metadata$27("design:type", NbpInputTextComponent)
], NbpInputContainerComponent.prototype, "childNgInput", void 0);
NbpInputContainerComponent = __decorate$43([
    Component({
        selector: 'nbp-input-container',template: "<div style=\"text-align: left\"><label [ngClass]=\"{'label-disabled': innerNgInput?.disabled}\" [for]=\"innerNgInput?.name\">{{nbpLabel}}<span *ngIf=\"innerNgInput?.required\">*</span></label><ng-content></ng-content><ng-container *ngIf=\"innerNgInput?.nbpShowValidation\"><div class=\"error-message\" *ngIf=\"innerNgInput?.showErrorLabel && (innerNgInput?.invalid | async) && ( innerNgInput?.nbpShowValidation || innerNgInput?.ngControl.control.dirty )\"><span *ngIf=\"innerNgInput?.nbpErrorMessage\">{{innerNgInput?.nbpErrorMessage}}</span> <span *ngIf=\"!innerNgInput?.nbpErrorMessage\">{{innerNgInput?.failures | async}}</span></div></ng-container></div>",
        styles: [".error-message{color:#c63200;font-size:.75em;margin-top:.625em;margin-bottom:.625em;opacity:1;transition:all ease-out .25s}.label-disabled{opacity:.5} /*# sourceMappingURL=nbp-input-container.component.css.map */ "]
    }),
    __metadata$27("design:paramtypes", [])
], NbpInputContainerComponent);

var __decorate$44 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$28 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$3 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/** intero autogenerato usato per id unici per checkbox component */
let nextId$4 = 0;
/**
 * Provider Expression that allows nbp-checkbox to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_CHECKBOX_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpCheckboxComponent),
    multi: true
};
/**
 * <nbp-checkbox> provides the same functionality as a native <input type="checkbox">
 */
let NbpCheckboxComponent = class NbpCheckboxComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        /**
         * Nome che sara' applicato all'elemento di input se presente
         */
        this.name = null;
        /**
         * Identificativo univoco per la checkbox.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-checkbox-${++nextId$4}`;
        this._checked = false;
        /**
         * Evento emesso quando il valore `checked` della checkbox cambia.
         */
        this.change = new EventEmitter(); // TODO definire tipo specifico dell'evento
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this.dirty = false;
        this.propagateChange = (value) => {
            // console.log( 'NbpCheckbox: eseguita funzione propagateChange' );
        };
    }
    /**
     * Se la checkbox è disabled.
     */
    get disabled() { return this._nbpDisabled; }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Booleano che imposta, se presente, la proprietà CSS display dell’elemento
     * a inline-block
     */
    get nbpDisplayInline() { return this._nbpDisplayInline; }
    ;
    set nbpDisplayInline(value) { this._nbpDisplayInline = coerceBooleanProperty(value); }
    /**
     * (Opzionale) Booleano che abilita il bordo giallo della checkbox. Al primo
     * click/focus tornerà alla versione di default.
     * Valore default false
     */
    get nbpYellowBorder() { return this._nbpYellowBorder; }
    ;
    set nbpYellowBorder(value) { this._nbpYellowBorder = coerceBooleanProperty(value); }
    ;
    /** Whether the checkbox is required. */
    get required() { return this._required; }
    set required(value) { this._required = value != null && `${value}` !== 'false'; }
    /**
     * Se la checkbox e' checked.
     */
    get checked() { return this._checked; }
    set checked(checked) { if (checked !== this.checked) {
        this._checked = checked;
    } }
    ngOnInit() {
        if (!this.nbpShowValidation) {
            this.nbpShowValidation = false;
        }
        if (!this.nbpDisplayInline) {
            this.nbpDisplayInline = false;
        }
        if (!this.nbpYellowBorder) {
            this.nbpYellowBorder = false;
        }
        if (this.firstFocus) {
            this.focusOn = true;
            this.elementRef.nativeElement.focus(this.focusFn());
        }
    }
    focusFn() {
        this.focusOn = true;
    }
    writeValue(value) {
        this.checked = !!value;
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    _onChangeEvent(event) {
        event.stopPropagation();
        this.change.next(event);
    }
    _tabFocusOn() {
        this.focusOn = true;
    }
    _tabFocusOff() {
        this.focusOn = false;
    }
    _shiftTabFocusOn() {
        this.focusOn = true;
    }
    _shiftTabFocusOff() {
        this.focusOn = false;
    }
    _onClickEvent(event) {
        event.stopPropagation();
        this.focusOn = false;
        if (!this.disabled) {
            this.checked = !this.checked;
        }
        if (this._nbpYellowBorder) {
            this._nbpYellowBorder = false;
        }
        this._emitChangeEvent(event);
    }
    _emitChangeEvent(event) {
        this.propagateChange(this.checked);
    }
};
__decorate$44([
    Input(),
    __metadata$28("design:type", String)
], NbpCheckboxComponent.prototype, "nbpLabel", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", String)
], NbpCheckboxComponent.prototype, "name", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Object)
], NbpCheckboxComponent.prototype, "id", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean),
    __metadata$28("design:paramtypes", [Object])
], NbpCheckboxComponent.prototype, "disabled", null);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean)
], NbpCheckboxComponent.prototype, "nbpShowValidation", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean),
    __metadata$28("design:paramtypes", [Object])
], NbpCheckboxComponent.prototype, "nbpDisplayInline", null);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean),
    __metadata$28("design:paramtypes", [Object])
], NbpCheckboxComponent.prototype, "nbpYellowBorder", null);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean),
    __metadata$28("design:paramtypes", [Object])
], NbpCheckboxComponent.prototype, "required", null);
__decorate$44([
    Input(),
    __metadata$28("design:type", Object),
    __metadata$28("design:paramtypes", [Boolean])
], NbpCheckboxComponent.prototype, "checked", null);
__decorate$44([
    Input(),
    __metadata$28("design:type", String)
], NbpCheckboxComponent.prototype, "value", void 0);
__decorate$44([
    Output(),
    __metadata$28("design:type", EventEmitter)
], NbpCheckboxComponent.prototype, "change", void 0);
__decorate$44([
    ViewChild(NgModel),
    __metadata$28("design:type", NgModel)
], NbpCheckboxComponent.prototype, "model", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean)
], NbpCheckboxComponent.prototype, "firstFocus", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean)
], NbpCheckboxComponent.prototype, "focusOn", void 0);
__decorate$44([
    Input(),
    __metadata$28("design:type", Number)
], NbpCheckboxComponent.prototype, "tabindex", void 0);
__decorate$44([
    ViewChild('autoFocusCheckbox'),
    __metadata$28("design:type", ElementRef)
], NbpCheckboxComponent.prototype, "elementRef", void 0);
NbpCheckboxComponent = __decorate$44([
    Component({
        selector: 'nbp-checkbox',template: "<div class=\"icheckbox-container\" [ngStyle]=\"{'display': nbpDisplayInline ? 'inline-block' : 'block'}\" [ngClass]=\"{'checked': checked, 'disabled': disabled }\"><div class=\"icheckbox_intesa\" [ngClass]=\"{'checked': checked, 'disabled': disabled ,'yellowborder': nbpYellowBorder, 'focusTabCheckbox': focusOn}\"><input class=\"input-checkbox\" [id]=\"id\" [name]=\"name\" [(ngModel)]=\"value\" type=\"checkbox\" [checked]=\"checked\" [disabled]=\"disabled\" (change)=\"_onChangeEvent($event)\" (click)=\"_onClickEvent($event)\" (focusout)=\"_tabFocusOff()\" (keyup.tab)=\"_tabFocusOn()\" (keydown.tab)=\"_tabFocusOff()\" (keydown.shift.tab)=\"_shiftTabFocusOff()\" (keyup.shift.tab)=\"_shiftTabFocusOn()\" [tabindex]=\"tabindex\" #autoFocusCheckbox></div><label *ngIf=\"nbpLabel\" class=\"checkbox-label\">{{nbpLabel}}</label> <label *ngIf=\"!nbpLabel\" class=\"checkbox-label\"><ng-content></ng-content></label></div>",
        styles: [".icheckbox-container{margin-right:.195em}.icheckbox-container.checked .checkbox-label{color:#323232}.icheckbox-container.disabled .checkbox-label{opacity:.5}.icheckbox-container.checked.disabled .checkbox-label{opacity:.5;color:#258900}.focusTabCheckbox{box-shadow:0 0 .05em .23em rgba(37,137,0,.6)!important}.icheckbox_intesa{position:relative;display:inline-block;vertical-align:middle;padding:0;margin:0 0 2px 0;width:24px;height:24px;background:url(/cjlib/assets/images/sprite-margin.png) no-repeat;border:none;background-position:-1px 0}.icheckbox_intesa input[type=checkbox]{margin:4px 4px 0 0!important;cursor:pointer;height:24px;width:30px;opacity:0}.icheckbox_intesa input[type=checkbox]:disabled{cursor:auto}.icheckbox_intesa.yellowborder{background-position:-25px 0}.icheckbox_intesa.checked{background-position:-73px 0}.icheckbox_intesa.checked.yellowborder{background-position:-97px 0}.icheckbox_intesa.disabled{opacity:.5;cursor:default}.icheckbox_intesa.checked.disabled{opacity:.5}.checkbox-label{color:#323232;font-size:.875em!important;font-weight:400;margin:0 0 0 10px!important}.input-checkbox{position:absolute;left:-1px;top:-2px}:host-context(.contrasto-on) .icheckbox-container.checked .checkbox-label{color:#000!important}:host-context(.contrasto-on) .icheckbox_intesa{background:url(/cjlib/assets/images/sprite-margin.png) no-repeat;border:none;background-position:-1px 0}:host-context(.contrasto-on) .icheckbox_intesa.yellowborder{background-position:-1px 0}:host-context(.contrasto-on) .icheckbox_intesa.checked{background-position:-145px 0}:host-context(.contrasto-on) .icheckbox_intesa.checked.yellowborder{background-position:-145px 0}:host-context(.contrasto-on) .checkbox-label{color:#000} /*# sourceMappingURL=nbp-checkbox.component.css.map */ "],
        providers: [NBP_CHECKBOX_CONTROL_VALUE_ACCESSOR]
    }),
    __param$3(0, Optional()), __param$3(0, Inject(NG_VALIDATORS)),
    __param$3(1, Optional()), __param$3(1, Inject(NG_ASYNC_VALIDATORS)),
    __metadata$28("design:paramtypes", [Array, Array])
], NbpCheckboxComponent);
let NbpCheckboxRequiredValidator = NbpCheckboxRequiredValidator_1 = class NbpCheckboxRequiredValidator {
    validate(control) {
        let value = control.value;
        if (this.required && !value) {
            return {
                checkboxRequired: 'checkbox required'
            };
        }
        else {
            return null;
        }
        
    }
};
__decorate$44([
    Input(),
    __metadata$28("design:type", Boolean)
], NbpCheckboxRequiredValidator.prototype, "required", void 0);
NbpCheckboxRequiredValidator = NbpCheckboxRequiredValidator_1 = __decorate$44([
    Directive({
        selector: 'nbp-checkbox[required]',
        providers: [{
                provide: NG_VALIDATORS,
                useExisting: NbpCheckboxRequiredValidator_1,
                multi: true
            }]
    })
], NbpCheckboxRequiredValidator);
var NbpCheckboxRequiredValidator_1;

/**
 * Enum utilizzabile per la definizione della grandezza del font da utilizzare
 */
/**
 * Enum utilizzabile per la definizione della grandezza del font da utilizzare
 */ var NbpFontSize$1;
(function (NbpFontSize) {
    NbpFontSize[NbpFontSize["SMALL"] = 0] = "SMALL";
    NbpFontSize[NbpFontSize["MEDIUM"] = 1] = "MEDIUM";
    NbpFontSize[NbpFontSize["LARGE"] = 2] = "LARGE";
})(NbpFontSize$1 || (NbpFontSize$1 = {}));

var __decorate$45 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$29 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$4 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpFooterComponent = class NbpFooterComponent {
    constructor(document, router) {
        this.document = document;
        this.router = router;
        /**
         * (Opzionale) Evento emesso alla seleziona della lingua
         */
        this.nbpLanguageChange = new EventEmitter();
        /**
         * (Opzionale) Booleano che mostra/nasconde i pulsanti per la gestione del contrasto
         * valore di default false
         */
        this.nbpContrastEnable = true;
        /**
         *  (Opzionale) Booleano che abilita la visualizzazione della dimensione del font
         *  Valore di default false
         */
        this.nbpFontDimensionEnable = true;
        /**
         *  Emissione di un evento per lo zoom del testo
         */
        this.nbpZoom = new EventEmitter();
        this._zoom = NbpFontSize$1;
        /**
         * Booleano per l'attivazione del contrasto, agisce sui colore nel css della libreria
         */
        this.nbpContrastOn = false;
        /**
         *  Emissione di un evento per l'attivazione del contrasto
         */
        this.nbpContrast = new EventEmitter();
        /**
         * Disabilita il margine superiore sul componente. (Valore di default false, margina presente)
         * Permette di accostare un altro componente al footer senza lasciare spazio tra i due.
         * @type {boolean}
         */
        this.nbpDisableMarginTop = false;
        this.redirectTo = function (link) {
            if (link.internalState) {
                this.router.navigate([link.urlLink]);
                // var states = $state.get();
                // for (var i = 0; i < states.length; i++) {
                //   if (states[i].name === link.url) {
                //     $location.path(link.url);
                //     $state.go(link.url);
                //     return;
                //   }
                // }
                // console.log('Stato non definito');
            }
            else {
                if (link.urlLink.search('http://') > -1) {
                    window.open(link.urlLink, "_blank");
                }
                else {
                    window.open('http://' + link.urlLink, "_blank");
                }
            }
        };
    }
    /**
     * Booleano che abilita/disabilita il posizionamento sticky
     * al bottom della pagina
     */
    get nbpDisableSticky() { return this._nbpDisableSticky; }
    ;
    set nbpDisableSticky(value) { this._nbpDisableSticky = coerceBooleanProperty(value); }
    ;
    _zoomSelected(size) {
        this.nbpZoomSize = size;
        if (size === NbpFontSize$1.SMALL) {
            this.document.body.style.fontSize = '16px';
        }
        else if (size === NbpFontSize$1.MEDIUM) {
            this.document.body.style.fontSize = '19px';
        }
        else if (size === NbpFontSize$1.LARGE) {
            this.document.body.style.fontSize = '22px';
        }
        this.nbpZoom.emit(this.document.body.style.fontSize);
    }
    ;
    _languageChange(lang) {
        // alert("_languageChange : " + lang )
        this.nbpLanguage = lang;
        this.nbpLanguageChange.emit(this.nbpLanguage);
    }
    ;
    _changeContrast(contrastOn) {
        // alert("_changeContrast ")
        this.nbpContrastOn = contrastOn;
        /*
        if (contrastOn === true) {
           this.document.getElementsByTagName('body')[0].className = 'contrasto-on';
           console.log("contrast-on");
         } else {
           this.document.getElementsByTagName('body')[0].classList.remove('contrasto-on');
           console.log("contrast-off");
         }
         */
        this.nbpContrast.emit(this.nbpContrastOn);
    }
    ;
    _isFooterEmpty() {
        return !this.nbpLinks
            && !this.nbpLanguages
            && !this.nbpShowCentralBtn
            && !this.nbpFontDimensionEnable
            && !this.nbpContrastEnable;
    }
    ngOnInit() {
        this._zoomSelected(NbpFontSize$1.SMALL);
        // this.nbpShowCentralBtn = true;
    }
};
__decorate$45([
    Input(),
    __metadata$29("design:type", Array)
], NbpFooterComponent.prototype, "nbpLinks", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Array)
], NbpFooterComponent.prototype, "nbpLanguages", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean)
], NbpFooterComponent.prototype, "nbpShowCentralBtn", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Number)
], NbpFooterComponent.prototype, "nbpZoomSize", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Object)
], NbpFooterComponent.prototype, "nbpCentralBtn", void 0);
__decorate$45([
    Output(),
    __metadata$29("design:type", EventEmitter)
], NbpFooterComponent.prototype, "nbpLanguageChange", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", String)
], NbpFooterComponent.prototype, "nbpLanguage", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean)
], NbpFooterComponent.prototype, "nbpContrastEnable", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean)
], NbpFooterComponent.prototype, "nbpFontDimensionEnable", void 0);
__decorate$45([
    Output(),
    __metadata$29("design:type", EventEmitter)
], NbpFooterComponent.prototype, "nbpZoom", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean)
], NbpFooterComponent.prototype, "nbpContrastOn", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean),
    __metadata$29("design:paramtypes", [Object])
], NbpFooterComponent.prototype, "nbpDisableSticky", null);
__decorate$45([
    Output(),
    __metadata$29("design:type", EventEmitter)
], NbpFooterComponent.prototype, "nbpContrast", void 0);
__decorate$45([
    Input(),
    __metadata$29("design:type", Boolean)
], NbpFooterComponent.prototype, "nbpDisableMarginTop", void 0);
NbpFooterComponent = __decorate$45([
    Component({
        selector: 'nbp-footer',template: "<footer class=\"footer\" [ngClass]=\"{ 'contrasto-on':nbpContrastOn, 'empty-footer':_isFooterEmpty(), 'footer-fixed-bottom':!_nbpDisableSticky, 'footer-margin-top':!nbpDisableMarginTop, 'footer-margin-top--disabled':nbpDisableMarginTop}\"><div class=\"container\" [ngClass]=\"{'footer-content':!_isFooterEmpty(),'empty-footer':_isFooterEmpty()}\"><div *ngIf=\"!!nbpLinks\" class=\"footer-content-left col-xs-24\" [ngClass]=\"{'links-no-translate col-sm-24': !nbpLanguages, 'links-translate col-sm-12': nbpLanguages, 'col-md-8': (!nbpShowCentralBtn || !nbpLanguages), 'col-md-6': (nbpShowCentralBtn && nbpLanguages) }\"><div><span *ngFor=\"let link of nbpLinks;let i=index;\"><span class=\"footer-link\" [innerText]=\"link.name\" (click)=\"redirectTo(link)\"></span> <span *ngIf=\"i !== nbpLinks.length - 1\">|</span></span></div></div><div *ngIf=\"!!nbpLanguages\" class=\"footer-content-center-l col-sm-12 col-xs-24 top-left-border\" [ngClass]=\"{'col-md-8':!nbpShowCentralBtn,  'col-md-6':nbpShowCentralBtn  }\"><div class=\"footer-languages\"><div *ngFor=\"let lang of nbpLanguages; let i=index; let l=last\" (click)=\"_languageChange(lang)\"><div><span class=\"footer-lang\" style=\"margin-right: 0.313em\" [innerText]=\"lang\"></span> <span class=\"footer-lang\" *ngIf=\"i !== nbpLanguages.length - 1\">|</span> <span class=\"footer-lang\" *ngIf=\"i === nbpLanguages.length - 1\">&nbsp;</span></div><div [ngStyle]=\"{opacity: nbpLanguage === lang ? 1 : 0}\" class=\"footer-languages-selection\">&#9679;</div></div></div></div><div *ngIf=\"nbpShowCentralBtn\" class=\"footer-content-center-r col-sm-12 col-xs-24\" [ngClass]=\"{'top-left-border col-md-8': !nbpLanguages, 'bottom-right-border col-md-6': nbpLanguages }\"><div><button (click)=\"nbpCentralBtn.action()\" class=\"btn button\"><span class=\"icon button-icon\" [ngClass]=\"nbpCentralBtn.icon\"></span>{{nbpCentralBtn.name}}</button></div></div><div class=\"footer-content-right col-xs-24\" [ngClass]=\"{'top-left-border':nbpShowCentralBtn, 'top-border':!nbpShowCentralBtn, 'col-md-8': (!nbpShowCentralBtn || !nbpLanguages), 'col-md-6': (nbpShowCentralBtn && nbpLanguages), 'col-sm-24': !nbpShowCentralBtn, 'col-sm-12': nbpShowCentralBtn}\"><div class=\"footer-contrasto\" *ngIf=\"nbpContrastEnable\"><div (click)=\"_changeContrast(false)\"><div class=\"icon ico-footer-contrasto-1\"></div><div [ngStyle]=\"{opacity: nbpContrastOn === false ? 1 : 0}\" class=\"footer-contrasto-selection\">&#9679;</div></div><div (click)=\"_changeContrast(true)\"><div class=\"icon ico-footer-contrasto-2\"></div><div [ngStyle]=\"{opacity: nbpContrastOn === true ? 1 : 0}\" class=\"footer-contrasto-selection\">&#9679;</div></div></div><div class=\"footer-testo\" *ngIf=\"nbpFontDimensionEnable\"><div (click)=\"_zoomSelected(_zoom.SMALL)\"><div class=\"icon ico-footer-testo-1\"></div><div [ngStyle]=\"{opacity: nbpZoomSize === _zoom.SMALL ? 1 : 0}\" class=\"footer-contrasto-selection\">&#9679;</div></div><div (click)=\"_zoomSelected(_zoom.MEDIUM)\"><div class=\"icon ico-footer-testo-2\"></div><div [ngStyle]=\"{opacity: nbpZoomSize === _zoom.MEDIUM ? 1 : 0}\" class=\"footer-contrasto-selection\">&#9679;</div></div><div (click)=\"_zoomSelected(_zoom.LARGE)\"><div class=\"icon ico-footer-testo-3\"></div><div [ngStyle]=\"{opacity: nbpZoomSize === _zoom.LARGE ? 1 : 0}\" class=\"footer-contrasto-selection\">&#9679;</div></div></div></div></div></footer>",
        styles: [".footer-content{height:6.25em}.empty-footer{height:3.125em}.empty-footer .footer-content-right{border:none!important}.links-no-translate,.links-translate{border-top:none;border-right:1px solid #6f6f6f;border-bottom:none}.btn-no-translate,.btn-translate{border-top:none;border-right:1px solid #6f6f6f;border-bottom:none}.top-border{border-top:none;border-bottom:none;border-left:1px solid #6f6f6f}.bottom-border{border-top:none;border-bottom:1px solid #6f6f6f;border-left:none}.top-left-border{border-top:none;border-bottom:none;border-left:1px solid #6f6f6f}.bottom-right-border{border-top:none;border-right:1px solid #6f6f6f;border-left:1px solid #6f6f6f;border-bottom:none}.footer-content-center-l,.footer-content-center-r,.footer-content-left,.footer-content-right{display:table;height:inherit;color:#fff}.footer-content-center-l>div,.footer-content-center-r>div,.footer-content-left>div,.footer-content-right>div{display:table-cell;vertical-align:middle;text-align:center}.footer-content-left{padding-left:.625em;padding-right:.625em;text-transform:uppercase}.footer-content-left span{margin-right:.125em;cursor:pointer}.footer-content-center-r button{background-color:#323232;color:#fff;border:none}.footer-content-center-r button:hover{background-color:#fff;color:#323232}.footer-content-right{border-right:none}.footer-link{font-family:Arial;font-size:.75em;white-space:nowrap}.footer-link:hover{text-decoration:underline}.truncate-link{display:inline-block;vertical-align:middle;max-width:10em;text-overflow:ellipsis;overflow:hidden}.footer-languages{font-size:1.5em}.footer-languages .ico-footer-contrasto-1{cursor:pointer}.footer-languages .footer-lang{cursor:pointer;font-family:Arial;font-size:.5em;margin-left:0 .313em 0 0;text-transform:uppercase}.footer-languages .ico-footer-contrasto-2{cursor:pointer}.footer-languages>div{display:inline-block;padding:0 0 0 .313em}.footer-contrasto{font-size:1.5em}.footer-contrasto .ico-footer-contrasto-1{cursor:pointer}.footer-contrasto .ico-footer-contrasto-2{cursor:pointer}.footer-contrasto>div{display:inline-block;padding-left:0 .313em 0 .313em;margin-right:.313em}.footer-contrasto>div:hover{background-color:#fff;color:#323232}.footer-testo{font-size:1.5em}.footer-testo .ico-footer-testo-1{font-size:.5em}.footer-testo .ico-footer-testo-2{font-size:.8em}.footer-testo>div{cursor:pointer;display:inline-block;padding:0 .313em 0 .313em}.footer-testo>div:hover{background-color:#fff;color:#323232}.footer-contrasto-selection,.footer-languages-selection,.footer-testo-selection{cursor:pointer;font-size:.625em}.footer-languages-selection{margin:-.625em 1.313em 0 .313em}.footer-margin-top{margin-top:1.875em!important}.footer-margin-top--disabled{margin-top:0!important}.footer{background-color:#323232;color:#fff;width:100%}.footer.footer-fixed-bottom{z-index:1028;bottom:0}@media (min-width:768px){.footer{margin-bottom:0;margin-right:2.5em}}@media (min-width:992px){.footer{margin-right:12.5em}}@media (max-width:767px){.links-no-translate,.links-translate{border-top:none;border-right:none!important;border-left:none!important;border-bottom:1px solid #6f6f6f!important}.top-border,.top-left-border{border-top:none;border-right:none!important;border-bottom:1px solid #6f6f6f!important;border-left:none!important}.bottom-border,.bottom-right-border{border-top:none;border-right:none!important;border-bottom:1px solid #6f6f6f!important;border-left:none!important}.footer{height:25em}.footer .row{padding:0 .938em 0 .938em}.empty-footer{height:3.125em!important}.empty-footer>div{display:none}.footer-content-right{padding-top:.938em}}@media (min-width:768px) and (max-width:991px){.links-translate{border-top:none;border-right:1px solid #6f6f6f;border-left:none;border-bottom:1px solid #6f6f6f}.links-no-translate{border-top:none;border-right:none;border-left:none;border-bottom:1px solid #6f6f6f}.top-border{border-top:1px solid #6f6f6f;border-right:none;border-bottom:none;border-left:none}.bottom-border{border-top:none;border-right:none;border-bottom:1px solid #6f6f6f;border-left:none}.top-left-border{border-top:1px solid #6f6f6f;border-right:none;border-bottom:none;border-left:1px solid #6f6f6f}.bottom-right-border{border-top:none;border-right:1px solid #6f6f6f;border-bottom:1px solid #6f6f6f;border-left:none}.footer-content-left.bottom-right-border{border-bottom:none!important}.footer-content-center-l.top-left-border{border-top:none!important;border-right:none!important}.footer-content-center-r.top-left-border{border-bottom:none!important;border-left:none!important}.footer-content-right{border-right:none!important;border-bottom:none!important}.footer{height:12.5em}.footer .row{padding:0 .938em 0 .938em}.empty-footer{height:3.125em!important}.empty-footer>div{display:none}}.contrasto-on{background-color:#000}.contrasto-on .footer-content-left{color:#fff}.contrasto-on .footer-content-center-r button{background-color:#000!important}.contrasto-on .footer-content-center-r button:hover{background-color:#fff!important;color:#6f6f6f!important}.contrasto-on .footer-contrasto{color:#ccc}.contrasto-on .footer-contrasto>div:hover{background-color:#000;color:#fff}.contrasto-on .footer-testo{color:#ccc}.contrasto-on .footer-testo>div:hover{background-color:#000;color:#fff}.button-icon{font-size:1.7em!important;display:inline-block;vertical-align:middle;padding-right:.2em}.button{font-weight:700;font-size:.75em;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;text-transform:uppercase;height:3.3334em;min-width:6.875em;box-shadow:none!important} /*# sourceMappingURL=nbp-footer.component.css.map */ "]
    }),
    __param$4(0, Inject(DOCUMENT$1)),
    __metadata$29("design:paramtypes", [Object, Router])
], NbpFooterComponent);

var __decorate$50 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$34 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$7 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Client Http per recuperare le informazioni di cjContext
 */
let CjContextClientService = class CjContextClientService {
    constructor(config, http) {
        this.config = config;
        this.http = http;
        this.headers = new HttpHeaders().set('Content-Type', 'application/json');
    }
    /**
     * Esegue la chiamata http per recupeare il contesto passando come url param il token
     */
    getCjContext(token) {
        return this.config.getSessionManagerBaseUrl()
            .concatMap(url => {
            return this.http.get(url + `/npu-sm-v0/api/cjcontext/${token}`, { headers: this.headers, withCredentials: true });
        });
    }
    /**
     * Esegue la chiamata http per creare un nuovo contesto securizzato dai dati presenti
     * nel parametro di tipo ICjContextRequest
     */
    creaCjContextByRequest(request) {
        return this.config.getSessionManagerBaseUrl()
            .concatMap(url => {
            return this.http.post(url + `/npu-sm-v0/api/cjcontext`, request, { headers: this.headers, withCredentials: true });
        });
    }
    /**
     * Esegue la chiamata http per creare un nuovo contesto securizzato a partire dai parametri
     * NDG, application canale abi unitaOperativa
     */
    creaCjContext(ndg, abi, codUnitaOperativa, application, canale) {
        return this.config.getSessionManagerBaseUrl()
            .concatMap(url => {
            return this.http.post(url + `/npu-sm-v0/api/cjcontext`, { 'ndg': ndg, 'application': application, 'canale': canale, 'abi': abi, 'codUnitaOperativa': codUnitaOperativa }, { headers: this.headers, withCredentials: true });
        });
    }
};
CjContextClientService = __decorate$50([
    Injectable(),
    __param$7(0, Inject(APP_CONFIG)),
    __metadata$34("design:paramtypes", [Object, HttpClient])
], CjContextClientService);

var __decorate$49 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$33 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Servizio utilizzato per recuperare le informazioni di contesto
 *
 */
let CjContextService = class CjContextService {
    // TODO capire come passare l'indirizzo dell'ambiente PUV giusto
    // un idea 'semplice' ma poco elegante potrebbe essere quella di chiederlo in input nei metodi,
    // altrimenti bisogna lavorare a livello di provider
    constructor(cjContextClient) {
        this.cjContextClient = cjContextClient;
        this._contextInfoSource = new ReplaySubject(1);
    }
    /**
     * Crea un nuovo contesto applicativo
     * @return il token del contesto
     */
    // createNewCjContext(request: ICjContextRequest): Observable<ICjContext>;
    // createNewCjContext(ndg: string, abi: string, codUnitaOperativa: string, application: string, canale: string): Observable<ICjContext>;
    createNewCjContext(ndg, abi, codUnitaOperativa, application, canale) {
        if (typeof ndg !== 'string') {
            // nuovo metodo con oggetto ICjContextRequest
            let request = ndg;
            return this.cjContextClient.creaCjContextByRequest(request);
        }
        return this.cjContextClient.creaCjContext(ndg, abi, codUnitaOperativa, application, canale);
    }
    /**
     * Permette di salvare il contesto applicativo all'interno del servizio
     * @param ICjContext cjContext contesto applicativo
     */
    setCurrentCjContext(cjContext) {
        this._contextInfoSource.next(cjContext);
    }
    /**
     * Recupera il contesto applicativo salvato nel servizio
     * @return ICjContext contesto applicativo salvato nel servizio
     */
    getCurrentCjContext() {
        return this._contextInfoSource.asObservable();
    }
    getCurrentToken() {
        return this._token;
    }
    _setCurrentToken(token) {
        this._token = token;
        console.debug('Salvato token corrente: ' + this._token);
    }
    /**
     * Restituisce le informazioni di contesto chiamando il servizio rest dedicato.
     * Se il contensto è già stato recuperato restituisce tale contesto
     * @param  string token
     * @return Observable<ICjContext> contesto applicativo da servizio rest
     */
    getCjContextByToken(token) {
        this._setCurrentToken(token);
        if (!this._contextInfo) {
            return this.cjContextClient.getCjContext(token);
        }
        else {
            return Observable.of(this._contextInfo);
        }
    }
};
CjContextService = __decorate$49([
    Injectable(),
    __metadata$33("design:paramtypes", [CjContextClientService])
], CjContextService);

var __decorate$51 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$35 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjProgressConfigurationService = class CjProgressConfigurationService {
    constructor() {
        this.progressConfigurationSubject = new Subject();
    }
    getProgressConfigurationStream() {
        return this.progressConfigurationSubject.asObservable();
    }
    sendProgressConfigurationEvent(progressConfigurationEvent) {
        this.progressConfigurationSubject.next(progressConfigurationEvent);
    }
};
CjProgressConfigurationService = __decorate$51([
    Injectable(),
    __metadata$35("design:paramtypes", [])
], CjProgressConfigurationService);

var __decorate$52 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$36 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$8 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpProgressComponent = class NbpProgressComponent {
    constructor(document, renderer2) {
        this.document = document;
        this.renderer2 = renderer2;
        /**
         * Proprietà che indica lo step corrente
         * Oggetto strutturato che contiene stepId e pageId
         */
        // @Input() nbpCurrentStep: object;
        this._nbpWidth = 'col-xs-8';
        this._nbpOffset = 'col-xs-offset-0';
        this._nbpStepType = NbpStepDimension; // :NbpStepDimension;
        this._nbpLeftOffsetForCenter = 24;
        this.sticky = false;
        this.stickyActive = false;
        this.initializeProgressBar = () => {
            // setup Step Dimension to Large if not defined
            if (this.nbpConfiguration) {
                this.nbpConfiguration.forEach((stepConf, index) => {
                    // set nbpConfiguration stepDimension(optional) if not declared
                    if (!stepConf.stepDimension) {
                        stepConf.stepDimension = this._nbpStepType.GRANDE;
                    }
                    // calculate bootstrap col-__-offset depending on stepDimension
                    // this._nbpLeftOffsetForCenter = 24;
                    // switch (stepConf.stepDimension) {
                    //   case this._nbpStepType.GRANDE:
                    //     this._nbpLeftOffsetForCenter = this._nbpLeftOffsetForCenter - 3;
                    //     break;
                    //   case this._nbpStepType.MEDIO:
                    //     this._nbpLeftOffsetForCenter = this._nbpLeftOffsetForCenter - 2;
                    //     break;
                    //   case this._nbpStepType.PICCOLO:
                    //     this._nbpLeftOffsetForCenter = this._nbpLeftOffsetForCenter - 1;
                    //     break;
                    // }
                    // remove old and add new bootstrap col- class depending of stepDimension
                    // if ( this.stepList.length > 0 ) {
                    //   let currentElement = this.stepList.toArray()[index].nativeElement;
                    //   if ( currentElement.classList.contains(/\bcol-.{2}-[1-9]{1}[0-9]{0,1}\b/g) ) {
                    //     currentElement.classList.removeClass(/\bcol-.{2}-[1-9]{1}[0-9]{0,1}\b/g);
                    //   }
                    // }
                });
            }
            // calculate the offset for center the step
            // if ( this._nbpLeftOffsetForCenter > 0 ) { // && this._nbpLeftOffsetForCenter < 24
            //   let colOffset = Math.round((this._nbpLeftOffsetForCenter / 2));
            //   this._nbpOffset = `col-xs-offset-${colOffset} col-md-offset-${colOffset}`;
            // }
            // OLD CODE TO DELETE
            // if (this.nbpConfiguration) {
            //   switch (this.nbpConfiguration.length) {
            //     case 1:
            //       this._nbpWidth = 'col-xs-4 col-md-4';
            //       this._nbpOffset = 'col-xs-offset-12 col-md-offset-12';
            //       break;
            //     case 2:
            //       this._nbpWidth = 'col-xs-4 col-md-4';
            //       this._nbpOffset = 'col-xs-offset-8 col-md-offset-8';
            //       break;
            //     case 3:
            //       this._nbpWidth = 'col-xs-4 col-md-4';
            //       this._nbpOffset = 'col-xs-offset-6 col-md-offset-6';
            //       break;
            //     case 4:
            //       this._nbpWidth = 'col-xs-4 col-md-4';
            //       this._nbpOffset = 'col-xs-offset-4 col-md-offset-4';
            //       break;
            //     case 5:
            //       this._nbpWidth = 'col-xs-4 col-md-4';
            //       this._nbpOffset = 'col-xs-offset-2 col-md-offset-2';
            //       break;
        };
    }
    /**
     * Booleano che abilita/disabilita il posizionamento sticky
     * al top della pagina
     */
    get nbpDisableSticky() { return this._nbpDisableSticky; }
    ;
    set nbpDisableSticky(value) { this._nbpDisableSticky = coerceBooleanProperty(value); }
    ;
    ngOnInit() {
        // console.log('nbpProgressInit');
        // console.log('progress: ', this.progress);
        this.renderer2.addClass(this.progress.nativeElement, 'header');
        // console.log('progress: ', this.progress);
        this.renderer2.addClass(this.steps.nativeElement, 'header');
    }
    ngOnDestroy() {
        /*
        this.renderer2.removeClass(this.progress.nativeElement, 'header');
    
        this.renderer2.removeClass(this.step.nativeElement, 'header');
    
        console.log('progress destroyed', this.progress);
        */
    }
    ngDoCheck() {
        this.initializeProgressBar();
    }
    onWindowScroll() {
        let number = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        if (number > 70) {
            this.sticky = true;
        }
        else {
            this.sticky = false;
        }
    }
};
__decorate$52([
    Input(),
    __metadata$36("design:type", Array)
], NbpProgressComponent.prototype, "nbpConfiguration", void 0);
__decorate$52([
    Input(),
    __metadata$36("design:type", Boolean),
    __metadata$36("design:paramtypes", [Object])
], NbpProgressComponent.prototype, "nbpDisableSticky", null);
__decorate$52([
    ViewChild('progress'),
    __metadata$36("design:type", ElementRef)
], NbpProgressComponent.prototype, "progress", void 0);
__decorate$52([
    ViewChild('steps'),
    __metadata$36("design:type", ElementRef)
], NbpProgressComponent.prototype, "steps", void 0);
__decorate$52([
    ViewChild('step'),
    __metadata$36("design:type", QueryList)
], NbpProgressComponent.prototype, "stepList", void 0);
__decorate$52([
    HostListener("window:scroll", []),
    __metadata$36("design:type", Function),
    __metadata$36("design:paramtypes", []),
    __metadata$36("design:returntype", void 0)
], NbpProgressComponent.prototype, "onWindowScroll", null);
NbpProgressComponent = __decorate$52([
    Component({
        selector: 'nbp-progress',template: "<div #progress id=\"progress-container\" class=\"nbp-progress-container\" [ngClass]=\"{'sticky':sticky && !_nbpDisableSticky}\"><div class=\"progress-container container\"><div #steps id=\"step-container\" class=\"progress-steps-container\"><div #step *ngFor=\"let stepConf of nbpConfiguration; let stepIndex = index\" class=\"step pad-l-5 pad-r-5\" [ngClass]=\"{'step-grande': stepConf.stepDimension === _nbpStepType.GRANDE, 'step-medio': stepConf.stepDimension === _nbpStepType.MEDIO, 'step-piccolo': stepConf.stepDimension === _nbpStepType.PICCOLO } \"><div class=\"progress\" [ngClass]=\"{'active': stepConf.active || stepConf.fillPercent === 100}\"><div class=\"progress-bar\" [ngStyle]=\"{ width: stepConf.fillPercent + '%' }\"></div></div><div class=\"progress-step-name\" [ngClass]=\"{'active': stepConf.active || stepConf.fillPercent === 100}\">{{stepConf.label}}</div></div></div></div><ng-content></ng-content></div><div *ngIf=\"stickyActive\" style=\"height:5.375em\"></div>",
        styles: ["#progress-container.header{border-top:none!important}#step-container.header{height:3.125em!important}.nbp-progress-container{background-color:#f8f8f8;margin-left:0;margin-right:0;z-index:9040!important;border-bottom:1px solid rgba(204,204,204,.5)}.nbp-progress-container.sticky{position:fixed!important;top:42px;left:0;width:100%!important;z-index:9040!important;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}:host(.sticky.menu-opened) .nbp-progress-container.sticky{top:calc(112px + 22em)!important}.progress-container{display:table}.progress-steps-container{height:5em;display:table-cell;padding-top:5px;padding-bottom:5px;vertical-align:middle;text-align:center}.progress-steps-container>.step{display:inline-block;float:none!important}.progress-steps-container>.step.step-grande>.progress{width:6.875em}.progress-steps-container>.step.step-medio>.progress{width:5em}.progress-steps-container>.step.step-piccolo>.progress{width:2.5em}.progress{height:.625em;background-color:transparent;border-radius:.625em;border:.125em solid #ccc;margin-bottom:.25em;box-shadow:none;overflow:hidden}.progress.active{border:.125em solid #258900}.progress-bar{border-radius:.625em;background-color:#258900;box-shadow:none}.progress-step-name{position:relative;text-align:center;font-size:.625em;font-weight:700;text-transform:uppercase;color:#6f6f6f}.progress-step-name.arrowStep:after{position:absolute;-webkit-transform:rotate(45deg);transform:rotate(45deg);content:\" \";width:15px;height:15px;border:0 solid #ccc;border-width:1px 0 0 1px;background:#fff;left:0;right:0;bottom:-32px;margin:0 auto}.progress-step-name.active{color:#258900}:host-context(.contrasto-on) .progress{background-color:#fff;border:.125em solid #000}:host-context(.contrasto-on) .nbp-progress-container{background-color:#fff;border-bottom:1px solid #000}:host-context(.contrasto-on) .progress.active{border:.125em solid #000}:host-context(.contrasto-on) .progress-bar{background-color:#000}:host-context(.contrasto-on) .progress-step-name{color:#000}:host-context(.contrasto-on) .progress-step-name.arrowStep:after{transform:rotate(45deg);content:\" \";width:15px;height:15px;border:0 solid #000;border-width:1px 0 0 1px;background:#fff;left:0;right:0;bottom:-32px;margin:0 auto}:host-context(.contrasto-on) .progress-step-name.active{color:#000}@media (max-width:767px){.progress-container{width:80%}}:host-context(.contrasto-on) .progress.active{border:.125em solid #000}:host-context(.contrasto-on) .progress-bar{background-color:#000}:host-context(.contrasto-on) .progress-step-name{color:#000}:host-context(.contrasto-on) .progress-step-name.active{color:#000} /*# sourceMappingURL=nbp-progress.component.css.map */ "]
    }),
    __param$8(0, Inject(DOCUMENT$1)),
    __metadata$36("design:paramtypes", [Object, Renderer2])
], NbpProgressComponent);

var __decorate$54 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$38 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpEmbeddingService = class NbpEmbeddingService {
    constructor() {
        // TODO: Meglio un BehaviorSubject?
        this._outgoingEvents$ = new Subject();
        this._incomingEvents$ = new Subject();
    }
    /**
     * Permette di recuperare lo stream degli OutgoingEmbeddingEvents
     */
    getOutgoingEventStream() {
        return this._outgoingEvents$.asObservable();
    }
    /**
     * Permette di recuperare lo stream degli IncomingEmbeddingEvents
     */
    getIncomingEventStream() {
        return this._incomingEvents$.asObservable();
    }
    /**
     * Permette di aggiungere un embeddingEvent nello stream Outgoing
     * @param event: IEmbeddingEvent
     */
    notifyOutgoingEvent(event) {
        this._outgoingEvents$.next(event);
    }
    /**
     * Permette di aggiungere un embeddingEvent nello stream Incoming
     * @param event: IEmbeddingEvent
     */
    notifyIncomingEvent(event) {
        this._incomingEvents$.next(event);
    }
};
NbpEmbeddingService = __decorate$54([
    Injectable(),
    __metadata$38("design:paramtypes", [])
], NbpEmbeddingService);

var __decorate$53 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$37 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpViewSettingsService = class NbpViewSettingsService {
    constructor(embeddingService) {
        this.embeddingService = embeddingService;
        // TODO: Meglio un BehaviorSubject?
        this._contrast$ = new Subject();
        this._fontSize$ = new Subject();
        this.receiveEvents();
    }
    receiveEvents() {
        this.embeddingService.getIncomingEventStream().filter((event) => {
            return (event.type === NbpEmbeddingMessageType.SET_CONTRAST_ON || event.type === NbpEmbeddingMessageType.SET_CONTRAST_OFF);
        })
            .subscribe((event) => {
            let isContrastoOn = event.type === NbpEmbeddingMessageType.SET_CONTRAST_ON ? true : false;
            this.notifyContrastoEvent(isContrastoOn);
        });
        this.embeddingService.getIncomingEventStream().filter((event) => {
            return (event.type === NbpEmbeddingMessageType.SET_FONT_SIZE);
        })
            .subscribe((event) => {
            let fontSize = event.body.fontSize;
            this.notifyFontSizeEvent(fontSize);
            this.embeddingService.notifyOutgoingEvent({
                type: NbpEmbeddingMessageType.PAGE_SIZE,
                body: this.getPageHeight()
            });
        });
    }
    getPageHeight() {
        let resize;
        let element = document.getElementById('nbp-wrapper-container') ? document.getElementById('nbp-wrapper-container') : document.getElementById('body-container');
        if (element) {
            resize = element.clientHeight + 100 + 'px';
        }
        return resize;
    }
    getContrastoEventStream() {
        return this._contrast$.asObservable();
    }
    notifyContrastoEvent(isContrastoOn) {
        this._contrast$.next(isContrastoOn);
    }
    getFontSizeEventStream() {
        return this._fontSize$.asObservable();
    }
    notifyFontSizeEvent(fontSize) {
        let pxFontSize;
        switch (fontSize) {
            case NbpFontSize.SMALL:
                pxFontSize = '16px';
                break;
            case NbpFontSize.MEDIUM:
                pxFontSize = '19px';
                break;
            case NbpFontSize.LARGE:
                pxFontSize = '22px';
                break;
            default:
                pxFontSize = '16px';
                break;
        }
        this._fontSize$.next(pxFontSize);
    }
};
NbpViewSettingsService = __decorate$53([
    Injectable(),
    __metadata$37("design:paramtypes", [NbpEmbeddingService])
], NbpViewSettingsService);

var __decorate$48 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$32 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$6 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let CjBodyComponent = class CjBodyComponent {
    constructor(contextService, route, configurator, nbpViewSettingsService, document) {
        this.contextService = contextService;
        this.route = route;
        this.configurator = configurator;
        this.nbpViewSettingsService = nbpViewSettingsService;
        this.document = document;
        this.onResizeEvent = Observable.fromEvent(window, 'resize');
        this.onburgerMenuToggle = new Subject();
        this._isContrastoOn = false;
        /**
         * Evento lanciato sul click del pulsante "Pagina Precedente"
         */
        this.cjOnPrevPageButtonClicked = new EventEmitter();
        /**
         * Evento lanciato sul click della voce di menù
         */
        this.cjOnMenuItemClicked = new EventEmitter();
        /**
         * Evento emesso quando il contesto applicativo è disponibile.
         * @param {EventEmitter<ICjContext>}  cjOnContextReady
         */
        this.cjOnContextReady = new EventEmitter();
        this._nbpChannel = NbpChannel;
        this._isProgressInsideStickyHeader = false;
        this.progressStream = this.configurator.getProgressConfigurationStream();
        this.receiveContrastoEvent();
        this.receiveFontSizeEvent();
    }
    /**
     * Booleano per abilitare il pulsante “Pagina precedente”
     */
    get cjShowPrevPageButton() {
        return this._cjShowPrevPageButton;
    }
    set cjShowPrevPageButton(value) {
        this._cjShowPrevPageButton = coerceBooleanProperty(value);
    }
    /**
     * Booleano che abilita/disabilita il contenuto ng-content del componente.
     * Header e footer sono sempre abilitati.
     * Attributo "disabled" standard di HTML element
     */
    get disabled() { return this._cjDisabled; }
    ;
    set disabled(value) { this._cjDisabled = coerceBooleanProperty(value); }
    ;
    receiveContrastoEvent() {
        this.nbpViewSettingsService.getContrastoEventStream()
            .subscribe(isContrastoOn => this._isContrastoOn = isContrastoOn);
    }
    receiveFontSizeEvent() {
        this.nbpViewSettingsService.getFontSizeEventStream()
            .subscribe((fontSize) => this.document.body.style.fontSize = fontSize);
    }
    ngOnInit() {
        this._getCjContextFromToken();
        this.cjChannel = this.cjChannel ? this.cjChannel : NbpChannel.ABC;
    }
    // private onBurgerResize: Observable<any>;
    ngAfterViewInit() {
        this._setBodyContainerHeight();
        this.onResizeEvent.forEach(evt => this._setBodyContainerHeight());
        // TODO Serve ancora?? .. eliminare anche ViewChildren
        this.progressChildren.changes.subscribe(() => {
            setTimeout(() => {
                this._setBodyContainerHeight();
            });
        });
    }
    ngAfterViewChecked() {
        this._setBodyContainerHeight();
    }
    setNavigationHeaderSlim(isNavigationHeaderSlim) {
        this._isNavigationHeaderSlim = isNavigationHeaderSlim;
    }
    _getCjContextFromToken() {
        if (!this.cjToken) {
            if (this.cjTokenNameParam) {
                this.sub = this.route.params.subscribe(params => {
                    this.cjToken = params[this.cjTokenNameParam];
                    this._obtainContext();
                });
            }
            else {
                console.log('WARNING - Componente CjBody - senza cjToken e senza cjTokenNameParam.');
            }
        }
        else {
            this._obtainContext();
        }
    }
    _obtainContext() {
        this.contextService.getCjContextByToken(this.cjToken).subscribe((context) => {
            this._contextInfo = context;
            this.contextService.setCurrentCjContext(this._contextInfo);
            /**
             * se cjApplicationName non presente è popolato con i dato preso dal cjContext
             */
            if (!this.cjApplicationName) {
                this.cjApplicationName = this._contextInfo.application;
            }
            this.cjOnContextReady.emit(this._contextInfo);
        });
    }
    _onPrevPageButtonClicked() {
        this.cjOnPrevPageButtonClicked.emit('cjOnPrevPageButtonClickedEvent');
    }
    _setBodyContainerHeight() {
        let stickyContainerElement = document.getElementsByClassName('sticky-default').item(0);
        /*selection of header element container without nbpBurgerMenu element*/
        let headerElement = document.querySelector('nbp-header > div > div');
        let nbpNavigationHeaderElement = document.querySelector('nbp-navigation-header > div');
        let nbpProgressElement = document.querySelector('nbp-progress > .nbp-progress-container.sticky ');
        let cjbodyHeaderHeight;
        /*cjBodyHeader heightCalculation */
        let headerHeight = !!headerElement ? headerElement.clientHeight : 0;
        let navigationHeaderHeight = !!nbpNavigationHeaderElement ? nbpNavigationHeaderElement.clientHeight : 0;
        let nbpProgressHeight = !!nbpProgressElement ? nbpProgressElement.clientHeight : 0;
        cjbodyHeaderHeight = (headerHeight +
            navigationHeaderHeight +
            nbpProgressHeight); // stickyContainerElement.clientHeight;
        if (!!nbpProgressElement) {
            /*Progress position:fixed top position*/
            nbpProgressElement.style.top = headerHeight + navigationHeaderHeight + 'px';
        }
        let footerElement = document.getElementsByTagName('footer').item(0);
        let footerElementHeight = !!footerElement ? footerElement.clientHeight : 0;
        let viewPortElement = document.documentElement;
        let viewPortHeight = viewPortElement.clientHeight; // or window.innerHeight
        let bodyContainerElement = document.getElementById('body-container');
        if (bodyContainerElement) {
            let bodyContainerCalculedHeight;
            /* Body container height calculation*/
            bodyContainerCalculedHeight = viewPortHeight - (cjbodyHeaderHeight + footerElementHeight);
            bodyContainerElement.style.top = cjbodyHeaderHeight + 'px';
            bodyContainerElement.style.height = bodyContainerCalculedHeight + 'px';
        }
    }
    _cjChangeRoute(menuItem) {
        this.cjOnMenuItemClicked.emit(menuItem);
    }
};
__decorate$48([
    Input(),
    __metadata$32("design:type", String)
], CjBodyComponent.prototype, "cjToken", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", String)
], CjBodyComponent.prototype, "cjTokenNameParam", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", String)
], CjBodyComponent.prototype, "cjApplicationName", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", String)
], CjBodyComponent.prototype, "cjSectionTitle", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", Number)
], CjBodyComponent.prototype, "cjChannel", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", Object),
    __metadata$32("design:paramtypes", [Boolean])
], CjBodyComponent.prototype, "cjShowPrevPageButton", null);
__decorate$48([
    Input(),
    __metadata$32("design:type", Object)
], CjBodyComponent.prototype, "cjBurgerMenu", void 0);
__decorate$48([
    Output(),
    __metadata$32("design:type", EventEmitter)
], CjBodyComponent.prototype, "cjOnPrevPageButtonClicked", void 0);
__decorate$48([
    Output(),
    __metadata$32("design:type", EventEmitter)
], CjBodyComponent.prototype, "cjOnMenuItemClicked", void 0);
__decorate$48([
    Input(),
    __metadata$32("design:type", Boolean),
    __metadata$32("design:paramtypes", [Object])
], CjBodyComponent.prototype, "disabled", null);
__decorate$48([
    Output(),
    __metadata$32("design:type", EventEmitter)
], CjBodyComponent.prototype, "cjOnContextReady", void 0);
__decorate$48([
    ViewChildren(NbpProgressComponent),
    __metadata$32("design:type", QueryList)
], CjBodyComponent.prototype, "progressChildren", void 0);
CjBodyComponent = __decorate$48([
    Component({
        selector: 'cj-body',template: "<div class=\"sticky-default\"><nbp-header [nbpName]=\"cjApplicationName\" [nbpChannel]=\"cjChannel\" nbpLogo=\"./cjlib/assets/images/sprite.png\" nbpDisableSticky><nbp-customer-name [nbpCustomer]=\"_contextInfo?.cliente.intestazione\"></nbp-customer-name><nbp-burger-menu *ngIf=\"(cjChannel !== _nbpChannel.ABC) && !!cjBurgerMenu\" [nbpMenu]=\"cjBurgerMenu\" (nbpOnItemClick)=\"_cjChangeRoute($event)\"></nbp-burger-menu></nbp-header><nbp-navigation-header [ngClass]=\"{'nav-header-slim': _isProgressInsideStickyHeader}\" [nbpTitle]=\"cjApplicationName\" [nbpSectionTitle]=\"cjSectionTitle\" [nbpShowPrevPage]=\"cjShowPrevPageButton\" (nbpPrevPage)=\"_onPrevPageButtonClicked()\" nbpDisableSticky></nbp-navigation-header></div><div id=\"body-container\" class=\"container-fluid\" [ngClass]=\"{'other-header' : cjChannel !== _nbpChannel.ABC, 'abc-header' : cjChannel === _nbpChannel.ABC}\"><div id=\"body-content\"><ng-content></ng-content></div></div><nbp-footer></nbp-footer>",
        styles: [".navigation-header-container{margin-right:-40px;margin-left:-40px}.sticky-default{position:fixed!important;left:0!important;right:0!important;z-index:1030!important}#body-container.other-header ::ng-deep cj-wizard .sidebar-button__layout{top:80px!important}.internal-scrolling{position:relative;overflow:auto;padding:0 5px 60px}#body-container.other-header{position:relative;overflow:auto;padding:0 5px 60px;width:100%;margin:0!important}#body-container.abc-header{position:relative;overflow:auto;padding:0 5px 60px;width:100%;margin:0!important}#body-container ::ng-deep cj-wizard .sidebar-button__layout.menu-opened{top:calc(80px + 22em)!important} /*# sourceMappingURL=cj-body.component.css.map */ "],
        host: {
            '[class.contrasto-on]': '_isContrastoOn'
        }
    }),
    __param$6(4, Inject(DOCUMENT$1)),
    __metadata$32("design:paramtypes", [CjContextService, ActivatedRoute,
        CjProgressConfigurationService, NbpViewSettingsService, Object])
], CjBodyComponent);

var __decorate$47 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$31 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$5 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpBurgerMenuComponent = class NbpBurgerMenuComponent {
    constructor(cjBody) {
        this.cjBody = cjBody;
        /**
         * (Opzionale) booleano per disabilitare la possibilità di fare logout.
         * Valore default false
         */
        this.nbpDisableLogout = false;
        /**
         * Evento emesso sulla pressione del logout.
         * @param {EventEmitter<INbpUser>}  nbpOnLogout
         */
        this.nbpOnLogout = new EventEmitter();
        /**
         * Evento emesso sulla pressione di ogni voce di menu'.
         * @param {EventEmitter<INbpItemMenu>}  nbpOnItemClick
         */
        this.nbpOnItemClick = new EventEmitter();
        /**
         * Evento emesso all'apertura del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnOpen = new EventEmitter();
        /**
         * Evento emesso alla chiusure del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnClose = new EventEmitter();
        this._isOpen = false; // true in test phase
        this._showSecondLevelMenu = false; // false in test phase
    }
    ngOnInit() {
    }
    _onClick(item) {
        // console.log('click item menu: ' + JSON.stringify(item));
        this.nbpOnItemClick.emit(item);
        if (!item.secondLevelMenu || item.secondLevelMenu.sections.length === 0) {
            this.close();
        }
        if (item.secondLevelMenu && item.secondLevelMenu.sections && item.secondLevelMenu.sections.length > 0) {
            this._selectedItem = item;
            this._showSecondLevelMenu = true;
        }
    }
    _goBack() {
        this._showSecondLevelMenu = false;
        this._selectedItem = null;
    }
    // Metodi Pubblici del componente
    /**
     * Permette apertura programmatica del BurgerMenu
     */
    open() {
        this._isOpen = true;
        this.nbpOnOpen.emit();
        if (this.cjBody) {
            this._sendMenuStatusEvent();
        }
    }
    /**
     * Permette la chiusura programmatica del BurgerMenu
     */
    close() {
        this._isOpen = false;
        this.nbpOnClose.emit();
        if (this.cjBody) {
            this._sendMenuStatusEvent();
        }
    }
    /**
     * Permette di eseguire il toggle del BurgerMenu
     */
    toggle() {
        this._isOpen ? this.close() : this.open();
    }
    _sendMenuStatusEvent() {
        this.cjBody.onburgerMenuToggle.next(this._isOpen);
    }
};
__decorate$47([
    Input(),
    __metadata$31("design:type", Object)
], NbpBurgerMenuComponent.prototype, "nbpMenu", void 0);
__decorate$47([
    Input(),
    __metadata$31("design:type", Object)
], NbpBurgerMenuComponent.prototype, "nbpUser", void 0);
__decorate$47([
    Input(),
    __metadata$31("design:type", Boolean)
], NbpBurgerMenuComponent.prototype, "nbpDisableLogout", void 0);
__decorate$47([
    Output(),
    __metadata$31("design:type", EventEmitter)
], NbpBurgerMenuComponent.prototype, "nbpOnLogout", void 0);
__decorate$47([
    Output(),
    __metadata$31("design:type", EventEmitter)
], NbpBurgerMenuComponent.prototype, "nbpOnItemClick", void 0);
__decorate$47([
    Output(),
    __metadata$31("design:type", EventEmitter)
], NbpBurgerMenuComponent.prototype, "nbpOnOpen", void 0);
__decorate$47([
    Output(),
    __metadata$31("design:type", EventEmitter)
], NbpBurgerMenuComponent.prototype, "nbpOnClose", void 0);
NbpBurgerMenuComponent = __decorate$47([
    Component({
        selector: 'nbp-burger-menu',template: "<div class=\"menu\" [ngClass]=\"{'closed': !_isOpen, 'open': _isOpen}\"><div class=\"container first-level-menu\" [ngClass]=\"{'open': !_showSecondLevelMenu}\" [hidden]=\"_showSecondLevelMenu\"><div class=\"row\"><div class=\"col-sm-16\"><div><div class=\"col-sm-12 section-menu\" *ngFor=\"let section of nbpMenu.sections; let i = index\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\"></span> <span>{{item.label}}</span></a></li></ul></div></div></div><div class=\"col-sm-8\"><ng-content selector=\"nbp-logged-user\"></ng-content></div></div></div><div class=\"container second-level-menu\" [ngClass]=\"{'open': _showSecondLevelMenu}\" *ngIf=\"_showSecondLevelMenu\"><div class=\"row upper-bar\"><div class=\"menu-principale pull-left\"><span class=\"glyphicon icon icon-arrow-left\"></span> <span class=\"menu-principale-title\" (click)=\"_goBack()\">Menu principale</span></div><div class=\"selected-first-level-menu pull-right\"><span class=\"icon {{_selectedItem.icon}}\"></span> <span>{{_selectedItem.label}}</span></div></div><div class=\"row second-level-buttons\"><div class=\"col-sm-8\" *ngFor=\"let section of _selectedItem.secondLevelMenu.sections; let i = index\" [ngClass]=\"{'main-menu-container-pad-l': i > 0, 'main-menu-container-pad-r': i !== _selectedItem.secondLevelMenu.sections.length - 1}\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\"></span> <span>{{item.label}}</span></a></li></ul></div></div></div></div>",
        styles: [".menu{position:relative;width:100%;height:0;overflow-x:hidden;overflow-y:auto;background-color:#323232;-moz-transition:height .25s ease-out;-o-transition:height .25s ease-out;transition:height .25s ease-out}.menu .icon{margin-right:.313em;font-size:1.75em;vertical-align:middle}.menu.closed{height:0}.menu.open{height:22em}.main-menu-container{padding:0}.section-menu:nth-child(2n+3){clear:left}.main-menu{list-style:none;padding:0 .313em 0 .313em;margin:0}.main-menu a{color:#ccc;display:table;width:100%;padding:.313em 1.25em .313em 1.25em;margin:1.25em 0 1.25em 0;text-decoration:none;cursor:pointer;height:3.75em}.main-menu a:active,.main-menu a:focus,.main-menu a:hover{background-color:#258900;color:#fff}.main-menu a span{display:table-cell;vertical-align:middle;text-align:left}.main-menu a span:nth-child(1){width:1.563em}.main-menu .select{background-color:#258900;color:#fff;border:1px solid #258900}.upper-bar{border-bottom:1px solid #6f6f6f}.menu-principale{color:#ccc;font-size:1em;padding:1em .625em .625em .625em;cursor:pointer}.menu-principale .icon{font-size:.875em}.menu-principale-title{vertical-align:top}.selected-first-level-menu{color:#6f6f6f;padding:.625em}.first-level-menu{position:absolute;left:0;right:0;opacity:0;left:-6.25em;padding:0 .625em 0 .625em;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}.first-level-menu.open{opacity:1;left:0}.second-level-menu{position:absolute;left:0;right:0;opacity:0;left:6.25em;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}.second-level-menu.open{opacity:1;left:0}:host-context(.contrasto-on) .menu{background-color:#000}:host-context(.contrasto-on) .menu.open{border-bottom:2px solid #fff}:host-context(.contrasto-on) .main-menu a{color:#fff;border:1px solid #fff}:host-context(.contrasto-on) .main-menu a:active,:host-context(.contrasto-on) .main-menu a:focus,:host-context(.contrasto-on) .main-menu a:hover{background-color:#fff;color:#000;border:1px solid #fff}:host-context(.contrasto-on) .main-menu .select{background-color:#fff;color:#000;border:1px solid #fff}:host-context(.contrasto-on) .upper-bar{border-bottom:1px solid #000}:host-context(.contrasto-on) .menu-principale{color:#fff}:host-context(.contrasto-on) .selected-first-level-menu{color:#fff}:host-context(.contrasto-on) .user-button a{color:#fff;border:1px solid #fff}:host-context(.contrasto-on) .user-button a:active,:host-context(.contrasto-on) .user-button a:focus,:host-context(.contrasto-on) .user-button a:hover{background-color:#fff;color:#000;border:1px solid #fff} /*# sourceMappingURL=nbp-burger-menu.component.css.map */ "]
    }),
    __param$5(0, Optional()),
    __metadata$31("design:paramtypes", [CjBodyComponent])
], NbpBurgerMenuComponent);

var __decorate$46 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$30 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpHeaderComponent = class NbpHeaderComponent {
    constructor() {
        /**
         * Booleano che mantiene lo stato del Menu
         */
        this._nbpMenuOpen = false;
        /**
         * Booleano che permette di mostrare il Menu
         */
        this._nbpHideMenu = false;
        /**
         * Variabile di appoggio per enum NbpChannel
         */
        this._nbpChannel = NbpChannel;
    }
    /**
     * Booleano che abilita/disabilita il posizionamento sticky
     * al top della pagina
     */
    get nbpDisableSticky() { return this._nbpDisableSticky; }
    ;
    set nbpDisableSticky(value) { this._nbpDisableSticky = coerceBooleanProperty(value); }
    ;
    _toogleMenu() {
        this._nbpMenuOpen = !this._nbpMenuOpen;
        if (this.innerMenu) {
            this.innerMenu.toggle();
        }
    }
    ngAfterContentInit() {
        if (!this.nbpChannel) {
            this.nbpChannel = NbpChannel.ABC;
        }
        this._setMenuVisibility();
    }
    _setMenuVisibility() {
        this._nbpHideMenu = this.nbpChannel === NbpChannel.ABC || !this.innerMenu;
        this._burgerMenuCloseSubscription();
    }
    _burgerMenuCloseSubscription() {
        if (!this._nbpHideMenu) {
            this.innerMenu.nbpOnClose.subscribe(() => { this._nbpMenuOpen = false; });
        }
    }
};
__decorate$46([
    Input(),
    __metadata$30("design:type", String)
], NbpHeaderComponent.prototype, "nbpName", void 0);
__decorate$46([
    Input(),
    __metadata$30("design:type", Number)
], NbpHeaderComponent.prototype, "nbpChannel", void 0);
__decorate$46([
    Input(),
    __metadata$30("design:type", String)
], NbpHeaderComponent.prototype, "nbpLogo", void 0);
__decorate$46([
    Input(),
    __metadata$30("design:type", Boolean),
    __metadata$30("design:paramtypes", [Object])
], NbpHeaderComponent.prototype, "nbpDisableSticky", null);
__decorate$46([
    ContentChild(NbpBurgerMenuComponent),
    __metadata$30("design:type", NbpBurgerMenuComponent)
], NbpHeaderComponent.prototype, "innerMenu", void 0);
NbpHeaderComponent = __decorate$46([
    Component({
        selector: 'nbp-header',template: "<div class=\"header\" [ngClass]=\"{'navbar-fixed-top':!_nbpDisableSticky}\"><div class=\"navbar\" id=\"header-navbar\" [ngClass]=\"{'navbar-IB': (nbpChannel===_nbpChannel.IB) && !_nbpDisableSticky}\"><div class=\"container\" [ngClass]=\"{'container-slim': (nbpChannel===_nbpChannel.ABC)}\"><div><div class=\"navbar-logo\" *ngIf=\"nbpName\"><label *ngIf=\"nbpChannel===_nbpChannel.INTRANET\" class=\"nome-applicativo\" [innerHTML]=\"nbpName\"></label> <a *ngIf=\"!nbpLogo\" class=\"navbar-logo-brand-small\" href=\"#/\"><span class=\"sr-only\">Intesa San Paolo</span> </a><img *ngIf=\"nbpLogo\" src=\"{{nbpLogo}}\" class=\"navbar-logo-brand-small-custom\"></div><div class=\"navbar-logo\" *ngIf=\"!nbpName && nbpChannel!==_nbpChannel.ABC\"><a *ngIf=\"!nbpLogo\" class=\"navbar-logo-brand\" href=\"#/\"><span class=\"sr-only\">Intesa San Paolo</span> </a><img *ngIf=\"nbpLogo\" src=\"{{nbpLogo}}\" class=\"navbar-logo-brand-custom\"></div><div class=\"navbar-logo\" *ngIf=\"!nbpName && (nbpChannel===_nbpChannel.ABC)\"><a *ngIf=\"!nbpLogo\" class=\"navbar-logo-brand-small\" href=\"#/\"><span class=\"sr-only\">Intesa San Paolo</span> </a><img *ngIf=\"nbpLogo\" src=\"{{nbpLogo}}\" class=\"navbar-logo-brand-small-custom\"></div><div *ngIf=\"nbpChannel!==_nbpChannel.ABC\" class=\"navbar-hole\"><div><ng-content></ng-content></div></div><div *ngIf=\"!_nbpHideMenu\" class=\"navbar-toggle\" (click)=\"_toogleMenu()\" ng-class=\"{'navbar-toggle-open': _nbpMenuOpen}\"><button type=\"button\"><span class=\"icon {{_nbpMenuOpen ? 'ico-comuni-chiudi' : 'ico-navbar-menu'}}\"></span></button></div><div *ngIf=\"nbpChannel===_nbpChannel.ABC\" class=\"navbar-info-cliente\"><div><ng-content select=\"nbp-customer-name\"></ng-content></div></div></div></div></div><ng-content select=\"nbp-burger-menu\"></ng-content><ng-content select=\"nbp-navigation-header\"></ng-content></div>",
        styles: [".header{width:100%}.header.navbar-fixed-top{z-index:1041}.header .navbar{position:relative;border:0!important;border-radius:0!important;margin:0!important;left:0;right:0;width:100%;background-color:#258900}.header .navbar.navbar-IB{background:linear-gradient(90deg,#258900 50%,transparent 50%)!important}.header .navbar .container{display:table;position:relative;padding-right:0;background-color:#258900;height:4.375em}.header .navbar .container>div{display:table-row}.header .navbar .container-slim{height:3.125em!important}.header .row{margin:0}.header-overlay{position:relative;top:0;left:0;width:100%;height:100%;background:#f2f2f2}.navbar .container .navbar-logo{display:table-cell;vertical-align:middle;min-width:17em}.navbar .container .navbar-toggle{display:table-cell;vertical-align:middle;width:5em;height:4.375em;float:none;background-color:transparent;border:0;border-radius:0;margin:0;padding:0;text-align:center;cursor:pointer}.navbar .container .navbar-toggle:hover{background:#323232}.navbar .container .navbar-toggle:focus{background:#323232}.navbar .container .navbar-toggle:active{background:#323232}.navbar .container .navbar-info-cliente{display:table-cell;vertical-align:middle;height:3.125em;background-color:transparent;text-align:left;color:#fff;line-height:1em;padding-right:10px}.navbar .container .navbar-info-cliente>div{float:right}.navbar .container .navbar-info-cliente .container-arrow{float:right;padding-top:1.25em;padding-right:1.5625em}.navbar .container .navbar-info-cliente .accordion-arrow{cursor:pointer;font-size:1.6em}.navbar .container .navbar-info-cliente .info-cliente-open{position:absolute;background-color:#323232;z-index:1000;width:22.25em;height:9.8125em;border:0;border-radius:0;text-align:center;margin-top:.5625em;display:table}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-title{vertical-align:middle;height:2.3125em;display:table-cell}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left;background-color:#3f3f3f;font-weight:700}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select .icon{float:right;color:#258900;padding-right:10px}.navbar .container .navbar-info-cliente .info-cliente-open .title-nsg-label{color:#ccc;text-transform:uppercase}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente{margin-left:1em;color:#ccc}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente-selected{margin-left:1em;color:#fff}.navbar .container .navbar-hole{display:table-cell;vertical-align:middle;margin-top:5px;margin-bottom:5px;padding-left:10px;padding-right:10px}.navbar-logo-brand{display:block;width:250px;height:30px;background-image:url(/cjlib/assets/images/sprite.png);background-repeat:no-repeat}.navbar-logo-brand-small{display:block;width:225px;height:25px;background-image:url(/cjlib/assets/images/sprite.png);background-repeat:no-repeat}.navbar-logo-brand-custom{display:block;height:30px;background-repeat:no-repeat}.navbar-logo-brand-small-custom{display:block;height:25px;background-repeat:no-repeat}.navbar-toggle button{height:100%;border:none;background:0 0;outline:0}.navbar-toggle .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle .ico-comuni-chiudi,.navbar-toggle .ico-navbar-menu{color:#fff;font-size:1.5em;margin:.313em auto}.navbar-toggle-operation button{position:relative;top:50%;transform:translateY(-50%);border:none;background:0 0;outline:0}.navbar-toggle-operation .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle-operation .icomoon-Modifica_matita{color:#fff;font-size:1.5em;margin:.313em auto}.navbar-toggle-operation span.labelOperazioni{color:#fff;font-size:.75em}.navbar-toggle-open{background:#323232!important}.nome-applicativo{position:relative;font-size:1.5em;margin-bottom:-.417em;color:#fff;font-weight:400}.header-paging-container,.header-progress-container{border-bottom:1px solid #ccc}@media (max-width:768px){.navbar .container{width:100%}}@media (-webkit-min-device-pixel-ratio:2){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite-x2.png)}}@media (min-resolution:192dpi){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite-x2.png)}}.triangolo{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid #323232;float:right;margin-right:1.75em}.triangolo-hide{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid transparent;float:right}.container-row{display:table-row}.container-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:78%;padding-left:.625em;font-weight:400;float:left}.voce-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.testo-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}@media (max-width:970px){.nome-applicativo{font-size:1.2em}}.contrasto-on .header{background-color:#fff}.contrasto-on .header .navbar .container{background-color:#000}.contrasto-on .header .navbar-tape{background-color:#000}.contrasto-on .header-overlay{background:#fff}.contrasto-on .navbar .container .navbar-toggle{background-color:transparent}.contrasto-on .navbar .container .navbar-toggle:hover{background:#000}.contrasto-on .navbar .container .navbar-toggle:focus{background:#000}.contrasto-on .navbar .container .navbar-toggle:active{background:#000}.contrasto-on .navbar .container .navbar-toggle-operation{background-color:transparent}.contrasto-on .navbar .container .navbar-toggle-operation:hover{background:#fff;color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:hover .icomoon-Modifica_matita{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:hover span{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:focus{background:#fff;color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:focus .icomoon-Modifica_matita{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:focus span{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:active{background:#fff;color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:active .icomoon-Modifica_matita{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation:active span{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation.navbar-toggle-open{background:#fff!important;color:#000}.contrasto-on .navbar .container .navbar-toggle-operation.navbar-toggle-open .icomoon-Modifica_matita{color:#000}.contrasto-on .navbar .container .navbar-toggle-operation.navbar-toggle-open span{color:#000}.contrasto-on .navbar .container .navbar-info-cliente{background-color:transparent;color:#fff}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open{background-color:#000}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-title{border-bottom:1px solid #fff;border-top:1px solid #fff}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente{border-bottom:1px solid #fff;border-top:none}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select{border-bottom:1px solid #000;border-top:none;background-color:#fff}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select .icon{color:#000}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .title-nsg-label{color:#fff}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente{color:#fff}.contrasto-on .navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente-selected{color:#000}.contrasto-on .navbar-toggle .icon-bar{background-color:#fff!important}.contrasto-on .navbar-toggle .ico-comuni-chiudi,.contrasto-on .navbar-toggle .ico-navbar-menu,.contrasto-on .navbar-toggle .icomoon-Modifica_matita{color:#fff}.contrasto-on .navbar-toggle-open{background:#000!important}.contrasto-on .prev-page-btn-container .prev-page-btn{color:#000}.contrasto-on .page-title-container{border-bottom:1px solid #000}.contrasto-on .nome-applicativo{color:#fff}.contrasto-on .header-paging-container,.contrasto-on .header-progress-container{border-bottom:1px solid #000}.contrasto-on .triangolo{position:absolute;-webkit-transform:rotate(45deg);transform:rotate(45deg);content:\" \";width:15px;height:15px;border:0 solid #fff;border-width:1px 0 0 1px;background:#000;right:112px;z-index:1001;bottom:-8px;margin:0 auto}.contrasto-on .container-ident-cliente{color:inherit}.contrasto-on .voce-ident-cliente{color:inherit}.contrasto-on .testo-ident-cliente{color:inherit} /*# sourceMappingURL=nbp-header.component.css.map */ "]
    }),
    __metadata$30("design:paramtypes", [])
], NbpHeaderComponent);

var __decorate$55 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$39 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpHeaderLightComponent = class NbpHeaderLightComponent {
    constructor() { }
};
__decorate$55([
    Input(),
    __metadata$39("design:type", String)
], NbpHeaderLightComponent.prototype, "nbpLogo", void 0);
NbpHeaderLightComponent = __decorate$55([
    Component({
        selector: 'nbp-header-light',template: "<div style=\"position:relative;\"><nav class=\"navbar\"><div class=\"container\"><div class=\"navbar-header\"><div class=\"navbar-logo\"><img [src]=\"nbpLogo\" height=\"25\" width=\"225\" alt=\"\"></div></div><div class=\"nav navbar-right\"><ng-content selector=\"nbp-client-info\"></ng-content></div></div></nav></div>",
        styles: ["nav{background-color:#258900;height:50px;border-radius:0}.navbar-absolute-top{position:absolute;border:0!important;margin:0!important;top:0;left:0;right:0}.navbar .container{display:table}.navbar .navbar-header{display:table-row;height:50px}.navbar .navbar-header .navbar-logo{vertical-align:middle;display:table-cell;height:50px} /*# sourceMappingURL=nbp-header-light.component.css.map */ "]
    }),
    __metadata$39("design:paramtypes", [])
], NbpHeaderLightComponent);

var __decorate$56 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$40 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpNavigationHeaderComponent = class NbpNavigationHeaderComponent {
    constructor() {
        /**
         * Booleano per abilitare il tasto “Pagina precedente”
         */
        this.nbpShowPrevPage = false;
        /**
        * Testo da associare al link pagina precedente.
        * textPrevLink = stringa  valore di default "Pagina Precedente | translate"
        */
        this.textPrevLink = "Pagina Precedente";
        /**
         * Evento emesso sul click dell'elemento nbpShowPrevPage
         */
        this.nbpPrevPage = new EventEmitter();
    }
    /**
     * Booleano che abilita/disabilita il posizionamento sticky
     * al top della pagina
     */
    get nbpDisableSticky() { return this._nbpDisableSticky; }
    ;
    set nbpDisableSticky(value) { this._nbpDisableSticky = coerceBooleanProperty(value); }
    ;
    ngOnInit() {
    }
    onClick() {
        this.nbpPrevPage.emit('nbpPrevPage');
    }
};
__decorate$56([
    Input(),
    __metadata$40("design:type", String)
], NbpNavigationHeaderComponent.prototype, "nbpTitle", void 0);
__decorate$56([
    Input(),
    __metadata$40("design:type", String)
], NbpNavigationHeaderComponent.prototype, "nbpSectionTitle", void 0);
__decorate$56([
    Input(),
    __metadata$40("design:type", Object)
], NbpNavigationHeaderComponent.prototype, "nbpShowPrevPage", void 0);
__decorate$56([
    Input(),
    __metadata$40("design:type", String)
], NbpNavigationHeaderComponent.prototype, "textPrevLink", void 0);
__decorate$56([
    Input(),
    __metadata$40("design:type", Boolean),
    __metadata$40("design:paramtypes", [Object])
], NbpNavigationHeaderComponent.prototype, "nbpDisableSticky", null);
__decorate$56([
    Output(),
    __metadata$40("design:type", EventEmitter)
], NbpNavigationHeaderComponent.prototype, "nbpPrevPage", void 0);
NbpNavigationHeaderComponent = __decorate$56([
    Component({
        selector: 'nbp-navigation-header',
        template: "<div class=\"header-overlay\" [ngClass]=\"{'sticky': !_nbpDisableSticky}\" id=\"header-overlay\"><div class=\"container\"><div id=\"navigation-header-title\" class=\"page-title-container\"><div class=\"titles\" [ngClass]=\"{'padding-prev-page-hide':!nbpShowPrevPage}\"><div class=\"page-overtitle\" [innerHTML]=\"nbpSectionTitle \" *ngIf=\"nbpSectionTitle\"></div><div class=\"page-title\" [innerHTML]=\"nbpTitle \" *ngIf=\"nbpTitle\"></div></div></div></div><div class=\"prev-page-btn-container\" *ngIf=\"nbpShowPrevPage\"><div class=\"container\"><div class=\"prev-page-btn\"><span (click)=\"onClick()\" role=\"button\"><span class=\"prev-page-btn-arrow icomoon-Simboli_Risorsa-12\"></span> <span class=\"prev-page-btn-text\">{{textPrevLink}}</span></span></div></div></div></div>",styles: [".titles{padding-left:140px;padding-right:140px}.titles.padding-prev-page-hide{padding-left:0;padding-right:0}:host(.nav-header-slim) .header-overlay{border-bottom:none!important}:host(.nav-header-slim) #navigation-header-title{height:2em!important;padding-top:.3125em!important}:host(.nav-header-slim) .titles.padding-prev-page-hide{padding-left:80px;padding-right:80px}.header-overlay{position:relative;top:0;left:0;width:100%;height:100%;background:#f2f2f2;border-bottom:1px solid #ccc}.prev-page-btn-container{position:absolute;top:0;left:0;right:0;margin:0 auto}.prev-page-btn-container .container{display:table}.prev-page-btn-container .prev-page-btn{display:table-cell;height:3.125em;vertical-align:middle;color:#258900}.prev-page-btn-container .prev-page-btn .prev-page-btn-arrow{font-size:1.25em;vertical-align:middle}.prev-page-btn-container .prev-page-btn .prev-page-btn-text{display:inline-block;max-width:calc(138.75px);font-size:.875em;overflow:hidden;vertical-align:middle;text-overflow:ellipsis;white-space:nowrap}.page-title-container{height:3.125em;display:table-cell;vertical-align:middle}.page-title-container .titles{display:table;table-layout:fixed;width:100%}.page-overtitle{position:relative;font-size:.75em;text-align:center;margin-bottom:-.417em;text-transform:uppercase}.page-title{position:relative;font-size:1.125em;text-align:center;font-weight:700;margin:0;text-transform:uppercase}.page-subtitle{position:relative;font-size:.75em;text-align:center;margin-top:-.417em}.header-overlay.sticky{position:fixed;top:0;left:0!important;z-index:1030!important;height:inherit!important;width:inherit!important}@media (max-width:767px){.container{width:100vw}.titles{padding-left:40px;padding-right:40px}.titles.padding-prev-page-hide{padding-left:5px;padding-right:5px}:host(.nav-header-slim) .titles{padding-left:80px;padding-right:80px}.prev-page-btn-container .prev-page-btn .prev-page-btn-arrow{padding-left:20px}.prev-page-btn-container .prev-page-btn .prev-page-btn-text{display:none}} /*# sourceMappingURL=nbp-navigation-header.component.css.map */ "]
    }),
    __metadata$40("design:paramtypes", [])
], NbpNavigationHeaderComponent);

var __decorate$58 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$42 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpTableUtilService = class NbpTableUtilService {
    constructor() {
        this.disablePaginationStatus = {
            first: false,
            last: false,
            next: false,
            page: false,
            prev: false
        };
    }
    setColumns(columns) {
        this.columns = columns;
    }
    ;
    getCurrentPageStatus() {
        return this.currentPageStatus;
    }
    setCurrentPageStatus(currentPageStatus) {
        if (currentPageStatus.totalRecords > 0) {
            this.disablePaginationStatus.last = false;
        }
        else {
            this.disablePaginationStatus.last = true;
        }
        this.currentPageStatus = currentPageStatus;
        if (currentPageStatus.totalRecords && (currentPageStatus.pageNumber) * currentPageStatus.pageSize > currentPageStatus.totalRecords) {
            this.disablePaginationStatus.next = true;
        }
        else {
            this.disablePaginationStatus.next = false;
        }
    }
    ;
    setCurrentPageNumber(pageNumber) {
        this.currentPageStatus.pageNumber = pageNumber;
    }
    getColumns() {
        return this.columns;
    }
    setColumnOrdering(columnField, orderingType) {
        this.columns.map((element) => {
            element.currentOrder = null;
            if (element.field === columnField) {
                element.currentOrder = orderingType === undefined ? '' : orderingType;
            }
        });
    }
    getCurrentOrdering() {
        let filteredOrders = this.columns.filter((column) => { return column.currentOrder !== null; });
        let orders = filteredOrders.map((column) => { return column.currentOrder + column.field; });
        return orders;
    }
    ;
    findGlobalIndex(rowIndex) {
        return this.currentPageStatus ? (this.currentPageStatus.pageSize * (this.currentPageStatus.pageNumber - 1)) + (rowIndex) : -1;
    }
    findIndexOfSelectedByItem(item, selectedRows) {
        let itemSelectedId = -1;
        selectedRows.map((row, index) => {
            if (row === item) {
                itemSelectedId = index;
            }
        });
        return itemSelectedId;
    }
    getColumnsFromChildren(children) {
        let columns = children.map((child) => {
            let column = {
                id: child.nbpId,
                field: child.nbpField,
                title: child.nbpTitle,
                visible: child.nbpVisible,
                sortable: child.nbpSortable,
                filter: child.nbpFilter,
                filterArg: child.nbpFilterArg,
                currentOrder: null,
                customStyle: child.nbpCustomStyle
            };
            return column;
        });
        return columns;
    }
};
NbpTableUtilService = __decorate$58([
    Injectable(),
    __metadata$42("design:paramtypes", [])
], NbpTableUtilService);

class CjlibSettings {
}
CjlibSettings.DATE_FORMAT = 'dd-MM-yyyy';
CjlibSettings.DECIMAL_FORMAT = '1.2';
CjlibSettings.PERCENT_FORMAT = '1.2';

var __decorate$59 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$43 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let ContoPipe = class ContoPipe {
    transform(value) {
        if (!value) {
            return value;
        }
        if (value.length < 9) {
            return value;
        }
        let filiale = value.substring(0, 5);
        let categoria = value.substring(5, 9);
        let conto = value.substring(9);
        return `${filiale}/${categoria}/${conto}`;
    }
};
ContoPipe = __decorate$59([
    Pipe({ name: 'conto' })
], ContoPipe);
let NbpFormatterService = class NbpFormatterService {
    constructor(currencyPipe, datePipe, decimalPipe, lowercasePipe, percentPipe, uppercasePipe, contoPipe) {
        this.currencyPipe = currencyPipe;
        this.datePipe = datePipe;
        this.decimalPipe = decimalPipe;
        this.lowercasePipe = lowercasePipe;
        this.percentPipe = percentPipe;
        this.uppercasePipe = uppercasePipe;
        this.contoPipe = contoPipe;
    }
    displayValueTransformation(value, pipe, arg) {
        let transformedValue = value;
        let format;
        switch (pipe) {
            case NbpPipe.CURRENCY:
                transformedValue = this.currencyPipe.transform(value, arg);
                break;
            case NbpPipe.DATE:
                format = arg ? arg : CjlibSettings.DATE_FORMAT;
                transformedValue = this.datePipe.transform(value, format);
                break;
            case NbpPipe.DECIMAL:
                format = arg ? arg : CjlibSettings.DECIMAL_FORMAT;
                transformedValue = this.decimalPipe.transform(value, format);
                break;
            case NbpPipe.LOWERCASE:
                transformedValue = this.lowercasePipe.transform(value);
                break;
            case NbpPipe.PERCENT:
                format = arg ? arg : CjlibSettings.DECIMAL_FORMAT;
                transformedValue = this.percentPipe.transform(value, format);
                break;
            case NbpPipe.UPPERCASE:
                transformedValue = this.uppercasePipe.transform(value);
                break;
            case NbpPipe.CONTO:
                transformedValue = this.contoPipe.transform(value);
                break;
            default:
                transformedValue = value;
                break;
        }
        return transformedValue;
    }
};
NbpFormatterService = __decorate$59([
    Injectable(),
    __metadata$43("design:paramtypes", [CurrencyPipe,
        DatePipe,
        DecimalPipe,
        LowerCasePipe,
        PercentPipe,
        UpperCasePipe,
        ContoPipe])
], NbpFormatterService);

var SortingDirection;
(function (SortingDirection) {
    SortingDirection[SortingDirection["ASCENDING"] = 1] = "ASCENDING";
    SortingDirection[SortingDirection["DESCENDING"] = -1] = "DESCENDING";
})(SortingDirection || (SortingDirection = {}));
var CompareStatus;
(function (CompareStatus) {
    CompareStatus[CompareStatus["HIGHER"] = 1] = "HIGHER";
    CompareStatus[CompareStatus["EQUAL"] = 0] = "EQUAL";
    CompareStatus[CompareStatus["LOWER"] = -1] = "LOWER";
})(CompareStatus || (CompareStatus = {}));
var Actions;
(function (Actions) {
    Actions[Actions["CLICKED"] = 0] = "CLICKED";
    Actions[Actions["SELECTED"] = 1] = "SELECTED";
})(Actions || (Actions = {}));

class INbpDataSource {
    constructor() {
        this.pageDataSubject = new Subject();
    }
    sendDataEvent(pageNumber, sortFields, pageSize) {
        const page = this.getPage(pageNumber, sortFields, pageSize);
        page.subscribe(iDataPage => this.pageDataSubject.next(iDataPage));
    }
    getDataStream() {
        return this.pageDataSubject.asObservable();
    }
}
class INbpAutocompleteDataSource {
    constructor() {
        this.pageDataSubject = new Subject();
    }
    sendDataEvent(filterFields, filter$$1) {
        const page = this.getPage(filterFields, filter$$1);
        page.subscribe(iDataPage => this.pageDataSubject.next(iDataPage));
    }
    getDataStream() {
        return this.pageDataSubject.asObservable();
    }
}
class INbpArrayDataSource extends INbpDataSource {
}

var __decorate$60 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$44 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$6 = 0;
let NbpTableColumnComponent = class NbpTableColumnComponent {
    constructor() {
        /**
         * Identificativo univoco per la colonna. Se non viene passato un valore, l'id viene autogenerato.
         */
        this.nbpId = `nbp-table-column-${++nextId$6}`;
        /**
          * Proprietà booleana rappresentante la visualizzazione della colonna nella tabella.
          * Default: true;
          */
        this.nbpVisible = true;
    }
};
__decorate$60([
    Input(),
    __metadata$44("design:type", String)
], NbpTableColumnComponent.prototype, "nbpId", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", String)
], NbpTableColumnComponent.prototype, "nbpTitle", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", String)
], NbpTableColumnComponent.prototype, "nbpField", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", Boolean)
], NbpTableColumnComponent.prototype, "nbpSortable", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", Boolean)
], NbpTableColumnComponent.prototype, "nbpVisible", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", Number)
], NbpTableColumnComponent.prototype, "nbpFilter", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", Object)
], NbpTableColumnComponent.prototype, "nbpFilterArg", void 0);
__decorate$60([
    Input(),
    __metadata$44("design:type", Object)
], NbpTableColumnComponent.prototype, "nbpCustomStyle", void 0);
NbpTableColumnComponent = __decorate$60([
    Component({
        selector: 'nbp-table-column',
        template: '<span></span>',
    }),
    __metadata$44("design:paramtypes", [])
], NbpTableColumnComponent);

var __decorate$57 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$41 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// import { DatePipe, DecimalPipe, CurrencyPipe } from '@angular/common';
// export class NbpOnRowActionEvent<T> implements INbpOnRowActionEvent<T> {
//   constructor(public item: T, public action: Actions, public rowIndex: number, public globalIndex?: number) { }
// }
class NbpOnRowsActionEvent {
    constructor(items, lastSelectedItem) {
        this.items = items;
        this.lastSelectedItem = lastSelectedItem;
    }
}
/** intero autogenerato usato per id unici per checkbox component */
let nextId$5 = 0;
let NbpTableComponent = class NbpTableComponent {
    constructor(_tableUtilService, _nbpFormatter) {
        this._tableUtilService = _tableUtilService;
        this._nbpFormatter = _nbpFormatter;
        this.tableScrollbarScroll = false;
        this.tableScrollbarAuto = false;
        this.idHeaderAllCheckboxChecked = false;
        this.disabledCheckboxUnchecked = 0;
        /**
         * Stringa che definisce l'id della tabella del cmponente
         */
        this.nbpId = `nbp-table-${++nextId$5}`;
        /**
         * Stringa che rappresenta la tipologia di selezione della griglia tra:
         * 'single' | 'multi' | 'none'
         * Default: 'none'
         */
        this.nbpSelectionType = 'none';
        /**
       * Riga preselezionata della tabella
       * Default: -1
       */
        this.nbpSelectedRow = -1;
        /**
         * Evento che viene emesso al click su una riga singola della tabella (solo nbpSelectionType = 'none').
         * L'evento emesso contiene un insieme di metadati definiti nella INbpClickRowEvent.
         * @param {EventEmitter<INbpOnRowActionEvent<T>>}  nbpOnClickRow
         */
        this.nbpOnClickRow = new EventEmitter();
        /**
         * Evento che viene emesso alla selezione singola di un record della table (solo nbpSelectionType = 'single').
         * L'evento emesso contiene il dato selezionato del tipo definito.
         * @param {EventEmitter<INbpOnRowActionEvent<T>>}  nbpOnSelectRow
         */
        this.nbpOnSelectRow = new EventEmitter();
        /**
         * Evento che viene emesso al click su una singola della tabella (solo nbpSelectionType = 'multi').
         * L'evento emesso contiene la lista dei record selezionati
         * e l'ultimo elemento selezionato definiti nella INbpClickRowsEvent.
         * @param {EventEmitter<INbpOnRowActionEvent<T>>}  nbpOnMultiSelectRows
         */
        this.nbpOnMultiSelectRow = new EventEmitter();
        /**
         * Evento lanciato ad ogni cambio pagina (utile per il servizio di
         * paginazione lato BE)
         * @param {EventEmitter<any> = new EventEmitter(} ) nbpChangePage
         */
        this.nbpChangePage = new EventEmitter();
        this._selectedRowsIndexes = new Array();
        this._selectedRows = new Array();
        this._alreadyPreCheckTestedItems = new Array();
    }
    get nbpAutoBind() {
        return this._nbpAutoBind;
    }
    set nbpAutoBind(value) {
        this._nbpAutoBind = coerceBooleanProperty(value);
    }
    /**
     * Rappresenta la possibilità di decidere se rendere la larghezza delle colonne adattabile al contenuto.
     * In caso di nbpLayoutAuto = false, il layout della tabella sarà fixed.
     */
    get nbpLayoutAuto() {
        return this._nbpLayoutAuto;
    }
    set nbpLayoutAuto(value) {
        this._nbpLayoutAuto = coerceBooleanProperty(value);
    }
    ngOnInit() {
        /* this._shadowAutoBind = Object.assign({} , this.nbpAutoBind); */
        if (this.scrollBar) {
            this.scrollBar = this.scrollBar.toUpperCase();
            if (this.scrollBar == "AUTO")
                this.tableScrollbarAuto = true;
            if (this.scrollBar == "SCROLL")
                this.tableScrollbarScroll = true;
        }
    }
    ngAfterContentInit() {
        if (!this.nbpSelectionType) {
            this.nbpSelectionType = 'none';
        }
        if (this.contentChildren) {
            this._initializeTableByChildren(this.contentChildren);
        }
        this._initializePaginationGap();
        if (this.nbpDataSource) {
            this._datasourceSubscription = this._subscribeToData();
        }
        if (this.nbpSelectedRow != -1) {
            this._selectedRowsIndexes.push(this.nbpSelectedRow);
        }
        // esegue preordinamento (opzionale)
        if (this.nbpPreOrder) {
            this._onOrder(this.nbpPreOrder.field, this.nbpPreOrder.inverse ? '-' : '');
        }
    }
    ngOnChanges(changes) {
        if (changes.nbpDataSource) {
            if (this._datasourceSubscription) {
                this._datasourceSubscription.unsubscribe();
            }
            this._datasourceSubscription = this._subscribeToData();
        }
    }
    ngOnDestroy() {
        if (this._datasourceSubscription) {
            this._datasourceSubscription.unsubscribe();
        }
    }
    _initializeTableByChildren(children) {
        this._tableUtilService.setColumns(this._tableUtilService.getColumnsFromChildren(children));
        this.nbpOptions.columns = this._tableUtilService.getColumns();
        this._tableUtilService.setCurrentPageStatus({ pageNumber: 1, pageSize: -1, totalRecords: -1 });
        if (this._nbpAutoBind) {
            this._firstPageNavigation();
        }
    }
    // TODO IMPLEMENTARE POSSIBILITà DI INIZIALIZZARE VIA OPTIONS LE COLONNE
    /*initializeTableFromOptions() {
       this.tableUtilService.setColumns(this.nbpOptions.columns);
       this.tableUtilService.setCurrentPageStatus({ pageNumber: 1, pageSize: null, totalRecords: null });
       this.firstPageNavigation();
     }*/
    _onOrder(columnField, orderingType) {
        this._tableUtilService.setColumnOrdering(columnField, orderingType);
        let currentPageStatus = this._tableUtilService.getCurrentPageStatus();
        this.navigateToPage(currentPageStatus.pageNumber, this._tableUtilService.getCurrentOrdering(), this.nbpOptions.pageSize);
    }
    _firstPageNavigation() {
        this.navigateToPage(1, this._tableUtilService.getCurrentOrdering(), this.nbpOptions.pageSize);
    }
    _clearRowsSelections() {
        this._selectedRowsIndexes.splice(0);
        if (this.nbpSelectionType !== 'multi') {
            this._selectedRows.splice(0);
        }
    }
    _emitEmptySelectionEvents() {
        this.nbpOnSelectRow.emit();
        this.nbpOnMultiSelectRow.emit();
    }
    _singleRowSelection(item, rowIndex) {
        let globalIndex = this._tableUtilService.findGlobalIndex(rowIndex);
        let eventDataSingle = new NbpOnRowActionEvent(item, Actions.SELECTED, rowIndex, globalIndex);
        this.nbpOnSelectRow.emit(eventDataSingle);
        this._clearRowsSelections();
        this._selectedRowsIndexes.push(rowIndex);
        console.debug('singleselect');
    }
    _removeItemFromSelectedRows(item) {
        let itemSelectedId = this._tableUtilService.findIndexOfSelectedByItem(item, this._selectedRows);
        this._selectedRows.splice(itemSelectedId, 1);
        // this.idHeaderAllCheckbox.nativeElement.checked = false;
        this.idHeaderAllCheckboxChecked = false;
        console.debug('remove element');
    }
    _insertItemIntoSelectedRows(item) {
        if (this._selectedRows.indexOf(item) == -1) {
            this._selectedRows.push(item);
            this._checkIdHeaderAllCheckbox();
            console.debug('add element');
        }
        else {
            console.debug('not adding element already present:', item);
        }
    }
    _sendMultiSelectionEvent() {
        console.debug('selected rows: ', this._selectedRows);
        let eventDataMulti = new NbpOnRowsActionEvent(this._selectedRows, this._selectedRows[this._selectedRows.length - 1]);
        this.nbpOnMultiSelectRow.emit(eventDataMulti);
    }
    _onSelectAllRow(checkboxValue) {
        switch (checkboxValue) {
            case false:
                if (this._shadowNbpDataSource)
                    this._shadowNbpDataSource.forEach((item, index) => {
                        if (this._selectedRows.indexOf(item) > -1 && !this._isCheckboxDisabled(item))
                            this._onSelectRow(item, index, false);
                    });
                break;
            case true:
                if (this._shadowNbpDataSource)
                    this._shadowNbpDataSource.forEach((item, index) => {
                        if (this._selectedRows.indexOf(item) == -1 && !this._isCheckboxDisabled(item))
                            this._onSelectRow(item, index, true);
                    });
                break;
        }
    }
    _onSelectRow(item, rowIndex, checkboxValue) {
        switch (this.nbpSelectionType) {
            case 'single':
                this._singleRowSelection(item, rowIndex);
                break;
            case 'multi':
                switch (checkboxValue) {
                    case false:
                        this._removeItemFromSelectedRows(item);
                        break;
                    case true:
                        this._insertItemIntoSelectedRows(item);
                        break;
                }
                this._sendMultiSelectionEvent();
                break;
            case 'none':
                this._onClickRow(item, rowIndex);
                console.debug('none');
                break;
        }
    }
    _isChecked(item) {
        if (this._selectedRows.indexOf(item) == -1)
            return false;
        return true;
    }
    _isCheckboxDisabled(item) {
        if (this.nbpCheckboxDisabledFn) {
            return this.nbpCheckboxDisabledFn(item);
        }
        else {
            return false;
        }
    }
    _isPreChecked(item) {
        if (this.nbpPreCheckedFn) {
            return this.nbpPreCheckedFn(item);
        }
        else {
            return false;
        }
    }
    _onClickRow(item, rowIndex) {
        let globalIndex = this._tableUtilService.findGlobalIndex(rowIndex);
        let eventData = new NbpOnRowActionEvent(item, Actions.CLICKED, rowIndex, globalIndex);
        this.nbpOnClickRow.emit(eventData);
    }
    _getCellValueForColumn(obj, column) {
        let cellValue = getPropertyValueByPath(obj, column.field);
        let formatteCellValue = this._nbpFormatter.displayValueTransformation(cellValue, column.filter, column.filterArg);
        return formatteCellValue;
    }
    _isCurrentIndexIntoSelected(currentIndex) {
        let result = this._selectedRowsIndexes.indexOf(currentIndex);
        return result === -1 ? false : true;
    }
    _onNextPage(requestedState) {
        this._clearRowsSelections();
        this._emitEmptySelectionEvents();
        let currentOrder = this._tableUtilService.getCurrentOrdering();
        this.navigateToPage(requestedState.pageNumber, currentOrder, this.nbpOptions.pageSize);
    }
    _onPrevPage(requestedState) {
        this._clearRowsSelections();
        this._emitEmptySelectionEvents();
        let currentOrder = this._tableUtilService.getCurrentOrdering();
        this.navigateToPage(requestedState.pageNumber, currentOrder, this.nbpOptions.pageSize);
    }
    _onFirstPage() {
        this._clearRowsSelections();
        this._emitEmptySelectionEvents();
        this._tableUtilService.setCurrentPageNumber(1);
        this._firstPageNavigation();
    }
    _onLastPage(requestedState) {
        let currentPageStatus = this._tableUtilService.getCurrentPageStatus();
        if (currentPageStatus.totalRecords && currentPageStatus.pageSize) {
            this._clearRowsSelections();
            this._emitEmptySelectionEvents();
            let currentOrder = this._tableUtilService.getCurrentOrdering();
            let lastPage = this._evaluateLastPage(currentPageStatus);
            this.navigateToPage(lastPage, currentOrder, this.nbpOptions.pageSize);
        }
    }
    _evaluateLastPage(currentPageStatus) {
        let partialPages = Math.floor((currentPageStatus.totalRecords) / currentPageStatus.pageSize);
        let lastPage = (currentPageStatus.totalRecords) % currentPageStatus.pageSize ? partialPages + 1 : partialPages;
        return lastPage;
    }
    _onGoToPage(requestedState) {
        this._clearRowsSelections();
        this._emitEmptySelectionEvents();
        let currentOrder = this._tableUtilService.getCurrentOrdering();
        let currentPageStatus = this._tableUtilService.getCurrentPageStatus();
        if (currentPageStatus && currentPageStatus.totalRecords) {
            let lastPage = this._evaluateLastPage(currentPageStatus);
            let pageToGo = lastPage < requestedState.pageNumber ? lastPage : requestedState.pageNumber;
            this.navigateToPage(pageToGo, currentOrder, this.nbpOptions.pageSize);
        }
    }
    _onPageChange() {
        this.nbpChangePage.emit();
        console.debug('changed page');
    }
    _initializePaginationGap() {
        if (this.nbpOptions.pageGapSize) {
            this._pageGapSize = this.nbpOptions.pageGapSize;
        }
    }
    /**
     * Effettua la preselezione sulle checkbox se presente la funzione nbpPreCheckedFn (salta gli item già analizzati)
     * @private
     */
    _preCheckRows(allValues) {
        this.disabledCheckboxUnchecked = 0;
        // conto il numero di checkbox disabled non preselezionate
        allValues.forEach((item) => {
            if ((!this.nbpPreCheckedFn || !this.nbpPreCheckedFn(item)) && this._isCheckboxDisabled(item)) {
                // casella non preselezionata e disabled
                this.disabledCheckboxUnchecked += 1;
            }
        });
        allValues.forEach((item) => {
            if (this._alreadyPreCheckTestedItems.indexOf(item) === -1) {
                // aggiungo l'item a _alreadyPreCheckTestedItems
                this._alreadyPreCheckTestedItems.push(item);
                if (this.nbpPreCheckedFn && this.nbpPreCheckedFn(item)) {
                    // pre seleziono la casella
                    this._insertItemIntoSelectedRows(item);
                }
            }
        });
    }
    _subscribeToData() {
        return this.nbpDataSource.getDataStream().subscribe((value) => {
            this._tableUtilService.setCurrentPageStatus(value.status);
            this._clearRowsSelections();
            this._emitEmptySelectionEvents();
            this._overridePaginationDisable = value.status.pageSize === value.status.totalRecords;
            if (value.data && value.data.length) {
                this._shadowNbpDataSource = value.data.slice();
                // console.log('Resolve Subscribe');
            }
            else {
                let pageNumber = this._tableUtilService.getCurrentPageStatus().pageNumber - 1;
                this._tableUtilService.setCurrentPageNumber(pageNumber);
            }
            if (this.nbpSelectionType === 'multi') {
                this._preCheckRows(value.data);
                this._sendMultiSelectionEvent();
                this._checkIdHeaderAllCheckbox();
            }
        }, (error) => {
            console.log(JSON.stringify(error));
        });
    }
    /**
     * Permette di navigare la paginazione della tabella programmaticamente.
     * @param pageNumber (Opzionale) Numero della pagina da visualizzare, se non passato permette di ritornare tutti i dati
     * @param pageSize (Opzionale) serve per il set di un pageSize differente dal defaultPageSize della DataSource
     * @param sortingFields (Opzionale) array contenente i nomi delle proprietà su cui fare il sorting
     * (e.g. [name]->(ASC name) oppure [-name]->(DESC name) )
     */
    navigateToPage(pageNumber, sortingFields, pageSize) {
        this.nbpDataSource.sendDataEvent(pageNumber, sortingFields, pageSize); // TODO prendere i parametri
    }
    /**
     * Permette di bindare i dati alla tabella oppure in caso di dati già bindati
     * di ricaricare i dati e riportare alla prima pagina oppure in caso di dati
     * già bindati di ricaricare i dati e riportare alla prima pagina.
     */
    datasourceRead() {
        if (this.nbpDataSource && !this._nbpAutoBind) {
            this._nbpAutoBind = true;
        }
        this._firstPageNavigation();
    }
    /**
     * controlla se la checkbox in testa alla tabella vada attivata o meno.
     * @private
     */
    _checkIdHeaderAllCheckbox() {
        // controllo per selezionare la checkbox generale al cambio pagina
        this.idHeaderAllCheckboxChecked = true;
        this._shadowNbpDataSource.forEach((item) => {
            if (!(this._isCheckboxDisabled && this._isCheckboxDisabled(item)) && this._selectedRows.indexOf(item) == -1) {
                // c'è almeno una checkbox non selezionata in questa pagina
                this.idHeaderAllCheckboxChecked = false;
            }
        });
    }
};
__decorate$57([
    Input(),
    __metadata$41("design:type", String)
], NbpTableComponent.prototype, "scrollBar", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", String)
], NbpTableComponent.prototype, "nbpId", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Object)
], NbpTableComponent.prototype, "nbpOptions", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", INbpDataSource)
], NbpTableComponent.prototype, "nbpDataSource", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Object),
    __metadata$41("design:paramtypes", [Boolean])
], NbpTableComponent.prototype, "nbpAutoBind", null);
__decorate$57([
    Input(),
    __metadata$41("design:type", Object),
    __metadata$41("design:paramtypes", [Boolean])
], NbpTableComponent.prototype, "nbpLayoutAuto", null);
__decorate$57([
    Input(),
    __metadata$41("design:type", String)
], NbpTableComponent.prototype, "nbpSelectionType", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Number)
], NbpTableComponent.prototype, "nbpSelectedRow", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Function)
], NbpTableComponent.prototype, "nbpCheckboxDisabledFn", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Function)
], NbpTableComponent.prototype, "nbpPreCheckedFn", void 0);
__decorate$57([
    Input(),
    __metadata$41("design:type", Object)
], NbpTableComponent.prototype, "nbpPreOrder", void 0);
__decorate$57([
    Output(),
    __metadata$41("design:type", EventEmitter)
], NbpTableComponent.prototype, "nbpOnClickRow", void 0);
__decorate$57([
    Output(),
    __metadata$41("design:type", EventEmitter)
], NbpTableComponent.prototype, "nbpOnSelectRow", void 0);
__decorate$57([
    Output(),
    __metadata$41("design:type", EventEmitter)
], NbpTableComponent.prototype, "nbpOnMultiSelectRow", void 0);
__decorate$57([
    Output(),
    __metadata$41("design:type", EventEmitter)
], NbpTableComponent.prototype, "nbpChangePage", void 0);
__decorate$57([
    ContentChildren(NbpTableColumnComponent),
    __metadata$41("design:type", QueryList)
], NbpTableComponent.prototype, "contentChildren", void 0);
__decorate$57([
    ViewChild('idHeaderAllCheckbox'),
    __metadata$41("design:type", ElementRef)
], NbpTableComponent.prototype, "idHeaderAllCheckbox", void 0);
NbpTableComponent = __decorate$57([
    Component({
        selector: 'nbp-table',
        template: "<div class=\"table-container\" [ngClass]=\"{ 'table-scrollbar-auto': tableScrollbarAuto, 'table-scrollbar-scroll': tableScrollbarScroll }\"><table [id]=\"nbpId\" [ngClass]=\"_nbpLayoutAuto ? 'auto-width' : 'fixed-width'\"><thead><tr id=\"headerRow\" class=\"row-nowrap\"><th *ngIf=\"nbpSelectionType === 'multi'\" class=\"table-label with-checkbox\"><input #idHeaderAllCheckbox type=\"checkbox\" (click)=\"_onSelectAllRow($event.target.checked);\" [(checked)]=\"idHeaderAllCheckboxChecked\"></th><th class=\"table-label\" *ngFor=\"let column of nbpOptions?.columns\" [hidden]=\"!column.visible\" [ngStyle]=\"column.customStyle\">{{column.title}}<div class=\"sort-button\" [hidden]=\"!nbpOptions.sortable || !column.sortable\"><div class=\"arrow-down\" (click)=\"_onOrder(column.field,'-');\" [ngClass]=\"{'active':column && column.currentOrder === '-'}\"></div><div class=\"arrow-up\" (click)=\"_onOrder(column.field);\" [ngClass]=\"{'active':column && column.currentOrder === '' }\"></div></div></th></tr></thead><tbody><tr *ngFor=\"let data of _shadowNbpDataSource; let rowIndex=index;\" class=\"table-row\" [ngClass]=\"{'highlighted': _isCurrentIndexIntoSelected(rowIndex), 'clickable': nbpSelectionType === 'single'}\" (click)=\"_onSelectRow(data,rowIndex);\"><td *ngIf=\"nbpSelectionType === 'multi'\" class=\"table-cell text-center selection-cell\"><input type=\"checkbox\" (click)=\"_onSelectRow(data, rowIndex, $event.target.checked);\" [checked]=\"_isChecked(data)\" [disabled]=\"_isCheckboxDisabled(data)\"></td><td *ngFor=\"let column of nbpOptions?.columns\" class=\"table-cell text-center data-cell\" [hidden]=\"!column.visible\">{{ _getCellValueForColumn(data , column) }}</td></tr></tbody></table></div><nbp-pagination *ngIf=\"_nbpAutoBind && (!nbpOptions.disablePagination && !_overridePaginationDisable)\" [nbpPaginationStatus]=\"_tableUtilService.currentPageStatus\" [nbpDisablePaginationStatus]=\"_tableUtilService.disablePaginationStatus\" [nbpPageWindowSize]=\"_pageGapSize\" (nbpOnFirst)=\"_onFirstPage($event)\" (nbpOnLast)=\"_onLastPage($event)\" (nbpOnNext)=\"_onNextPage($event)\" (nbpOnFirst)=\"_onFirstPage($event)\" (nbpOnGoToPage)=\"_onGoToPage($event)\" (nbpOnPrev)=\"_onPrevPage($event)\" (nbpOnPageChange)=\"_onPageChange()\"></nbp-pagination><ng-content selector=\"nbp-table-column\"></ng-content>",
        viewProviders: [NbpTableUtilService, NbpFormatterService],styles: [".table-container{margin-bottom:1.25em}.table-container table{width:100%}.table-select{border-collapse:separate}.table-scrollbar-auto{overflow-x:auto}.table-scrollbar-scroll{overflow-x:scroll}.table-label{padding:.625em;color:#6f6f6f;font-weight:700;font-size:.75em;text-transform:uppercase;text-align:center;white-space:normal;height:3.333em;border:.0625em solid #ccc;background-color:#f2f2f2}.table-label.with-checkbox{width:4.167em;padding:0}.table-label.with-accordion{width:4.167em;padding:0}.table-label .icheckbox-container{margin-right:0!important;display:inline-table!important}.table-label.label-select{color:#6f6f6f;font-weight:700;font-size:.75em;text-transform:uppercase;height:1.875em;text-align:left;padding-left:.625em;border:.0625em solid #ccc;background-color:#fff}.table-label.label-select.select{background-color:#c4dbbc;border:.0625em solid #6f6f6f}.table-label.label-select .radio-label{font-size:100%}.table-row{font-size:.875em;height:4.285em;background-color:#fff;color:#323232;border:.0625em solid #ccc}.table-row.clickable{border-top:0;cursor:pointer}.table-row.clickable:hover{background-color:#89bc72}.table-row.with-checkbox{width:3.429em;padding:0;text-align:center;cursor:auto}.table-row.bold{font-weight:700}.table-row.highlighted{background-color:#89bc72}.table-row .icheckbox-container{margin-right:0!important;display:inline-table!important}.table-row.with-accordion{width:3.429em;padding:0;text-align:center;cursor:auto}.table-row .accordion-arrow{position:relative;font-size:2em;margin-top:-.156em;cursor:pointer}.row-yellow{background-color:#ff0}.cell-red{background-color:red}.content-accordion{background-color:#f8f8f8}.content-accordion .accordion-panel{text-align:center;font-size:.75em;font-family:Arial;font-style:normal;height:6.25em}.table-cell{position:relative;padding:0 .688em 0 .688em}.table-cell.with-borders{border:.0625em solid #ccc}.table-cell.with-checkbox{width:3.429em;padding:0;text-align:center}.table-cell.with-accordion{width:3.429em;padding:0;text-align:center}.table-cell.cell-select{color:#6f6f6f;height:4.375em;border:.0625em solid #ccc;background-color:#f2f2f2}.table-cell.cell-select.select{background-color:#c4dbbc;border:.0625em solid #6f6f6f;border-top:none}.table-cell a{text-overflow:ellipsis;word-wrap:break-word}.table-cell img{width:100%}.table-pagination{margin-top:.625em}.table-pagination table{width:100%;table-layout:fixed}.table-pagination .table-page-btn{display:inline-block;color:#258900;cursor:pointer;margin-top:.313em}.table-pagination .table-page-btn.disabled{color:#6f6f6f;cursor:auto}.table-pagination .table-page-btn .page-btn-arrow{font-size:1.25em;vertical-align:middle}.table-pagination .table-page-btn .page-btn-text{padding:0 .625em 0 .625em;font-size:.813em;font-weight:700}.table-pagination .table-page-btn .table-page-number{display:inline-block;border:.0625em solid #258900;font-weight:700;color:#258900;background:#fff;text-align:center;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:2em;height:2em;font-size:.938em;line-height:2em;margin:0 .125em 0 .125em;cursor:pointer}.table-pagination .table-page-btn .table-page-number.backward{margin-right:-.125em}.table-pagination .table-page-btn .table-page-number.forward{margin-left:-.125em}.table-pagination .table-page-btn .table-page-number.active{color:#fff;background:#258900}.table-pagination .table-pagination-center{text-align:center}.table-pagination .table-pagination-center .table-page-btn{margin-top:0}.sort-button{cursor:pointer}.arrow-up{display:inline-block;position:relative;width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #258900;margin-right:2px}.arrow-up::before{content:'';position:absolute;top:1px;left:-5px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #fff}.arrow-down{display:inline-block;position:relative;width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #258900}.arrow-down::before{content:'';position:absolute;top:auto;bottom:1px;left:-5px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #fff}.arrow-up.active::before{display:none}.arrow-down.active::before{display:none}.annulla-check{display:inline-block;color:#258900;cursor:pointer;margin-top:.313em}.annulla-check .page-btn-text{padding:0 .625em 0 .625em;font-size:.813em;font-weight:700}.row-nowrap{white-space:nowrap}.horizontal-scrollbar{overflow-x:scroll;overflow-y:hidden}.table-full-width{width:100%}.auto-width{table-layout:auto!important}.fixed-width{table-layout:fixed!important}.table-image{text-align:center;padding:.625em!important}[tooltip-hover]:before{content:attr(tooltip-hover);position:absolute;overflow:none;opacity:0;padding:1.25em;color:#fff;border-radius:.125em;background:#323232;margin-top:0;margin-left:0}[tooltip-hover]:hover:before{opacity:1;overflow:none;background:#323232;margin-top:-3.125em}[tooltip-hover]:not([tooltip-persistent]):before{pointer-events:none}[tooltip-click]:before{content:attr(tooltip-click);position:absolute;opacity:0;padding:1.25em;color:#fff;border-radius:.125em;background:#323232;margin-top:0;margin-left:0}[tooltip-click]:visited:before{opacity:1;background:#323232;margin-top:-3.125em}[tooltip-click]:not([tooltip-persistent]):before{pointer-events:none}.tooltipClickLabel{position:absolute;padding:1.25em;color:#fff;border-radius:.125em;background:#323232;margin-top:0;margin-left:0;bottom:2.5em;z-index:1000}.tooltipClickLabel:after{content:\"\A\";color:#323232;width:0;height:0;border-left:.625em solid transparent;border-right:.625em solid transparent;border-top:.625em solid;position:absolute;margin-top:2.813em;left:50%}.tooltipClickLabel .closeTip{position:absolute;top:.125em;right:.3125em;z-index:1000;color:#fa9600;cursor:pointer}.green-link{color:#258900}:host-context(.contrasto-on) .table-container td{border:.0625em solid #000}:host-context(.contrasto-on) .table-label{color:#fff;border:.0625em solid #fff;background-color:#000}:host-context(.contrasto-on) .table-label.label-select{color:#000;border:.0625em solid #000;background-color:#fff}:host-context(.contrasto-on) .table-label.label-select.select{background-color:#000;border:.0625em solid #fff}:host-context(.contrasto-on) .table-label.label-select.select .iradio-container.checked .radio-label{color:#fff!important}:host-context(.contrasto-on) .table-row{background-color:#fff;color:#000}:host-context(.contrasto-on) .table-row.clickable{border:.0625em solid #000}:host-context(.contrasto-on) .table-row.clickable:hover{background-color:#fff;color:#000;border:.125em solid #000!important}:host-context(.contrasto-on) .table-row.highlighted{background-color:#fff;color:#000;border:.125em solid #000!important}:host-context(.contrasto-on) .content-accordion{background-color:#000;color:#fff}:host-context(.contrasto-on) .content-accordion .table-cell.with-borders{border:.0625em solid #fff}:host-context(.contrasto-on) .table-cell.with-borders{border:.0625em solid #000}:host-context(.contrasto-on) .table-cell.cell-select{color:#000;border:.125em solid #000;background-color:#fff}:host-context(.contrasto-on) .table-cell.cell-select.select{background-color:#000;border:.125em solid #fff;color:#fff}:host-context(.contrasto-on) .table-pagination .table-page-btn{color:#000}:host-context(.contrasto-on) .table-pagination .table-page-btn.disabled{color:#6f6f6f}:host-context(.contrasto-on) .table-pagination .table-page-btn .table-page-number{border:.0625em solid #000;color:#000;background:#fff}:host-context(.contrasto-on) .table-pagination .table-page-btn .table-page-number.active{color:#fff;background:#000}:host-context(.contrasto-on) .arrow-up{display:inline-block;position:relative;width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff;margin-right:2px}:host-context(.contrasto-on) .arrow-up::before{content:'';position:absolute;top:1px;left:-5px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #000}:host-context(.contrasto-on) .arrow-down{display:inline-block;position:relative;width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}:host-context(.contrasto-on) .arrow-down::before{content:'';position:absolute;top:auto;bottom:1px;left:-5px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000}:host-context(.contrasto-on) .arrow-up.active::before{display:none}:host-context(.contrasto-on) .arrow-down.active::before{display:none}:host-context(.contrasto-on) .annulla-check{color:#000}:host-context(.contrasto-on) [tooltip-hover]:before{content:attr(tooltip-hover);position:absolute;overflow:none;opacity:0;padding:1.25em;color:#fff;border-radius:.125em;background:#000;margin-top:0;margin-left:0}:host-context(.contrasto-on) [tooltip-hover]:hover:before{opacity:1;overflow:none;background:#000;margin-top:-3.125em}:host-context(.contrasto-on) [tooltip-hover]:not([tooltip-persistent]):before{pointer-events:none}:host-context(.contrasto-on) [tooltip-click]:before{content:attr(tooltip-click);position:absolute;opacity:0;padding:1.25em;color:#fff;border-radius:.125em;background:#000;margin-top:0;margin-left:0}:host-context(.contrasto-on) [tooltip-click]:visited:before{opacity:1;background:#000;margin-top:-3.125em}:host-context(.contrasto-on) [tooltip-click]:not([tooltip-persistent]):before{pointer-events:none}:host-context(.contrasto-on) .tooltipClickLabel{position:absolute;padding:1.25em;color:#fff;border-radius:.125em;background:#323232;margin-top:0;margin-left:0;bottom:2.5em;z-index:1000}:host-context(.contrasto-on) .tooltipClickLabel:after{content:\"\A\";color:#fff;width:0;height:0;border-left:.625em solid transparent;border-right:.625em solid transparent;border-top:.625em solid;position:absolute;margin-top:2.813em;left:50%}:host-context(.contrasto-on) .tooltipClickLabel .closeTip{position:absolute;top:.125em;right:.3125em;z-index:1000;color:#fff;cursor:pointer}:host-context(.contrasto-on) .green-link{color:#000} /*# sourceMappingURL=nbp-table.component.css.map */ "]
    }),
    __metadata$41("design:paramtypes", [NbpTableUtilService,
        NbpFormatterService])
], NbpTableComponent);
class NbpOnRowActionEvent {
    constructor(item, action, rowIndex, globalIndex) {
        this.item = item;
        this.action = action;
        this.rowIndex = rowIndex;
        this.globalIndex = globalIndex;
    }
}

var __decorate$63 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$47 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$10 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let ApplicationStatusService = class ApplicationStatusService {
    constructor(alertDefinition) {
        this.alertDefinition = alertDefinition;
        this._errorRaw$ = new BehaviorSubject(null);
        this._globalError$ = new Observable();
        this._applicationAlert$ = new Observable();
        if (alertDefinition) {
            this.appAlertDefinitionFn = alertDefinition.isAnApplicationAlert;
        }
        else {
            this.appAlertDefinitionFn = this.applicationAlertDefinition;
        }
        let errorPartitions = this._errorRaw$.asObservable()
            .partition((error) => this.appAlertDefinitionFn(error));
        this._applicationAlert$ = errorPartitions[0];
        this._globalError$ = errorPartitions[1];
    }
    /**
     * Permette di aggiungere un errore
     */
    notifyError(error) {
        this._errorRaw$.next(error);
    }
    /**
     * Permette di ricevere lo stream degli errori grezzi
     * sia globalError sia ApplicationAlert
     */
    getErrorRawStream() {
        return this._errorRaw$.asObservable();
    }
    /**
     * Permette di ricevere gli errori globali
     */
    getGlobalErrorStream() {
        return this._globalError$;
    }
    /**
     * Permette di ricevere gli alert applicativi da visualizzare sul
     * top delle varie pagine
     */
    getApplicationAlertStream() {
        return this._applicationAlert$;
    }
    /**
     * Definizione dei criteri da usare per distinguere tra errore globale da visualizzare
     * tramite modale di errore e Alert applicativo (errore restituito dal BE es. incongruenza
     * input inseriti)
     * @param {IClientError} error erroreGlobale
     *
     */
    applicationAlertDefinition(error) {
        return false;
    }
};
ApplicationStatusService = __decorate$63([
    Injectable(),
    __param$10(0, Inject(APP_ALERT_DEF)), __param$10(0, Optional()),
    __metadata$47("design:paramtypes", [Object])
], ApplicationStatusService);

var __decorate$62 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$46 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjErrorModalComponent = class CjErrorModalComponent {
    constructor(applicationStatus, zone) {
        this.applicationStatus = applicationStatus;
        this.zone = zone;
        this._errorTitle = 'Global Error!';
        this._size = NbpSize.MD;
        this._openModal = false;
    }
    ngOnInit() {
        this._errorSubscription = this.applicationStatus.getGlobalErrorStream().filter((error) => error !== null)
            .subscribe((error) => {
            console.log('CjErrorModal dentro subscribe');
            this.zone.run(() => {
                if (this._cjErrorModal) {
                    this._cjErrorModal.open();
                    this._cjGlobalError = error;
                }
                //  this._openModal = true;
            });
        }, err => console.error('Observer got an error: ' + err), () => console.log('Observer got a complete notification'));
    }
    ngOnDestroy() {
        this._errorSubscription.unsubscribe();
    }
};
__decorate$62([
    ViewChild('errorModal'),
    __metadata$46("design:type", NbpModalComponent)
], CjErrorModalComponent.prototype, "_cjErrorModal", void 0);
CjErrorModalComponent = __decorate$62([
    Component({
        selector: 'cj-error-modal',template: "<nbp-modal #errorModal [(nbpOpened)]=\"_openModal\" [nbpSize]=\"_size\"><div class=\"container-fluid\"><cj-error-view [cjClientError]=\"_cjGlobalError\"></cj-error-view></div></nbp-modal>",
        styles: [".error-view-content{max-height:500px;overflow:auto} /*# sourceMappingURL=cj-error-modal.component.css.map */ "]
    }),
    __metadata$46("design:paramtypes", [ApplicationStatusService, NgZone])
], CjErrorModalComponent);

var __decorate$64 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$48 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpAutoFocusInModalDirective = class NbpAutoFocusInModalDirective {
    constructor() {
        this.forcedFocusTabChange = new EventEmitter();
    }
    /**
     * evento chiamato dalla modale (nbp-modal) all'apertura per simulare il focus via tab
     * @param event
     */
    setTabFocus(event) {
        this.forcedFocusTabChange.emit(event);
    }
};
__decorate$64([
    Output('nbpAutoFocusInModal'),
    __metadata$48("design:type", EventEmitter)
], NbpAutoFocusInModalDirective.prototype, "forcedFocusTabChange", void 0);
NbpAutoFocusInModalDirective = __decorate$64([
    Directive({
        selector: '[nbpAutoFocusInModal]'
    }),
    __metadata$48("design:paramtypes", [])
], NbpAutoFocusInModalDirective);

var __decorate$61 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$45 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$9 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let nextId$7 = 0;
/**
 * La Finestra Modale è una pagina che viene visualizzata al di sopra della pagina
 * corrente, la quale viene disabilitata.
 */
let NbpModalComponent = class NbpModalComponent {
    constructor(cjErrorModal, _differs) {
        this.cjErrorModal = cjErrorModal;
        this._differs = _differs;
        this.id = `nbp-modal-${++nextId$7}`;
        this.nbpOpenedChange = new EventEmitter();
        /**
         * Proprietà che definisce la grandezza della modale, tramite l'enum NbpSize
         * valore di default: NbpSize.MD
         */
        this.nbpSize = NbpSize.MD;
        /**
         * Array che descrive i pulsanti
         * da visualizzare nella modale
         */
        this.nbpButtons = [];
        /**
         * Object che definisce uno stile aggiuntivo per il container di default è definito = {'max-height': '90vh'}
         */
        this.nbpContainerStyle = {};
        // /**
        //  * (Opzionale) id html dell'elemento su cui mettere il focus dopo l'apertura della modale. Deve essere unico.
        //  */
        // @Input() nbpFirstFocusElementId: string;
        /**
         * Evento lanciato alla pressione di ogni pulsante.
         * Viene passato come parametro il pulsante cliccato.
         */
        this.nbpOnButtonClicked = new EventEmitter();
        /**
         * Evento lanciato alla chusura della modale.
         */
        this.nbpOnClose = new EventEmitter();
        /**
         * Evento lanciato all'apertura della modale.
         */
        this.nbpOnOpen = new EventEmitter();
        this._modalSize = NbpSize;
        this._isModalInsideErrorModal = false;
        this._maxHeight = { 'max-height': '90vh' };
        this.buttonsNeedUpdate = false;
    }
    /**
     * Flag che controlla la visibilità della modale.
     */
    get nbpOpened() {
        return this._nbpOpened;
    }
    ;
    set nbpOpened(nbpOpenendValue) {
        if (this._nbpOpened !== nbpOpenendValue) {
            this._nbpOpened = nbpOpenendValue;
            this.nbpOpenedChange.emit(nbpOpenendValue);
            // if  (this._nbpOpened)  {
            //     this.nbpOnOpen.emit();
            // } else {
            //      this.nbpOnClose.emit();
            // }
        }
    }
    ngOnInit() {
        this._evaluateButtonsAndLayout();
        this._isModalInsideErrorModal = !!this.cjErrorModal;
        this._createButtonsDiffers();
    }
    ngOnChanges(changes) {
        if (changes.nbpOpened) {
            if (changes.nbpOpened.currentValue) {
                this.nbpOnOpen.emit();
                if (this.autoFocusComponent && this.autoFocusCompDOMRef) {
                    try {
                        // setto il focus su un elemento (attivando la grafica come se fosse avvenuta la pressione del tab)
                        this.setFocusOnElement();
                    }
                    catch (e) {
                        console.log('impossibile settare il flag all\'apertura della modale');
                    }
                }
            }
            else {
                // filtro il primo cambiamento (inizializzazione della modale (chiusa).
                // in questo caso voglio evitare di lanciare l'evento a vuoto.
                if (this.initialized) {
                    this.nbpOnClose.emit();
                }
                this.resetFocusOnElement();
            }
        }
        if (!this.initialized) {
            // la modale è stata inizializzata
            this.initialized = true;
        }
    }
    _populateShadowButtons() {
        this._shadowButtons = this.nbpButtons.length > 5 ? this.nbpButtons.slice(0, 5) : this.nbpButtons.slice();
    }
    _populateStyles() {
        switch (this._shadowButtons.filter((button) => button.visible).length) {
            case 1:
                this._shadowButtons.map((button) => {
                    button.layout = 'text-center';
                });
                break;
            case 2:
                this._shadowButtons.map((button, index) => {
                    button.layout = 'text-center';
                });
                break;
            case 3:
                this._shadowButtons.map((button, index) => {
                    if (index === 0) {
                        button.layout = '';
                    }
                    if (index === 1) {
                        button.layout = 'col-md-6 text-center';
                    }
                    if (index === 2) {
                        button.layout = 'text-center';
                    }
                });
                break;
            case 4:
                this._shadowButtons.map((button, index) => {
                    button.layout = 'col-md-4 text-center';
                });
                break;
            case 5:
                this._shadowButtons.map((button, index) => {
                    button.layout = 'col-md-offset-2 col-md-4 text-center';
                });
                break;
        }
    }
    _evaluateButtonsAndLayout() {
        console.log('evaluate button'); //fixme
        this._populateShadowButtons();
        this._populateStyles();
    }
    _getDisplayStyleValue() {
        // block => Visibile / none => Invisibile
        // let displayStyle = this._nbpOpened ? 'block' : 'none';
        // return displayStyle;
        return this._nbpOpened;
    }
    _onClick(button) {
        this.nbpOnButtonClicked.emit(button);
    }
    open() {
        this.nbpOpened = true;
    }
    close() {
        this.nbpOpened = false;
    }
    /**
     * si occupa di settare il focus sull'elemento (attivando la grafica come se fosse avvenuta la pressione del tab).
     *
     * il set del focus avviene in due fasi:
     * - si setta il focus vero e proprio all'interno del componente.
     * - si setta la grafica del componente come se si fosse settato il focus tramite tasto tab
     */
    setFocusOnElement() {
        if (!this.autoFocusCompDOMRef) {
            return;
        }
        this.setInnerFocusOnElement();
        this.simulateTabFocusOnElement();
    }
    /**
     * si occupa di resettare il focus sull'elemento (necessario per far funzionare
     * il successivo set del focus all'apertura della modale).
     */
    resetFocusOnElement() {
        if (!this.autoFocusCompDOMRef) {
            return;
        }
        this.resetTabFocusOnElement();
    }
    /**
     * setta il focus vero e proprio all'interno del componente.
     * Si accede all'elemento del DOM su cui è posizionata la direttiva NbpAutoFocusInModalDirective,
     * da esso si ricerca ricorsivamente nell'albero html in esso contenuto l'elemento html standard su cui settare
     * il focus.
     */
    setInnerFocusOnElement() {
        let idElement = this.autoFocusCompDOMRef.nativeElement;
        if (!idElement) {
            console.warn('elemento NbpAutoFocusInModalDirective non trovato, focus non settato');
            return;
        }
        let elementToFocus = this.searchInsideComponent(idElement);
        // uso setTimeout per evitare problemi di sincronia
        setTimeout(() => {
            try {
                elementToFocus.focus();
            }
            catch (e) {
                console.warn('impossibile settare focus su componente in modale a elemento ' + elementToFocus);
                console.warn(e);
                return;
            }
        }, 0);
    }
    /**
     * questa funzione cerca nell'albero html interno al componente passato per trovare il primo elemento senza figli con
     * la proprietà tabIndex settata, nell'ipotesi che questo sia l'elemento su cui fare il focus.
     * @param {HTMLElement} idElement
     * @returns {any}
     */
    searchInsideComponent(idElement) {
        if (idElement.children.length > 0) {
            for (let i = 0; i < idElement.children.length; i++) {
                // se ci sono figli vai dentro
                let child = idElement.children[i];
                let elementToFocus = this.searchInsideComponent(child);
                if (elementToFocus) {
                    // se ho trovato l'elementToFocus lo faccio risalire l'albero ricorsivo
                    return elementToFocus;
                }
            }
        }
        else {
            // se non ci sono verifica se questo elemento ha un attributo 'tabIndex'
            if (idElement.hasAttribute('tabIndex')) {
                return idElement;
            }
            else {
                return null;
            }
        }
        // ho finito i children senza trovare elementToFocus
        return null;
    }
    /**
     * questo metodo si occupa di chiamare il metodo della direttiva NbpAutoFocusInModalDirective
     * che sarà applicata sul componente su cui settare il focus. (la direttiva funge da interfaccia unica per
     * tutti i vari componenti che supportano il focus da tab)
     */
    simulateTabFocusOnElement() {
        this.autoFocusComponent.setTabFocus(true);
    }
    /**
     * questo metodo si occupa di chiamare il metodo della direttiva NbpAutoFocusInModalDirective
     * che sarà applicata sul componente su cui resettare il focus. (la direttiva funge da interfaccia unica per
     * tutti i vari componenti che supportano il focus da tab)
     */
    resetTabFocusOnElement() {
        this.autoFocusComponent.setTabFocus(false);
    }
    // change detection per rilevare cambiamenti negli nbpButtons (essendo un array non viene
    // rilevato dal normale ngOnChanges.
    ngDoCheck() {
        this.nbpButtons.forEach(el => {
            if (!this.buttonsNeedUpdate && el.id) {
                let objDiffer = this.buttonsDiffers[el.id];
                let objChanges = objDiffer.diff(el);
                if (objChanges) {
                    this.buttonsNeedUpdate = true;
                }
            }
        });
        if (this.buttonsNeedUpdate) {
            this._evaluateButtonsAndLayout();
            this.buttonsNeedUpdate = false;
        }
    }
    /**
     * genera un differ per confrontare i cambiamenti all'interno dell'array nbpButtons
     * @private
     */
    _createButtonsDiffers() {
        this.buttonsDiffers = {};
        this.nbpButtons.forEach((el) => {
            if (el.id) {
                this.buttonsDiffers[el.id] = this._differs.find(el).create();
            }
            else {
                console.warn('Attenzione, change detection degli nbpButtons non funzionante nel componente nbpModal. Inserire un id unico per ogni pulsante');
            }
        });
    }
};
__decorate$61([
    Input(),
    __metadata$45("design:type", String)
], NbpModalComponent.prototype, "id", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", Boolean),
    __metadata$45("design:paramtypes", [Boolean])
], NbpModalComponent.prototype, "nbpOpened", null);
__decorate$61([
    Output(),
    __metadata$45("design:type", Object)
], NbpModalComponent.prototype, "nbpOpenedChange", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", String)
], NbpModalComponent.prototype, "nbpTitle", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", String)
], NbpModalComponent.prototype, "nbpSubTitle", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", Number)
], NbpModalComponent.prototype, "nbpSize", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", Array)
], NbpModalComponent.prototype, "nbpButtons", void 0);
__decorate$61([
    Input(),
    __metadata$45("design:type", Object)
], NbpModalComponent.prototype, "nbpContainerStyle", void 0);
__decorate$61([
    Output(),
    __metadata$45("design:type", EventEmitter)
], NbpModalComponent.prototype, "nbpOnButtonClicked", void 0);
__decorate$61([
    Output(),
    __metadata$45("design:type", EventEmitter)
], NbpModalComponent.prototype, "nbpOnClose", void 0);
__decorate$61([
    Output(),
    __metadata$45("design:type", EventEmitter)
], NbpModalComponent.prototype, "nbpOnOpen", void 0);
__decorate$61([
    ContentChild(NbpAutoFocusInModalDirective),
    __metadata$45("design:type", NbpAutoFocusInModalDirective)
], NbpModalComponent.prototype, "autoFocusComponent", void 0);
__decorate$61([
    ContentChild(NbpAutoFocusInModalDirective, { read: ElementRef }),
    __metadata$45("design:type", ElementRef)
], NbpModalComponent.prototype, "autoFocusCompDOMRef", void 0);
NbpModalComponent = __decorate$61([
    Component({
        selector: 'nbp-modal',template: "<div class=\"nbp-modal\" [ngClass]=\"{'inside-error-modal': _isModalInsideErrorModal, 'nbp-modal--opened': nbpOpened}\"><div class=\"nbp-modal-container\" [ngStyle]=\"nbpContainerStyle\" [ngClass]=\"{'container__large': nbpSize === _modalSize.LG , 'container__medium': nbpSize === _modalSize.MD , 'container__small': nbpSize === _modalSize.SM}\"><div class=\"close-icon-container\"><span class=\"icon-times pull-right\" (click)=\"close()\"></span></div><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-md-24 text-center\"><div *ngIf=\"!!nbpTitle\" class=\"col-md-24 nbp-modal-title text-center\">{{nbpTitle | uppercase}}</div><div *ngIf=\"!!nbpSubTitle\" class=\"col-md-24 nbp-modal-sub-title text-center\">{{nbpSubTitle}}</div></div></div><div class=\"row\"><div class=\"col-md-24\" [ngClass]=\"{ 'nbp-modal-body-with-title': nbpTitle, 'nbp-modal-body-without-title': !nbpTitle }\"><ng-content></ng-content></div></div><div class=\"row mrg-l-5\"><ng-container *ngFor=\"let button of _shadowButtons\"><div *ngIf=\"button.visible\" [class]=\"button.layout\"><nbp-button [nbpLabel]=\"button.label\" (nbpClick)=\"_onClick(button)\" [disabled]=\"button.disabled\" [nbpStyle]=\"button.style\" [tabindex]=\"button.tabindex || 0\"></nbp-button></div></ng-container></div></div></div></div>",
        styles: [".nbp-modal--opened{display:flex!important;flex-direction:column;align-items:center}.nbp-modal{display:none;position:fixed;z-index:10000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.5)}.nbp-modal.no-static-backdrop__small{width:34.375em}.nbp-modal.container__medium{width:64em}.nbp-modal.container__large{width:85.375em}.nbp-modal.inside-error-modal{z-index:150000!important}.nbp-modal-title{color:#323232;font-size:18px;padding-top:20px}.nbp-modal-sub-title{text-transform:capitalize;color:#323232;padding-top:20px}.close-icon-container{position:relative}.close-icon-container>.icon-times{position:absolute;right:20px;top:20px;width:19px;height:19px;font-size:19px;z-index:10;color:#258900;cursor:pointer}.mrg-l-5{margin-left:5px;margin-right:5px}.nbp-modal-body-with-title{padding:20px 15px 20px 15px}.nbp-modal-body-without-title{padding:40px}.container-fluid{line-height:1}.nbp-modal-container{max-height:90vh;overflow:auto;overflow:visible;position:relative;background-color:#fefefe;margin:auto;padding-bottom:20px;border:1px solid #888}.nbp-modal-container.container__small{max-width:34.5em;min-width:17.375em}.nbp-modal-container.container__medium{max-width:64em;min-width:32em}.nbp-modal-container.container__large{max-width:85.375em;min-width:42.375em}.nbp-close-modal{color:#aaa;font-size:28px;font-weight:700}.nbp-close-modal:focus,.nbp-close-modal:hover{color:#000;text-decoration:none;cursor:pointer}:host-context(.contrasto-on) .close-icon-container>.icon-times{color:#000} /*# sourceMappingURL=nbp-modal.component.css.map */ "]
    }),
    __param$9(0, Optional()),
    __metadata$45("design:paramtypes", [CjErrorModalComponent,
        KeyValueDiffers])
], NbpModalComponent);

var __decorate$65 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$49 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$11 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-combo to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_COMBO_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpComboComponent),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE$1 = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpComboComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpCombo component */
let nextId$8 = 0;
/**
 * Componente per la implementazione della combobox, supporta tutti gli attributi standard html per il tag input.
 * Personalizzabile per la gestione di currency grazie all'applicaizone di opportuni pipes
 * definiti dalla libreria.
 */
let NbpComboComponent = class NbpComboComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer, formatterService, element, inj, cd) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.formatterService = formatterService;
        this.element = element;
        this.inj = inj;
        this.cd = cd;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-combo-${++nextId$8}`;
        this._nbpShowValidation = false;
        this.showErrorLabel = false;
        /**
         * Il testo del placeholder.
         */
        this.placeholder = '';
        /**
         * Evento emesso quando è selezionato un elemento della combobox.
         */
        this.select = new EventEmitter();
        /**
         * Evento emesso quando la dropdown viene chiuda
         */
        this.dropdownClosed = new EventEmitter();
        /**
         * Evento emesso quando la dropdown viene aperta
         */
        this.dropdownOpened = new EventEmitter();
        /**
         * (Opzionale) Funzione custom di validazione del campo
         */
        this.nbpValidation = new EventEmitter();
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this._dropdownVisible = false;
        this._arrowClicked = false;
        this._nbpPipe = NbpPipe;
        this._multi = false;
        this.initPolyfillScroll();
    }
    /**
     * (Opzionale)
     * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
     * Valore di default false
     */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * Flag che abilita/disabilita le funzionalità associate alla combobox
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato alla combobox
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
     * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato alla combobox
     */
    get nbpShowEmptyValue() {
        // alert("get------->" + this._nbpShowEmptyValue + "<--------")
        //camillocamillo
        return this._nbpShowEmptyValue;
    }
    set nbpShowEmptyValue(value) {
        // alert("set input ------->" + value + "<--------")
        this._nbpShowEmptyValue = coerceBooleanProperty(value);
        // alert("set output ------->" + this._nbpShowEmptyValue + "<--------")
    }
    /**
     * (opzionale ) Booleano che gestisce l’attributo  bordo giallo della combobox.
     * Al primo click/focus tornerà alla versione di default.
     * valore default false
     */
    get nbpHighlightedDefault() { return this._nbpHighlightedDefault; }
    ;
    set nbpHighlightedDefault(value) { this._nbpHighlightedDefault = coerceBooleanProperty(value); }
    ;
    /**
     * Definisce quando il binding del ngModel deve essere fatto sull'attributo nbpKeyField
     *
     */
    get nbpBindingToKeyField() { return this._nbpBindingToKeyField; }
    ;
    set nbpBindingToKeyField(value) {
        if (!this._multi) {
            this._nbpBindingToKeyField = coerceBooleanProperty(value);
        }
        else {
            this._nbpBindingToKeyField = false;
        }
    }
    ;
    initPolyfillScroll() {
        if (!Element.prototype['scrollIntoViewIfNeeded']) {
            Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {
                centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;
                let parent = this.parentNode, parentComputedStyle = window.getComputedStyle(parent, null), parentBorderTopWidth = parseInt(parentComputedStyle.getPropertyValue('border-top-width'), 10), parentBorderLeftWidth = parseInt(parentComputedStyle.getPropertyValue('border-left-width'), 10), overTop = this.offsetTop - parent.offsetTop < parent.scrollTop, overBottom = (this.offsetTop - parent.offsetTop + this.clientHeight - parentBorderTopWidth) > (parent.scrollTop + parent.clientHeight), overLeft = this.offsetLeft - parent.offsetLeft < parent.scrollLeft, overRight = (this.offsetLeft - parent.offsetLeft + this.clientWidth - parentBorderLeftWidth) > (parent.scrollLeft + parent.clientWidth), alignWithTop = overTop && !overBottom;
                if ((overTop || overBottom) && centerIfNeeded) {
                    parent.scrollTop = this.offsetTop - parent.offsetTop - parent.clientHeight / 2 - parentBorderTopWidth + this.clientHeight / 2;
                }
                if ((overLeft || overRight) && centerIfNeeded) {
                    parent.scrollLeft = this.offsetLeft - parent.offsetLeft - parent.clientWidth / 2 - parentBorderLeftWidth + this.clientWidth / 2;
                }
                if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded) {
                    this.scrollIntoView(alignWithTop);
                }
            };
        }
    }
    writeValue(value) {
        super.writeValue(value);
        this.cd.markForCheck();
    }
    _getDropdownState() {
        return this._dropdownVisible ? 'expanded' : 'collapsed';
    }
    _manageDropdownState(event) {
        switch (event.key.toLowerCase()) {
            case 'enter':
                event.preventDefault();
                if (this._dropdownVisible) {
                    this._onPreSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
                }
                this._dropdownVisible = !this._dropdownVisible;
                break;
            case 'tab':
                if (this._dropdownVisible) {
                    event.preventDefault();
                    this._onPreSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
                }
                this._dropdownVisible = false;
                break;
            default:
                this._dropdownVisible = false;
                break;
        }
        if (this._evaluateCurrentSelectionIndex() >= 0) {
            this.scrollToSelectedIndex(this._evaluateCurrentSelectionIndex());
        }
        else {
            this._preSelectedElementIndex = null;
        }
    }
    _isOptionPreselected(item) {
        let currentPreSelection = this._nbpShadowData.findIndex((element) => element === item);
        return currentPreSelection === this._preSelectedElementIndex;
    }
    _onSelectByKeyboard(event) { }
    _showCheckbox(item) { }
    _isAlphaNumericCharacter(keyCode) {
        return (keyCode >= 48 && keyCode <= 57) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 95 && keyCode <= 122);
    }
    _searchByKey(event) {
        if (this._nbpDisabled) {
            return;
        }
        //console.log(event.key);
        if (this._isAlphaNumericCharacter(event.keyCode)) {
            let currentSelection;
            let listByKey;
            if (this.nbpViewField) {
                listByKey = this._nbpShadowData.filter((item) => {
                    let _startWithCode = !item.emptyValue ? getPropertyValueByPath(item, this.nbpViewField)
                        .toLowerCase().trim().startsWith(event.key.toLowerCase()) : false;
                    return _startWithCode;
                });
            }
            else {
                this._nbpShadowData.findIndex((item) => item === this.value);
                listByKey = this._nbpShadowData.filter((item) => {
                    let _startWithCode = item ? item.toLowerCase().trim().startsWith(event.key.toLowerCase()) : '';
                    return _startWithCode;
                });
            }
            currentSelection = (listByKey && listByKey.length > 0) ? this._nbpShadowData.findIndex(item => listByKey[0] === item) : null;
            if (currentSelection !== null) {
                this._dropdownVisible = true;
                this.scrollToSelectedIndex(currentSelection);
                // this._onPreSelectEvent(this._nbpShadowData[currentSelection]);
                this._preSelectedElementIndex = currentSelection;
            }
        }
    }
    /**
     * Alla pressione di "delete" o "backspace", se la checkbox è vuota ne svuoto anche il value (in modo da triggerare anche la validation).
     * Svuoto anche il _preSelectedElementIndex.
     * @param event
     * @private
     */
    _checkEmpty(event) {
        if (!this.visibleTextBox.nativeElement.value) {
            this._preSelectedElementIndex = undefined;
            this.value = undefined;
        }
    }
    _evaluateCurrentSelectionIndex() {
        let currentSelection;
        if (this.value) {
            if (this.nbpKeyField && this.nbpBindingToKeyField) {
                currentSelection = this._nbpShadowData.findIndex((item) => getPropertyValueByPath(item, this.nbpKeyField) === this.value);
            }
            else {
                currentSelection = this._nbpShadowData.findIndex((item) => item === this.value);
            }
            return currentSelection;
        }
        return 0;
    }
    scrollToSelectedIndex(elementIndex) {
        if (this._dropdownVisible) {
            setTimeout(() => {
                document.getElementById('combo-element_' + elementIndex).scrollIntoViewIfNeeded();
            });
        }
    }
    _moveNext(event) {
        if (this._nbpDisabled) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : (this.nbpShowEmptyValue) ? 0 : -1;
        let nextSelection = currentSelection + 1;
        if (nextSelection >= this._nbpShadowData.length) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        // this._onPreSelectEvent(this._nbpShadowData[nextSelection]);
        this._preSelectedElementIndex = nextSelection;
    }
    _movePrev(event) {
        if (this._nbpDisabled) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : 0;
        let nextSelection = currentSelection < 0 ? 0 : currentSelection - 1;
        if (nextSelection < 0) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        // this._onPreSelectEvent(this._nbpShadowData[nextSelection]);
        this._preSelectedElementIndex = nextSelection;
    }
    confirmSelection() {
        this._onSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
    }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        this._prepareDataSource();
        this.initVisibleTextBox();
        if (this.firstFocus) {
            this.elementRef.nativeElement.focus();
            this.elementRef.nativeElement.click();
            // this._focusActive = true;
        }
    }
    initVisibleTextBox() {
        try {
            this._preSelectedElementIndex = this._nbpShadowData.indexOf(this.model);
            this._nbpViewValue = this._getViewModelElement(this._nbpShadowData[this._preSelectedElementIndex]);
        }
        catch (e) {
            console.warn('failed to initialize combo: ' + e);
        }
    }
    ngOnChanges(changes) {
        if (changes.nbpDataSource && !changes.nbpDataSource.firstChange) {
            this._prepareDataSource();
        }
    }
    _prepareDataSource() {
        if (this.nbpDataSource) {
            this.datasourceSubscription = this.nbpDataSource.getDataStream().subscribe((value) => {
                if (value.data && value.data.length) {
                    this._nbpShadowData = value.data.slice(); // 0, 50
                    if (this.nbpShowEmptyValue) {
                        if (this.nbpViewField) {
                            let emptyObject = { emptyValue: true };
                            emptyObject = generateObjectFromStringPath(emptyObject, this.nbpViewField);
                            if (this.nbpKeyField) {
                                emptyObject = generateObjectFromStringPath(emptyObject, this.nbpKeyField);
                            }
                            this._nbpShadowData.unshift(emptyObject);
                        }
                        else {
                            this._nbpShadowData.unshift(null);
                        }
                    }
                }
                else {
                    this._nbpShadowData = new Array();
                }
                
            }, (error) => {
                console.log(JSON.stringify(error));
            });
            this.nbpDataSource.sendDataEvent();
        }
    }
    _getViewValue(item) {
        if (!item) {
            return null;
        }
        return this.formatterService.displayValueTransformation(this._getViewModelElement(item), this.nbpFilter, this.nbpFilterArg);
    }
    _getModelValue(item) {
        if (!item || item && item.emptyValue) {
            return;
        }
        return (this._nbpBindingToKeyField && this.nbpKeyField) ? getPropertyValueByPath(item, this.nbpKeyField) : item;
    }
    _getDropDownLabel(item) {
        return this.formatterService.displayValueTransformation((this.nbpViewField ? getPropertyValueByPath(item, this.nbpViewField) : item), this.nbpFilter, this.nbpFilterArg);
    }
    _onSelectEvent(item) {
        this._nbpViewValue = this._getViewModelElement(item);
        this.value = this._getModelValue(item);
        this.nbpValidation.emit(this.model);
        this._dropdownVisible = !this._dropdownVisible;
        this.element.nativeElement.querySelector('.dropdown-inner-container').focus();
        // TODO validazione anche su set programmatica del value
        event.stopPropagation();
        this.select.emit(item);
    }
    _onPreSelectEvent(item) {
        this._nbpViewValue = this._getViewModelElement(item);
        this.value = this._getModelValue(item);
        this.nbpValidation.emit(this.model);
        // TODO validazione anche su set programmatica del value
        event.stopPropagation();
        this.select.emit(item);
    }
    _getViewModelElement(item) {
        if (item) {
            if (this._nbpBindingToKeyField) {
                return this.nbpKeyField ? this._getSelectedElement(item) : item;
            }
            else {
                return this.nbpViewField ? getPropertyValueByPath(item, this.nbpViewField) : item;
            }
        }
        return;
    }
    _getSelectedElement(item) {
        let elems = this._nbpShadowData ? this._nbpShadowData.filter((elem) => {
            return getPropertyValueByPath(elem, this.nbpKeyField) === item;
        }) : [];
        if (elems.length > 0) {
            let selectedElem = elems[0];
            return this.nbpViewField ? getPropertyValueByPath(selectedElem, this.nbpViewField) : item;
        }
        else {
            return item;
        }
    }
    _isOptionSelected(item) {
        if (!item || !this.value) {
            return false;
        }
        if (this.nbpKeyField && item && getPropertyValueByPath(item, this.nbpKeyField)) {
            let currentValue = this.value;
            if (this._nbpBindingToKeyField) {
                return getPropertyValueByPath(item, this.nbpKeyField) === currentValue;
            }
            else {
                return getPropertyValueByPath(item, this.nbpKeyField) === getPropertyValueByPath(currentValue, this.nbpKeyField);
            }
        }
        if (item) {
            return item === this.value;
        }
        return false;
    }
    _onInputFocus(event) {
        if (!this._nbpDisabled
            && this._nbpShadowData
            && this._nbpShadowData.length > 0 && !this._arrowClicked) {
            this._dropdownVisible = !this._dropdownVisible;
            this._dropdownVisible ? this.dropdownOpened.emit() : this.dropdownClosed.emit();
        }
    }
    _onInputClick(event) {
        if (!this._nbpDisabled
            && this._nbpShadowData
            && this._nbpShadowData.length > 0) {
            this._dropdownVisible = !this._dropdownVisible;
            this._arrowClicked = !this._arrowClicked;
            if (this._evaluateCurrentSelectionIndex() >= 0 && !this._multi) {
                this.scrollToSelectedIndex(this._evaluateCurrentSelectionIndex());
            }
        }
    }
    _onTouchedEvent(event) {
        this.touch();
        this.showErrorLabel = true;
    }
    _closeDropDown(target) {
        if (!this._dropdownVisible) {
            return;
        }
        let parentFound = false;
        while (target != null && !parentFound) {
            if (target === this.element.nativeElement) {
                parentFound = true;
            }
            target = target.parentElement;
        }
        if (!parentFound) {
            this._dropdownVisible = false;
            this._arrowClicked = false;
            this.dropdownClosed.emit();
        }
    }
    _focusOutFn(event) {
        this._focusActive = false;
        this._onTouchedEvent(event);
        this._onPreSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
    }
    onFocusout(target) {
        this._closeDropDown(target);
    }
    onClick(target) {
        this._closeDropDown(target);
    }
};
__decorate$65([
    Input(),
    __metadata$49("design:type", String)
], NbpComboComponent.prototype, "name", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Object)
], NbpComboComponent.prototype, "id", void 0);
__decorate$65([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "nbpShowValidation", null);
__decorate$65([
    Input(),
    __metadata$49("design:type", String)
], NbpComboComponent.prototype, "nbpErrorMessage", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean)
], NbpComboComponent.prototype, "showErrorLabel", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "disabled", null);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "required", null);
__decorate$65([
    Input(),
    __metadata$49("design:type", String)
], NbpComboComponent.prototype, "placeholder", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "nbpShowEmptyValue", null);
__decorate$65([
    Input(),
    __metadata$49("design:type", INbpDataSource)
], NbpComboComponent.prototype, "nbpDataSource", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", String)
], NbpComboComponent.prototype, "nbpViewField", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", String)
], NbpComboComponent.prototype, "nbpKeyField", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "nbpHighlightedDefault", null);
__decorate$65([
    Input(),
    __metadata$49("design:type", Number)
], NbpComboComponent.prototype, "nbpFilter", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Object)
], NbpComboComponent.prototype, "nbpFilterArg", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean),
    __metadata$49("design:paramtypes", [Object])
], NbpComboComponent.prototype, "nbpBindingToKeyField", null);
__decorate$65([
    Output(),
    __metadata$49("design:type", EventEmitter)
], NbpComboComponent.prototype, "select", void 0);
__decorate$65([
    Output(),
    __metadata$49("design:type", Object)
], NbpComboComponent.prototype, "dropdownClosed", void 0);
__decorate$65([
    Output(),
    __metadata$49("design:type", Object)
], NbpComboComponent.prototype, "dropdownOpened", void 0);
__decorate$65([
    Output(),
    __metadata$49("design:type", EventEmitter)
], NbpComboComponent.prototype, "nbpValidation", void 0);
__decorate$65([
    ViewChild(NgModel),
    __metadata$49("design:type", NgModel)
], NbpComboComponent.prototype, "model", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Boolean)
], NbpComboComponent.prototype, "firstFocus", void 0);
__decorate$65([
    Input(),
    __metadata$49("design:type", Number)
], NbpComboComponent.prototype, "tabindex", void 0);
__decorate$65([
    ViewChild('autoFocusCombo'),
    __metadata$49("design:type", ElementRef)
], NbpComboComponent.prototype, "elementRef", void 0);
__decorate$65([
    ViewChild('visibleTextBox'),
    __metadata$49("design:type", ElementRef)
], NbpComboComponent.prototype, "visibleTextBox", void 0);
__decorate$65([
    HostListener('document: focusout', ['$event.target']),
    __metadata$49("design:type", Function),
    __metadata$49("design:paramtypes", [HTMLElement]),
    __metadata$49("design:returntype", void 0)
], NbpComboComponent.prototype, "onFocusout", null);
__decorate$65([
    HostListener('document: click', ['$event.target']),
    __metadata$49("design:type", Function),
    __metadata$49("design:paramtypes", [HTMLElement]),
    __metadata$49("design:returntype", void 0)
], NbpComboComponent.prototype, "onClick", null);
NbpComboComponent = __decorate$65([
    Component({
        selector: 'nbp-combo',template: "<div class=\"dropdown-container\"><input type=\"hidden\" [(ngModel)]=\"value\"><div class=\"dropdown-inner-container\" (click)=\"_onInputClick($event)\" (keypress)=\"_searchByKey($event)\" (keydown.arrowdown)=\"_moveNext($event)\" (keydown.arrowup)=\"_movePrev($event)\" (keydown.enter)=\"_manageDropdownState($event)\" (keydown.esc)=\"_manageDropdownState($event)\" (keydown.spacebar)=\"_onSelectByKeyboard($event)\" (keydown.space)=\"_onSelectByKeyboard($event)\" (keydown.tab)=\"_manageDropdownState($event)\" (keydown.shift.tab)=\"_manageDropdownState($event)\" (keyup.shift.tab)=\"_manageDropdownState($event)\" (keyup)=\"_checkEmpty($event)\" (focus)=\"_focusActive = true;\" [ngClass]=\"{'collapse-disabled' : disabled}\" (focusout)=\"_focusOutFn($event)\"><input #visibleTextBox type=\"text\" [id]=\"id\" [name]=\"name\" [placeholder]=\"placeholder\" class=\"dropdown-input-box form-control\" [ngClass]=\"{ 'dropdown-input-box-green': _dropdownVisible || _focusActive, 'highlight-default':nbpHighlightedDefault, 'input-box-disabled': disabled}\" [value]=\"_getViewValue(value)\" [required]=\"required\" autocomplete=\"off\" (focus)=\"_focusActive = true;\" (focusout)=\"_focusOutFn($event)\" #autoFocusCombo [tabindex]=\"tabindex\"> <button class=\"dropdown-button\" [ngClass]=\"{'collapse-disabled' : disabled}\" type=\"button\" tabindex=\"-1\"><span class=\"dropdown-button-border\"></span> <span [ngClass]=\"{'triangolo-bottom' : !_dropdownVisible, 'triangolo-top' : _dropdownVisible}\"></span></button></div><ul *ngIf=\"_dropdownVisible\"><li *ngFor=\"let item of _nbpShadowData; let i = index; let last = last\" (click)=\"_onSelectEvent(item)\" [id]=\"'combo-element_'+i\" [ngClass]=\"{'active': _isOptionSelected(item), 'preselected':_isOptionPreselected(item), 'last': last }\"><nbp-checkbox #checkbox [checked]=\"_isOptionSelected(item)\" (change)=\"_onSelectEvent(item, checkbox.checked)\" *ngIf=\"_showCheckbox(item)\" nbpDisplayInline></nbp-checkbox><span>{{ _getDropDownLabel(item) }}</span></li></ul></div>",
        styles: [":host{position:relative;display:block}:host(.ng-touched.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box{border:.125em solid #c63200!important;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}:host(.ng-touched.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box:focus{border:.125em solid #c63200!important}:host(.ng-dirty.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box{border:.125em solid #c63200!important;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}:host(.ng-dirty.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box:focus{border:.125em solid #c63200!important}.highlight-default{border:.125em solid #fce07f!important;outline:0;box-shadow:none!important}.dropdown-container{display:inline-block;position:relative;width:100%}.dropdown-container ul{opacity:1;background:#fff;border-top-width:0;border-right-color:#323232;border-right-style:solid;border-right-width:.0625em;border-bottom-color:#323232;border-bottom-style:solid;border-bottom-width:.0625em;border-left-color:#323232;border-left-style:solid;border-left-width:.0625em;border-radius:0 0 .125em .125em;list-style:none;margin:0 0 .625em 0;padding:0;position:absolute;width:100%;z-index:1000;overflow-y:auto;max-height:12.8125em}.dropdown-container ul>li{cursor:pointer;min-height:3.125em;padding:.75em .625em .5em .625em;border-bottom:.0625em solid #ccc}.dropdown-container ul>li:hover{background:#c4dbbc}.dropdown-container ul>li.preselected{background:#c4dbbc}.dropdown-container ul>li.preselected.active{box-shadow:inset 0 0 1em #258900}.dropdown-container ul>li.active{background:#89bc72}.dropdown-container ul>li.last{border-bottom:none}.dropdown-container ul.ng-hide-add{transition:all ease-out .25s}.dropdown-container ul.ng-hide-remove{transition:all ease-out .25s}.dropdown-container ul.ng-hide{opacity:0;max-height:0}.dropdown-inner-container{position:relative;z-index:999}.dropdown-inner-container.collapse-disabled{pointer-events:none}.dropdown-label{color:#6f6f6f;font-size:1em;margin:0 0 0 .75em!important}.dropdown-input-box{margin:0;border-collapse:separate;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:.625em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#323232;border:.0625em solid #323232;border-radius:.125em;font-size:1em!important;height:3.125em}.dropdown-input-box:focus{border:.125em solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box::-ms-clear{display:none}.dropdown-input-box:disabled{background-color:#fff!important;cursor:default;box-shadow:none}.dropdown-input-box.input-box-disabled{background-color:#fff!important;border:.0625em solid #6f6f6f;opacity:.5!important;cursor:not-allowed}::placeholder{color:#6f6f6f;opacity:1}:-ms-input-placeholder{color:#6f6f6f}::-ms-input-placeholder{color:#6f6f6f}.dropdown-input-box-green{border:.125em solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box-disabled{background-color:#fff!important;opacity:.5!important}.dropdown-button{display:table;position:absolute;top:0;right:0;width:2.5em;height:3.125em;text-align:center;color:#ccc;border-color:transparent;background-color:transparent!important}.dropdown-button[role=\"\"]{cursor:default;opacity:.5}.dropdown-button.collapse-disabled .dropdown-button-border{border-left:.0625em solid #6f6f6f!important}.dropdown-button.collapse-disabled .triangolo-bottom{border-style:solid;border-width:.5em .40625em;border-color:#6f6f6f transparent transparent transparent}.dropdown-button.collapse-disabled .triangolo-top{border-style:solid;border-width:0 .40625em .5em .40625em;border-color:transparent transparent #6f6f6f transparent}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.dropdown-button span{position:absolute}.dropdown-button.collapse-disabled .triangolo-top{transform:translateY(-50%);top:50%}.dropdown-button.collapse-disabled .triangolo-bottom{transform:translateY(-50%);top:50%}.triangolo-top{transform:translateY(-50%);top:50%}.triangolo-bottom{transform:translateY(-50%);top:50%}}.dropdown-button-border{position:absolute;display:inline-block;height:60%;top:20%;left:0;border-left:.0625em solid #323232}.has-error .dropdown-input-box{border:.125em solid #c63200;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}.has-error .dropdown-input-box:focus{border:.125em solid #c63200}.dropdown-error-message{color:#c63200;font-size:1em;margin-top:.625em;margin-bottom:.625em;opacity:1}.dropdown-error-message.ng-hide-add{transition:all ease-out .25s}.dropdown-error-message.ng-hide-remove{transition:all ease-out .25s}.dropdown-error-message.ng-hide{opacity:0;margin-top:-.625em}.triangolo-top{width:0;height:0;border-style:solid;border-width:0 .625em .625em .625em;border-color:transparent transparent #258900 transparent;display:inline-block!important}.triangolo-bottom{width:0;height:0;border-style:solid;border-width:.625em .625em 0 .625em;border-color:#258900 transparent transparent transparent;display:inline-block!important}.yellow-border{border:.125em solid #fce07f}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box{border-color:#000!important}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box:focus{border-color:#000!important}:host-context(.contrasto-on) .highlight-default{border-color:#000!important}:host-context(.contrasto-on) .dropdown-container ul{background:#fff;border-right-color:#000;border-bottom-color:#000;border-left-color:#000}:host-context(.contrasto-on) .dropdown-container ul>li{border-bottom-color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li:hover{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li.active{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-label{color:#000}:host-context(.contrasto-on) .dropdown-input-box{color:#000;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-input-box.input-box-disabled{background-color:#fff!important;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-green{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-button{color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .dropdown-button-border{border-left-color:#000!important}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .dropdown-button-border{border-left-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box{border-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-error-message{color:#000}:host-context(.contrasto-on) .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .yellow-border{border-color:#fff} /*# sourceMappingURL=nbp-combo.component.css.map */ "],
        viewProviders: [NbpFormatterService],
        providers: [NBP_COMBO_CONTROL_VALUE_ACCESSOR, NBP_INPUT_ELEMENT_BASE$1],
        changeDetection: ChangeDetectionStrategy.OnPush
        // animations: [
        //   trigger('dropdownAnimationState', [
        //     state('expanded', style({ opacity: 1, visibility: 'visible', display: 'block' })),
        //     state('collapsed, void', style({ opacity: 0, visibility: 'hidden', display: 'none' })),
        //     transition('expanded => collapsed', animate('100ms ease-in')),
        //     transition('collapsed => expanded', animate('100ms ease-out'))])
        // ]
    }),
    __param$11(0, Optional()), __param$11(0, Inject(NG_VALIDATORS)),
    __param$11(1, Optional()), __param$11(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$11(2, Optional()),
    __metadata$49("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        NbpFormatterService,
        ElementRef, Injector, ChangeDetectorRef])
], NbpComboComponent);

var __decorate$66 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$50 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$12 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-combo-multi to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_COMBO_MULTI_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpComboMultiComponent),
    multi: true
};
const NBP_INPUT_MULTI_ELEMENT_BASE = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpComboMultiComponent),
    multi: true
};
let NbpComboMultiComponent = class NbpComboMultiComponent extends NbpComboComponent {
    constructor(validatori, asyncValidatori, parentFormContainer, formatterService, element, inj, cd) {
        super(validatori, asyncValidatori, parentFormContainer, formatterService, element, inj, cd); // ValueAccessor base
        this._multi = true;
        super.initPolyfillScroll();
    }
    get nbpBindKeyField() {
        return this._nbpBindKeyField;
    }
    set nbpBindKeyField(value) {
        this._nbpBindKeyField = coerceBooleanProperty(value);
    }
    _canMoveOrSearch() {
        return this.disabled || !this._dropdownVisible;
    }
    _searchByKey(event) {
        if (this._canMoveOrSearch()) {
            return;
        }
        console.log(event.key);
        if (this._isAlphaNumericCharacter(event.keyCode)) {
            let currentSelection;
            let listByKey;
            if (this.nbpViewField) {
                listByKey = this._nbpShadowData.filter((item) => {
                    let _startWithCode = !item.emptyValue ? getPropertyValueByPath(item, this.nbpViewField)
                        .toLowerCase().trim().startsWith(event.key.toLowerCase()) : false;
                    return _startWithCode;
                });
            }
            else {
                this._nbpShadowData.findIndex((item) => item === this.value);
                listByKey = this._nbpShadowData.filter((item) => {
                    let _startWithCode = item ? item.toLowerCase().trim().startsWith(event.key.toLowerCase()) : null;
                    return _startWithCode;
                });
            }
            currentSelection = (listByKey && listByKey.length > 0) ? this._nbpShadowData.findIndex(item => listByKey[0] === item) : null;
            if (currentSelection !== null) {
                this.scrollToSelectedIndex(currentSelection);
                this._preSelectedElementIndex = currentSelection;
            }
        }
    }
    _moveNext(event) {
        if (this._canMoveOrSearch()) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : (this.nbpShowEmptyValue) ? 0 : -1;
        let nextSelection = currentSelection + 1;
        if (nextSelection >= this._nbpShadowData.length) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        this._preSelectedElementIndex = nextSelection;
    }
    _onSelectByKeyboard(event) {
        event.preventDefault();
        this._onSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
    }
    _movePrev(event) {
        if (this._canMoveOrSearch()) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : 0;
        let nextSelection = currentSelection < 0 ? 0 : currentSelection - 1;
        if (nextSelection < 0) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        this._preSelectedElementIndex = nextSelection;
    }
    _isOptionPreselected(item) {
        let currentPreSelection = this._nbpShadowData.findIndex((element) => element === item);
        return currentPreSelection === this._preSelectedElementIndex;
    }
    findFullElementFromDSData(selectedElement) {
        let fullElements = this._nbpShadowData.filter((element) => {
            return getPropertyValueByPath(element, this.nbpKeyField) === selectedElement;
        });
        if (fullElements.length === 1) {
            return fullElements[0];
        }
        return;
    }
    _getViewValue(valueArray) {
        if (!valueArray) {
            return this._formatViewValueLabel(0);
        }
        else if (valueArray && valueArray.length === 1) {
            if (this.nbpBindKeyField && this.nbpKeyField) {
                let tmpViewValue = this.findFullElementFromDSData(valueArray[0]);
                if (tmpViewValue) {
                    return this.formatterService.displayValueTransformation(getPropertyValueByPath(tmpViewValue, this.nbpViewField), this.nbpFilter, this.nbpFilterArg);
                }
                return;
            }
            let tmpViewValue = this.nbpViewField ? getPropertyValueByPath(valueArray[0], this.nbpViewField) : valueArray[0];
            return this.formatterService.displayValueTransformation(tmpViewValue, this.nbpFilter, this.nbpFilterArg);
        }
        return this._formatViewValueLabel(valueArray.length);
    }
    _formatViewValueLabel(numberOfSelectedItems) {
        return numberOfSelectedItems + ' Selezionati';
    }
    _getModelValue(item) {
        return this._getUpdatedValueAfterSelectionChange(item);
    }
    _getUpdatedValueAfterSelectionChange(item) {
        let currentValueArray = this.value;
        currentValueArray = !currentValueArray ? [] : currentValueArray;
        let valueArray = [];
        if (item == null || (item && item.emptyValue)) {
            return [];
        }
        let element = (this.nbpBindKeyField && this.nbpKeyField) ? getPropertyValueByPath(item, this.nbpKeyField) : item;
        if (this.isOptionInSelectedArray(item)) {
            let currentSelectionIndex = currentValueArray.findIndex((arrayItem) => {
                return arrayItem === element;
            });
            if (currentSelectionIndex !== -1) {
                valueArray = currentValueArray.slice();
                valueArray.splice(currentSelectionIndex, 1);
            }
        }
        else {
            valueArray = currentValueArray.slice();
            // valueArray = !valueArray ? [] : valueArray;
            if (element !== "") {
                valueArray.push(element);
            }
        }
        return valueArray;
    }
    _manageDropdownState(event) {
        switch (event.key.toLowerCase()) {
            case 'enter':
                event.preventDefault();
                this._dropdownVisible = !this._dropdownVisible;
                break;
            case 'tab':
                if (this._dropdownVisible) {
                    event.preventDefault();
                    this._onPreSelectEvent("");
                }
                this._dropdownVisible = false;
                break;
            default:
                this._dropdownVisible = false;
                break;
        }
        if (!this._dropdownVisible) {
            this._preSelectedElementIndex = null;
        }
    }
    _onInputClick(event) {
        super._onInputClick(event);
        if (!this._dropdownVisible) {
            this._preSelectedElementIndex = null;
        }
    }
    _showCheckbox(item) {
        let returnValue;
        if (this._multi) {
            let isObject = this.nbpKeyField || this.nbpViewField;
            if (isObject) {
                returnValue = !item.emptyValue;
            }
            else {
                returnValue = !!item;
            }
        }
        else {
            returnValue = false;
        }
        return returnValue;
    }
    _updateViewAndModelValues(item) {
        this._nbpViewValue = this._getViewModelElement(item);
        this.value = this._getModelValue(item); // TODO
    }
    _sendSelectionEvents(item) {
        this.nbpValidation.emit(this.model);
        this.select.emit(item);
    }
    _onSelectEvent(item, value) {
        if (value === this._isOptionSelected(item)) {
            return;
        }
        event.stopPropagation();
        this._updateViewAndModelValues(item);
        this._sendSelectionEvents(item);
    }
    _getViewModelElement(item) {
        if (this._nbpBindKeyField) {
            return this.nbpKeyField ? this._getSelectedElement(item) : item;
        }
        return this.nbpViewField ? getPropertyValueByPath(item, this.nbpViewField) : item;
    }
    _getSelectedElement(item) {
        let elems = this._nbpShadowData ? this._nbpShadowData.filter((elem) => {
            return getPropertyValueByPath(elem, this.nbpKeyField) === item;
        }) : [];
        if (elems.length > 0) {
            let selectedElem = elems[0];
            return this.nbpViewField ? getPropertyValueByPath(selectedElem, this.nbpViewField) : item;
        }
        else {
            return item;
        }
    }
    isOptionInSelectedArray(item) {
        let valueArray = this.value;
        let result = false;
        let element = (this.nbpBindKeyField && this.nbpKeyField) ? getPropertyValueByPath(item, this.nbpKeyField) : item;
        if (valueArray) {
            result = valueArray.some(currentValue => {
                return element === currentValue;
            });
        }
        else {
            result = false;
        }
        return result;
    }
    _isOptionSelected(item) {
        if (!item || !this.value) {
            return false;
        }
        let result = this.isOptionInSelectedArray(item);
        return result;
    }
};
__decorate$66([
    ViewChild('checkbox'),
    __metadata$50("design:type", NbpCheckboxComponent)
], NbpComboMultiComponent.prototype, "checkbox", void 0);
__decorate$66([
    Input(),
    __metadata$50("design:type", Object),
    __metadata$50("design:paramtypes", [Boolean])
], NbpComboMultiComponent.prototype, "nbpBindKeyField", null);
NbpComboMultiComponent = __decorate$66([
    Component({
        selector: 'nbp-combo-multi',template: "<div class=\"dropdown-container\"><input type=\"hidden\" [(ngModel)]=\"value\"><div class=\"dropdown-inner-container\" (click)=\"_onInputClick($event)\" (keypress)=\"_searchByKey($event)\" (keydown.arrowdown)=\"_moveNext($event)\" (keydown.arrowup)=\"_movePrev($event)\" (keydown.enter)=\"_manageDropdownState($event)\" (keydown.esc)=\"_manageDropdownState($event)\" (keydown.spacebar)=\"_onSelectByKeyboard($event)\" (keydown.space)=\"_onSelectByKeyboard($event)\" (keydown.tab)=\"_manageDropdownState($event)\" (keydown.shift.tab)=\"_manageDropdownState($event)\" (keyup.shift.tab)=\"_manageDropdownState($event)\" (focus)=\"_focusActive = true;\" [ngClass]=\"{'collapse-disabled' : disabled}\" (focusout)=\"_focusActive = false; _onTouchedEvent($event)\"><input type=\"text\" [id]=\"id\" [name]=\"name\" [placeholder]=\"placeholder\" class=\"dropdown-input-box form-control\" [ngClass]=\"{ 'dropdown-input-box-green': _dropdownVisible || _focusActive, 'highlight-default':nbpHighlightedDefault, 'input-box-disabled': disabled}\" [value]=\"_getViewValue(value)\" [required]=\"required\" autocomplete=\"off\" (focus)=\"_focusActive = true;\" (focusout)=\"_focusActive = false;\" #autoFocusCombo [tabindex]=\"tabindex\"> <button class=\"dropdown-button\" [ngClass]=\"{'collapse-disabled' : disabled}\" type=\"button\" tabindex=\"-1\"><span class=\"dropdown-button-border\"></span> <span [ngClass]=\"{'triangolo-bottom' : !_dropdownVisible, 'triangolo-top' : _dropdownVisible}\"></span></button></div><ul *ngIf=\"_dropdownVisible\"><li *ngFor=\"let item of _nbpShadowData; let i = index; let last = last\" (click)=\"_onSelectEvent(item)\" [id]=\"'combo-element_'+i\" [ngClass]=\"{'active': _isOptionSelected(item), 'preselected':_isOptionPreselected(item), 'last': last }\"><nbp-checkbox #checkbox [checked]=\"_isOptionSelected(item)\" (change)=\"_onSelectEvent(item, checkbox.checked)\" *ngIf=\"_showCheckbox(item)\" nbpDisplayInline></nbp-checkbox><span>{{ _getDropDownLabel(item) }}</span></li></ul></div>",
        styles: [":host{position:relative;display:block}:host(.ng-touched.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box{border:.125em solid #c63200!important;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}:host(.ng-touched.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box:focus{border:.125em solid #c63200!important}:host(.ng-dirty.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box{border:.125em solid #c63200!important;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}:host(.ng-dirty.ng-invalid,.nbp-show-validation.ng-invalid) .dropdown-input-box:focus{border:.125em solid #c63200!important}.highlight-default{border:.125em solid #fce07f!important;outline:0;box-shadow:none!important}.dropdown-container{display:inline-block;position:relative;width:100%}.dropdown-container ul{opacity:1;background:#fff;border-top-width:0;border-right-color:#323232;border-right-style:solid;border-right-width:.0625em;border-bottom-color:#323232;border-bottom-style:solid;border-bottom-width:.0625em;border-left-color:#323232;border-left-style:solid;border-left-width:.0625em;border-radius:0 0 .125em .125em;list-style:none;margin:0 0 .625em 0;padding:0;position:absolute;width:100%;z-index:1000;overflow-y:auto;max-height:12.8125em}.dropdown-container ul>li{cursor:pointer;min-height:3.125em;padding:.75em .625em .5em .625em;border-bottom:.0625em solid #ccc}.dropdown-container ul>li:hover{background:#c4dbbc}.dropdown-container ul>li.preselected{background:#c4dbbc}.dropdown-container ul>li.preselected.active{box-shadow:inset 0 0 1em #258900}.dropdown-container ul>li.active{background:#89bc72}.dropdown-container ul>li.last{border-bottom:none}.dropdown-container ul.ng-hide-add{transition:all ease-out .25s}.dropdown-container ul.ng-hide-remove{transition:all ease-out .25s}.dropdown-container ul.ng-hide{opacity:0;max-height:0}.dropdown-inner-container{position:relative;z-index:999}.dropdown-inner-container.collapse-disabled{pointer-events:none}.dropdown-label{color:#6f6f6f;font-size:1em;margin:0 0 0 .75em!important}.dropdown-input-box{margin:0;border-collapse:separate;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:.625em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#323232;border:.0625em solid #323232;border-radius:.125em;font-size:1em!important;height:3.125em}.dropdown-input-box:focus{border:.125em solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box::-ms-clear{display:none}.dropdown-input-box:disabled{background-color:#fff!important;cursor:default;box-shadow:none}.dropdown-input-box.input-box-disabled{background-color:#fff!important;border:.0625em solid #6f6f6f;opacity:.5!important;cursor:not-allowed}.dropdown-input-box-green{border:.125em solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box-disabled{background-color:#fff!important;opacity:.5!important}.dropdown-button{display:table;position:absolute;top:0;right:0;width:2.5em;height:3.125em;text-align:center;color:#ccc;border-color:transparent;background-color:transparent!important}.dropdown-button span{vertical-align:middle}.dropdown-button[role=\"\"]{cursor:default;opacity:.5}.dropdown-button.collapse-disabled .dropdown-button-border{border-left:.0625em solid #6f6f6f!important}.dropdown-button.collapse-disabled .triangolo-bottom{border-style:solid;border-width:.5em .40625em;border-color:#6f6f6f transparent transparent transparent}.dropdown-button.collapse-disabled .triangolo-top{border-style:solid;border-width:0 .40625em .5em .40625em;border-color:transparent transparent #6f6f6f transparent}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.dropdown-button span{position:absolute}.dropdown-button.collapse-disabled .triangolo-top{transform:translateY(-50%);top:50%}.dropdown-button.collapse-disabled .triangolo-bottom{transform:translateY(-50%);top:50%}.triangolo-top{transform:translateY(-50%);top:50%}.triangolo-bottom{transform:translateY(-50%);top:50%}}.dropdown-button-border{position:absolute;display:inline-block;height:60%;top:20%;left:0;border-left:.0625em solid #323232}.has-error .dropdown-input-box{border:.125em solid #c63200;-webkit-box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075);box-shadow:inset 0 .0625em .0625em rgba(0,0,0,.075)}.has-error .dropdown-input-box:focus{border:.125em solid #c63200}.dropdown-error-message{color:#c63200;font-size:1em;margin-top:.625em;margin-bottom:.625em;opacity:1}.dropdown-error-message.ng-hide-add{transition:all ease-out .25s}.dropdown-error-message.ng-hide-remove{transition:all ease-out .25s}.dropdown-error-message.ng-hide{opacity:0;margin-top:-.625em}.triangolo-top{width:0;height:0;border-style:solid;border-width:0 .625em .625em .625em;border-color:transparent transparent #258900 transparent;display:inline-block!important}.triangolo-bottom{width:0;height:0;border-style:solid;border-width:.625em .625em 0 .625em;border-color:#258900 transparent transparent transparent;display:inline-block!important}.yellow-border{border:.125em solid #fce07f}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box{border-color:#000!important}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box:focus{border-color:#000!important}:host-context(.contrasto-on) .highlight-default{border-color:#000!important}:host-context(.contrasto-on) .dropdown-container ul{background:#fff;border-right-color:#000;border-bottom-color:#000;border-left-color:#000}:host-context(.contrasto-on) .dropdown-container ul>li{border-bottom-color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li:hover{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li.active{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-label{color:#000}:host-context(.contrasto-on) .dropdown-input-box{color:#000;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-input-box.input-box-disabled{background-color:#fff!important;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-green{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-button{color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .dropdown-button-border{border-left-color:#000!important}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .dropdown-button-border{border-left-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box{border-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-error-message{color:#000}:host-context(.contrasto-on) .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .yellow-border{border-color:#fff} /*# sourceMappingURL=nbp-combo-multi.component.css.map */ "],
        viewProviders: [NbpFormatterService],
        providers: [NBP_COMBO_MULTI_CONTROL_VALUE_ACCESSOR, NBP_INPUT_MULTI_ELEMENT_BASE],
        changeDetection: ChangeDetectionStrategy.OnPush
        // animations: [
        // trigger('dropdownAnimationState', [
        //     state('expanded', style({ opacity: 1, visibility: 'visible', display: 'block' })),
        //     state('collapsed, void', style({ opacity: 0, visibility: 'hidden', display: 'none' })),
        //     transition('expanded => collapsed', animate('100ms ease-in')),
        //     transition('collapsed => expanded', animate('100ms ease-out'))])
        // ]
    }),
    __param$12(0, Optional()), __param$12(0, Inject(NG_VALIDATORS)),
    __param$12(1, Optional()), __param$12(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$12(2, Optional()),
    __metadata$50("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        NbpFormatterService,
        ElementRef, Injector, ChangeDetectorRef])
], NbpComboMultiComponent);

var __decorate$67 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$51 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$13 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/** intero autogenerato usato per id unici per nbpDatepicker component */
let nextId$9 = 0;
/**
 * Provider Expression that allows nbp-input to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_DATE_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpDatepickerHtml5Component),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE$2 = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpDatepickerHtml5Component),
    multi: true
};
let NbpDatepickerHtml5Component = class NbpDatepickerHtml5Component extends NbpInputElementBase {
    // @HostListener('input', ['$event.target.valueAsDate']) onChange = (_: any) => { };
    constructor(validatori, asyncValidatori) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-datepicker-${++nextId$9}`;
        /**
         * (Opzionale)
         * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
         * Valore di default false
         */
        this.nbpShowValidation = false;
        /**
         * testo del placeholder
         */
        this.placeholder = '';
        /**
        * (Opzionale) Evento emesso per la validazione
        */
        this.nbpValidation = new EventEmitter();
        /**
        * Evento sollevato al modifica del model associato al campo di input.
        */
        this.nbpOnDateChange = new EventEmitter();
    }
    /**
     * Flag che abilita/disabilita il campo di input-date.
     */
    get disabled() { return this._nbpDisabled; }
    set disabled(value) { this._nbpDisabled = value != null && `${value}` !== 'false'; }
    /**
     * Flag che abilita/disabilita il required sul campo di input.
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
     * (opzionale ) Booleano che gestisce  l’attributo  bordo giallo del campo di input.
     * Al primo click/focus tornerà alla versione di default.
     * valore default false
     */
    get nbpHighlightedDefault() { return this._nbpHighlightedDefault; }
    ;
    set nbpHighlightedDefault(value) { this._nbpHighlightedDefault = coerceBooleanProperty(value); }
    ;
    ngOnInit() {
    }
};
__decorate$67([
    Input(),
    __metadata$51("design:type", String)
], NbpDatepickerHtml5Component.prototype, "name", void 0);
__decorate$67([
    Input(),
    __metadata$51("design:type", String)
], NbpDatepickerHtml5Component.prototype, "id", void 0);
__decorate$67([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$51("design:type", Boolean)
], NbpDatepickerHtml5Component.prototype, "nbpShowValidation", void 0);
__decorate$67([
    Input(),
    __metadata$51("design:type", Boolean),
    __metadata$51("design:paramtypes", [Object])
], NbpDatepickerHtml5Component.prototype, "disabled", null);
__decorate$67([
    Input(),
    __metadata$51("design:type", Boolean),
    __metadata$51("design:paramtypes", [Object])
], NbpDatepickerHtml5Component.prototype, "required", null);
__decorate$67([
    Input(),
    __metadata$51("design:type", String)
], NbpDatepickerHtml5Component.prototype, "placeholder", void 0);
__decorate$67([
    Input(),
    __metadata$51("design:type", Boolean),
    __metadata$51("design:paramtypes", [Object])
], NbpDatepickerHtml5Component.prototype, "nbpHighlightedDefault", null);
__decorate$67([
    Input(),
    __metadata$51("design:type", String)
], NbpDatepickerHtml5Component.prototype, "nbpErrorMessage", void 0);
__decorate$67([
    Output(),
    __metadata$51("design:type", EventEmitter)
], NbpDatepickerHtml5Component.prototype, "nbpValidation", void 0);
__decorate$67([
    Output(),
    __metadata$51("design:type", EventEmitter)
], NbpDatepickerHtml5Component.prototype, "nbpOnDateChange", void 0);
__decorate$67([
    ViewChild(NgModel),
    __metadata$51("design:type", NgModel)
], NbpDatepickerHtml5Component.prototype, "model", void 0);
NbpDatepickerHtml5Component = __decorate$67([
    Component({
        selector: 'nbp-datepicker-html5',template: "<input type=\"date\" [name]=\"name\" [id]=\"id\" [(ngModel)]=\"value\" [disabled]=\"disabled\" [required]=\"required\">",
        styles: [":host{position:relative;display:block}:host(.ng-invalid.nbp-show-validation) .textfield-box{border:2px solid #c63200!important;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}:host(.ng-invalid.nbp-show-validation) .textfield-box:focus{border:2px solid #c63200}.dropdown-menu{box-shadow:none!important}.uib-datepicker-popup{z-index:1100!important;overflow:hidden}.uib-datepicker-popup .btn:focus{outline:0!important}.data-green{border:2px solid #89bc72!important}.datepicker-container{position:relative;max-width:300px;margin-bottom:1.563em}.datepicker-label{color:#6f6f6f;font-size:.75em;margin:0 0 0 .75em!important}.datepicker-input-box{margin:.625em 0 .625em 0;padding:.375em 1em .375em 1em;color:#6f6f6f;border:1px solid #ccc;border-radius:3px}.datepicker-input-box::-ms-clear{display:none}.datepicker-input-box:focus{border:2px solid #89bc72;outline:0;box-shadow:none!important}.datepicker-input-box[disabled]{cursor:auto;background-color:#fff;opacity:.5}.has-error .datepicker-input-box{border:2px solid #c63200;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .datepicker-input-box:focus{border:2px solid #c63200}.datepicker-error-message{color:#c63200;font-size:.75em;margin-top:0;margin-bottom:.625em;opacity:1}.datepicker-error-message.ng-hide-add{transition:all ease-out .25s}.datepicker-error-message.ng-hide-remove{transition:all ease-out .25s}.datepicker-error-message.ng-hide{opacity:0;margin-top:-.625em}.datepicker-button{display:inline-block;position:absolute;cursor:pointer;font-size:1.5em;color:#6f6f6f;margin-top:-1.65em;right:.625em}.datepicker-button[role=\"\"]{cursor:default;opacity:.5}.uib-datepicker-popup.dropdown-menu{border:none!important;border-radius:0!important;padding:0!important}.uib-day{min-width:42px;max-width:42px}.uib-daypicker{width:300px!important}.uib-daypicker .btn{border-radius:0!important}.uib-daypicker #datepicker-header{border-top:1px solid #ccc}.uib-daypicker #datepicker-header .btn:focus{background-color:#323232;color:#fff;border-color:#323232}.uib-daypicker #datepicker-header .btn:active{background-color:#323232;color:#fff;border-color:#323232}.uib-daypicker #datepicker-header .btn:hover{background-color:#323232;color:#fff;border-color:#323232}.uib-daypicker .pull-left{padding-top:8px;padding-bottom:8px;min-width:auto;color:#6f6f6f;border-top:none;border-bottom:none;border-left:none;border-right:none}.uib-daypicker .border-r-l{border-left:1px solid #ccc!important;border-right:1px solid #ccc!important}.uib-daypicker .border-r{border-right:1px solid #ccc!important}.uib-daypicker .uib-title{padding-top:8px;padding-bottom:8px;min-width:auto;border:none;color:#6f6f6f;font-size:.84em;cursor:default;pointer-events:none;text-transform:uppercase}.uib-daypicker .uib-title strong{font-weight:400!important}.uib-daypicker .pull-right{padding-top:8px;padding-bottom:8px;min-width:auto;color:#6f6f6f;border-top:none;border-bottom:none;border-left:none;border-right:none}.uib-daypicker .border-l{border-left:1px solid #ccc!important}.uib-daypicker .icon-arrow-left{display:block;margin-top:4px}.uib-daypicker .icon-arrow-right{display:block;margin-top:4px}.uib-daypicker .size-icon{font-size:20px}.uib-daypicker #datepicker-weeks{text-transform:uppercase;color:#6f6f6f;height:2.625em;background-color:#dfdfdf;border:1px solid #ccc;border-right:2px solid #ccc}.uib-weeks{border-right:1px solid #ccc}.uib-weeks .btn{color:#6f6f6f;background-color:#f2f2f2;padding:0;height:42px;border-top:none;border-right:none}.uib-weeks .btn:focus{background-color:#323232;color:#fff;border-color:#323232}.uib-weeks .btn:active{background-color:#323232;color:#fff;border-color:#323232}.uib-weeks .btn:hover{background-color:#323232;color:#fff;border-color:#323232}.uib-weeks .btn-info{border-color:#ccc}.uib-weeks .current{color:#fff;background-color:#6f6f6f;border:1px solid #6f6f6f}.uib-weeks .text-info{color:#fff}.uib-weeks .secondary{color:#ccc;background-color:#fff}.uib-weeks .secondary .text-muted{color:#ccc}.uib-weeks .last-day{border-right:1px solid #ccc}.uib-weeks .btn.active{background-color:#258900;border-color:#258900;box-shadow:none;color:#fff}.uib-weeks .btn.active .text-info{color:#fff}.uib-datepicker-popup.ng-enter{-webkit-transition:opacity .25s ease-in-out;-o-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out;opacity:0}.uib-datepicker-popup.ng-leave{-webkit-transition:opacity .25s ease-in-out;-o-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out;opacity:1}.uib-datepicker-popup.ng-enter.ng-enter-active{opacity:1}.uib-datepicker-popup.ng-leave.ng-leave-active{opacity:0}.yellow-border{border:2px solid #fce07f}.rightDate .uib-datepicker-popup.dropdown-menu{padding:15px 28px!important;top:-114px!important;overflow:visible}.rightDate .container-row{border-right:1px solid #6f6f6f}.rightDate .uib-daypicker::after{bottom:82px;left:-43px!important;right:auto!important;transform:rotate(-45deg)!important}.leftDate .uib-datepicker-popup.dropdown-menu{padding:15px 28px!important;top:-114px!important;overflow:visible}.leftDate .container-row{border-right:1px solid #6f6f6f}@media (min-width:1200px){.rightDate .uib-datepicker-popup.dropdown-menu{left:277px!important}.leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}}@media (max-width:1199px){.rightDate .uib-datepicker-popup.dropdown-menu{left:309px!important}.leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}}@media (max-width:991px){.rightDate .uib-datepicker-popup.dropdown-menu{left:356px!important}.leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}}.contrasto-on .data-green{border:2px solid #000!important}.contrasto-on .datepicker-label{color:#000}.contrasto-on .datepicker-input-box{color:#000;border:1px solid #000}.contrasto-on .datepicker-input-box::-webkit-input-placeholder{color:#000}.contrasto-on .datepicker-input-box:focus{border:2px solid #000;outline:0;box-shadow:none!important}.contrasto-on .datepicker-input-box[disabled]{cursor:auto;background-color:#000;color:#fff;opacity:1}.contrasto-on .has-error .datepicker-input-box{border:2px solid #000;-webkit-box-shadow:inset 0 0 0 #000;box-shadow:inset 0 0 0 #000}.contrasto-on .has-error .datepicker-input-box:focus{border:2px solid #000}.contrasto-on .datepicker-error-message{color:#000}.contrasto-on .datepicker-button{cursor:pointer;color:#000}.contrasto-on .datepicker-button[role=\"\"]{color:#fff;cursor:default;opacity:1}.contrasto-on .uib-datepicker-popup.dropdown-menu{border:none!important;border-radius:0!important;padding:0!important}.contrasto-on .uib-day{min-width:42px;max-width:42px}.contrasto-on .uib-daypicker{width:300px!important}.contrasto-on .uib-daypicker .btn{border-radius:0!important}.contrasto-on .uib-daypicker #datepicker-header{border-top:1px solid #000}.contrasto-on .uib-daypicker #datepicker-header .btn:focus{background-color:#000;color:#fff;border-color:#000}.contrasto-on .uib-daypicker #datepicker-header .btn:active{background-color:#000;color:#fff;border-color:#000}.contrasto-on .uib-daypicker #datepicker-header .btn:hover{background-color:#000;color:#fff;border-color:#000}.contrasto-on .uib-daypicker .pull-left{padding-top:8px;padding-bottom:8px;min-width:auto;color:#000;border-top:none;border-bottom:none;border-left:none;border-right:none}.contrasto-on .uib-daypicker .border-r-l{border-left:1px solid #000!important;border-right:1px solid #000!important}.contrasto-on .uib-daypicker .border-r{border-right:1px solid #000!important}.contrasto-on .uib-daypicker .uib-title{padding-top:8px;padding-bottom:8px;min-width:auto;border:none;color:#000;font-size:.84em;cursor:default;pointer-events:none;text-transform:uppercase}.contrasto-on .uib-daypicker .uib-title strong{font-weight:400!important}.contrasto-on .uib-daypicker .pull-right{padding-top:8px;padding-bottom:8px;min-width:auto;color:#000;border-top:none;border-bottom:none;border-left:none;border-right:none}.contrasto-on .uib-daypicker .border-l{border-left:1px solid #000!important}.contrasto-on .uib-daypicker #datepicker-weeks{color:#fff;background-color:#000;border:1px solid #000;border-right:2px solid #000}.contrasto-on .uib-weeks{border-right:1px solid #ccc}.contrasto-on .uib-weeks .btn{color:#fff;background-color:#000;border-top:none;border-right:none}.contrasto-on .uib-weeks .btn:focus{background-color:#fff;color:#000;border-color:#fff}.contrasto-on .uib-weeks .btn:active{background-color:#fff;color:#000;border-color:#fff}.contrasto-on .uib-weeks .btn:hover{background-color:#fff;color:#000;border-color:#fff}.contrasto-on .uib-weeks .btn-info{border-color:#ccc}.contrasto-on .uib-weeks .current{color:#000;background-color:#fff;border:1px solid #fff}.contrasto-on .uib-weeks .text-info{color:#000}.contrasto-on .uib-weeks .secondary{color:#000;background-color:#fff}.contrasto-on .uib-weeks .secondary .text-muted{color:#000}.contrasto-on .uib-weeks .last-day{border-right:1px solid #ccc}.contrasto-on .uib-weeks .btn.active{background-color:#fff;border-color:#fff;box-shadow:none;color:#000}.contrasto-on .uib-weeks .btn.active .text-info{color:#000}.contrasto-on .yellow-border{border:2px solid #000}.contrasto-on .rightDate .uib-datepicker-popup.dropdown-menu{padding:15px 28px!important;top:-114px!important;overflow:visible}.contrasto-on .rightDate .container-row{border-right:1px solid #6f6f6f}.contrasto-on .rightDate .uib-daypicker::after{bottom:82px;left:-43px!important;right:auto!important;transform:rotate(-45deg)!important}.contrasto-on .leftDate .uib-datepicker-popup.dropdown-menu{padding:15px 28px!important;top:-114px!important;overflow:visible}.contrasto-on .leftDate .container-row{border-right:1px solid #6f6f6f}@media (min-width:1200px){.contrasto-on .rightDate .uib-datepicker-popup.dropdown-menu{left:277px!important}.contrasto-on .leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}}@media (max-width:1199px){.contrasto-on .rightDate .uib-datepicker-popup.dropdown-menu{left:309px!important}.contrasto-on .leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}}@media (max-width:991px){.contrasto-on .rightDate .uib-datepicker-popup.dropdown-menu{left:356px!important}.contrasto-on .leftDate .uib-datepicker-popup.dropdown-menu{left:-360px!important}} /*# sourceMappingURL=nbp-datepicker-html5.component.css.map */ "],
        providers: [NBP_DATE_CONTROL_VALUE_ACCESSOR, NBP_INPUT_ELEMENT_BASE$2]
    }),
    __param$13(0, Optional()), __param$13(0, Inject(NG_VALIDATORS)),
    __param$13(1, Optional()), __param$13(1, Inject(NG_ASYNC_VALIDATORS)),
    __metadata$51("design:paramtypes", [Array, Array])
], NbpDatepickerHtml5Component);

var __decorate$68 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$52 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici per nbpInput component */
let nextId$10 = 0;
let NbpSwitchComponent = class NbpSwitchComponent {
    constructor() {
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-switch-${++nextId$10}`;
        // *
        //  * Rappresenta l’oggetto associato al pulsante di switch selezionato.
        // @Input() nbpSelected: String;
        /**
         * Funzione associata all’evento di click su un pulsante di switch.
         */
        this.nbpClickFn = new EventEmitter();
        this._switchType = NpbSwitchDispalyType;
    }
    /**
     *Booleano che abilita/disabilita le funzionalità del radio button
     */
    get disabled() { return this.nbpDisabled; }
    set disabled(value) { this.nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Booleano abilita l'andata a capo del testo
     */
    get nbpTextUp() { return this._nbpTextUp; }
    set nbpTextUp(value) { this._nbpTextUp = coerceBooleanProperty(value); }
    ngOnInit() {
        if (this.nbpOptionList && this.nbpOptionList.length < 2) {
            console.warn('Componente NbpSwitchComponent istanziato con una sola option!');
        }
        if (!(this.nbpSelectedValue === null ||
            typeof this.nbpSelectedValue === 'undefined')) {
            // for (let index in this.nbpOptionList) {
            for (let optionIndex = 0; optionIndex < this.nbpOptionList.length; optionIndex++) {
                if (this.nbpOptionList[optionIndex].value === this.nbpSelectedValue) {
                    this._buttonSelectedIndex = optionIndex;
                    break;
                }
            }
        }
    }
    onSelectButton(index, selectedValue) {
        this._buttonSelectedIndex = index;
        this.nbpClickFn.emit(selectedValue);
        this.nbpSelectedValue = selectedValue;
    }
    _showIcon() {
        return this.nbpDisplayType === NpbSwitchDispalyType.ICON;
    }
    _showText() {
        return this.nbpDisplayType === NpbSwitchDispalyType.TEXT;
    }
    _showIconAndText() {
        return this.nbpDisplayType === NpbSwitchDispalyType.ICON_TEXT;
    }
    _showTextUp() {
        return (this.nbpDisplayType === NpbSwitchDispalyType.ICON_TEXT && this.nbpTextUp);
    }
};
__decorate$68([
    Input(),
    __metadata$52("design:type", String)
], NbpSwitchComponent.prototype, "id", void 0);
__decorate$68([
    Input(),
    __metadata$52("design:type", Array)
], NbpSwitchComponent.prototype, "nbpOptionList", void 0);
__decorate$68([
    Input(),
    __metadata$52("design:type", Object)
], NbpSwitchComponent.prototype, "nbpSelectedValue", void 0);
__decorate$68([
    Input(),
    __metadata$52("design:type", Number)
], NbpSwitchComponent.prototype, "nbpDisplayType", void 0);
__decorate$68([
    Input(),
    __metadata$52("design:type", Boolean),
    __metadata$52("design:paramtypes", [Object])
], NbpSwitchComponent.prototype, "disabled", null);
__decorate$68([
    Output(),
    __metadata$52("design:type", EventEmitter)
], NbpSwitchComponent.prototype, "nbpClickFn", void 0);
__decorate$68([
    Input(),
    __metadata$52("design:type", Boolean),
    __metadata$52("design:paramtypes", [Object])
], NbpSwitchComponent.prototype, "nbpTextUp", null);
NbpSwitchComponent = __decorate$68([
    Component({
        selector: 'nbp-switch',
        template: "<div class=\"switch-container btn-group\"><button *ngFor=\"let currentOption of nbpOptionList; let i = index;\" [id]=\"id\" class=\"btn\" [ngClass]=\"{ 'switch-button-text': _showText(), 'switch-button-icontext': _showIconAndText(), 'switch-button-icon': _showIcon(), 'inline-text-icon': !_showTextUp(), 'block-text-icon': _showTextUp(), 'default':_buttonSelectedIndex !== i, 'primary':  _buttonSelectedIndex == i }\" [disabled]=\"disabled\" (click)=\"onSelectButton(i, currentOption.value)\"><span *ngIf=\"!_showIcon()\" class=\"switch-label-icon\" [ngClass]=\"{'switch-label': !_showTextUp()}\">{{currentOption.label}}</span> <span *ngIf=\"!_showText()\" [ngClass]=\"{'switch-icon-text-up': _showTextUp()}\" class=\"icon switch-icon {{currentOption?.icon}}\"></span></button></div>",styles: [".btn[disabled]{box-shadow:none!important;pointer-events:none;curson:not-allowed}.switch-button-text{text-align:center;position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:9.584em;height:4.167em;z-index:0}.switch-button-text:active{box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-text .btn{border-radius:.125em!important}.switch-button-text.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-text.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button-text[disabled]{box-shadow:none}.switch-button-text.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-text.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-button-icontext{position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:6.875em;height:4.167em;z-index:0}.switch-button-icontext:active{box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-icontext.block-text-icon{padding-top:.416em}.switch-button-icontext.inline-text-icon{padding-top:1em}.switch-button-icontext .switch-label{padding-right:.625em}.switch-button-icontext .switch-label-icon{padding-bottom:.416em;display:table-cell!important;vertical-align:middle}.switch-button-icontext .switch-icon{font-size:2.084em!important;display:table-cell!important}.switch-button-icontext .switch-icon-text-up{display:block!important;padding-bottom:.208em!important}.switch-button-icontext .btn{border-radius:.125em!important}.switch-button-icontext.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-icontext.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button[disabled]{box-shadow:none}.switch-button-icontext.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-icontext.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-button-icon{position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:6.25em;height:4.167em;z-index:0}.switch-button-icon:active{box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-icon .switch-icon{font-size:2.084em!important}.switch-button-icon .btn{border-radius:2px!important}.switch-button-icon.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-button-icon.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button[disabled]{box-shadow:none}.switch-button-icon.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-icon.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}:host-context(.contrasto-on) .switch-button-icon.default,:host-context(.contrasto-on) .switch-button-icontext.default,:host-context(.contrasto-on) .switch-button-text.default{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .switch-binary,:host-context(.contrasto-on) .switch-button-icon.primary,:host-context(.contrasto-on) .switch-button-icontext.primary,:host-context(.contrasto-on) .switch-button-text.primary{color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .slider-box{background-color:#fff;border-color:#000}:host-context(.contrasto-on) .switch-binary .switch-label-icon-on{color:#fff}:host-context(.contrasto-on) .switch-binary .switch-label-icon-off{color:#fff}:host-context(.contrasto-on) .switch-binary-true{background-color:#000} /*# sourceMappingURL=nbp-switch.component.css.map */ "]
    }),
    __metadata$52("design:paramtypes", [])
], NbpSwitchComponent);
var NpbSwitchDispalyType;
(function (NpbSwitchDispalyType) {
    NpbSwitchDispalyType[NpbSwitchDispalyType["TEXT"] = 0] = "TEXT";
    NpbSwitchDispalyType[NpbSwitchDispalyType["ICON"] = 1] = "ICON";
    NpbSwitchDispalyType[NpbSwitchDispalyType["ICON_TEXT"] = 2] = "ICON_TEXT";
})(NpbSwitchDispalyType || (NpbSwitchDispalyType = {}));

var NpbSwitchDispalyType$1;
(function (NpbSwitchDispalyType) {
    NpbSwitchDispalyType[NpbSwitchDispalyType["TEXT"] = 0] = "TEXT";
    NpbSwitchDispalyType[NpbSwitchDispalyType["ICON"] = 1] = "ICON";
    NpbSwitchDispalyType[NpbSwitchDispalyType["ICON_TEXT"] = 2] = "ICON_TEXT";
})(NpbSwitchDispalyType$1 || (NpbSwitchDispalyType$1 = {}));

var __decorate$69 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$53 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpCustomerInfoComponent = class NbpCustomerInfoComponent {
    constructor() {
        /**
         * Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         */
        this._isCollapsed = true;
    }
    _toggleCollapse() {
        this._isCollapsed = !this._isCollapsed;
    }
};
__decorate$69([
    Input(),
    __metadata$53("design:type", Object)
], NbpCustomerInfoComponent.prototype, "nbpCustomer", void 0);
NbpCustomerInfoComponent = __decorate$69([
    Component({
        selector: 'nbp-customer-info',template: "<div class=\"container-ident-cliente\" nowrap=\"nowrap\"><span class=\"voce-ident-cliente\">CLIENTE</span> <span class=\"testo-ident-cliente\">{{nbpCustomer?.intestazione}}</span><br><span class=\"voce-ident-cliente\">NSG</span> <span class=\"testo-ident-cliente\" [innerHTML]=\"nbpCustomer?.nsg\"></span><br><span class=\"voce-ident-cliente\">GESTORE PORTAFOGLIAZIONE</span> <span class=\"testo-ident-cliente\" [innerHTML]=\"nbpCustomer?.gestore\"></span></div><div class=\"container-arrow\"><span class=\"accordion-arrow\" [ngClass]=\"{'icon ico-comuni-freccia-accordion-apri':_isCollapsed , 'icon ico-comuni-freccia-accordion-chiudi':!_isCollapsed}\" (click)=\"_toggleCollapse()\"></span></div><div class=\"container-row\"><div [ngClass]=\"{'triangolo':!_isCollapsed,'triangolo-hide':_isCollapsed}\"></div><div class=\"info-cliente-open\" [hidden]=\"_isCollapsed\"><div class=\"container-row\"><div class=\"collapse\" [ngClass]=\"{'in':!_isCollapsed}\"><div class=\"panel-body\"><span>CLIENTE</span> <span>{{nbpCustomer?.intestazione}}</span><br><span>NSG</span> <span [innerHTML]=\"nbpCustomer?.nsg\"></span><br><span>GESTORE PORTAFOGLIAZIONE</span> <span [innerHTML]=\"nbpCustomer?.gestore\"></span></div></div></div></div></div>",
        styles: [".accordion-arrow{cursor:pointer;font-size:1.6em}.container-row{display:table-row}.container-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:78%;padding-left:.625em;font-weight:400;float:left}.voce-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.testo-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}.panel-body{vertical-align:middle;display:table-cell;cursor:pointer;text-align:left}.info-cliente-open{position:relative;background-color:#323232;z-index:90;border:0;border-radius:0;text-align:center;margin-top:.5625em;display:table}.container-arrow{float:right;padding-top:1.25em;padding-right:1.5625em}.triangolo{width:0;height:0;z-index:90;border-left:.563em solid transparent;border-right:.563em solid transparent;border-bottom:.563em solid #323232;float:right;margin-right:1.75em}.triangolo-hide{width:0;height:0;z-index:90;border-left:.563em solid transparent;border-right:.563em solid transparent;border-bottom:.563em solid transparent;float:right;margin-right:1.75em} /*# sourceMappingURL=nbp-customer-info.component.css.map */ "],
    }),
    __metadata$53("design:paramtypes", [])
], NbpCustomerInfoComponent);

/**
 * Evento custom emesso dal componente NbpAccordion
 * sull'operazione di toggle
 */
class NbpAccordionEvent {
}

var __decorate$70 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$54 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$11 = 0;
let NbpAccordionComponent = class NbpAccordionComponent {
    constructor() {
        this.id = `nbp-accordion-${++nextId$11}`;
        /**
         * (Opzionale) Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         *Default accordion collassato.
         */
        this.nbpCollapsed = true;
        this.nbpStyle = NbpStyle.DEFAULT;
        /**
       * Booleano che indica se mostrare icona e tooltip nell'intestazione del componente
       */
        this.showTooltip = false;
        /**
         * (Opzionale) Enum che definisce il la posizione del tooltip rispetto all’oggetto al quale è ancorato:
         * “Top” | “Right” | “Bottom” | “Left” | “Top-Left” | “Top-Right” | “Bottom-Left” | “Bottom-Right”
         * Default: “Top”
         */
        this.tooltipPosition = 'Top';
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.tooltipSize = NbpSize.SM;
        /**
         * Stringa che definisce la classe dell'icona da mostrare
         */
        this.tooltipIcon = 'icomoon-Simboli_Risorsa-1';
        /**
         * Evento emesso sul toggle del componente.
         * @param {EventEmitter<NbpAccordionEvent>}  nbpOnToggle
         */
        this.nbpOnToggle = new EventEmitter();
        this._style = NbpStyle;
    }
    //     Methods
    /**
     * metodo utilizzabile per l’apertura programmatica
     */
    open() {
        this.nbpCollapsed = false;
    }
    /**
     * metodo utilizzabile per la chiusura programmatica
     */
    close() {
        this.nbpCollapsed = true;
    }
    /**
     * metodo utilizzabile per verificare se il componente è collassato
     */
    isCollapsed() {
        return this.nbpCollapsed;
    }
    ngOnInit() {
    }
    _toggleCollapse() {
        this.nbpCollapsed = !this.nbpCollapsed;
        this._onToggle();
    }
    _onToggle() {
        let acordionEvent = new NbpAccordionEvent();
        acordionEvent.source = this;
        acordionEvent.isCollapsed = this.nbpCollapsed;
        this.nbpOnToggle.emit(acordionEvent);
    }
};
__decorate$70([
    Input(),
    __metadata$54("design:type", Object)
], NbpAccordionComponent.prototype, "id", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "nbpTitle", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "nbpSubtitle", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "nbpLabel", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", Object)
], NbpAccordionComponent.prototype, "nbpCollapsed", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", Number)
], NbpAccordionComponent.prototype, "nbpStyle", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "nbpIcon", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", Boolean)
], NbpAccordionComponent.prototype, "showTooltip", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "tooltipPosition", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "tooltipVisibility", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "tooltipText", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", Object)
], NbpAccordionComponent.prototype, "tooltipSize", void 0);
__decorate$70([
    Input(),
    __metadata$54("design:type", String)
], NbpAccordionComponent.prototype, "tooltipIcon", void 0);
__decorate$70([
    Output(),
    __metadata$54("design:type", EventEmitter)
], NbpAccordionComponent.prototype, "nbpOnToggle", void 0);
NbpAccordionComponent = __decorate$70([
    Component({
        selector: 'nbp-accordion',template: "<div class=\"panel nbp-panel-primary panel-default\"><div class=\"panel-heading\" [ngClass]=\"{'panel-heading-round': isCollapsed()}\" role=\"tab\" [id]=\"id\" (click)=\"_toggleCollapse()\"><div class=\"panel-title\" [ngClass]=\"{'panel-title-tooltip': showTooltip}\"><span class=\"icon accordion-icon\" [ngClass]=\"nbpIcon\" *ngIf=\"!!nbpIcon\"></span><div class=\"title-container\"><div class=\"title\">{{nbpTitle}}</div><span *ngIf=\"nbpSubtitle\" style=\"margin-right: 5px\" class=\"subtitle\">{{nbpSubtitle}}</span><nbp-tooltip *ngIf=\"showTooltip\" [nbpSize]=\"tooltipSize\" [nbpPosition]=\"tooltipPosition\" [nbpVisibilityStrategy]=\"tooltipVisibility\" [nbpText]=\"tooltipText\"><span class=\"{{tooltipIcon}}\" style=\"font-size:1.429em;vertical-align: middle;\"></span></nbp-tooltip></div><span class=\"label\">{{nbpLabel}}</span> <span class=\"icon accordion-arrow\" [ngClass]=\"{'ico-comuni-freccia-accordion-apri':isCollapsed() , 'ico-comuni-freccia-accordion-chiudi':!isCollapsed()}\"></span></div></div><div class=\"panel-collapse\" [ngClass]=\"{'in panel-open':!isCollapsed()}\"><div class=\"panel-body\"><ng-content></ng-content></div></div></div>",
        animations: [],
        styles: [".panel{border:none!important;border-radius:0!important;box-shadow:none}.panel .panel-open{background-color:#6f6f6f!important;overflow:visible}.panel-heading{height:3.75em;border-radius:.125em .125em 0 0!important;box-shadow:none;background-color:#f8f8f8!important;cursor:pointer}.panel-heading.panel-heading-round{border-radius:.125em .125em .125em .125em!important}.panel-heading .panel-title{color:#000;font-size:.875em!important}.panel-heading .panel-title-tooltip{margin-top:-.3125em}.panel-heading .accordion-arrow{color:#000;position:relative;font-size:2em}.panel-heading .accordion-arrow .icon{vertical-align:middle}.panel-heading .label{color:#000!important}.panel-body{border:none!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 .125em .125em!important}.panel-collapse{border:none!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 .125em .125em!important;max-height:0;transition:max-height .15s ease-out;overflow:hidden}.panel-collapse.in{max-height:1000em;transition:max-height .25s ease-in}.panelTitleLayout{display:table;table-layout:fixed;width:100%;height:3em}.panelTitleItemLayout{display:table-cell;vertical-align:middle}.titlefont{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.nbp-panel-primary>.panel-heading{position:relative}.nbp-panel-primary>.panel-heading>.panel-title{display:table;table-layout:fixed;width:100%;height:3em}.nbp-panel-primary>.panel-heading>.panel-title>.accordion-icon{display:table-cell;vertical-align:middle;text-align:center;font-size:2em;width:2.3125em;padding-right:.3125em}.nbp-panel-primary>.panel-heading>.panel-title>.accordion-icon ::before{vertical-align:middle}.nbp-panel-primary>.panel-heading>.panel-title>.title-container{display:table-cell;vertical-align:middle}.nbp-panel-primary>.panel-heading>.panel-title>.title-container>.title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:1.14em;font-weight:400}.nbp-panel-primary>.panel-heading>.panel-title>.title-container>.subtitle{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:1.14em;font-weight:700}.nbp-panel-primary>.panel-heading>.panel-title>.label{display:table-cell;vertical-align:middle;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:1em;font-weight:400;text-align:right}.nbp-panel-primary>.panel-heading>.panel-title .accordion-arrow{display:table-cell;vertical-align:middle;text-align:center;font-size:1.5em;width:25px}.panel-default>.panel-heading{background-color:#f8f8f8!important}.panel-default>.panel-open{background-color:#6f6f6f!important}:host-context(.contrasto-on) .panel .panel-open{background-color:#fff!important;color:#000;border:none!important}:host-context(.contrasto-on) .panel .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading{background-color:#000!important}:host-context(.contrasto-on) .panel-heading .panel-title{color:#fff}:host-context(.contrasto-on) .panel-heading .accordion-arrow{color:#fff}:host-context(.contrasto-on) .panel-heading .label{color:#fff!important}:host-context(.contrasto-on) .panel-body{background-color:#fff!important;border:none!important;color:#000}:host-context(.contrasto-on) .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:1px solid #000!important} /*# sourceMappingURL=nbp-accordion.component.css.map */ "]
    }),
    __metadata$54("design:paramtypes", [])
], NbpAccordionComponent);

var __decorate$71 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$55 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$12 = 0;
let NbpAccordionButtonComponent = class NbpAccordionButtonComponent {
    constructor() {
        // TODO NIS questo componente sarebbe da unire al nbp-accordion-showmore aggiungendo uno style magari!!
        this.id = `nbp-accordion-button-${++nextId$12}`;
        /**
         * (Opzionale) Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         *Default accordion collassato.
         */
        this.nbpCollapsed = true;
        /**
         * (Opzionale) Booleano che indica se allineare a destra l'heading del componente.
         * Default false.
         */
        this.nbpPullRight = false;
        /**
         * Evento emesso sul toggle del componente.
         * @param {EventEmitter<NbpAccordionEvent>}  nbpOnToggle
         */
        this.nbpOnToggle = new EventEmitter();
    }
    //     Methods
    /**
     * metodo utilizzabile per l’apertura programmatica
     */
    open() {
        this.nbpCollapsed = false;
    }
    /**
     * metodo utilizzabile per la chiusura programmatica
     */
    close() {
        this.nbpCollapsed = true;
    }
    /**
     * metodo utilizzabile per verificare se il componente è collassato
     */
    isCollapsed() {
        return this.nbpCollapsed;
    }
    ngOnInit() {
    }
    _toggleCollapse() {
        this.nbpCollapsed = !this.nbpCollapsed;
        this._onToggle();
    }
    _onToggle() {
        let acordionEvent = new NbpAccordionEvent();
        acordionEvent.source = this;
        acordionEvent.isCollapsed = this.nbpCollapsed;
        this.nbpOnToggle.emit(acordionEvent);
    }
};
__decorate$71([
    Input(),
    __metadata$55("design:type", String)
], NbpAccordionButtonComponent.prototype, "id", void 0);
__decorate$71([
    Input(),
    __metadata$55("design:type", String)
], NbpAccordionButtonComponent.prototype, "nbpTitle", void 0);
__decorate$71([
    Input(),
    __metadata$55("design:type", Boolean)
], NbpAccordionButtonComponent.prototype, "nbpCollapsed", void 0);
__decorate$71([
    Input(),
    __metadata$55("design:type", String)
], NbpAccordionButtonComponent.prototype, "nbpIcon", void 0);
__decorate$71([
    Input(),
    __metadata$55("design:type", Boolean)
], NbpAccordionButtonComponent.prototype, "nbpPullRight", void 0);
__decorate$71([
    Output(),
    __metadata$55("design:type", EventEmitter)
], NbpAccordionButtonComponent.prototype, "nbpOnToggle", void 0);
NbpAccordionButtonComponent = __decorate$71([
    Component({
        selector: 'nbp-accordion-button',template: "<div class=\"panel nbp-panel-button\"><div class=\"panel-heading\" role=\"button\" [ngClass]=\"{'panel-heading-round': !isCollapsed(), 'pull-right': nbpPullRight}\" role=\"tab\" [id]=\"id\" (click)=\"_toggleCollapse()\"><h4 class=\"panel-title\"><span class=\"icon accordion-icon\" [ngClass]=\"nbpIcon\" *ngIf=\"!!nbpIcon\"></span> <span class=\"title\" [ngClass]=\"{'accordion-title-icon':!!nbpIcon}\">{{nbpTitle}}</span><br><span [ngClass]=\"{'triangolo-bottom-accordion': isCollapsed(), 'triangolo-top-accordion': !isCollapsed()}\"></span></h4></div><div class=\"panel-collapse\" [ngClass]=\"{'in panel-open':!isCollapsed()}\"><div class=\"panel-body\"><ng-content></ng-content></div></div></div>",
        animations: [],
        styles: [".panel{box-shadow:none}.panel .panel-open{background-color:#f2f2f2!important;border:.0625em!important;border-color:#6f6f6f;margin-top:.625em}.panel-heading{text-align:center;border:.0625em solid #258900!important;box-shadow:none;color:#258900;background-color:#fff;padding:1em 1.25em 1em 1.25em!important;height:3.125em;width:18.75em;border-radius:1.5625em}.panel-heading:hover{cursor:pointer;background-color:#258900!important}.panel-heading:hover .panel-title{color:#fff}.panel-heading:hover .triangolo-top-accordion{border-color:transparent transparent #fff transparent}.panel-heading:hover .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent}.panel-heading.panel-heading-round{background-color:#258900!important}.panel-heading.panel-heading-round .panel-title{color:#fff}.panel-heading.panel-heading-round .triangolo-top-accordion{border-color:transparent transparent #fff transparent}.panel-heading.panel-heading-round .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent}.panel-heading .panel-title{color:#258900;font-weight:700;font-size:.75em!important;text-transform:uppercase}.panel-heading .accordion-arrow{color:#000;position:relative;font-size:1.625em!important;margin-top:1.156em}.panel-heading .triangolo-top-accordion{border-style:solid;border-width:0 .4375em .4375em .4375em;border-color:transparent transparent #258900 transparent;display:inline-block!important}.panel-heading .triangolo-bottom-accordion{border-style:solid;border-width:.4375em .4375em 0 .4375em;border-color:#258900 transparent transparent transparent;display:inline-block!important}.panel-heading .stringa{color:#fff;font-size:.75em!important;margin-right:1.875em;font-weight:700;font-family:arial}.panel-heading h4{margin:0;font-size:1em}.panel-body{border:.0625em!important;box-shadow:none;background-color:#f2f2f2!important}.panel-collapse{width:100%;border:.0625em!important;box-shadow:none;background-color:#f2f2f2!important;max-height:0;overflow:hidden}.panel-collapse.in{max-height:1000em}.panelTitle{font-size:.875em;font-weight:700;text-transform:uppercse}.accordionIcon{font-size:2em;position:absolute;top:.5625em}.nbp-panel-button>.panel-heading{background-color:#fff;position:relative}.nbp-panel-button>.panel-heading .accordion-icon{font-size:2em;position:absolute;top:.5625em}.nbp-panel-button>.panel-heading>.panel-title{font-size:.875em;font-weight:700;text-transform:uppercse}.nbp-panel-button>.panel-heading>.panel-title>.title{padding:.125em .125em .125em 0}.nbp-panel-button>.panel-heading>.panel-title .accordion-title-icon{padding:.125em .125em .125em 3.25em!important;margin-bottom:.625em}.nbp-panel-button>.panel-heading>.panel-open{background-color:#5ca740!important}:host-context(.contrasto-on) .panel .panel-open{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading{background-color:#000!important}:host-context(.contrasto-on) .panel-heading:hover{background-color:#fff!important;color:#000;border:.0625em solid #000!important}:host-context(.contrasto-on) .panel-heading:hover .panel-title{color:#000}:host-context(.contrasto-on) .panel-heading:hover .stringa{color:#000}:host-context(.contrasto-on) .panel-heading:hover .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading:hover .triangolo-top-accordion{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .panel-heading:hover .triangolo-bottom-accordion{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .panel-heading .panel-title{color:#fff}:host-context(.contrasto-on) .panel-heading .accordion-arrow{color:#fff}:host-context(.contrasto-on) .panel-heading .stringa{color:#fff}:host-context(.contrasto-on) .panel-body{background-color:#fff!important;border-top:none!important;color:#000}:host-context(.contrasto-on) .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .accordion-green-header>.panel-heading:hover{background-color:#fff!important;color:#000;border:.0625em solid #000}:host-context(.contrasto-on) .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:.0625em solid #000!important}:host-context(.contrasto-on) .triangolo-top-accordion{border-color:transparent transparent #fff transparent}:host-context(.contrasto-on) .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent} /*# sourceMappingURL=nbp-accordion-button.component.css.map */ "]
    }),
    __metadata$55("design:paramtypes", [])
], NbpAccordionButtonComponent);

var __decorate$72 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$56 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$13 = 0;
let NbpAccordionShowmoreComponent = class NbpAccordionShowmoreComponent {
    constructor() {
        this.id = `nbp-accordion-showmore-${++nextId$13}`;
        /**
         * (Opzionale) Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         *Default accordion collassato.
         */
        this.nbpCollapsed = true;
        /**
         * (Opzionale) Booleano che indica se allineare a destra l'heading del componente.
         * Default false.
         */
        this.nbpPullRight = false;
        /**
         * Evento emesso sul toggle del componente.
         * @param {EventEmitter<NbpAccordionEvent>}  nbpOnToggle
         */
        this.nbpOnToggle = new EventEmitter();
    }
    //     Methods
    /**
     * metodo utilizzabile per l’apertura programmatica
     */
    open() {
        this.nbpCollapsed = false;
    }
    /**
     * metodo utilizzabile per la chiusura programmatica
     */
    close() {
        this.nbpCollapsed = true;
    }
    /**
     * metodo utilizzabile per verificare se il componente è collassato
     */
    isCollapsed() {
        return this.nbpCollapsed;
    }
    ngOnInit() {
    }
    _toggleCollapse() {
        this.nbpCollapsed = !this.nbpCollapsed;
        this._onToggle();
    }
    _onToggle() {
        let acordionEvent = new NbpAccordionEvent();
        acordionEvent.source = this;
        acordionEvent.isCollapsed = this.nbpCollapsed;
        this.nbpOnToggle.emit(acordionEvent);
    }
};
__decorate$72([
    Input(),
    __metadata$56("design:type", String)
], NbpAccordionShowmoreComponent.prototype, "id", void 0);
__decorate$72([
    Input(),
    __metadata$56("design:type", String)
], NbpAccordionShowmoreComponent.prototype, "nbpTitle", void 0);
__decorate$72([
    Input(),
    __metadata$56("design:type", Boolean)
], NbpAccordionShowmoreComponent.prototype, "nbpCollapsed", void 0);
__decorate$72([
    Input(),
    __metadata$56("design:type", String)
], NbpAccordionShowmoreComponent.prototype, "nbpIcon", void 0);
__decorate$72([
    Input(),
    __metadata$56("design:type", Boolean)
], NbpAccordionShowmoreComponent.prototype, "nbpPullRight", void 0);
__decorate$72([
    Output(),
    __metadata$56("design:type", EventEmitter)
], NbpAccordionShowmoreComponent.prototype, "nbpOnToggle", void 0);
NbpAccordionShowmoreComponent = __decorate$72([
    Component({
        selector: 'nbp-accordion-showmore',template: "<div class=\"panel nbp-panel-showmore\"><div class=\"panel-heading\" [ngClass]=\"{'panel-heading-round': isCollapsed(), 'pull-right': nbpPullRight}\" role=\"tab\" [id]=\"id\" (click)=\"_toggleCollapse()\"><h4 class=\"panel-title\"><span class=\"icon accordion-icon\" [ngClass]=\"nbpIcon\" *ngIf=\"!!nbpIcon\"></span> <span class=\"title\" [ngClass]=\"{'accordion-title-icon':!!nbpIcon}\">{{nbpTitle}}</span> <a role=\"button\" class=\"collapsed pull-right\"><span style=\"font-size: 1.6em\" [ngClass]=\"{'icon ico-comuni-freccia-accordion-apri':isCollapsed() , 'icon ico-comuni-freccia-accordion-chiudi':!isCollapsed()}\"></span></a></h4></div><div class=\"panel-collapse\" [ngClass]=\"{'in panel-open':!isCollapsed()}\"><div class=\"panel-body\"><ng-content></ng-content></div></div></div>",
        animations: [],
        styles: [".panel{border:1px!important;border-color:#fff;box-shadow:none}.panel .panel-open{background-color:#f2f2f2!important;border:1px!important;border-color:#6f6f6f}.panel-heading{border:1px!important;box-shadow:none;color:#258900;border-color:#6f6f6f;background-color:#fff;padding:1em 1.25em 1em 0!important;height:50px;width:18.75em}.panel-heading:hover{cursor:pointer}.panel-heading .panel-title{color:green;font-weight:700;font-size:.75em!important;text-transform:uppercase;text-align:center}.panel-heading .accordion-arrow{color:#000;position:relative;font-size:26px!important;margin-top:1.156em}.panel-heading .stringa{color:#fff;font-size:.75em!important;margin-right:1.875em;font-weight:700;font-family:arial}.panel-heading h4{margin:0;font-size:1em}.panel-body{border:1px!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 2px 2px!important}.panel-collapse{width:100%;border:1px!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 2px 2px!important;max-height:0;transition:max-height .15s ease-out;overflow:hidden}.panel-collapse.in{max-height:1000em;transition:max-height .25s ease-in}.panelTitle{font-size:.875em;font-weight:700}.accordionIcon{font-size:32px;position:absolute;top:9px}.nbp-panel-showmore a{text-decoration:none!important;margin-top:-3px;margin-right:4.962em}.nbp-panel-showmore>.panel-heading{background-color:#fff!important;position:relative}.nbp-panel-showmore>.panel-heading .accordion-icon{font-size:32px;position:absolute;top:9px}.nbp-panel-showmore>.panel-heading>.panel-title{font-size:.875em;font-weight:700;text-align:left!important}.nbp-panel-showmore>.panel-heading>.panel-title>.title{padding:2px 20px 2px 0}.nbp-panel-showmore>.panel-heading>.panel-title .accordion-title-icon{padding:2px 2px 2px 52px!important;margin-bottom:10px}.nbp-panel-showmore>.panel-heading>.panel-open{background-color:#5ca740!important}:host-context(.contrasto-on) .panel .panel-open{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading{background-color:#fff!important}:host-context(.contrasto-on) .panel-heading .panel-title{color:#000}:host-context(.contrasto-on) .panel-heading .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading .stringa{color:#000}:host-context(.contrasto-on) .panel-body{background-color:#fff!important;border-top:none!important;color:#000}:host-context(.contrasto-on) .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .accordion-green-header>.panel-heading:hover{background-color:#fff!important;color:#000;border:1px solid #000}:host-context(.contrasto-on) .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:1px solid #000!important} /*# sourceMappingURL=nbp-accordion-showmore.component.css.map */ "]
    }),
    __metadata$56("design:paramtypes", [])
], NbpAccordionShowmoreComponent);

var __decorate$73 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$57 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$14 = 0;
let NbpAccordionShowmoreCircleComponent = class NbpAccordionShowmoreCircleComponent {
    constructor() {
        this.id = `nbp-accordion-showmore-circle-${++nextId$14}`;
        /**
         * (Opzionale) Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         *Default accordion collassato.
         */
        this.nbpCollapsed = true;
        /**
         * (Opzionale) Stringa che indica l'allineamento del Title desiderato.
         *  Possibili valori : right, left, center
         *  Default allineamento : center.
         */
        this.nbpTitleAlign = "center";
        /**
         * (Opzionale) Stringa che indica l'allineamento del Body desiderato.
         *  Possibili valori : right, left, center
         *  Default allineamento : right.
         */
        this.nbpBodyAlign = "right";
        /**
       * Evento emesso sul toggle del componente.
       * @param {EventEmitter<NbpAccordionEvent>}  nbpOnToggle
       */
        this.nbpOnToggle = new EventEmitter();
    }
    //     Methods
    /**
     * metodo utilizzabile per l’apertura programmatica
     */
    open() {
        this.nbpCollapsed = false;
    }
    /**
     * metodo utilizzabile per la chiusura programmatica
     */
    close() {
        this.nbpCollapsed = true;
    }
    /**
     * metodo utilizzabile per verificare se il componente è collassato
     */
    isCollapsed() {
        return this.nbpCollapsed;
    }
    _toggleCollapse() {
        this.nbpCollapsed = !this.nbpCollapsed;
        this._onToggle();
    }
    _onToggle() {
        let acordionEvent = new NbpAccordionEvent();
        // acordionEvent.source = this;
        acordionEvent.isCollapsed = this.nbpCollapsed;
        this.nbpOnToggle.emit(acordionEvent);
    }
};
__decorate$73([
    Input(),
    __metadata$57("design:type", String)
], NbpAccordionShowmoreCircleComponent.prototype, "id", void 0);
__decorate$73([
    Input(),
    __metadata$57("design:type", String)
], NbpAccordionShowmoreCircleComponent.prototype, "nbpTitle", void 0);
__decorate$73([
    Input(),
    __metadata$57("design:type", Boolean)
], NbpAccordionShowmoreCircleComponent.prototype, "nbpCollapsed", void 0);
__decorate$73([
    Input(),
    __metadata$57("design:type", String)
], NbpAccordionShowmoreCircleComponent.prototype, "nbpTitleAlign", void 0);
__decorate$73([
    Input(),
    __metadata$57("design:type", String)
], NbpAccordionShowmoreCircleComponent.prototype, "nbpBodyAlign", void 0);
__decorate$73([
    Output(),
    __metadata$57("design:type", EventEmitter)
], NbpAccordionShowmoreCircleComponent.prototype, "nbpOnToggle", void 0);
NbpAccordionShowmoreCircleComponent = __decorate$73([
    Component({
        selector: 'nbp-accordion-showmore-circle',template: "<div><div class=\"panel-heading\" role=\"tab\" [id]=\"id\" [style.text-align]=\"nbpTitleAlign\" (click)=\"_toggleCollapse()\"><h4 class=\"panel-title\"><span>{{nbpTitle}}</span> <a role=\"button\" class=\"collapsed\"><span class=\"accordion-arrow-round\" [ngClass]=\"{'icomoon-Simboli_Risorsa-15':isCollapsed() , 'icomoon-Simboli_Risorsa-14':!isCollapsed()}\"></span></a></h4></div><div class=\"panel-collapse\" [style.text-align]=\"nbpBodyAlign\" [ngClass]=\"{'in panel-open':!isCollapsed()}\"><div class=\"panel-body\"><ng-content></ng-content></div></div></div>",
        animations: [],
        styles: ["a:focus,a:hover{text-decoration:none}.panel{border:1px!important;border-color:#fff;box-shadow:none}.panel .panel-open{background-color:#f2f2f2!important;border:1px!important;border-color:#6f6f6f}.panel-heading{border:1px!important;box-shadow:none;color:#258900;border-color:#6f6f6f;background-color:#fff;padding:1em 1.25em 1em 0!important;height:50px}.panel-heading:hover{cursor:pointer}.panel-heading h4{margin:0;font-size:1em}.panel-heading .panel-title{color:green;font-weight:700;font-size:.75em!important;text-transform:uppercase}.panel-heading .accordion-arrow-round{color:#000;position:relative;font-size:30px;vertical-align:middle;margin-left:8px}.panel-body{margin-top:5px;border:1px!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 2px 2px!important}.panel-collapse{width:100%;margin-top:5px;border:1px!important;box-shadow:none;background-color:#f2f2f2!important;border-radius:0 0 2px 2px!important;max-height:0;transition:max-height .15s ease-out;overflow:hidden}.panel-collapse.in{max-height:1000em;transition:max-height .25s ease-in}.panelTitle{font-size:.875em;font-weight:700}:host-context(.contrasto-on) .panel .panel-open{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading{background-color:#fff!important}:host-context(.contrasto-on) .panel-heading .panel-title{color:#000}:host-context(.contrasto-on) .panel-heading .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel-heading .stringa{color:#000}:host-context(.contrasto-on) .panel-body{background-color:#fff!important;border-top:none!important;color:#000}:host-context(.contrasto-on) .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .accordion-green-header>.panel-heading:hover{background-color:#fff!important;color:#000;border:1px solid #000}:host-context(.contrasto-on) .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:1px solid #000!important}:host-context(.contrasto-on) .panel-collapse{background-color:#fff!important} /*# sourceMappingURL=nbp-accordion-showmore-circle.component.css.map */ "]
    }),
    __metadata$57("design:paramtypes", [])
], NbpAccordionShowmoreCircleComponent);

var __decorate$74 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$58 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$14 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/** intero autogenerato usato per id unici per radio component */
let nextId$15 = 0;
/**
 * Provider Expression that allows nbp-radio to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_RADIO_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpRadioComponent),
    multi: true
};
/**
 * <nbp-radio> provides the same functionality as a native <input type="radio">
 */
let NbpRadioComponent = class NbpRadioComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        /**
         * Identificativo univoco per il radio button. Se non viene passato un valore, l'id viene autogenerato.
         */
        this.id = `nbp-radio-${++nextId$15}`;
        this._nbpChecked = false;
        this._nbpNullable = false;
        /**
         * Event emitted when the radio's `checked` value changes.
         */
        this.change = new EventEmitter(); // TODO definire tipo specifico dell'evento
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this.propagateChange = (value) => {
            console.log('NbpRadio: eseguita funzione propagateChange ' + value);
        };
    }
    get value() { return this._nbpValue; }
    set value(newValue) {
        if (this._nbpValue !== newValue) {
            // Set this before proceeding to ensure no circular loop occurs with selection.
            this._nbpValue = newValue;
        }
    }
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
    * (Opzionale) Booleano che imposta come obbligatorio o meno del campo associato al radio button.
    * Valore di dafault false.
    */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
    * (Opzionale) Booleano che imposta come 'checked' o meno il radio button.
    * Valore di dafault false.
    */
    get checked() {
        return this._nbpChecked;
    }
    set checked(value) {
        this._nbpChecked = coerceBooleanProperty(value);
        /*old code
        if (this._nbpChecked !== checked) {
          this._nbpChecked = checked;
        }*/
    }
    /**
     *(opzionale)Booleano che imposta, se presente, la proprietà CSS display dell’elemento a inline-block
     *valore default false
     */
    get nbpDisplayInline() { return this._nbpDisplayInline; }
    set nbpDisplayInline(value) { this._nbpDisplayInline = coerceBooleanProperty(value); }
    /**
    * (Opzionale) Booleano, se presente, l’attributo abilita il bordo giallo della radio-button.
    * Al primo click/focus tornerà alla versione di default.
    * Valore di default false.
    */
    get nbpYellowBorder() {
        return this._nbpYellowBorder;
    }
    set nbpYellowBorder(value) {
        this._nbpYellowBorder = coerceBooleanProperty(value);
    }
    /**
     * (Opzionale) Permettere di rendere deselezionabile il radiobutton
     * valore di default false
     */
    get nbpNullable() { return this._nbpNullable; }
    set nbpNullable(value) {
        this._nbpNullable = coerceBooleanProperty(value);
    }
    ngOnInit() {
        if (!this.nbpShowValidation) {
            this.nbpShowValidation = false;
        }
        if (!this.nbpDisplayInline) {
            this.nbpDisplayInline = false;
        }
        if (!this.nbpYellowBorder) {
            this.nbpYellowBorder = false;
        }
        if (this.firstFocus) {
            this.focusOn = true;
            this.elementRef.nativeElement.focus(this.focusFn());
        }
    }
    focusFn() {
        this.focusOn = true;
    }
    _onFocusEvent(event) {
        // event.stopPropagation();
        this.nbpYellowBorder = false;
    }
    _tabFocusOn() {
        this.focusOn = true;
    }
    _tabFocusOff() {
        this.focusOn = false;
    }
    _shiftTabFocusOn() {
        this.focusOn = true;
    }
    _shiftTabFocusOff() {
        this.focusOn = false;
    }
    writeValue(value) {
        this.checked = this.value === value;
        // this.value = value;
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    _onChangeEvent(event) {
        event.stopPropagation();
        this.change.next(event);
    }
    _onClickEvent(event) {
        event.stopPropagation();
        this.focusOn = false;
        if (!this.disabled) {
            this.checked = this.nbpNullable ? !this.checked : true;
            if (this.checked) {
                this.model = this.value;
            }
            else {
                this.model = null;
            }
            if (this._nbpYellowBorder) {
                this.nbpYellowBorder = false;
            }
        }
        this._emitChangeEvent(event);
    }
    _emitChangeEvent(event) {
        this.change.emit(this.model);
        this.propagateChange(this.model);
    }
};
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "id", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "name", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Object),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "value", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "disabled", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "required", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "checked", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "nbpLabel", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean)
], NbpRadioComponent.prototype, "nbpShowValidation", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "nbpDisplayInline", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "nbpYellowBorder", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "nbpIcon", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "nbpSelectionSign", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean),
    __metadata$58("design:paramtypes", [Object])
], NbpRadioComponent.prototype, "nbpNullable", null);
__decorate$74([
    Input(),
    __metadata$58("design:type", String)
], NbpRadioComponent.prototype, "nbpErrorMessage", void 0);
__decorate$74([
    Output(),
    __metadata$58("design:type", EventEmitter)
], NbpRadioComponent.prototype, "change", void 0);
__decorate$74([
    ViewChild(NgModel),
    __metadata$58("design:type", NgModel)
], NbpRadioComponent.prototype, "model", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean)
], NbpRadioComponent.prototype, "firstFocus", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Boolean)
], NbpRadioComponent.prototype, "focusOn", void 0);
__decorate$74([
    Input(),
    __metadata$58("design:type", Number)
], NbpRadioComponent.prototype, "tabindex", void 0);
__decorate$74([
    ViewChild('autoFocusRadio'),
    __metadata$58("design:type", ElementRef)
], NbpRadioComponent.prototype, "elementRef", void 0);
NbpRadioComponent = __decorate$74([
    Component({
        selector: 'nbp-radio',template: "<div class=\"iradio-container\" [ngStyle]=\"{'display': nbpDisplayInline ? 'inline-block' : 'block'}\" [ngClass]=\"{'checked': checked && !disabled, 'disabled': disabled, 'yellowborder': nbpYellowBorder}\"><div class=\"iradio_intesa\" [ngClass]=\"{'checked': checked, 'iradio_intesa_spunta': nbpSelectionSign === 'spunta', 'yellowborder': nbpYellowBorder, 'disabled': disabled, 'focusTabRadio': focusOn}\"><input [id]=\"id\" [name]=\"name\" [checked]=\"checked\" type=\"radio\" [value]=\"value\" [disabled]=\"disabled\" [required]=\"required\" (click)=\"_onClickEvent($event)\" (change)=\"_onChangeEvent($event)\" (focusout)=\"_tabFocusOff()\" (keyup.tab)=\"_tabFocusOn()\" (keydown.tab)=\"_tabFocusOff()\" (keydown.shift.tab)=\"_shiftTabFocusOff()\" (keyup.shift.tab)=\"_shiftTabFocusOn()\" [tabindex]=\"tabindex\" #autoFocusRadio></div><span *ngIf=\"!!nbpIcon\" class=\"icon radio-icon\" [ngClass]=\"nbpIcon\"></span> <label *ngIf=\"nbpLabel\" [ngClass]=\"{'radio-label-icon': nbpIcon , 'radio-label': !nbpIcon}\" [for]=\"id\">{{nbpLabel}}</label> <label *ngIf=\"!nbpLabel\" [ngClass]=\"{'radio-label-icon': nbpIcon , 'radio-label': !nbpIcon}\" [for]=\"id\"><ng-content></ng-content></label></div>",
        styles: [".iradio-container{margin-right:.625em}.iradio-container.checked .radio-label{color:#258900!important}.iradio-container.checked .radio-label-icon{color:#258900!important}.iradio-container.checked .radio-icon{color:#258900!important}.iradio-container.disabled .radio-label{opacity:.5}.iradio_intesa{position:relative;display:inline-block;vertical-align:middle;margin:0;padding:0;width:22px;height:22px;background:url(/cjlib/assets/images/intesa.png) no-repeat;border:none;background-position:-222px -1px}.iradio_intesa input[type=radio]{margin:4px 4px 0 0!important;cursor:pointer;opacity:0}.iradio_intesa input[type=radio]:disabled{cursor:auto}.iradio_intesa.yellowborder{background-position:-294px -1px}.focusTabRadio{box-shadow:0 0 .05em .23em rgba(37,137,0,.6)!important}.iradio_intesa_spunta.checked{background-position:-330px -1px!important}.iradio_intesa_spunta.checked.yellowborder{background-position:-617px -1px!important}.iradio_intesa_spunta.checked.disabled{opacity:.5}.iradio_intesa.checked{background-position:-186px -1px}.iradio_intesa.checked.yellowborder{background-position:-258px -1px}.iradio_intesa.disabled{opacity:.5}.iradio_intesa.checked.disabled{opacity:.5}.radio-label{color:#323232;font-size:.875em!important;font-weight:400;margin:0 0 0 10px!important}.radio-label-icon{padding-left:.825em;padding-bottom:.8125em;display:table-cell!important;vertical-align:middle;font-size:.875em!important;font-weight:400}.radio-icon{font-size:2em!important;vertical-align:middle;margin:5px 0 0 15px!important}.radio-error-message{color:#c63200;font-size:.75em;margin-top:0;margin-bottom:.625em;opacity:1}.radio-error-message.ng-hide-add{transition:all ease-out .25s}.radio-error-message.ng-hide-remove{transition:all ease-out .25s}.radio-error-message.ng-hide{opacity:0;margin-top:-.625em}@media (-o-min-device-pixel-ratio:5/4){.iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}.iradio_intesa{background-position:-193px -1px}.iradio_intesa.yellowborder{background-position:-473px -1px}.iradio_intesa_spunta.checked{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.yellowborder{background-position:-538px -1px!important}.iradio_intesa_spunta.checked.disabled{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-538px -1px!important}.iradio_intesa.checked{background-position:-162px -1px}.iradio_intesa.checked.yellowborder{background-position:-505px -1px}.iradio_intesa.disabled{background-position:-193px -1px;cursor:default}.iradio_intesa.disabled.yellowborder{background-position:-473px -1px}.iradio_intesa.checked.disabled{background-position:-162px -1px}.iradio_intesa.checked.disabled.yellowborder{background-position:-505px -1px}}@media (-webkit-min-device-pixel-ratio:1.25){.iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}.iradio_intesa{background-position:-193px -1px}.iradio_intesa.yellowborder{background-position:-473px -1px}.iradio_intesa_spunta.checked{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.yellowborder{background-position:-538px -1px!important}.iradio_intesa_spunta.checked.disabled{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-538px -1px!important}.iradio_intesa.checked{background-position:-162px -1px}.iradio_intesa.checked.yellowborder{background-position:-505px -1px}.iradio_intesa.disabled{background-position:-193px -1px;cursor:default}.iradio_intesa.disabled.yellowborder{background-position:-473px -1px}.iradio_intesa.checked.disabled{background-position:-162px -1px}.iradio_intesa.checked.disabled.yellowborder{background-position:-505px -1px}}@media (min-resolution:120dpi){.iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}.iradio_intesa{background-position:-193px -1px}.iradio_intesa.yellowborder{background-position:-473px -1px}.iradio_intesa_spunta.checked{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.yellowborder{background-position:-538px -1px!important}.iradio_intesa_spunta.checked.disabled{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-538px -1px!important}.iradio_intesa.checked{background-position:-162px -1px}.iradio_intesa.checked.yellowborder{background-position:-505px -1px}.iradio_intesa.disabled{background-position:-193px -1px;cursor:default}.iradio_intesa.disabled.yellowborder{background-position:-473px -1px}.iradio_intesa.checked.disabled{background-position:-162px -1px}.iradio_intesa.checked.disabled.yellowborder{background-position:-505px -1px}}@media (min-resolution:1.25dppx){.iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}.iradio_intesa{background-position:-193px -1px}.iradio_intesa.yellowborder{background-position:-473px -1px}.iradio_intesa_spunta.checked{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.yellowborder{background-position:-538px -1px!important}.iradio_intesa_spunta.checked.disabled{background-position:-287px -1px!important}.iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-538px -1px!important}.iradio_intesa.checked{background-position:-162px -1px}.iradio_intesa.checked.yellowborder{background-position:-505px -1px}.iradio_intesa.disabled{background-position:-193px -1px;cursor:default}.iradio_intesa.disabled.yellowborder{background-position:-473px -1px}.iradio_intesa.checked.disabled{background-position:-162px -1px}.iradio_intesa.checked.disabled.yellowborder{background-position:-505px -1px}}:host-context(.contrasto-on) .iradio-container{margin-right:.625em}:host-context(.contrasto-on) .iradio-container.checked .radio-label{color:#000!important}:host-context(.contrasto-on) .iradio-container.disabled .radio-label{color:#000!important}:host-context(.contrasto-on) .iradio_intesa{background:url(/cjlib/assets/images/intesa.png) no-repeat;background-position:-1155px -1px}:host-context(.contrasto-on) .iradio_intesa.yellowborder{background-position:-1155px -1px}:host-context(.contrasto-on) .iradio_intesa_spunta.checked{background-position:-1301px -1px!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.yellowborder{background-position:-1301px -1px!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled{background-position:-1301px -1px!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-1301px -1px!important}:host-context(.contrasto-on) .iradio_intesa.checked{background-position:-1191px -1px}:host-context(.contrasto-on) .iradio_intesa.checked.yellowborder{background-position:-1191px -1px}:host-context(.contrasto-on) .iradio_intesa.disabled{background-position:-1155px -1px;cursor:default}:host-context(.contrasto-on) .iradio_intesa.disabled.yellowborder{background-position:-1155px -1px}:host-context(.contrasto-on) .iradio_intesa.checked.disabled{background-position:-1191px -1px}:host-context(.contrasto-on) .iradio_intesa.checked.disabled.yellowborder{background-position:-1191px -1px}:host-context(.contrasto-on) .radio-label{color:#000}:host-context(.contrasto-on) .radio-error-message{color:#000}@media (-o-min-device-pixel-ratio:5/4){:host-context(.contrasto-on) .iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}:host-context(.contrasto-on) .iradio_intesa{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.yellowborder{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.disabled{background-position:-1007px 0!important;cursor:default}:host-context(.contrasto-on) .iradio_intesa.disabled.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled.yellowborder{background-position:-1037px 0!important}}@media (-webkit-min-device-pixel-ratio:1.25){:host-context(.contrasto-on) .iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}:host-context(.contrasto-on) .iradio_intesa{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.yellowborder{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.disabled{background-position:-1007px 0!important;cursor:default}:host-context(.contrasto-on) .iradio_intesa.disabled.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled.yellowborder{background-position:-1037px 0!important}}@media (min-resolution:120dpi){:host-context(.contrasto-on) .iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}:host-context(.contrasto-on) .iradio_intesa{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.yellowborder{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.disabled{background-position:-1007px 0!important;cursor:default}:host-context(.contrasto-on) .iradio_intesa.disabled.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled.yellowborder{background-position:-1037px 0!important}}@media (min-resolution:1.25dppx){:host-context(.contrasto-on) .iradio_intesa{background-image:url(/cjlib/assets/images/intesa@2x.png);-webkit-background-size:1156px 22px;background-size:1156px 22px}:host-context(.contrasto-on) .iradio_intesa{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa_spunta.checked.disabled.yellowborder{background-position:-1133px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.yellowborder{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.disabled{background-position:-1007px 0!important;cursor:default}:host-context(.contrasto-on) .iradio_intesa.disabled.yellowborder{background-position:-1007px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled{background-position:-1037px 0!important}:host-context(.contrasto-on) .iradio_intesa.checked.disabled.yellowborder{background-position:-1037px 0!important}} /*# sourceMappingURL=nbp-radio.component.css.map */ "],
        providers: [NBP_RADIO_CONTROL_VALUE_ACCESSOR]
    }),
    __param$14(0, Optional()), __param$14(0, Inject(NG_VALIDATORS)),
    __param$14(1, Optional()), __param$14(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$14(2, Optional()),
    __metadata$58("design:paramtypes", [Array, Array, NbpFormContainerComponent])
], NbpRadioComponent);

var __decorate$75 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NbpProgressStickyContentComponent = class NbpProgressStickyContentComponent {
};
NbpProgressStickyContentComponent = __decorate$75([
    Component({
        selector: 'nbp-progress-sticky-content',template: "<ng-content></ng-content>"
    })
], NbpProgressStickyContentComponent);

var __decorate$76 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$59 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$15 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpFormAutoScrollDirective = class NbpFormAutoScrollDirective {
    constructor(elementRef, inj) {
        this.elementRef = elementRef;
        this.inj = inj;
    }
    ngOnInit() {
        this.form = this.inj.get(NgForm, null);
        this.form.ngSubmit.subscribe((submit) => {
            // console.log('submit');
            this.scrollTo(null);
        });
        // console.log('Form detected ' + this.form);
        if (this.submitEvent) {
            this.submitEvent.subscribe(() => {
                this.scrollTo(null);
            });
        }
    }
    scrollTo(field) {
        try {
            console.dir(this.inputs);
            // tslint:disable-next-line:max-line-length
            let elements = document.querySelectorAll('nbp-input-text.ng-invalid, nbp-combo.ng-invalid, nbp-combo-multi.ng-invalid, nbp-checkbox.ng-invalid, .alert');
            if (elements.length === 0) {
                // console.log('not found');
                return;
            }
            console.dir(elements);
            // console.log('found, scrolling ' + elements[0].name);
            console.dir(elements[0]);
            elements[0].scrollIntoView({ behavior: 'smooth' });
        }
        finally {
            // console.log('scroll done');
        }
    }
};
__decorate$76([
    Input(),
    __metadata$59("design:type", EventEmitter)
], NbpFormAutoScrollDirective.prototype, "submitEvent", void 0);
__decorate$76([
    ViewChildren('input'),
    __metadata$59("design:type", QueryList)
], NbpFormAutoScrollDirective.prototype, "inputs", void 0);
NbpFormAutoScrollDirective = __decorate$76([
    Directive({
        selector: 'form[autoscroll]',
    }),
    __param$15(0, Inject(ElementRef)),
    __metadata$59("design:paramtypes", [ElementRef,
        Injector])
], NbpFormAutoScrollDirective);

var __decorate$77 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$60 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPagingComponent = class NbpPagingComponent {
    constructor() {
        /**
         * evento generato al click sul pallino che indica la pagina.
         * Contiene il numero della pagina a cui si desidera tornare.
         */
        this.nbpGoToPage = new EventEmitter();
    }
    /**
     * funzione invocata al click sul pallino che indica la pagina.
     */
    onClickPage(indice) {
        // debugger;
        this.nbpConfiguration.pages;
        this.nbpGoToPage.emit(indice);
    }
};
__decorate$77([
    Input(),
    __metadata$60("design:type", Object)
], NbpPagingComponent.prototype, "nbpConfiguration", void 0);
__decorate$77([
    Output(),
    __metadata$60("design:type", EventEmitter)
], NbpPagingComponent.prototype, "nbpGoToPage", void 0);
NbpPagingComponent = __decorate$77([
    Component({
        selector: 'nbp-paging',template: "<div class=\"page-steps-container col-md-24 border-top-white\"><div class=\"container pad-t-12 pad-b-12 pad-l-10 pad-r-10\"><ul class=\"page-steps pull-left\"><ng-container *ngFor=\"let page of nbpConfiguration?.pages; let pageIndex= index\"><li class=\"page-step\" *ngIf=\"page.status !== 'todo'\"><div class=\"col\"><span class=\"page-steps-number\" (click)=\"onClickPage(pageIndex)\" [ngClass]=\"{'active': page.status === 'active', 'done': page.status === 'done'}\">{{pageIndex + 1}}</span><div class=\"row\"><label class=\"page-step-label\" *ngIf=\"page.status === 'active'\">{{nbpConfiguration.currentParentLabel}}</label><br><label class=\"page-steps-label\" *ngIf=\"page.status === 'active'\">{{page.label}}</label></div></div></li></ng-container></ul><ul class=\"page-steps pull-right\"><ng-container *ngFor=\"let page of nbpConfiguration?.pages; let pageIndex = index\"><li class=\"page-step\" *ngIf=\"page.status === 'todo'\"><span class=\"page-steps-number\" [ngClass]=\"{'active': page.status === 'active', 'done': page.status === 'done'}\">{{pageIndex + 1}}</span> <label class=\"page-steps-label\" *ngIf=\"page.status === 'active'\">{{page.label}}</label></li></ng-container></ul></div></div>",
        styles: [".page-steps{list-style:none;padding:0;margin:0;height:2em}.page-steps li{display:inline-block;height:2em;line-height:2em}.page-steps li .row{line-height:0}.page-steps .page-step .col{display:inline-table}.page-steps .page-step .row{display:table-cell}.page-steps .page-steps-number{display:inline-block;border:1px solid #6f6f6f;font-weight:700;color:#6f6f6f;text-align:center;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:2em;height:2em;font-size:.785em;line-height:2em;margin:0 .125em 0 .125em}.page-steps .page-steps-number.active{color:#258900;border:1px solid #258900}.page-steps .page-steps-number.done{color:#fff;background-color:#258900;border-color:#258900;cursor:pointer}.page-steps .page-step-label{font-weight:400;color:#258900;font-size:.6875em;line-height:.5em;text-transform:uppercase;margin-left:.5em;margin-top:.4em}.page-steps .page-steps-label{font-weight:700;color:#258900;font-size:.785em;line-height:1em;text-transform:uppercase;margin-left:.5em}.page-steps-container{background-color:#fff}@media (min-width:768px){.page-steps .page-steps-label{font-size:.938em}.page-steps .page-steps-number{font-size:.938em}}@-moz-document url-prefix(){.page-steps .page-step .col{display:inline-flex}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.page-steps .page-step .col .row{top:-10px}}.contrasto-on .page-steps .page-steps-number{color:#000}.contrasto-on .page-steps .page-steps-number.active{color:#000;border:1px solid #000}.contrasto-on .page-steps .page-steps-number.done{color:#fff;background-color:#000;border-color:#000}.contrasto-on .page-steps .page-step-label{color:#000}.contrasto-on .page-steps .page-steps-label{color:#000}.contrasto-on .page-steps-container{background-color:#fff} /*# sourceMappingURL=nbp-paging.component.css.map */ "]
    }),
    __metadata$60("design:paramtypes", [])
], NbpPagingComponent);

var NpbPaginationDispalyType;
(function (NpbPaginationDispalyType) {
    NpbPaginationDispalyType[NpbPaginationDispalyType["DISABLED"] = 0] = "DISABLED";
    NpbPaginationDispalyType[NpbPaginationDispalyType["ENABLED"] = 1] = "ENABLED";
})(NpbPaginationDispalyType || (NpbPaginationDispalyType = {}));
var PaginationActions;
(function (PaginationActions) {
    PaginationActions[PaginationActions["ON_PAGE_CLICK"] = 0] = "ON_PAGE_CLICK";
    PaginationActions[PaginationActions["ON_WINDOW_NEXT_CLICK"] = 1] = "ON_WINDOW_NEXT_CLICK";
    PaginationActions[PaginationActions["ON_WINDOW_PREV_CLICK"] = 2] = "ON_WINDOW_PREV_CLICK";
})(PaginationActions || (PaginationActions = {}));

var __decorate$78 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$61 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPaginationComponent = class NbpPaginationComponent {
    constructor() {
        /**
         * Configurazione numerica degli stati del paginatore.
         * Di tipo: IPaginationStatus
         * Valore di default: {pageNumber: 1, pageSize: -1, totalRecords: -1};
         */
        this.nbpPaginationStatus = { pageNumber: 1, pageSize: -1, totalRecords: -1 };
        /**
         * Configurazione per la visualizzazione dei pulsanti del paginatore.
         * Di tipo : INbpPaginationConfiguration
         * Valore di default: { next: true, prev: true, page: true, last: true, first: true };
         */
        this.nbpShowPaginationStatus = { next: true, prev: true, page: true, last: true, first: true };
        /**
         * Configurazione per la disabilitazione dei pulsanti del paginatore.
         * Di tipo : INbpPaginationConfiguration
         * Valore di default: { next: false, prev: false, page: false, last: false, first: false };
         */
        this.nbpDisablePaginationStatus = { next: false, prev: false, page: false, last: false, first: false };
        /**
         * Evento di notifica per pagina cambiata
         */
        this.nbpOnPageChange = new EventEmitter();
        /**
        * Evento di notifica per passaggio alla pagina successiva
        */
        this.nbpOnNext = new EventEmitter();
        /**
        * Evento di notifica per passaggio ad una pagina qualsiasi
        */
        this.nbpOnGoToPage = new EventEmitter();
        /**
        * Evento di notifica per passaggio alla pagina precedente
        */
        this.nbpOnPrev = new EventEmitter();
        /**
        * Evento di notifica per passaggio alla prima pagina
        */
        this.nbpOnFirst = new EventEmitter();
        /**
        * Evento di notifica per passaggio all'ultima pagina
        */
        this.nbpOnLast = new EventEmitter();
        this._windowPages = [];
        this._paginationActions = PaginationActions;
        this._showTooltip = false;
    }
    ngOnChanges(changes) {
        if (changes.nbpPaginationStatus) {
            this.nbpPageWindowSize = this.nbpPageWindowSize ? this.nbpPageWindowSize : 5;
            this._internalPageNumber = changes.nbpPaginationStatus.currentValue.pageNumber - 1;
            if (this._isTotalRecordsProvided() && this.nbpPageWindowSize) {
                this._lastPageModelNumber = this._getTotalPages(this.nbpPaginationStatus.pageSize, this.nbpPaginationStatus.totalRecords) - 1;
                this._evaluateWindowPages(this._internalPageNumber);
            }
            else {
                this._setShowTooltipCondition();
            }
        }
    }
    _getTotalPages(pageSize, totalSize) {
        return Math.trunc(totalSize / pageSize) + (totalSize % pageSize > 0 ? 1 : 0);
    }
    _isTotalRecordsProvided() {
        return this.nbpPaginationStatus && this.nbpPaginationStatus.totalRecords && this.nbpPaginationStatus.totalRecords !== -1;
    }
    _setShowTooltipCondition(pagesWindowLimits) {
        if (this._isTotalRecordsProvided()) {
            this._showTooltip = (pagesWindowLimits.min >= 999 || pagesWindowLimits.max >= 999) ? true : false;
        }
        else {
            this._showTooltip = this.nbpPaginationStatus.pageNumber >= 999 ? true : false;
        }
    }
    _evaluateTooltipText(pageNumber) {
        return this._showTooltip ? pageNumber : null;
    }
    _generateRange(pageNumber) {
        let min = (Math.floor(pageNumber / this.nbpPageWindowSize) * this.nbpPageWindowSize);
        let max = min + this.nbpPageWindowSize - 1;
        let pagesWindowLimits = { min: min, max: max };
        this._setShowTooltipCondition(pagesWindowLimits);
        return pagesWindowLimits;
    }
    _evaluateWindowPages(pageNumber) {
        this._windowPages = [];
        let range = this._generateRange(pageNumber);
        for (let i = range.min; i <= range.max; i++) {
            if (i > this._lastPageModelNumber) {
                break;
            }
            this._windowPages.push({ model: i, view: i + 1 });
        }
    }
    _isNextPageWindowButtonVisible() {
        let lastPageFromWindow = this._windowPages.filter(page => page.model === this._lastPageModelNumber);
        return !lastPageFromWindow.length;
    }
    _isPrevPageWindowButtonVisible() {
        let firstPageFromWindow = this._windowPages.filter(page => page.model === 0);
        return !firstPageFromWindow.length;
    }
    _getPrevPageNumber() {
        let page;
        if (this.nbpPaginationStatus.pageNumber !== 1 && this.nbpPaginationStatus.pageNumber) {
            page = this.nbpPaginationStatus.pageNumber - 1;
        }
        else {
            page = this.nbpPaginationStatus.pageNumber;
        }
        return page;
    }
    _setPageNumber(windowPage) {
        this._internalPageNumber = windowPage.model;
        this.nbpPaginationStatus.pageNumber = windowPage.view;
    }
    onNext() {
        this.nbpPaginationStatus.pageNumber = this.nbpPaginationStatus.pageNumber + 1;
        this.nbpOnNext.emit(this.nbpPaginationStatus);
        this.nbpOnPageChange.emit();
    }
    onPrev() {
        this.nbpPaginationStatus.pageNumber = this._getPrevPageNumber();
        this.nbpOnPrev.emit(this.nbpPaginationStatus);
        this.nbpOnPageChange.emit();
    }
    onLast() {
        this.nbpOnLast.emit(this.nbpPaginationStatus);
        this.nbpOnPageChange.emit();
    }
    onFirst() {
        this.nbpOnFirst.emit(this.nbpPaginationStatus);
        this.nbpOnPageChange.emit();
    }
    onGoToPage(action, page) {
        let partialPage;
        let currentPageOnWindow;
        switch (action) {
            case this._paginationActions.ON_WINDOW_NEXT_CLICK:
                partialPage = this._internalPageNumber + this.nbpPageWindowSize;
                this._evaluateWindowPages(partialPage);
                currentPageOnWindow = this._windowPages[0];
                break;
            case this._paginationActions.ON_WINDOW_PREV_CLICK:
                partialPage = this._internalPageNumber - this.nbpPageWindowSize;
                if (partialPage >= 0) {
                    this._evaluateWindowPages(partialPage);
                    currentPageOnWindow = this._windowPages[this._windowPages.length - 1];
                }
                else {
                    partialPage = this._internalPageNumber;
                    this._evaluateWindowPages(partialPage);
                    currentPageOnWindow = { model: this._internalPageNumber, view: this.nbpPaginationStatus.pageNumber };
                }
                break;
            case this._paginationActions.ON_PAGE_CLICK:
                currentPageOnWindow = this._windowPages.filter(window => window.model === page)[0];
                partialPage = currentPageOnWindow.model;
                this._evaluateWindowPages(partialPage);
                break;
        }
        this._setPageNumber(currentPageOnWindow);
        this.nbpOnGoToPage.emit(this.nbpPaginationStatus);
        this.nbpOnPageChange.emit();
    }
};
__decorate$78([
    Input(),
    __metadata$61("design:type", Object)
], NbpPaginationComponent.prototype, "nbpPaginationStatus", void 0);
__decorate$78([
    Input(),
    __metadata$61("design:type", Object)
], NbpPaginationComponent.prototype, "nbpShowPaginationStatus", void 0);
__decorate$78([
    Input(),
    __metadata$61("design:type", Object)
], NbpPaginationComponent.prototype, "nbpDisablePaginationStatus", void 0);
__decorate$78([
    Input(),
    __metadata$61("design:type", Number)
], NbpPaginationComponent.prototype, "nbpPageWindowSize", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnPageChange", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnNext", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnGoToPage", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnPrev", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnFirst", void 0);
__decorate$78([
    Output(),
    __metadata$61("design:type", EventEmitter)
], NbpPaginationComponent.prototype, "nbpOnLast", void 0);
NbpPaginationComponent = __decorate$78([
    Component({
        selector: 'nbp-pagination',template: "<div class=\"pagination-container\"><div class=\"row\"><div class=\"col-md-5 col-sm-5 col-xs-5\"><button id=\"firstButton\" class=\"table-page-btn pull-left\" type=\"button\" (click)=\"onFirst()\" *ngIf=\"nbpShowPaginationStatus.first\" [disabled]=\"nbpDisablePaginationStatus.first\"><span class=\"page-btn-arrow icomoon-Simboli_freccia_sinistra\"></span> <span class=\"page-btn-text\">PRIMO</span></button></div><div class=\"col-md-14 col-sm-14 col-xs-14\" style=\"text-align:center\"><button style=\"margin-right: 30px\" id=\"prevButton\" class=\"table-page-btn\" type=\"button\" (click)=\"onPrev()\" *ngIf=\"nbpShowPaginationStatus.prev\" [disabled]=\"nbpDisablePaginationStatus.prev\"><span class=\"page-btn-arrow icomoon-Simboli_Risorsa-12\"></span></button><ng-container *ngIf=\"_isTotalRecordsProvided() && nbpShowPaginationStatus.page\"><button id=\"windowPrevButton\" *ngIf=\"_isPrevPageWindowButtonVisible()\" [disabled]=\"nbpDisablePaginationStatus.page\" class=\"table-page-btn\" type=\"button\" (click)=\"onGoToPage(_paginationActions.ON_WINDOW_PREV_CLICK)\">...</button><ng-container *ngFor=\"let page of _windowPages; let i = index\"><button id=\"windowPageButton\" class=\"table-page-btn\" type=\"button\" [disabled]=\"nbpDisablePaginationStatus.page\" (click)=\"onGoToPage(_paginationActions.ON_PAGE_CLICK, page.model)\"><span class=\"table-page-number\" [ngClass]=\"{'active': nbpPaginationStatus && page.model === _internalPageNumber}\" [attr.tooltip]=\"_evaluateTooltipText(page.view)\">{{page.view}}</span></button></ng-container><button id=\"windowNextButton\" *ngIf=\"_isNextPageWindowButtonVisible()\" [disabled]=\"nbpDisablePaginationStatus.page\" class=\"table-page-btn\" type=\"button\" (click)=\"onGoToPage(_paginationActions.ON_WINDOW_NEXT_CLICK)\">...</button></ng-container><button *ngIf=\"!_isTotalRecordsProvided() && nbpShowPaginationStatus.page\" class=\"table-page-btn\" type=\"button\"><span class=\"table-page-number active\" [attr.tooltip]=\"_evaluateTooltipText(nbpPaginationStatus.pageNumber)\">{{nbpPaginationStatus.pageNumber}}</span></button> <button style=\"margin-left: 30px\" id=\"nextButton\" class=\"table-page-btn\" type=\"button\" (click)=\"onNext()\" *ngIf=\"nbpShowPaginationStatus.next\" [disabled]=\"nbpDisablePaginationStatus.next\"><span class=\"page-btn-arrow icomoon-Simboli_Risorsa-13\"></span></button></div><div class=\"col-md-5 col-sm-5 col-xs-5\"><button id=\"lastButton\" class=\"table-page-btn pull-right\" *ngIf=\"_isTotalRecordsProvided() && nbpShowPaginationStatus.last\" (click)=\"onLast()\" [disabled]=\"nbpDisablePaginationStatus.last\"><span class=\"page-btn-text\">ULTIMO</span> <span class=\"page-btn-arrow icomoon-Simboli_freccia_destra\"></span></button></div></div></div>",
        styles: [".truncate{display:inline-block;width:2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pagination-container{margin-top:.625em}.pagination-container table{width:100%;table-layout:fixed}.pagination-container #windowPageButton{padding-left:0;padding-right:0}.pagination-container .table-page-btn{display:inline-block;color:#258900;cursor:pointer;margin-top:.313em;background-color:transparent;border:none}.pagination-container .table-page-btn.disabled{color:#6f6f6f;cursor:auto}.pagination-container .table-page-btn .page-btn-arrow{font-size:1.25em;vertical-align:middle}.pagination-container .table-page-btn .page-btn-text{padding:0 .625em 0 .625em;font-size:.813em;font-weight:700}.pagination-container .table-page-btn .table-page-number{padding-left:.5em;padding-right:.5em;display:inline-block;border:1px solid #258900;font-weight:700;color:#258900;background:#fff;text-align:center;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:2em;min-width:2em;height:2em;font-size:.938em;line-height:2em;margin:0 .125em 0 .125em}.pagination-container .table-page-btn .table-page-number.backward{margin-right:-.125em}.pagination-container .table-page-btn .table-page-number.forward{margin-left:-.125em}.pagination-container .table-page-btn .table-page-number.active{color:#fff;background:#258900;cursor:default}.pagination-container .pagination-container-center{text-align:center}.pagination-container .pagination-container-center .table-page-btn{margin-top:0}span.table-page-number[tooltip]:hover{position:relative}span.table-page-number[tooltip]:hover:after{content:attr(tooltip);padding:4px 8px;color:#258900;position:absolute;left:0;top:100%;white-space:nowrap;z-index:1000;border-radius:5px;background-image:transparent}:host-context(.contrasto-on) .pagination-container .table-page-btn{color:#000}:host-context(.contrasto-on) .pagination-container .table-page-btn.disabled{color:#6f6f6f}:host-context(.contrasto-on) .pagination-container .table-page-btn .table-page-number{border:1px solid #000;color:#000;background:#fff}:host-context(.contrasto-on) .pagination-container .table-page-btn .table-page-number.active{color:#fff;background:#000} /*# sourceMappingURL=nbp-pagination.component.css.map */ "]
    }),
    __metadata$61("design:paramtypes", [])
], NbpPaginationComponent);

var __decorate$80 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$63 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const defaultId = 'nbp-loading-1';
let NbpLoadingService = class NbpLoadingService {
    /**
     * ReplaySubject -> manda a ogni subscriber anche se si registra dopo tutta la storia dello stream dall'inizio
     *
     * BehaviorSubject -> manda a ogni subscriver solo l'item più recente presente nello stream
     */
    constructor() {
        this._loadingSpinnerRequestStream = new BehaviorSubject({ id: null, status: NbpLoadingStatus.STOP });
        this.statusArray = new Array();
    }
    handleMultipleActivationStatus(key) {
        return (value) => {
            // console.log(key);
            if (value.id === key) {
                if (value.status === NbpLoadingStatus.START) {
                    this.statusArray.push(value.id);
                    let statusForId = this.statusArray.filter((elem) => elem === value.id);
                    if (statusForId.length === 1) {
                        return true;
                    }
                }
                else {
                    let statusIndex = this.statusArray.indexOf(value.id);
                    if (statusIndex !== -1) {
                        this.statusArray.splice(statusIndex, 1);
                    }
                    statusIndex = this.statusArray.indexOf(value.id);
                    if (statusIndex === -1) {
                        return true;
                    }
                }
            }
            return false;
        };
    }
    /**
     * Permette di inviare le richieste di attivazione spegnimento del componente loadingSpinner
     */
    notifyLoadingSpinnerRequest(showLoadingSpinner, id) {
        let key = defaultId;
        if (id) {
            key = id;
        }
        let loadingStatus = {
            id: key,
            status: showLoadingSpinner ? NbpLoadingStatus.START : NbpLoadingStatus.STOP
        };
        this._loadingSpinnerRequestStream.next(loadingStatus);
    }
    /**
     * Recupera lo stato aggregato (per id e multiple nexted activation) della visibilità del componente loadingSpinner
     */
    getLoadingSpinnerStatusStream(id) {
        let key = defaultId;
        if (id) {
            key = id;
        }
        this._loadingSpinnerAggregatedRequestStream = this._loadingSpinnerRequestStream.asObservable().filter(this.handleMultipleActivationStatus(key));
        return this._loadingSpinnerAggregatedRequestStream;
        // requestToHandle.subscribe((request: INbpLoadingStatus) => {
        //   if (request.status) {
        //     this.pendingTaskService.startTask();
        //   } else {
        //     this.pendingTaskService.endTask();
        //   }
        // })
        // return this.pendingTaskService.getPendingStatusStream();
    }
};
NbpLoadingService = __decorate$80([
    Injectable(),
    __metadata$63("design:paramtypes", [])
], NbpLoadingService);

var __decorate$81 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NbpPendingLoadingStatusService = class NbpPendingLoadingStatusService {
    constructor() {
        this.loadingStatusStartStream = new Subject();
        this.loadingStatusEndStream = new Subject();
    }
    startLoading() {
        this.loadingStatusStartStream.next(NbpLoadingStatus.START);
    }
    stopLoading() {
        this.loadingStatusEndStream.next(NbpLoadingStatus.STOP); // TaskEvents.END
    }
    getPendingStatusStream() {
        return this.pendingStatusStream;
    }
    initStreams(threshold) {
        let statusStartIfNotEndWithinThresholdStream = this.loadingStatusEndStream.bufferToggle(this.loadingStatusStartStream, (value) => Observable.interval(threshold)) //raccogli in un buffer array gli eventi di end tra un evento di start e threshold ms dopo
            .filter((startEvents) => startEvents.length == 0) //fai passare solo i buffer vuoti (ovvero quelli in cui non ci sono stati end nel periodo)
            .map((k) => true); //genera l'evento di start ritardato dall' array vuoto
        // eventualmente puoi aggiungere dei logging con  .do (events => console.log(events)) intermedi per capire come funziona
        let statusEndIfNotNewStartWithinThresholdFromPreviousEndStream = this.loadingStatusStartStream.bufferToggle(this.loadingStatusEndStream, //raccogli in un buffer array gli eventi di start tra un evento di end e threshold ms dopo
        (value) => Observable.interval(threshold))
            .filter((startEvents) => startEvents.length == 0) //fai passare solo i buffer vuoti (ovvero quelli in cui non ci sono stati start nel periodo di threshold subito dopo l'end vero)
            .map((k) => false); //genera l'evento di end ritardato solo se l'array delle start immediatamente successive all' end è vuoto 
        this.pendingStatusStream = statusStartIfNotEndWithinThresholdStream
            .merge(statusEndIfNotNewStartWithinThresholdFromPreviousEndStream);
    }
};
NbpPendingLoadingStatusService = __decorate$81([
    Injectable()
], NbpPendingLoadingStatusService);

// @Injectable()
// export class NbpPendingLoadingStatusServiceOld {
//   startIfEndNotReachedWithinThresholdEventStream: Observable<NbpLoadingStatus>;
//   withinThresholdBufferStream: Observable<NbpLoadingStatus[]>;
//   thresholdExpiredEventStream: Observable<NbpLoadingStatus>;
//   threshold = 100;
//   private loadingStatusStartStream: Subject<NbpLoadingStatus> =   new Subject<NbpLoadingStatus>();
//   private loadingStatusEndStream: Subject<NbpLoadingStatus> =   new Subject<NbpLoadingStatus>();
//   private pendingStatusStream: Observable<boolean>;
//   private scheduler: Scheduler; 
//   constructor( ) {
//     // this.initStreams(configuration); 
//     // this.initStreams(null);
//   }
//   initStreams(threshold: number): any {
//     // this.taskEventStream = this.loadingStatusEndStream.merge(this.loadingStatusStartStream);
//     this.threshold = threshold;  
//     console.log(`threshold ${this.threshold}`);
//     this.thresholdExpiredEventStream = this.loadingStatusStartStream.delay(this.threshold);
//     // { provide: SEARCH_SCHEDULER, useFactory: getTestScheduler },
//     let thresholdExpiredOrTaskEndReachedEventStream = this.thresholdExpiredEventStream.merge(this.loadingStatusEndStream);
//     this.withinThresholdBufferStream = this.loadingStatusEndStream.bufferWhen(
//                                           () => thresholdExpiredOrTaskEndReachedEventStream);
//     this.startIfEndNotReachedWithinThresholdEventStream = this.withinThresholdBufferStream
//         .filter(
//           events => events.length == 0
//         ).map( event => NbpLoadingStatus.START);
//     let notFlashingTaskEventStream = this.startIfEndNotReachedWithinThresholdEventStream
//         .merge(this.loadingStatusEndStream);
//     this.pendingStatusStream = notFlashingTaskEventStream.map( (event: NbpLoadingStatus ) => {
//       let status = event == NbpLoadingStatus.START ? true : false; 
//       return status; 
//     });
//   }
//   startLoading() {
//     this.loadingStatusStartStream.next(NbpLoadingStatus.START);
//   }
//   endCounter = 1; 
//   stopLoading() {
//     this.loadingStatusEndStream.next(this.endCounter++); // TaskEvents.END
//   }
//   getPendingStatusStream() {
//     return this.pendingStatusStream;
//   }
// }

var __decorate$79 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$62 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici per nbpInput component */
let nextId$16 = 0;
let NbpLoadingComponent = class NbpLoadingComponent {
    constructor(loadingService, pendingTaskService) {
        this.loadingService = loadingService;
        this.pendingTaskService = pendingTaskService;
        this._animationModeAuto = false;
        /**
         * Evento lanciato allo stop del loading.
         */
        this.nbpOnStopAnimation = new EventEmitter();
        /**
         * Evento lanciato allo start del laoding.
         */
        this.nbpOnStartAnimation = new EventEmitter();
    }
    /**
     * Flag che definisce la visibilità dell’animazione di caricamento
     */
    get nbpShowAnimation() { return this._showAnimation; }
    set nbpShowAnimation(value) { this._showAnimation = coerceBooleanProperty(value); }
    /**
     * Flag che definisce la modalità automatica di visualizzazione dell'animazione
     * quando presente il componente ignora il parametro nbpShowAnimation e l'invocazione
     * dei metodi pubblici, ma si restistra al servizio NbpLoadingService
     */
    get nbpAnimationModeAuto() { return this._animationModeAuto; }
    set nbpAnimationModeAuto(value) {
        this._animationModeAuto = coerceBooleanProperty(value);
        if (this._showAnimation) {
            console.log('NbpLoadingComponent - Emitting event: nbpOnStartAnimation');
            this.nbpOnStartAnimation.emit();
        }
        else {
            console.log('NbpLoadingComponent - Emitting event: nbpOnStopAnimation');
            this.nbpOnStopAnimation.emit();
        }
    }
    /**
     * (Opzionale) Messaggio da visulizzare assieme all'immagine
     *
     */
    get nbpMessage() { return this._nbpMessage; }
    set nbpMessage(value) { if (value) {
        this._nbpMessage = value;
    } }
    ;
    /**
     * 	metodo per far visualizzare il loading
     */
    startAnimation() {
        this.nbpShowAnimation = true;
        this.nbpOnStartAnimation.emit();
    }
    /**
     * metodo per spegnere il loading
     */
    stopAnimation() {
        this.nbpShowAnimation = false;
        this.nbpOnStopAnimation.emit();
    }
    ngOnInit() {
        if (!this.id) {
            this.id = `nbp-loading-${++nextId$16}`;
        }
        if (!this.nbpDelayTime) {
            this.nbpDelayTime = 300;
        }
        this.pendingTaskService.initStreams(this.nbpDelayTime);
        if (this._animationModeAuto) {
            // registra al servizio
            this._loadingStatusStream = this.loadingService.getLoadingSpinnerStatusStream(this.id);
            this._loadingStatusStream.subscribe((request) => {
                if (request.status === NbpLoadingStatus.START) {
                    this.pendingTaskService.startLoading();
                }
                else {
                    this.pendingTaskService.stopLoading();
                }
            });
            this._loadingVisibleStream = this.pendingTaskService.getPendingStatusStream();
        }
    }
    ngOnChanges(changes) {
        if (!this._animationModeAuto) {
            if (changes.nbpShowAnimation) {
                if (changes.nbpShowAnimation.currentValue) {
                    this.nbpOnStartAnimation.emit();
                }
                else {
                    this.nbpOnStopAnimation.emit();
                }
            }
        }
    }
};
__decorate$79([
    Input(),
    __metadata$62("design:type", String)
], NbpLoadingComponent.prototype, "name", void 0);
__decorate$79([
    Input(),
    __metadata$62("design:type", String)
], NbpLoadingComponent.prototype, "id", void 0);
__decorate$79([
    Input(),
    __metadata$62("design:type", Boolean),
    __metadata$62("design:paramtypes", [Object])
], NbpLoadingComponent.prototype, "nbpShowAnimation", null);
__decorate$79([
    Input(),
    __metadata$62("design:type", Boolean),
    __metadata$62("design:paramtypes", [Object])
], NbpLoadingComponent.prototype, "nbpAnimationModeAuto", null);
__decorate$79([
    Input(),
    __metadata$62("design:type", String),
    __metadata$62("design:paramtypes", [Object])
], NbpLoadingComponent.prototype, "nbpMessage", null);
__decorate$79([
    Input(),
    __metadata$62("design:type", Number)
], NbpLoadingComponent.prototype, "nbpDelayTime", void 0);
__decorate$79([
    Output(),
    __metadata$62("design:type", EventEmitter)
], NbpLoadingComponent.prototype, "nbpOnStopAnimation", void 0);
__decorate$79([
    Output(),
    __metadata$62("design:type", EventEmitter)
], NbpLoadingComponent.prototype, "nbpOnStartAnimation", void 0);
NbpLoadingComponent = __decorate$79([
    Component({
        selector: 'nbp-loading',template: "<div *ngIf=\"(!nbpAnimationModeAuto && nbpShowAnimation) || (nbpAnimationModeAuto &&  (_loadingVisibleStream | async))\" id=\"id\"><div class=\"nbp-spinner-overlay\"></div><div class=\"nbp-spinner-wrapper\"><div class=\"nbp-message\" *ngIf=\"nbpMessage\" [innerHTML]=\"nbpMessage\"></div><div class=\"nbp-spinner\"></div></div></div>",
        styles: [".nbp-spinner-wrapper{position:fixed;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:transparent;top:0;left:0;z-index:99999}.nbp-spinner-overlay{position:fixed;width:100%;height:100%;display:flex;align-items:center;top:0;left:0;background-color:rgba(255,255,255,.8);z-index:99998}.nbp-spinner{display:flex;width:90px;height:90px;background-image:url(/cjlib/assets/images/spinner.svg);margin:0 auto}.nbp-message{display:flex;margin:0 auto;font-size:1.5em;font-weight:500;white-space:pre-line;text-align:center;margin-bottom:40px}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.nbp-spinner{background-image:url(/cjlib/assets/images/ISP-loading-spinner.gif)!important}} /*# sourceMappingURL=nbp-loading.component.css.map */ "]
    }),
    __metadata$62("design:paramtypes", [NbpLoadingService, NbpPendingLoadingStatusService])
], NbpLoadingComponent);

var __decorate$82 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$64 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpBreadcrumbComponent = class NbpBreadcrumbComponent {
    constructor() { }
    ngOnInit() {
    }
};
__decorate$82([
    Input(),
    __metadata$64("design:type", Array)
], NbpBreadcrumbComponent.prototype, "nbpBreadcrumbStructure", void 0);
__decorate$82([
    Input(),
    __metadata$64("design:type", Object)
], NbpBreadcrumbComponent.prototype, "nbpCurrentPosition", void 0);
NbpBreadcrumbComponent = __decorate$82([
    Component({
        selector: 'nbp-breadcrumb',template: "<div class=\"breadcrumb-container\"><ul class=\"nbp-breadcrumb container\"><li *ngFor=\"let route of nbpBreadcrumbStructure; let last = last\"><a><span [ngClass]=\"{'nbp-breadcrumb-current': route === nbpCurrentPosition}\">{{route.name}} <span *ngIf=\"!last\" class=\"icon ico-comuni-freccia-dx\" [style.verticalAlign]=\"'middle'\"></span></span></a></li></ul></div>",
        styles: [".breadcrumb-container{background-color:#f2f2f2;border-bottom:1px solid #ccc}.breadcrumb-container .nbp-breadcrumb{padding:10px 16px;list-style:none;background-color:#f2f2f2;font-size:17px;margin-bottom:0!important}.breadcrumb-container .nbp-breadcrumb li{display:inline-block}.breadcrumb-container .nbp-breadcrumb li a{color:#5ca740;text-decoration:none}.breadcrumb-container .nbp-breadcrumb li a:hover{color:#258900;text-decoration:underline}.nbp-breadcrumb-current{font-weight:700} /*# sourceMappingURL=nbp-breadcrumb.component.css.map */ "]
    }),
    __metadata$64("design:paramtypes", [])
], NbpBreadcrumbComponent);

var __decorate$83 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$65 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpTooltipComponent = class NbpTooltipComponent {
    constructor(element) {
        this.element = element;
        this._tooltipSize = NbpSize;
        this._isVisible = false;
        /**
          * Strategia di apertura tooltip, 'click' o 'hover':
          * click -> comportamento popover con apertura e chiusura su click (più pulsante x all'interno del tooltip)
          * hover -> comportamento tooltip classico apertura su hover , chiusura sulla perdita dell'hover
          * Valore di default: hover
         */
        this.nbpVisibilityStrategy = 'hover';
        /**
         * (Opzionale) Enum che definisce il la posizione del tooltip rispetto all’oggetto al quale è ancorato:
         * “Top” | “Right” | “Bottom” | “Left” | “Top-Left” | “Top-Right” | “Bottom-Left” | “Bottom-Right”
         * Default: “Top”
         */
        this.nbpPosition = 'Top'; // enum;
        /**
         * (Opzionale) Enum che definisce il tipo di icona da visualizzare nel tooltip:
         * “Warning” | “Help” | ”Info”
         * Default: nessuna icona
         * Funzionante solo se non presente nbpTemplate
         */
        // TODO NON VIENE MAI USATA QUESTA PROPERTY -- COMMENTATA PER EVITARE REFUSI
        /*@Input() nbpType: object; // enum; Non presente nelle nuove StyleGuide: nuovo componente icona (?)/(!)/(i) -> tooltip?*/
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.nbpSize = NbpSize.SM;
        this._nbpHidden = false;
    }
    /**
     * Booleano che abilita/disabilita la visualizzazione del tooltip.
    * Attributo "hidden" standard di HTML5 element
     */
    get hidden() { return this._nbpHidden; }
    ;
    set hidden(value) { this._nbpHidden = coerceBooleanProperty(value); }
    ;
    //---modificaReply
    onClick(target) {
        event.stopPropagation();
        if (!this.element.nativeElement.contains(target)) {
            this._closePopover(target);
        }
        if (!this._isVisibilityStrategyHover()) {
            this._closePopover(target);
        }
    }
    //---------------------
    _open() {
        setTimeout(() => {
            this._isVisible = true;
        }, 0);
    }
    _close() {
        this._isVisible = false;
    }
    _closePopover(target) {
        let parentFound = false;
        while (target != null && !parentFound) {
            if (target === this.element.nativeElement) {
                parentFound = true;
            }
            target = target.parentElement;
        }
        if (!parentFound) {
            this._isVisible = false;
        }
    }
    _toggleVisibility() {
        if (this.nbpVisibilityStrategy === 'hover') {
            return;
        }
        if (this._isVisible) {
            this._close();
        }
        else {
            this._open();
        }
    }
    _isVisibilityStrategyHover() {
        return this.nbpVisibilityStrategy === 'hover';
    }
};
__decorate$83([
    Input(),
    __metadata$65("design:type", String)
], NbpTooltipComponent.prototype, "name", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", String)
], NbpTooltipComponent.prototype, "nbpVisibilityStrategy", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", String)
], NbpTooltipComponent.prototype, "nbpPosition", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", Number)
], NbpTooltipComponent.prototype, "nbpSize", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", String)
], NbpTooltipComponent.prototype, "nbpText", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", TemplateRef)
], NbpTooltipComponent.prototype, "nbpTemplate", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", Object)
], NbpTooltipComponent.prototype, "nbpTemplateData", void 0);
__decorate$83([
    Input(),
    __metadata$65("design:type", Boolean),
    __metadata$65("design:paramtypes", [Object])
], NbpTooltipComponent.prototype, "hidden", null);
__decorate$83([
    HostListener('document: click', ['$event.target']),
    __metadata$65("design:type", Function),
    __metadata$65("design:paramtypes", [HTMLElement]),
    __metadata$65("design:returntype", void 0)
], NbpTooltipComponent.prototype, "onClick", null);
NbpTooltipComponent = __decorate$83([
    Component({
        selector: 'nbp-tooltip',template: "<span #div [ngClass]=\"{ 'nbp-tooltip': _isVisibilityStrategyHover(), 'nbp-popover': !_isVisibilityStrategyHover() }\"><span (click)=\"_toggleVisibility();\" [class.clickable]=\"!_isVisibilityStrategyHover()\"><ng-content></ng-content></span><span [hidden]=\"hidden\" [ngClass]=\"{ 'tooltip-content': _isVisibilityStrategyHover(), 'popover-content': !_isVisibilityStrategyHover(), 'top':nbpPosition=='Top', 'bottom':nbpPosition=='Bottom', 'right':nbpPosition=='Right', 'left':nbpPosition=='Left', 'top-left':nbpPosition=='Top-Left', 'top-right':nbpPosition=='Top-Right', 'bottom-left':nbpPosition=='Bottom-Left', 'bottom-right':nbpPosition=='Bottom-Right',  'sm':nbpSize === _tooltipSize.SM,  'md':nbpSize === _tooltipSize.MD,  'lg':nbpSize === _tooltipSize.LG,  'opened': !_isVisibilityStrategyHover() && _isVisible }\"><span *ngIf=\"!nbpTemplate; else nbpTemplateContainer\" [ngClass]=\"{ 'tooltip-text': _isVisibilityStrategyHover() ,  'popover-text': !_isVisibilityStrategyHover() }\"><div class=\"row\"><div class=\"col-md-24\" [ngClass]=\"{ 'text-padding-hover': _isVisibilityStrategyHover(), 'text-padding-click': !_isVisibilityStrategyHover() }\">{{nbpText}}</div></div></span><ng-template #nbpTemplateContainer [ngTemplateOutlet]=\"nbpTemplate\" [ngTemplateOutletContext]=\"nbpTemplateData\"></ng-template><div class=\"icon-position clickable\" *ngIf=\"!_isVisibilityStrategyHover()\"><span class=\"ico-azioni-elimina\" style=\"font-size: 19px\" (click)=\"_close(); $event.stopPropagation()\"></span></div></span></span>",
        styles: [".bottom .icon-position,.bottom-left .icon-position,.bottom-right .icon-position,.right .icon-position,.top .icon-position,.top-left .icon-position,.top-right .icon-position{position:absolute;top:1.3125em;right:1.3125em;color:#fa9600;font-weight:700}.text-padding-click{padding:20px 80px 20px 20px;text-align:left;font-size:14px;font-family:Arial}.text-padding-hover{padding:.5em 1em .5em 1em}.left .icon-position{position:absolute;top:.3125em;left:.3125em;color:#fa9600;font-weight:700}.nbp-popover,.nbp-tooltip{position:relative;display:inline-block;opacity:.9;z-index:1000}.clickable{cursor:pointer}.nbp-popover .popover-content,.nbp-tooltip .tooltip-content{visibility:hidden;background-color:#323232;color:#fff;padding:.3125em 0;position:absolute;z-index:1;display:inline-block!important}.nbp-popover .popover-content .tooltip-text,.nbp-tooltip .tooltip-content .tooltip-text{text-align:center;font-weight:400}.nbp-popover .popover-content .popover-text,.nbp-tooltip .tooltip-content .popover-text{text-align:center;font-weight:400}.nbp-popover .popover-content.md,.nbp-tooltip .tooltip-content.md{width:21.875em}.nbp-popover .popover-content.sm,.nbp-tooltip .tooltip-content.sm{width:14.5em}.nbp-popover .popover-content.lg,.nbp-tooltip .tooltip-content.lg{width:31.25em}.nbp-popover .popover-content.right,.nbp-tooltip .tooltip-content.right{top:50%!important;left:100%!important;margin-left:.625em;transform:translateY(-50%)}.nbp-popover .popover-content.right::after,.nbp-tooltip .tooltip-content.right::after{content:\"\";position:absolute;top:50%;right:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent #323232 transparent transparent}.nbp-popover .popover-content.left,.nbp-tooltip .tooltip-content.left{top:50%;right:100%;margin-right:.625em;transform:translateY(-50%)}.nbp-popover .popover-content.left::after,.nbp-tooltip .tooltip-content.left::after{content:\"\";position:absolute;top:50%;left:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent transparent transparent #323232}.nbp-popover .popover-content.top,.nbp-tooltip .tooltip-content.top{bottom:100%;left:62%;margin-bottom:.8125em;transform:translateX(-50%)}.nbp-popover .popover-content.top::after,.nbp-tooltip .tooltip-content.top::after{content:\"\";position:absolute;top:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-popover .popover-content.bottom,.nbp-tooltip .tooltip-content.bottom{top:100%;left:50%;margin-top:.9375em;transform:translateX(-50%)}.nbp-popover .popover-content.bottom::after,.nbp-tooltip .tooltip-content.bottom::after{content:\"\";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-popover .popover-content.top-left,.nbp-tooltip .tooltip-content.top-left{bottom:100%;left:-4px;margin-bottom:.9375em}.nbp-popover .popover-content.top-left::after,.nbp-tooltip .tooltip-content.top-left::after{content:\"\";position:absolute;top:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-popover .popover-content.top-right,.nbp-tooltip .tooltip-content.top-right{bottom:100%;right:-14px;margin-bottom:.9375em}.nbp-popover .popover-content.top-right::after,.nbp-tooltip .tooltip-content.top-right::after{content:\"\";position:absolute;top:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-popover .popover-content.bottom-left,.nbp-tooltip .tooltip-content.bottom-left{top:100%;left:-4px;margin-top:.9375em}.nbp-popover .popover-content.bottom-left::after,.nbp-tooltip .tooltip-content.bottom-left::after{content:\"\";position:absolute;bottom:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-popover .popover-content.bottom-right,.nbp-tooltip .tooltip-content.bottom-right{top:100%;right:-14px;margin-top:.9375em}.nbp-popover .popover-content.bottom-right::after,.nbp-tooltip .tooltip-content.bottom-right::after{content:\"\";position:absolute;bottom:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-popover .popover-content.opened,.nbp-tooltip:hover .tooltip-content{visibility:visible}:host-context(.contrasto-on) .bottom .icon-position,:host-context(.contrasto-on) .bottom-left .icon-position,:host-context(.contrasto-on) .bottom-right .icon-position,:host-context(.contrasto-on) .right .icon-position,:host-context(.contrasto-on) .top .icon-position,:host-context(.contrasto-on) .top-left .icon-position,:host-context(.contrasto-on) .top-right .icon-position{color:#fff}:host-context(.contrasto-on) .left .icon-position{color:#fff}:host-context(.contrasto-on) .nbp-popover .popover-content,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content{background-color:#000}:host-context(.contrasto-on) .nbp-popover .popover-content.right::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.right::after{border-color:transparent #000 transparent transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.left::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.left::after{border-color:transparent transparent transparent #000}:host-context(.contrasto-on) .nbp-popover .popover-content.top::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.top::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.bottom::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.bottom::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.top-left::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.top-left::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.top-right::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.top-right::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-left::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.bottom-left::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-right::after,:host-context(.contrasto-on) .nbp-tooltip .tooltip-content.bottom-right::after{border-color:transparent transparent #000 transparent} /*# sourceMappingURL=nbp-tooltip.component.css.map */ "]
    }),
    __metadata$65("design:paramtypes", [ElementRef])
], NbpTooltipComponent);

var __decorate$84 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$66 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpIconComponent = class NbpIconComponent {
    constructor() { }
    get buttonIcon() { return this._buttonIcon; }
    set buttonIcon(value) { this._buttonIcon = value != null && `${value}` !== 'false'; }
    ngOnInit() { }
};
__decorate$84([
    Input(),
    __metadata$66("design:type", String)
], NbpIconComponent.prototype, "nbpName", void 0);
__decorate$84([
    Input(),
    __metadata$66("design:type", Boolean),
    __metadata$66("design:paramtypes", [Object])
], NbpIconComponent.prototype, "buttonIcon", null);
NbpIconComponent = __decorate$84([
    Component({
        selector: 'nbp-icon',template: "<span class=\"icon\" [ngClass]=\"nbpName\" [class.button-icon]=\"buttonIcon\"></span>",
        styles: [" /*# sourceMappingURL=nbp-icon.component.css.map */ "]
    }),
    __metadata$66("design:paramtypes", [])
], NbpIconComponent);

var __decorate$85 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$67 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpLoggedUserComponent = class NbpLoggedUserComponent {
    constructor() {
        /**
         * Evento emesso alla pressione del pulsante, se
         * nbpDisableLogout non è true
         */
        this.nbpLogout = new EventEmitter();
        this.imageLoaded = false;
        this.imageError = false;
        this.largeUserImage = false;
    }
    /**
     * Flag che abilita/disabilita la possibilità di eseguire il logout
     */
    get nbpDisableLogout() { return this._nbpDisableLogout; }
    set nbpDisableLogout(value) { this._nbpDisableLogout = coerceBooleanProperty(value); }
    ngOnInit() {
        // TODO: caricamento immagine
    }
    _onLogoutClick() {
        if (!this._nbpDisableLogout) {
            this.nbpLogout.emit();
        }
    }
};
__decorate$85([
    Input(),
    __metadata$67("design:type", Object)
], NbpLoggedUserComponent.prototype, "nbpUser", void 0);
__decorate$85([
    Input(),
    __metadata$67("design:type", Boolean),
    __metadata$67("design:paramtypes", [Object])
], NbpLoggedUserComponent.prototype, "nbpDisableLogout", null);
__decorate$85([
    Input(),
    __metadata$67("design:type", String)
], NbpLoggedUserComponent.prototype, "nbpSubtitleText", void 0);
__decorate$85([
    Output(),
    __metadata$67("design:type", EventEmitter)
], NbpLoggedUserComponent.prototype, "nbpLogout", void 0);
NbpLoggedUserComponent = __decorate$85([
    Component({
        selector: 'nbp-logged-user',template: "<div class=\"user-button-container\"><span class=\"user-button\"><a (click)=\"_onLogoutClick()\"><table *ngIf=\"!largeUserImage\"><tr><th class=\"user-image-container\"><div class=\"icon ico-navbar-gestore-01\" *ngIf=\"!imageLoaded\"></div></th><th class=\"user-info\"><span [innerText]=\"nbpUser.name + ' ' + nbpUser.surname\"></span><br><span class=\"user-info-subtitle\">{{nbpSubtitleText}}</span></th></tr></table></a></span></div>",
        styles: [".user-button-container{padding:0}[class*=\" ico-\"]:before{vertical-align:middle}.user-button{margin:0}.user-button a{color:#fa9600;display:table;padding:0 1.25em 0 1.25em;margin:1.25em 0 1.25em 0;text-decoration:none;cursor:pointer;width:19.375em;height:2.813em}.user-button a:active,.user-button a:focus,.user-button a:hover{background-color:#fa9600;color:#323232}.user-button a table{width:100%;display:table-cell;vertical-align:middle}.user-image-container div{vertical-align:middle;font-size:1.75em!important;margin:0!important}.user-image-container img{position:relative;border-radius:50%;width:100%}.user-info{padding-left:.625em;vertical-align:middle;line-height:1;font-weight:400}.user-info-subtitle{display:inline-block;font-size:.875em;font-weight:400}:host-context(.contrasto-on) .user-button a{color:#fff}:host-context(.contrasto-on) .user-button a:active,:host-context(.contrasto-on) .user-button a:focus,:host-context(.contrasto-on) .user-button a:hover{background-color:#fff;color:#000} /*# sourceMappingURL=nbp-logged-user.component.css.map */ "]
    }),
    __metadata$67("design:paramtypes", [])
], NbpLoggedUserComponent);

var __decorate$86 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$68 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPanelComponent = class NbpPanelComponent {
    constructor() {
        /**
        * Label visualizzata come titolo del panel. Se non è presente
        * non viene visualizzato l'header del panel.
        */
        this.nbpTitle = '';
    }
    ngOnInit() { }
};
__decorate$86([
    Input(),
    __metadata$68("design:type", String)
], NbpPanelComponent.prototype, "nbpTitle", void 0);
NbpPanelComponent = __decorate$86([
    Component({selector: 'nbp-panel',
        template: "<div class=\"panel panel-default\"><div class=\"panel-heading\" *ngIf=\"nbpTitle\">{{nbpTitle}}</div><div [ngClass]=\"{'panel-body-border': nbpTitle, 'panel-body': !nbpTitle}\"><ng-content></ng-content></div></div>",
        styles: [".panel-default{border:none!important}.panel-default>.panel-heading{color:#5ca740;text-decoration:none;background-color:transparent;border:none!important}.panel-default>.panel-body-border{padding:15px;border-top:2px solid #ccc;background-color:#f2f2f2}.panel-default>.panel-body{padding:15px;background-color:#f2f2f2} /*# sourceMappingURL=nbp-panel.component.css.map */ "]
    }),
    __metadata$68("design:paramtypes", [])
], NbpPanelComponent);

var __decorate$87 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$69 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpCustomerNameComponent = class NbpCustomerNameComponent {
    constructor() { }
};
__decorate$87([
    Input(),
    __metadata$69("design:type", String)
], NbpCustomerNameComponent.prototype, "nbpCustomer", void 0);
NbpCustomerNameComponent = __decorate$87([
    Component({
        selector: 'nbp-customer-name',template: "<div class=\"info-client-container\" *ngIf=\"nbpCustomer\"><div class=\"icon-client-container\"><span class=\"icon-client ico-navbar-gestore-01\"></span></div><div class=\"data-client-container\"><span class=\"nome-cliente\">{{nbpCustomer}}</span></div></div>",
        styles: [".info-client-container{display:table-row;height:50px;color:#fff}.data-client-container,.icon-client-container{display:table-cell;vertical-align:middle;padding-left:5px;padding-right:5px}.icon-client{display:inline-block;width:32px;height:32px;font-size:32px} /*# sourceMappingURL=nbp-customer-name.component.css.map */ "]
    }),
    __metadata$69("design:paramtypes", [])
], NbpCustomerNameComponent);

var NbpFeedbackType;
(function (NbpFeedbackType) {
    NbpFeedbackType[NbpFeedbackType["SUCCESS"] = 0] = "SUCCESS";
    NbpFeedbackType[NbpFeedbackType["ERROR"] = 1] = "ERROR";
    NbpFeedbackType[NbpFeedbackType["WARNING"] = 2] = "WARNING";
})(NbpFeedbackType || (NbpFeedbackType = {}));

var __decorate$88 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$70 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpFeedbackComponent = class NbpFeedbackComponent {
    constructor() {
        this.nbpOnButtonClick = new EventEmitter();
    }
    get nbpShowDebugInfo() {
        return this._nbpShowDebugInfo;
    }
    set nbpShowDebugInfo(value) {
        this._nbpShowDebugInfo = coerceBooleanProperty(value);
    }
    ngOnInit() {
        if (this.nbpButtons && this.nbpButtons.length) {
            this._evaluateShadowedButtons();
            this._populateButtonStyles();
        }
    }
    _evaluateShadowedButtons() {
        this._shadowButtons = this.nbpButtons.length > 3 ? this.nbpButtons.slice(0, 3) : this.nbpButtons.slice();
    }
    _populateButtonStyles() {
        switch (this._shadowButtons.length) {
            case 1:
                this._shadowButtons.map((button) => {
                    button.layout = 'col-md-24';
                });
                break;
            case 2:
                this._shadowButtons.map((button, index) => {
                    button.layout = 'col-md-12';
                });
                break;
            case 3:
                this._shadowButtons.map((button, index) => {
                    button.layout = 'col-md-8';
                });
                break;
        }
    }
    _isSuccess() {
        return this.nbpFeedbackType === NbpFeedbackType.SUCCESS;
    }
    _isWarning() {
        return this.nbpFeedbackType === NbpFeedbackType.WARNING;
    }
    _isError() {
        return this.nbpFeedbackType === NbpFeedbackType.ERROR;
    }
    _onFeedbackButtonClick(button) {
        this.nbpOnButtonClick.emit(button);
    }
};
__decorate$88([
    Input(),
    __metadata$70("design:type", String)
], NbpFeedbackComponent.prototype, "nbpTitle", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", String)
], NbpFeedbackComponent.prototype, "nbpErrorCode", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", String)
], NbpFeedbackComponent.prototype, "nbpMainMessage", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", String)
], NbpFeedbackComponent.prototype, "nbpBoxMessage", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", Array)
], NbpFeedbackComponent.prototype, "nbpButtons", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", Number)
], NbpFeedbackComponent.prototype, "nbpFeedbackType", void 0);
__decorate$88([
    Input(),
    __metadata$70("design:type", Object),
    __metadata$70("design:paramtypes", [Boolean])
], NbpFeedbackComponent.prototype, "nbpShowDebugInfo", null);
__decorate$88([
    Output(),
    __metadata$70("design:type", EventEmitter)
], NbpFeedbackComponent.prototype, "nbpOnButtonClick", void 0);
NbpFeedbackComponent = __decorate$88([
    Component({
        selector: 'nbp-feedback',template: "<div class=\"row col-md-24 padding-bottom\"><div class=\"text-center row col-md-offset-6 col-md-12\"><span id=\"icon\" class=\"icon-size\" [ngClass]=\"{ 'ico-comuni-esito-face-ok success' : _isSuccess() , 'ico-comuni-esito-face-ko error' : _isError() , 'ico-pfm-isp-font-cross-006-faceneutral warning' : _isWarning()  }\"></span></div><div class=\"row col-md-offset-6 col-md-12 padding-bottom\"><div id=\"title\" class=\"title\">{{nbpTitle}}</div></div><div *ngIf=\"nbpErrorCode && (_isWarning() || _isError())\" class=\"row col-md-offset-6 col-md-12 padding-bottom\"><div id=\"error-code\" class=\"code-warning\">Codice Errore: {{nbpErrorCode}}</div></div><div class=\"row col-md-offset-6 col-md-12 padding-bottom\" *ngIf=\"nbpMainMessage != null\"><div id=\"main-message\" class=\"message\">{{nbpMainMessage}}</div></div><div *ngIf=\"_nbpShowDebugInfo\" class=\"row col-md-24 padding-bottom\"><ng-content select=\"nbp-debug-info\"></ng-content></div><div *ngIf=\"_shadowButtons && _shadowButtons.length > 0\" class=\"col-md-24 box padding-bottom\"><div class=\"row col-md-offset-2 col-md-20 text-center button-row\"><div *ngFor=\"let button of _shadowButtons\" class=\"text-center\" [ngClass]=\"button.layout\"><nbp-button [nbpLabel]=\"button.label\" [nbpStyle]=\"button.style\" [nbpIcon]=\"button.icon\" [disabled]=\"button.disabled\" (nbpClick)=\"_onFeedbackButtonClick(button)\"></nbp-button></div></div><div id=\"box-message\" class=\"row col-md-offset-6 col-md-12 text-center message\">{{nbpBoxMessage}}</div></div></div>",
        styles: [".icon-size{font-size:6.25em}.title{font-size:1.5em;color:#000;text-align:center;word-wrap:break-word}.code-warning{font-family:\"Arial Bold\",Arial;font-weight:700;font-style:normal;font-size:16px;color:#6f6f6f;text-align:center;word-wrap:break-word}.message{font-weight:400;font-style:normal;color:#333;text-align:center;line-height:normal}.padding-bottom{padding-bottom:20px}.box{border-width:0;background:inherit;background-color:#f8f8f8;border:none;border-radius:0;box-shadow:none;padding:20px}.button-row{padding-bottom:20px}.feedback-face-size{font-size:12em}.success{color:#258900;font-size:12em}.warning{color:#fa9600;font-size:12em}.error{color:#c63200;font-size:12em} /*# sourceMappingURL=nbp-feedback.component.css.map */ "]
    }),
    __metadata$70("design:paramtypes", [])
], NbpFeedbackComponent);

var __decorate$89 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$71 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpDataContainerComponent = class NbpDataContainerComponent {
    constructor(formatterService) {
        this.formatterService = formatterService;
    }
    ngOnInit() {
        this._nbpViewValue = this._getViewValue(this.nbpData);
    }
    _getViewValue(item) {
        if (!item) {
            return null;
        }
        return this.formatterService.displayValueTransformation(item, this.nbpFilter, this.nbpFilterArg);
    }
};
__decorate$89([
    Input(),
    __metadata$71("design:type", String)
], NbpDataContainerComponent.prototype, "nbpLabel", void 0);
__decorate$89([
    Input(),
    __metadata$71("design:type", Object)
], NbpDataContainerComponent.prototype, "nbpData", void 0);
__decorate$89([
    Input(),
    __metadata$71("design:type", Number)
], NbpDataContainerComponent.prototype, "nbpFilter", void 0);
__decorate$89([
    Input(),
    __metadata$71("design:type", Object)
], NbpDataContainerComponent.prototype, "nbpFilterArg", void 0);
NbpDataContainerComponent = __decorate$89([
    Component({
        selector: 'nbp-data-container',template: "<div class=\"data-title\"><label>{{nbpLabel}}</label></div><div><p class=\"data-content\">{{_nbpViewValue}}</p><div></div></div>",
        styles: [".data-title{display:block!important;font-size:15px;font-weight:700;padding:10px 0 0 0}.data-title>label{margin:0!important}.data-content{display:block!important;font-size:15px;padding:20px 0 20px 0} /*# sourceMappingURL=nbp-data-container.component.css.map */ "],
        viewProviders: [NbpFormatterService]
    }),
    __metadata$71("design:paramtypes", [NbpFormatterService])
], NbpDataContainerComponent);

var SortingDirection$1;
(function (SortingDirection) {
    SortingDirection[SortingDirection["ASCENDING"] = 1] = "ASCENDING";
    SortingDirection[SortingDirection["DESCENDING"] = -1] = "DESCENDING";
})(SortingDirection$1 || (SortingDirection$1 = {}));
var CompareStatus$1;
(function (CompareStatus) {
    CompareStatus[CompareStatus["HIGHER"] = 1] = "HIGHER";
    CompareStatus[CompareStatus["EQUAL"] = 0] = "EQUAL";
    CompareStatus[CompareStatus["LOWER"] = -1] = "LOWER";
})(CompareStatus$1 || (CompareStatus$1 = {}));

class NbpDataSource extends INbpArrayDataSource {
    constructor(arrayData, defaultPageSize) {
        super();
        this.defaultPageSize = defaultPageSize;
        if (!arrayData) {
            console.log('Errore - Array passato: "Undefined"');
        }
        this.arrayData = arrayData ? arrayData : [];
    }
    getSortingDirections(sortFields) {
        let sortingDirections = sortFields.map((element) => {
            let sortingDirection;
            if (element.charAt(0) === '-') {
                sortingDirection = SortingDirection$1.DESCENDING;
            }
            else {
                sortingDirection = SortingDirection$1.ASCENDING;
            }
            return sortingDirection;
        });
        return sortingDirections;
    }
    dataSortComparator(sortDirection, sortField) {
        return (a, b) => {
            let result;
            let field = sortDirection === SortingDirection$1.DESCENDING ? sortField.substr(1) : sortField;
            let currentTmp = getPropertyValueByPath(a, field);
            let nextTmp = getPropertyValueByPath(b, field);
            let current = currentTmp instanceof Date ? currentTmp.getTime() : currentTmp;
            let next = nextTmp instanceof Date ? nextTmp.getTime() : nextTmp;
            if (current === null || current === undefined) {
                result = CompareStatus$1.LOWER;
            }
            else if (next === null || next === undefined) {
                result = CompareStatus$1.HIGHER;
            }
            else {
                result = (current < next) ? CompareStatus$1.LOWER : ((current > next) ? CompareStatus$1.HIGHER : CompareStatus$1.EQUAL);
            }
            return result * sortDirection;
        };
    }
    sortData(data, sortFields) {
        let sortingDirections = this.getSortingDirections(sortFields);
        let sortField = sortFields[0];
        let sortDirection = sortingDirections[0];
        let sortedData = data.sort(this.dataSortComparator(sortDirection, sortField));
        return sortedData;
    }
    getPage(pageNumber, sorting, pageSize) {
        let shadowData = this.arrayData.slice();
        let currentPageSize = pageSize ? pageSize : (this.defaultPageSize ? this.defaultPageSize : this.arrayData.length);
        let pageToreturn = pageNumber ? pageNumber : 1;
        let start = (pageToreturn - 1) * currentPageSize;
        let end = start + currentPageSize;
        if (sorting && sorting.length) {
            shadowData = this.sortData(this.arrayData.slice(), sorting);
        }
        let data = shadowData.slice(start, end);
        let dataPage = {
            data: data,
            status: {
                pageNumber: pageNumber,
                pageSize: currentPageSize,
                totalRecords: this.arrayData.length
            }
        };
        return Observable.of(dataPage);
    }
    setData(newArrayData, pageNumber, sortFields, pageSize) {
        if (!newArrayData) {
            console.log('Errore - Array passato: "Undefined"');
        }
        this.arrayData = newArrayData ? newArrayData : [];
        this.sendDataEvent(pageNumber, sortFields, pageSize);
    }
}

var __decorate$91 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$73 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const I18N_VALUES$2 = {
    'it': {
        weekdays: ['Lu', 'Ma', 'Me', 'Gi', 'Ve', 'Sa', 'Do'],
        months: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],
        fullMonths: ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
            'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre']
    }
    // other languages you would support
};
// Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
// use the Angular LOCALE_ID value
let I18n$2 = class I18n {
    // Define a service holding the language. You probably already have one if your app is i18ned. Or you could also
    // use the Angular LOCALE_ID value
    constructor() {
        this.language = 'it';
    }
};
I18n$2 = __decorate$91([
    Injectable()
], I18n$2);
// Define custom service providing the months and weekdays translations
let NbpDatepickerItI18n$2 = class NbpDatepickerItI18n extends NgbDatepickerI18n {
    constructor(_i18n) {
        super();
        this._i18n = _i18n;
    }
    getWeekdayShortName(weekday) {
        return I18N_VALUES$2[this._i18n.language].weekdays[weekday - 1];
    }
    getMonthShortName(month) {
        return I18N_VALUES$2[this._i18n.language].months[month - 1];
    }
    getMonthFullName(month) {
        return I18N_VALUES$2[this._i18n.language].fullMonths[month - 1];
    }
};
NbpDatepickerItI18n$2 = __decorate$91([
    Injectable(),
    __metadata$73("design:paramtypes", [I18n$2])
], NbpDatepickerItI18n$2);
let NbpDatepickerConfiguration$2 = class NbpDatepickerConfiguration {
    constructor() {
        this.separator = '.';
    }
};
NbpDatepickerConfiguration$2 = __decorate$91([
    Injectable()
], NbpDatepickerConfiguration$2);
let NbpItDateParserFormatter$2 = class NbpItDateParserFormatter extends NgbDateParserFormatter {
    constructor(configuration) {
        super();
        this.configuration = configuration;
    }
    padNumber(value) {
        if (this.isNumber(value)) {
            return `0${value}`.slice(-2);
        }
        else {
            return '';
        }
    }
    isNumber(value) {
        return !isNaN(this.toInteger(value));
    }
    toInteger(value) {
        return parseInt(`${value}`, 10);
    }
    parse(value) {
        if (value) {
            const dateParts = value.trim().split('.');
            if (dateParts.length === 1 && this.isNumber(dateParts[0])) {
                return { day: this.toInteger(dateParts[0]), month: null, year: null };
            }
            else if (dateParts.length === 2 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: null };
            }
            else if (dateParts.length === 3 && this.isNumber(dateParts[0]) && this.isNumber(dateParts[1]) && this.isNumber(dateParts[2])) {
                return { day: this.toInteger(dateParts[0]), month: this.toInteger(dateParts[1]), year: this.toInteger(dateParts[2]) };
            }
        }
        return null;
    }
    format(date) {
        return date ?
            `${this.isNumber(date.day) ? this.padNumber(date.day) : ''}${this.configuration.separator}${this.isNumber(date.month) ? this.padNumber(date.month) : ''}${this.configuration.separator}${date.year}` : '';
    }
};
NbpItDateParserFormatter$2 = __decorate$91([
    Injectable(),
    __metadata$73("design:paramtypes", [NbpDatepickerConfiguration$2])
], NbpItDateParserFormatter$2);

var __decorate$90 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$72 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$16 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Provider Expression that allows nbp-datepicker to register as a ControlValueAccessor.
 * This allows it to support [(ngModel)].
 * @docs-private
 */
const NBP_DATEPICKER_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpDatepickerComponent),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE$3 = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpDatepickerComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpCombo component */
let nextId$17 = 0;
let NbpDatepickerComponent = class NbpDatepickerComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer, element, inj) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.element = element;
        this.inj = inj;
        /**
         * Identificativo univoco per il text field.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-datepicker-${++nextId$17}`;
        /**
         * testo del placeholder
         * Valore di Default: "dd.mm.yyyy"
         */
        this.placeholder = 'dd.mm.yyyy';
        this.ngbMaxDate = { day: 1, month: 1, year: 2050 };
        this.nbpMaxDate = new Date(this.ngbMaxDate.year, (this.ngbMaxDate.month - 1), this.ngbMaxDate.day);
        this.ngbMinDate = { day: 1, month: 1, year: 1970 };
        this.nbpMinDate = new Date(this.ngbMinDate.year, (this.ngbMinDate.month - 1), this.ngbMinDate.day);
        this.nbpOnNavigate = new EventEmitter();
    }
    /**
   * (Opzionale)
   * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
   * Valore di default false
   */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * La massima data accettata dal componente e visualizzata nel calendario
     * Valore di Default: 01.01.2050
     */
    get maxDate() {
        return this.nbpMaxDate;
    }
    set maxDate(maxDate) {
        this.nbpMaxDate = maxDate;
        this.ngbMaxDate = this.parseDateStructFromDate(maxDate);
    }
    /**
     * La minima data accettata dal componente e visualizzata nel calendario
     * Valore di Default: 01.01.1970
     */
    get minDate() {
        return this.nbpMinDate;
    }
    set minDate(minDate) {
        this.nbpMinDate = minDate;
        this.ngbMinDate = this.parseDateStructFromDate(minDate);
    }
    /**
     * Flag che abilita/disabilita le funzionalità associate al datepicker
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato al datepicker
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
    }
    toggleOpening() {
        if (this.ngbDatepicker.isOpen()) {
            this.ngbDatepicker.close();
        }
        else {
            this.ngbDatepicker.open();
            // EVENTUALE HOOK PER AGGIUNGERE I PULSANTI PER AVANTI\INDIETRO  ANNO
            // let buttons = document.querySelector('ngb-datepicker-navigation > button');
        }
    }
    _ngbModelChanged(event) {
        this.value = this.parseDateFromDateStruct(event);
    }
    parseDateFromDateStruct(value) {
        return (value && value instanceof Date) ? new Date(value.year, value.month - 1, value.day) : value;
    }
    parseDateStructFromDate(value) {
        return (value && value instanceof Date)
            ? { day: value.getUTCDate(), month: (value.getUTCMonth() + 1), year: value.getUTCFullYear() }
            : value;
    }
    writeValue(value) {
        this._ngbModel = this.parseDateStructFromDate(value);
        this.value = value;
    }
    _onNavigate(navigateEvent) {
        let _current = navigateEvent.current
            ? new Date(navigateEvent.current.year, (navigateEvent.current.month - 1), 1)
            : navigateEvent.current;
        let _next = navigateEvent.next.year
            ? new Date(navigateEvent.next.year, (navigateEvent.next.month - 1), 1)
            : navigateEvent.next.year;
        this.nbpOnNavigate.emit({ current: _current, next: _next });
    }
};
__decorate$90([
    Input(),
    __metadata$72("design:type", RegExp)
], NbpDatepickerComponent.prototype, "pattern", void 0);
__decorate$90([
    Input(),
    __metadata$72("design:type", String)
], NbpDatepickerComponent.prototype, "name", void 0);
__decorate$90([
    Input(),
    __metadata$72("design:type", String)
], NbpDatepickerComponent.prototype, "id", void 0);
__decorate$90([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$72("design:type", Boolean),
    __metadata$72("design:paramtypes", [Object])
], NbpDatepickerComponent.prototype, "nbpShowValidation", null);
__decorate$90([
    Input(),
    __metadata$72("design:type", String)
], NbpDatepickerComponent.prototype, "placeholder", void 0);
__decorate$90([
    Input(),
    __metadata$72("design:type", String)
], NbpDatepickerComponent.prototype, "nbpErrorMessage", void 0);
__decorate$90([
    Input(),
    __metadata$72("design:type", Object),
    __metadata$72("design:paramtypes", [Date])
], NbpDatepickerComponent.prototype, "maxDate", null);
__decorate$90([
    Input(),
    __metadata$72("design:type", Object),
    __metadata$72("design:paramtypes", [Date])
], NbpDatepickerComponent.prototype, "minDate", null);
__decorate$90([
    Input(),
    __metadata$72("design:type", Boolean),
    __metadata$72("design:paramtypes", [Object])
], NbpDatepickerComponent.prototype, "disabled", null);
__decorate$90([
    Input(),
    __metadata$72("design:type", Boolean),
    __metadata$72("design:paramtypes", [Object])
], NbpDatepickerComponent.prototype, "required", null);
__decorate$90([
    Output(),
    __metadata$72("design:type", EventEmitter)
], NbpDatepickerComponent.prototype, "nbpOnNavigate", void 0);
__decorate$90([
    ViewChild('ngbDatepicker'),
    __metadata$72("design:type", NgbInputDatepicker)
], NbpDatepickerComponent.prototype, "ngbDatepicker", void 0);
__decorate$90([
    ViewChild(NgModel),
    __metadata$72("design:type", NgModel)
], NbpDatepickerComponent.prototype, "model", void 0);
NbpDatepickerComponent = __decorate$90([
    Component({
        selector: 'nbp-datepicker',
        template: "<div class=\"form-group\"><div class=\"input-group\"><input #ngbDatepicker=\"ngbDatepicker\" ngbDatepicker [id]=\"id\" [name]=\"name\" [ngModel]=\"_ngbModel\" (ngModelChange)=\"_ngbModelChanged($event)\" [required]=\"required\" [disabled]=\"disabled\" [maxDate]=\"ngbMaxDate\" [minDate]=\"ngbMinDate\" (navigate)=\"_onNavigate($event)\" navigation=\"arrows\" class=\"form-control\" [pattern]=\"pattern\" placeholder=\"dd.mm.yyyy\"> <i class=\"icon-calendar button-icon\" [ngClass]=\"{'disabled': disabled}\" (click)=\"toggleOpening()\"></i></div></div>",
        styles: [".form-control::-ms-clear{display:none;width:0;height:0}.day{border-radius:0!important;box-sizing:border-box;text-align:center;width:inherit!important;height:inherit!important;line-height:2.6em!important;vertical-align:middle;color:#258900;border-left:#d3d3d3 solid 1px;border-right:#d3d3d3 solid 1px;border-bottom:#d3d3d3 solid 1px;border-collapse:separate;border-spacing:0}.icon{width:2rem;height:2rem}.day.greyed{color:#d3d3d3}.day:hover{color:#fff;background-color:#258900;cursor:pointer}:host::ng-deep .form-inline{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1em}:host::ng-deep .form-inline .form-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:0}:host::ng-deep .input-group{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}:host::ng-deep .input-group .form-control,:host::ng-deep .input-group-addon,:host::ng-deep .input-group-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}:host::ng-deep .form-control{display:block;width:100%;height:3.125em;color:#464a4c;background-color:#fff;background-image:none;background-clip:padding-box;border-radius:.15em!important;transition:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid #323232!important}:host::ng-deep .form-control:active:not([disabled]),:host::ng-deep .form-control:focus:not([disabled]){border:1px solid #258900!important}:host::ng-deep .form-control[disabled]{border:1px solid #ccc!important;color:#ccc;user-select:none}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-touched.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.ng-dirty.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]){border:2px solid #c63200!important}:host(.nbp-show-validation.ng-invalid)::ng-deep .form-control:not([disabled]):focus{border:2px solid #c63200}:host::ng-deep .input-group-addon{padding:.5em .75em;margin-bottom:0;font-size:1em;font-weight:400;line-height:1.25;color:#258900;text-align:center;background-color:#fff!important;border-top-color:rgba(0,0,0,.15);border-top-style:solid;border-top-width:1px;border-right-color:rgba(0,0,0,.15);border-right-style:solid;border-right-width:1px;border-bottom-color:rgba(0,0,0,.15);border-bottom-style:solid;border-bottom-width:1px;border-left-style:none!important;border-left-width:0!important;border-left-color:none!important}:host::ng-deep .input-group-addon img{width:1.2em;height:1em;cursor:pointer}:host::ng-deep .form-control+.input-group-addon:not(:first-child){border-left:0}:host::ng-deep .button-calendar{background-color:#fff;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:none;color:#258900;right:21px;position:relative;margin-right:-21px}:host::ng-deep .dropdown-menu{position:absolute;top:100%;left:0;display:none;float:left;min-width:10em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#1d1d1d;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;padding:0;top:24px;left:0;border-radius:0!important;border:none!important}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep .rounded{border-radius:.25em}:host::ng-deep .ngb-dp-header{height:4em!important;margin-bottom:-1.5em!important;border-bottom:none!important}:host::ng-deep .pt-1{padding-top:0!important;height:4.25em;margin-bottom:-2em}:host::ng-deep .rounded-top{border-top-right-radius:.25em;border-top-left-radius:.25em;border-radius:0!important}:host::ng-deep .bg-faded{background-color:#fff!important}:host::ng-deep ngb-datepicker-navigation{height:2em;line-height:1.85em}:host::ng-deep .justify-content-between{-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}:host::ng-deep .d-flex{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}:host::ng-deep .btn-link{cursor:pointer;outline:#d3d3d3 solid 1px!important}:host::ng-deep .btn-link,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:focus{border-color:transparent}:host::ng-deep .btn-link,:host::ng-deep .btn-link.active,:host::ng-deep .btn-link:active,:host::ng-deep .btn-link:disabled{background-color:transparent}:host::ng-deep .btn-link{font-weight:400;color:#258900;border-radius:0}:host::ng-deep button,:host::ng-deep input,:host::ng-deep select,:host::ng-deep textarea{line-height:inherit}:host::ng-deep [role=button],:host::ng-deep a,:host::ng-deep area,:host::ng-deep button,:host::ng-deep input,:host::ng-deep label,:host::ng-deep select,:host::ng-deep summary,:host::ng-deep textarea{-ms-touch-action:manipulation;touch-action:manipulation}:host::ng-deep button{-webkit-appearance:button}:host::ng-deep button,:host::ng-deep select{text-transform:none}:host::ng-deep button,:host::ng-deep input{overflow:visible}:host::ng-deep button,:host::ng-deep input,:host::ng-deep optgroup,:host::ng-deep select,:host::ng-deep textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}:host::ng-deep .ngb-dp-navigation-chevron::before{border-style:solid;border-width:.1em .1em 0 0!important;content:'';display:inline-block;height:.75em!important;transform:rotate(-135deg);-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);width:.75em!important;margin:0 0 0 .5em!important;color:grey}:host::ng-deep .ngb-dp-navigation-chevron.right:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin:0 .5em 0 0!important}:host::ng-deep .d-block{display:block!important}:host::ng-deep ngb-datepicker-navigation-select.d-block{width:9em!important}:host::ng-deep select{padding:.25em .5em;font-size:.875em;line-height:1.25;height:inherit;width:50%}:host::ng-deep .d-inline-block{display:inline-block!important}:host::ng-deep select.custom-select.d-inline-block{padding:.25em .5rem!important;font-size:.875em!important;line-height:1.25;height:inherit;width:50%}:host::ng-deep .custom-select{display:inline-block;max-width:100%;height:calc(4.25em);padding:.375em 1.75em .375em .75em;line-height:1.25;color:#464a4c;vertical-align:middle;border:1px solid rgba(0,0,0,.15);border-radius:.25em;-moz-appearance:none;-webkit-appearance:none}:host::ng-deep .px-1{padding-left:0!important;padding-right:0!important}:host::ng-deep .pb-1{padding-bottom:.25em!important}:host::ng-deep .ngb-dp-month:first-child{margin-left:0!important}:host::ng-deep .ngb-dp-month{pointer-events:none}:host::ng-deep .ml-3{margin-left:1em!important}:host::ng-deep .ngb-dp-day{width:45px!important;height:45px!important}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{width:45px!important;height:35px!important}:host::ng-deep .ngb-dp-day{position:relative;box-sizing:border-box}:host::ng-deep .ngb-dp-week.d-flex:not(:first-child){border-top:.5px solid #d3d3d3;border-bottom:.5px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week.d-flex:first-child{border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-bottom:.5px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep ngb-datepicker-navigation.d-flex{height:2.5em!important;line-height:1.8em!important;border-top:1px solid #d3d3d3;border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-week-number,:host::ng-deep .ngb-dp-weekday{line-height:35px!important}:host::ng-deep .text-info{color:#5bc0de!important}:host::ng-deep .font-italic{font-style:italic}:host::ng-deep .outside{opacity:.5}:host::ng-deep ngb-dp-day>div{text-align:center;width:45px;height:45px;line-height:45px;border-radius:0!important}:host::ng-deep div[ngbdatepickerdayview]{border-radius:0!important;box-sizing:border-box;text-align:center;width:45px!important;height:45px!important;line-height:45px!important;vertical-align:middle!important}:host::ng-deep .text-muted{color:#636c72!important}:host::ng-deep .btn-secondary{color:#258900;background-color:#fff;border-color:#ccc;font-weight:700;font-size:.8em}:host::ng-deep .text-white{color:#fff!important}:host::ng-deep .bg-primary{background-color:#258900!important}:host::ng-deep .bg-primary::before{border-bottom:8px solid #fff;border-left:8px solid transparent;border-right:8px solid transparent;position:absolute;top:0;right:-8px;content:'';display:inline-block;width:0;height:0;margin:0;padding:0;transform:rotate(45deg);transform-origin:top}:host::ng-deep .text-center{text-align:center!important}:host::ng-deep .small,:host::ng-deep small{font-size:80%;font-weight:400}:host::ng-deep .ngb-dp-months.pb-1{padding:0!important}:host::ng-deep .input-group>input.form-control{padding-left:.625em;padding-right:2.5em}:host::ng-deep .ngb-dp-day:not(:first-child)>.btn-secondary{border-left:1px solid #d3d3d3}:host::ng-deep .ngb-dp-weekday.font-italic{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal!important;font-size:.75em;color:#6f6f6f!important;text-align:center;text-transform:uppercase}:host::ng-deep button.btn-link{color:#258900!important}:host::ng-deep .collapsed{margin-bottom:-2em!important}:host::ng-deep .ngb-dp-month-name{font-size:.8em!important;padding-top:1em!important;font-weight:700;text-transform:uppercase;color:#258900;position:absolute;text-align:center!important;top:0;height:3.2em!important;width:11.4em;line-height:1.42857143em!important;word-wrap:break-word;word-break:break-word;left:0;right:0;margin-left:auto;margin-right:auto}.button-icon{cursor:pointer;position:relative;top:.001em;right:1.6em;z-index:2;color:#258900;font-size:1.625em;line-height:2.083em}.button-icon.disabled{cursor:not-allowed;pointer-events:none;color:#ccc}:host-context(.contrasto-on) .button-icon{color:#000} /*# sourceMappingURL=nbp-datepicker.component.css.map */ "],
        providers: [
            I18n$2,
            NbpDatepickerConfiguration$2,
            { provide: NgbDatepickerI18n, useClass: NbpDatepickerItI18n$2 },
            { provide: NgbDateParserFormatter, useClass: NbpItDateParserFormatter$2 },
            NBP_DATEPICKER_CONTROL_VALUE_ACCESSOR,
            NBP_INPUT_ELEMENT_BASE$3
        ]
    }),
    __param$16(0, Optional()), __param$16(0, Inject(NG_VALIDATORS)),
    __param$16(1, Optional()), __param$16(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$16(2, Optional()),
    __metadata$72("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        ElementRef,
        Injector])
], NbpDatepickerComponent);

var __decorate$92 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$74 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSequenzialeGenericComponent = class NbpSequenzialeGenericComponent {
    constructor() {
        /**
         * Array di Json degli step.
         *
         * esempio formato:
         * [
         *   { active: true, fillPercent: 25, label: 'step 1', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 2', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 3', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 4', stepDimension: NbpStepDimension.GRANDE }
         * ];
         *
         */
        this.steps = [];
        /**
         * Evento generato al cambio step.
         * Fornisce in output json costituito da :
         * {
         *  step: valore step corrente
         *  disablePrev: stato pulsante Prev
         *  disableNext: stato pulsante Next
         * }
         */
        this.stepEvent = new EventEmitter();
        //dati di output da fornire su event 
        this.pagingSteps = [];
        this.currentStep = 0;
        this.currentPagingStep = 0;
        //variabili locali da non fare nulla
        this.lg = NbpSize.LG;
        this.disablePrev = true;
        this.disableNext = false;
    }
    /**
     * Operazione di navigazione richiesta.
     *
     * valori ammessi: "NEXT, PREV"
     *
     */
    set navigateOperation(value) {
        if (!value)
            return;
        value = value.toUpperCase();
        if (value.indexOf("NEXT") != -1)
            this.Next();
        if (value.indexOf("PREV") != -1)
            this.Prev();
    }
    ngOnInit() {
        this.stepperUpdate();
    }
    Prev() {
        if (this.currentStep <= 0 && this.currentPagingStep <= 0) {
            return;
        }
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        if (allPagingSteps.length > 0 && this.currentPagingStep > 0) {
            this.currentPagingStep--;
            this.steps[this.currentStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingSteps.length);
        }
        else {
            this.changeStep(this.currentStep, this.currentStep - 1);
        }
        this.manageButtons();
    }
    Next() {
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        if (this.currentStep >= this.steps.length - 1 && this.currentPagingStep >= allPagingSteps.length) {
            this.steps[this.currentStep].fillPercent = 100;
            // this.currentStep++;
            // this.manageButtons();
            this.manageButtons();
            return;
        }
        if (allPagingSteps.length > 0 && this.currentPagingStep < allPagingSteps.length) {
            this.currentPagingStep++;
            this.steps[this.currentStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingSteps.length);
            if (this.currentPagingStep == allPagingSteps.length) {
                this.changeStep(this.currentStep, this.currentStep + 1);
            }
        }
        else {
            this.changeStep(this.currentStep, this.currentStep + 1);
        }
        this.manageButtons();
    }
    getAllPagingSteps(stepIndex) {
        if (this.pagingSteps[stepIndex] && this.pagingSteps[stepIndex].pages) {
            return this.pagingSteps[stepIndex].pages;
        }
        else {
            return [];
        }
    }
    getFillPercent(pageIndex, pagesLength) {
        return (100 * (pageIndex + 1) / pagesLength);
    }
    changeStep(oldStep, newStep) {
        if (newStep >= this.steps.length) {
            return;
        }
        this.steps[oldStep].fillPercent = oldStep < newStep ? 100 : 0;
        this.steps[oldStep].active = false;
        this.currentStep = newStep;
        this.steps[newStep].active = true;
        var allPagingStepsNew = this.getAllPagingSteps(newStep);
        if (allPagingStepsNew.length > 0) {
            this.currentPagingStep = 0;
            this.steps[newStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingStepsNew.length);
        }
        else {
            this.currentPagingStep = 0;
            this.steps[newStep].fillPercent = 100;
        }
    }
    manageButtons() {
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        // if(this.currentStep >= this.steps.length - 1 && this.currentPagingStep >= allPagingSteps.length - 1) {
        if (this.currentStep >= this.steps.length - 1 && this.steps[this.currentStep].fillPercent == 100) {
            this.disableNext = true;
        }
        else {
            this.disableNext = false;
        }
        if (this.currentStep <= 0 && this.currentPagingStep <= 0) {
            this.disablePrev = true;
        }
        else {
            this.disablePrev = false;
        }
        this.stepperUpdate();
    }
    stepperUpdate() {
        let result = {
            step: this.currentStep,
            disablePrev: this.disablePrev,
            disableNext: this.disableNext
        };
        this.stepEvent.emit(result);
    }
};
__decorate$92([
    Input(),
    __metadata$74("design:type", Array)
], NbpSequenzialeGenericComponent.prototype, "steps", void 0);
__decorate$92([
    Input(),
    __metadata$74("design:type", String),
    __metadata$74("design:paramtypes", [String])
], NbpSequenzialeGenericComponent.prototype, "navigateOperation", null);
__decorate$92([
    Output(),
    __metadata$74("design:type", Object)
], NbpSequenzialeGenericComponent.prototype, "stepEvent", void 0);
NbpSequenzialeGenericComponent = __decorate$92([
    Component({
        selector: 'nbp-sequenziale-generic',template: "<div style=\"margin-top: -0.8em;\"><nbp-progress [nbpConfiguration]=\"steps\"></nbp-progress></div><div class=\"container main-container\" style=\"margin-top: 1.250em; min-height: 100%\"><div class=\"page-steps-container col-md-24 border-top-white\" *ngIf=\"pagingSteps[currentStep] && pagingSteps[currentStep].pages && pagingSteps[currentStep].pages.length > 0\"><div class=\"container pad-t-12 pad-b-12 pad-l-10 pad-r-10\"><ul class=\"page-steps pull-left\"><ng-container *ngFor=\"let page of pagingSteps[currentStep].pages; let pageIndex= index\"><li class=\"page-step\" *ngIf=\"pageIndex <= currentPagingStep\"><div class=\"col\"><span class=\"page-steps-number\" [ngClass]=\"{'active': pageIndex === currentPagingStep, 'done': pageIndex < currentPagingStep}\">{{pageIndex + 1}}</span><div class=\"row\"><label class=\"page-step-label\" *ngIf=\"pageIndex === currentPagingStep\">{{pagingSteps[currentStep].currentParentLabel}}</label><br><label class=\"page-steps-label\" *ngIf=\"pageIndex === currentPagingStep\">{{page.label}}</label></div></div></li></ng-container></ul><ul class=\"page-steps pull-right\"><ng-container *ngFor=\"let page of pagingSteps[currentStep].pages; let pageIndex = index\"><li class=\"page-step\" *ngIf=\"pageIndex > currentPagingStep\"><span class=\"page-steps-number\">{{pageIndex + 1}}</span></li></ng-container></ul></div></div></div>",
        styles: [".page-steps{list-style:none;padding:0;margin:0;height:2em}.page-steps li{display:inline-block;height:2em;line-height:2em}.page-steps li .row{line-height:0}.page-steps .page-step .col{display:inline-table}.page-steps .page-step .row{display:table-cell}.page-steps .page-steps-number{display:inline-block;border:1px solid #6f6f6f;font-weight:700;color:#6f6f6f;text-align:center;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:2em;height:2em;font-size:.785em;line-height:2em;margin:0 .125em 0 .125em}.page-steps .page-steps-number.active{color:#258900;border:1px solid #258900}.page-steps .page-steps-number.done{color:#fff;background-color:#258900;border-color:#258900}.page-steps .page-step-label{font-weight:400;color:#258900;font-size:.6875em!important;line-height:.5em;text-transform:uppercase;margin-left:.5em;margin-top:.4em}.page-steps .page-steps-label{font-weight:700;color:#258900;font-size:.785em!important;line-height:1em;text-transform:uppercase;margin-left:.5em;margin-top:.1em!important}.page-steps-container{background-color:#fff}@media (min-width:768px){.page-steps .page-steps-label{font-size:.938em}.page-steps .page-steps-number{font-size:.938em}}@-moz-document url-prefix(){.page-steps .page-step .col{display:inline-flex}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.page-steps .page-step .col .row{top:-10px}}:host-context(.contrasto-on) .page-steps .page-steps-number{color:#000}:host-context(.contrasto-on) .page-steps .page-steps-number.active{color:#000;border-color:#000}:host-context(.contrasto-on) .page-steps .page-steps-number.done{color:#fff;background-color:#000;border-color:#000}:host-context(.contrasto-on) .page-steps .page-step-label{color:#000}:host-context(.contrasto-on) .page-steps .page-steps-label{color:#000}:host-context(.contrasto-on) .page-steps-container{background-color:#fff} /*# sourceMappingURL=nbp-sequenziale-generic.component.css.map */ "]
    }),
    __metadata$74("design:paramtypes", [])
], NbpSequenzialeGenericComponent);

var __decorate$93 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$75 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSequenzialeSottostepGenericComponent = class NbpSequenzialeSottostepGenericComponent {
    constructor() {
        /**
         * Array di Json degli step.
         *
         * esempio formato:
         * [
         *   { active: true, fillPercent: 25, label: 'step 1', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 2', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 3', stepDimension: NbpStepDimension.GRANDE },
         *   { active: false, fillPercent: 0, label: 'step 4', stepDimension: NbpStepDimension.GRANDE }
         * ];
         *
         */
        this.steps = [];
        /**
         * Array di Json dei sottostep di ciascun step.
         *
         * esempio formato:
         *
         * [{
         *   currentParentLabel: 'Step 1',
         *   pages: [{label: 'Sottostep 1'},
         *           {label: 'Sottostep 2'},
         *           {label: 'Sottostep 3'},
         *           {label: 'Sottostep 4'},
         *           {label: 'Sottostep 5'}]
         *  },
         *
         *  ........................
         *  ........................
         *
         * }]
         *
         */
        this.pagingSteps = [];
        /**
         * Evento generato al cambio step.
         * Fornisce in output json costituito da :
         * {
         *  step: valore step corrente
         *  sottoStep: valore sottoStep corrente
         *  disablePrev: stato pulsante Prev
         *  disableNext: stato pulsante Next
         * }
         */
        this.stepEvent = new EventEmitter();
        //dati uso interno
        this.disablePrev = true;
        this.disableNext = false;
        //dati da fornire in output su event emitter
        this.currentStep = 0;
        this.currentPagingStep = 0;
        //variabili locali da non toccare
        this.lg = NbpSize.LG;
        this.sticky = false;
    }
    ngOnInit() {
        this.stepperUpdate();
    }
    /**
     * Operazione di navigazione richiesta.
     *
     * valori ammessi: "NEXT, PREV"
     *
     */
    set navigateOperation(value) {
        if (!value)
            return;
        value = value.toUpperCase();
        if (value.indexOf("NEXT") != -1)
            this.Next();
        if (value.indexOf("PREV") != -1)
            this.Prev();
    }
    Prev() {
        if (this.currentStep <= 0 && this.currentPagingStep <= 0) {
            return;
        }
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        if (allPagingSteps.length > 0 && this.currentPagingStep > 0) {
            this.currentPagingStep--;
            this.steps[this.currentStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingSteps.length);
        }
        else {
            this.changeStep(this.currentStep, this.currentStep - 1);
        }
        this.manageButtons();
    }
    Next() {
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        if (this.currentStep >= this.steps.length - 1 && this.currentPagingStep >= allPagingSteps.length) {
            this.steps[this.currentStep].fillPercent = 100;
            // this.currentStep++;
            // this.manageButtons();
            this.manageButtons();
            return;
        }
        if (allPagingSteps.length > 0 && this.currentPagingStep < allPagingSteps.length) {
            this.currentPagingStep++;
            this.steps[this.currentStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingSteps.length);
            if (this.currentPagingStep == allPagingSteps.length) {
                this.changeStep(this.currentStep, this.currentStep + 1);
            }
        }
        else {
            this.changeStep(this.currentStep, this.currentStep + 1);
        }
        this.manageButtons();
    }
    getAllPagingSteps(stepIndex) {
        if (this.pagingSteps[stepIndex] && this.pagingSteps[stepIndex].pages) {
            return this.pagingSteps[stepIndex].pages;
        }
        else {
            return [];
        }
    }
    getFillPercent(pageIndex, pagesLength) {
        return (100 * (pageIndex + 1) / pagesLength);
    }
    changeStep(oldStep, newStep) {
        if (newStep >= this.steps.length) {
            return;
        }
        this.steps[oldStep].fillPercent = oldStep < newStep ? 100 : 0;
        this.steps[oldStep].active = false;
        this.currentStep = newStep;
        this.steps[newStep].active = true;
        var allPagingStepsNew = this.getAllPagingSteps(newStep);
        if (allPagingStepsNew.length > 0) {
            if (oldStep > newStep) {
                this.currentPagingStep = allPagingStepsNew.length - 1;
            }
            else {
                this.currentPagingStep = 0;
            }
            this.steps[newStep].fillPercent = this.getFillPercent(this.currentPagingStep, allPagingStepsNew.length);
        }
        else {
            this.currentPagingStep = 0;
            this.steps[newStep].fillPercent = 100;
        }
    }
    manageButtons() {
        var allPagingSteps = this.getAllPagingSteps(this.currentStep);
        // if(this.currentStep >= this.steps.length - 1 && this.currentPagingStep >= allPagingSteps.length - 1) {
        if (this.currentStep >= this.steps.length - 1 && this.steps[this.currentStep].fillPercent == 100) {
            this.disableNext = true;
        }
        else {
            this.disableNext = false;
        }
        if (this.currentStep <= 0 && this.currentPagingStep <= 0) {
            this.disablePrev = true;
        }
        else {
            this.disablePrev = false;
        }
        this.stepperUpdate();
    }
    stepperUpdate() {
        let result = {
            step: this.currentStep,
            sottoStep: this.currentPagingStep,
            disablePrev: this.disablePrev,
            disableNext: this.disableNext
        };
        this.stepEvent.emit(result);
    }
    onWindowScroll() {
        let number = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        if (number > 70) {
            this.sticky = true;
        }
        else {
            this.sticky = false;
        }
    }
};
__decorate$93([
    Input(),
    __metadata$75("design:type", Array)
], NbpSequenzialeSottostepGenericComponent.prototype, "steps", void 0);
__decorate$93([
    Input(),
    __metadata$75("design:type", Object)
], NbpSequenzialeSottostepGenericComponent.prototype, "pagingSteps", void 0);
__decorate$93([
    Input(),
    __metadata$75("design:type", String),
    __metadata$75("design:paramtypes", [String])
], NbpSequenzialeSottostepGenericComponent.prototype, "navigateOperation", null);
__decorate$93([
    Output(),
    __metadata$75("design:type", Object)
], NbpSequenzialeSottostepGenericComponent.prototype, "stepEvent", void 0);
__decorate$93([
    HostListener("window:scroll", []),
    __metadata$75("design:type", Function),
    __metadata$75("design:paramtypes", []),
    __metadata$75("design:returntype", void 0)
], NbpSequenzialeSottostepGenericComponent.prototype, "onWindowScroll", null);
NbpSequenzialeSottostepGenericComponent = __decorate$93([
    Component({
        selector: 'nbp-sequenziale-sottostep-generic',template: "<div style=\"margin-top: -0.8em;\"><nbp-progress [nbpConfiguration]=\"steps\"></nbp-progress></div><div class=\"line-separator\" [ngClass]=\"{'sticky-line' : sticky}\"></div><div class=\"container main-container\" style=\"min-height: 100%\"><div class=\"page-steps-container col-md-24 border-top-white\" [ngClass]=\"{'sticky' : sticky}\" *ngIf=\"pagingSteps[currentStep] && pagingSteps[currentStep].pages && pagingSteps[currentStep].pages.length > 0\"><div class=\"container pad-t-12 pad-b-12 pad-l-10 pad-r-10\"><ul class=\"page-steps pull-left\"><ng-container *ngFor=\"let page of pagingSteps[currentStep].pages; let pageIndex= index\"><li class=\"page-step\" *ngIf=\"pageIndex <= currentPagingStep\"><div class=\"col\"><span class=\"page-steps-number\" [ngClass]=\"{'active': pageIndex === currentPagingStep, 'done': pageIndex < currentPagingStep}\">{{pageIndex + 1}}</span><div class=\"row\"><label class=\"page-step-label\" *ngIf=\"pageIndex === currentPagingStep\">{{pagingSteps[currentStep].currentParentLabel}}</label><br><label class=\"page-steps-label\" *ngIf=\"pageIndex === currentPagingStep\">{{page.label}}</label></div></div></li></ng-container></ul><ul class=\"page-steps pull-right\"><ng-container *ngFor=\"let page of pagingSteps[currentStep].pages; let pageIndex = index\"><li class=\"page-step\" *ngIf=\"pageIndex > currentPagingStep\"><span class=\"page-steps-number\">{{pageIndex + 1}}</span></li></ng-container></ul></div></div></div>",
        styles: [".sticky{position:fixed;background-color:#fff;z-index:9040;left:10px;top:93px;width:100%;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}.line-separator{z-index:9030;position:absolute;width:100%;height:3.75em;border-bottom:1px solid rgba(204,204,204,.5)}.line-separator.sticky-line{position:fixed!important;background-color:#fff;left:0;top:93px;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}.page-steps{list-style:none;padding:0;margin:0;height:2em}.page-steps li{display:inline-block;height:2em;line-height:2em}.page-steps li .row{line-height:0}.page-steps .page-step .col{display:inline-table}.page-steps .page-step .row{display:table-cell}.page-steps .page-steps-number{display:inline-block;border:1px solid #6f6f6f;font-weight:700;color:#6f6f6f;text-align:center;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:2em;height:2em;font-size:.785em;line-height:2em;margin:0 .125em 0 .125em}.page-steps .page-steps-number.active{color:#258900;border:1px solid #258900}.page-steps .page-steps-number.done{color:#fff;background-color:#258900;border-color:#258900}.page-steps .page-step-label{font-weight:400;color:#258900;font-size:.6875em!important;line-height:.5em;text-transform:uppercase;margin-left:.5em;margin-top:.4em}.page-steps .page-steps-label{font-weight:700;color:#258900;font-size:.785em!important;line-height:1em;text-transform:uppercase;margin-left:.5em;margin-top:.1em!important}.page-steps-container{background-color:#fff}@media (min-width:768px){.page-steps .page-steps-label{font-size:.938em}.page-steps .page-steps-number{font-size:.938em}}@-moz-document url-prefix(){.page-steps .page-step .col{display:inline-flex}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.page-steps .page-step .col .row{top:-10px}}:host-context(.contrasto-on) .page-steps .page-steps-number{color:#000}:host-context(.contrasto-on) .page-steps .page-steps-number.active{color:#000;border-color:#000}:host-context(.contrasto-on) .page-steps .page-steps-number.done{color:#fff;background-color:#000;border-color:#000}:host-context(.contrasto-on) .page-steps .page-step-label{color:#000}:host-context(.contrasto-on) .page-steps .page-steps-label{color:#000}:host-context(.contrasto-on) .page-steps-container{background-color:#fff} /*# sourceMappingURL=nbp-sequenziale-sottostep-generic.component.css.map */ "]
    }),
    __metadata$75("design:paramtypes", [])
], NbpSequenzialeSottostepGenericComponent);

var __decorate$94 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$76 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$18 = 0;
/**
 * @export
 * @class NbpDividingLineComponent
 * @implements {OnInit}
 * Visualizza una linea di separazione, con un pulsante opzionale e un titolo opzionale
 */
let NbpDividingLineComponent = class NbpDividingLineComponent {
    constructor() {
        /**
         * Identificativo univoco per il componente.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `nbp-dividing-line-${++nextId$18}`;
        this._nbpShowButton = false;
        /**
         * (Opzionale) Indica quanto spazio deve occupare il braccio sinistro affinchè si accentri l'icona o la label in caso di presenza del pulsante laterale.
         */
        this.marginLeft = "99999";
        /**
         * (Opzionale) Stile della linea di separazione, di default è grigia.
         * Se impostata su NbpStyle.PRIMARY è di colore verde
         */
        this.nbpLineStyle = NbpStyle.DEFAULT;
        this._lineStyle = NbpStyle;
        /**
         * (Opzionale) Evento emesso al click sul pulsante.
         * @param {EventEmitter<any>} nbpClick
         */
        this.nbpClick = new EventEmitter();
        this.center = false;
    }
    /**
     * (Opzionale) Booleano che mostra/nasconde il pulsante. Default: false
     */
    get nbpShowButton() { return this._nbpShowButton; }
    set nbpShowButton(value) { this._nbpShowButton = coerceBooleanProperty(value); }
    _onClick() {
        if (this.nbpClick) {
            this.nbpClick.emit();
        }
    }
    ngOnInit() {
        this.marginLeft = this.marginLeft.trim() + "";
        if (this.marginLeft == "99999")
            this.center = false;
        else
            this.center = true;
        // if(this.nbpLineStyle === undefined) {
        //   this.nbpLineStyle = NbpStyle.DEFAULT;
        // }
    }
};
__decorate$94([
    Input(),
    __metadata$76("design:type", Object)
], NbpDividingLineComponent.prototype, "id", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "nbpTitle", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "nbpTitleIcon", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", Boolean),
    __metadata$76("design:paramtypes", [Object])
], NbpDividingLineComponent.prototype, "nbpShowButton", null);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "nbpButtonLabel", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "nbpButtonIcon", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "nbpButtonIconHover", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", String)
], NbpDividingLineComponent.prototype, "marginLeft", void 0);
__decorate$94([
    Input(),
    __metadata$76("design:type", Number)
], NbpDividingLineComponent.prototype, "nbpLineStyle", void 0);
__decorate$94([
    Output(),
    __metadata$76("design:type", EventEmitter)
], NbpDividingLineComponent.prototype, "nbpClick", void 0);
NbpDividingLineComponent = __decorate$94([
    Component({
        selector: 'nbp-dividing-line',template: "<div class=\"dividing-line-container\"><ng-container *ngIf=\"center; else falseTemplate\"><div [ngClass]=\"(nbpTitleIcon || nbpTitle) ? 'dividing-line-left' : 'dividing-line-left-continuous'\" [ngStyle]=\"{'max-width.%': marginLeft, 'min-width.%': marginLeft, 'width.%': marginLeft}\"><hr [ngClass]=\"{'line-green': nbpLineStyle === _lineStyle.PRIMARY, 'line-gray': nbpLineStyle === _lineStyle.DEFAULT}\"></div></ng-container><ng-template #falseTemplate><div [ngClass]=\"(nbpTitleIcon || nbpTitle) ? 'dividing-line-left' : 'dividing-line-left-continuous'\"><hr [ngClass]=\"{'line-green': nbpLineStyle === _lineStyle.PRIMARY, 'line-gray': nbpLineStyle === _lineStyle.DEFAULT}\"></div></ng-template><div class=\"dividing-line-center\"><span *ngIf=\"nbpTitleIcon\" class=\"dividing-line-title-icon\" [ngClass]=\"nbpTitleIcon\"></span> <span *ngIf=\"nbpTitle\" class=\"dividing-line-title\">{{nbpTitle}}</span></div><div [ngClass]=\"(nbpTitleIcon || nbpTitle) ? 'dividing-line-right' : 'dividing-line-right-continuous'\"><hr [ngClass]=\"{'line-green': nbpLineStyle === _lineStyle.PRIMARY, 'line-gray': nbpLineStyle === _lineStyle.DEFAULT}\"></div><div *ngIf=\"nbpShowButton\" class=\"dividing-line-button\"><i class=\"dividing-line-button-icon\" (click)=\"_onClick()\" [ngClass]=\"nbpButtonIcon\"></i> <i class=\"dividing-line-button-icon hover-icon\" (click)=\"_onClick()\" [ngClass]=\"nbpButtonIconHover\"></i> <span *ngIf=\"nbpButtonLabel\" class=\"dividing-line-button-label\">{{nbpButtonLabel}}</span></div></div>",
        styles: [".dividing-line-container{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;background-color:transparent}.dividing-line-left-continuous{flex-grow:1;align-self:flex-start;padding-left:20px}.dividing-line-left{flex-grow:1;align-self:flex-start;padding-left:20px;padding-right:20px}.dividing-line-right-continuous{flex-grow:1;align-self:flex-start;padding-right:20px}.dividing-line-right{flex-grow:1;align-self:flex-start;padding-right:20px;padding-left:20px}hr.line-green{border:.5px solid #258900}hr.line-gray{border:.5px solid #ccc}.dividing-line-content{align-self:center}.dividing-line-title-icon{font-size:2em;color:#6f6f6f;vertical-align:middle;margin-right:10px}.dividing-line-title{font-size:1.125em;color:#323232;vertical-align:middle}.dividing-line-button{align-self:center;padding-right:20px}.dividing-line-button .dividing-line-button-icon{vertical-align:middle;font-size:1.875em;cursor:pointer;color:#258900}.dividing-line-button .dividing-line-button-icon.hover-icon{display:none}.dividing-line-button .dividing-line-button-label{vertical-align:middle;color:#258900;font-size:.75em;font-weight:700;text-transform:uppercase}.dividing-line-button:hover .dividing-line-button-icon{display:none}.dividing-line-button:hover .hover-icon{display:inline!important}.show-button{height:40px}:host-context(.contrasto-on) .dividing-line-title-icon{color:#000}:host-context(.contrasto-on) .dividing-line-title{color:#000}:host-context(.contrasto-on) .dividing-line-button .dividing-line-button-icon{color:#000!important}:host-context(.contrasto-on) .dividing-line-button .dividing-line-button-label{color:#000!important}:host-context(.contrasto-on) hr.line-gray,:host-context(.contrasto-on) hr.line-green{border:.5px solid #000} /*# sourceMappingURL=nbp-dividing-line.component.css.map */ "]
    }),
    __metadata$76("design:paramtypes", [])
], NbpDividingLineComponent);

var __decorate$95 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$77 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$19 = 0;
let NbpTitledPanelComponent = class NbpTitledPanelComponent {
    constructor() {
        this.id = `nbp-titled-panel-${++nextId$19}`;
    }
    ngOnInit() {
    }
};
__decorate$95([
    Input(),
    __metadata$77("design:type", String)
], NbpTitledPanelComponent.prototype, "id", void 0);
__decorate$95([
    Input(),
    __metadata$77("design:type", String)
], NbpTitledPanelComponent.prototype, "nbpTitle", void 0);
NbpTitledPanelComponent = __decorate$95([
    Component({
        selector: 'nbp-titled-panel',template: "<div class=\"titled-panel-container\"><div class=\"titled-panel-title\">{{nbpTitle}}</div><ng-content></ng-content></div>",
        styles: [".titled-panel-container{margin:15px;padding:15px 10px;border:1px solid #258900}.titled-panel-title{padding:0 10px;margin-top:-32px;margin-bottom:4px;background-color:#fff;margin-left:auto;margin-right:auto;width:fit-content;font-size:22px} /*# sourceMappingURL=nbp-titled-panel.component.css.map */ "]
    }),
    __metadata$77("design:paramtypes", [])
], NbpTitledPanelComponent);

var __decorate$96 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$78 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$20 = 0;
let NbpSelectionPanelComponent = class NbpSelectionPanelComponent {
    constructor() {
        this.buttonStyle = NbpStyle;
        this.buttonType = NbpButtonType;
        this.id = `pos-selection-panel-${++nextId$20}`;
        this._selected = false;
        this._disabled = false;
        /**
         * (Opzionale) Evento emesso al click sul pulsante.
         * @param {EventEmitter<any>}  nbpClick
         */
        this.nbpClick = new EventEmitter();
    }
    get selected() {
        return this._selected;
    }
    ;
    set selected(value) {
        this._selected = coerceBooleanProperty(value);
    }
    get disabled() {
        return this._disabled;
    }
    ;
    set disabled(value) {
        this._disabled = coerceBooleanProperty(value);
    }
    _onClick() {
        if (this.nbpClick) {
            this.selected = !this.selected;
            this.nbpClick.emit();
        }
    }
    ngOnInit() {
    }
};
__decorate$96([
    Input(),
    __metadata$78("design:type", String)
], NbpSelectionPanelComponent.prototype, "id", void 0);
__decorate$96([
    Input(),
    __metadata$78("design:type", String)
], NbpSelectionPanelComponent.prototype, "nbpTitle", void 0);
__decorate$96([
    Input(),
    __metadata$78("design:type", String)
], NbpSelectionPanelComponent.prototype, "imageUrl", void 0);
__decorate$96([
    Input(),
    __metadata$78("design:type", Object),
    __metadata$78("design:paramtypes", [Boolean])
], NbpSelectionPanelComponent.prototype, "selected", null);
__decorate$96([
    Input(),
    __metadata$78("design:type", Object),
    __metadata$78("design:paramtypes", [Boolean])
], NbpSelectionPanelComponent.prototype, "disabled", null);
__decorate$96([
    Input(),
    __metadata$78("design:type", String)
], NbpSelectionPanelComponent.prototype, "nbpButtonLabel", void 0);
__decorate$96([
    Input(),
    __metadata$78("design:type", String)
], NbpSelectionPanelComponent.prototype, "nbpSelectedButtonLabel", void 0);
__decorate$96([
    Output(),
    __metadata$78("design:type", EventEmitter)
], NbpSelectionPanelComponent.prototype, "nbpClick", void 0);
NbpSelectionPanelComponent = __decorate$96([
    Component({
        selector: 'nbp-selection-panel',template: "<div class=\"selection-panel-container\" [class.selected]=\"selected\"><img class=\"selection-panel-image\" [src]=\"imageUrl\" *ngIf=\"imageUrl != null\"> <span class=\"selection-panel-title\">{{nbpTitle}}</span><nbp-button [nbpLabel]=\"selected == true ? nbpSelectedButtonLabel : nbpButtonLabel\" [nbpChecked]=\"selected\" [nbpStyle]=\"buttonStyle.SECONDARY\" [nbpType]=\"buttonType.SELECT\" (nbpClick)=\"_onClick()\" [disabled]=\"disabled\"></nbp-button></div>",
        styles: [".selection-panel-container{position:relative;padding:10px;height:350px;margin-bottom:25px;background-color:#fff;text-align:center;border-radius:0 0 5px 5px;border-right:1px solid rgba(50,50,50,.2);border-left:1px solid rgba(50,50,50,.2);border-bottom:1px solid rgba(50,50,50,.2);border-top:0 transparent;-webkit-box-shadow:0 30px 70px -9px rgba(50,50,50,.2);-moz-box-shadow:0 30px 70px -9px rgba(50,50,50,.2);box-shadow:0 30px 70px -9px rgba(50,50,50,.2)}.selection-panel-container .selection-panel-image{width:140px;height:140px;margin:10px}.selection-panel-container .selection-panel-title{display:block;font-weight:700;text-transform:uppercase}.selection-panel-container ::ng-deep nbp-button{position:absolute;bottom:20px;left:0;right:0}.selection-panel-container ::ng-deep nbp-button .btn.button.secondary.select{color:#258900;border-color:#258900!important}.selection-panel-container ::ng-deep nbp-button .btn.button.secondary.select:disabled{opacity:1!important;background-color:#fff!important;color:#ccc;border-color:#6f6f6f!important}.selection-panel-container.selected{height:375px;margin-bottom:0;border-right:1px solid rgba(50,50,50,.1);border-left:1px solid rgba(50,50,50,.1);border-bottom:1px solid rgba(50,50,50,.1);border-top:0 transparent;-webkit-box-shadow:0 30px 60px -30px rgba(127,201,31,.7);-moz-box-shadow:0 30px 60px -30px rgba(127,201,31,.7);box-shadow:0 30px 60px -30px rgba(127,201,31,.7)}.selection-panel-container.selected /deep/ nbp-button{bottom:45px} /*# sourceMappingURL=nbp-selection-panel.component.css.map */ "]
    }),
    __metadata$78("design:paramtypes", [])
], NbpSelectionPanelComponent);

var __decorate$97 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$79 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpShadowedPanelComponent = class NbpShadowedPanelComponent {
    constructor() { }
    ngOnInit() {
    }
};
NbpShadowedPanelComponent = __decorate$97([
    Component({
        selector: 'nbp-shadowed-panel',template: "<div class=\"shadowed-panel-outer-container\"><div class=\"shadowed-panel-container\"><ng-content></ng-content></div></div>",
        styles: [".shadowed-panel-outer-container{width:100%}.shadowed-panel-outer-container .shadowed-panel-container{margin:10px;padding:10px;background-color:#fff;text-align:center;border-radius:5px;-webkit-box-shadow:0 30px 70px -9px rgba(50,50,50,.2);-moz-box-shadow:0 30px 70px -9px rgba(50,50,50,.2);box-shadow:0 30px 70px -9px rgba(50,50,50,.2)} /*# sourceMappingURL=nbp-shadowed-panel.component.css.map */ "]
    }),
    __metadata$79("design:paramtypes", [])
], NbpShadowedPanelComponent);

var __decorate$98 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$80 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$17 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
const NBP_SPINNER_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpSpinnerComponent),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE$4 = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpSpinnerComponent),
    multi: true
};
/** intero autogenerato usato per id unici */
let nextId$21 = 0;
let NbpSpinnerComponent = class NbpSpinnerComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, parentFormContainer, inj) {
        super(validatori, asyncValidatori);
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.parentFormContainer = parentFormContainer;
        this.inj = inj;
        /**
         * Identificativo univoco per il componente NbpSpinner. Se non viene passato un valore, l'id viene autogenerato.
         */
        this.id = `nbp-spinner-${++nextId$21}`;
        this._nbpDisabled = false;
        this._nbpRequired = false;
        this._nbpShowValidation = false;
        this._nbpNegoziazione = false;
        /**
         * testo del placeholder
         */
        this.placeholder = '';
        /**
         * Evento sollevato quando il valore del componente cambia
         */
        this.nbpValueChange = new EventEmitter();
        /**
         * (Opzionale) Funzione custom di validazione del campo
         */
        this.nbpValidation = new EventEmitter();
    }
    /**
     * (Opzionale)
     * Flag che abilita/disabilita il componente.
     * Valore di default false
     */
    get disabled() {
        if (this.parentFormContainer && this.parentFormContainer.disabled) {
            this._nbpDisabled = true;
        }
        return this._nbpDisabled;
    }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
     * (Opzionale)
     * Flag che abilita/disabilita il required sul componente.
     * Valore di default false
     */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
     * (Opzionale)
     * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
     * Valore di default false
     */
    get nbpShowValidation() {
        if (this.parentFormContainer) {
            this._nbpShowValidation = this.parentFormContainer.nbpShowValidation;
        }
        return this._nbpShowValidation;
    }
    ;
    set nbpShowValidation(value) { this._nbpShowValidation = coerceBooleanProperty(value); }
    /**
     * (Opzionale)
     * Se impostato, modifica l'aspetto dello spinner. Di default è
     */
    get nbpNegoziazione() {
        return this._nbpNegoziazione;
    }
    set nbpNegoziazione(value) {
        this._nbpNegoziazione = value;
    }
    _onSubtractClick(event) {
        if (this.value !== undefined && this.value > this.min) {
            this.value--;
            this._emitChangeEvent(event);
        }
        else {
            this.value = this.min;
        }
    }
    _onAddClick(event) {
        if (this.value !== undefined && this.value < this.max) {
            this.value++;
            this._emitChangeEvent(event);
        }
        else {
            this.value = this.min;
        }
    }
    _onTouchedEvent(event) {
        this.touch();
    }
    _emitChangeEvent(event) {
        this.nbpValueChange.emit(this.value);
        this.nbpValidation.emit(this.model);
    }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        /*if (!this.nbpShowValidation) {
          this.nbpShowValidation = false;
        }*/
        if (this.min === undefined) {
            this.min = 0;
        }
        if (this.max === undefined) {
            this.max = 99;
        }
    }
};
__decorate$98([
    Input(),
    __metadata$80("design:type", Object)
], NbpSpinnerComponent.prototype, "id", void 0);
__decorate$98([
    Input(),
    __metadata$80("design:type", String)
], NbpSpinnerComponent.prototype, "name", void 0);
__decorate$98([
    Input(),
    __metadata$80("design:type", Number)
], NbpSpinnerComponent.prototype, "min", void 0);
__decorate$98([
    Input(),
    __metadata$80("design:type", Number)
], NbpSpinnerComponent.prototype, "max", void 0);
__decorate$98([
    Input(),
    __metadata$80("design:type", Boolean),
    __metadata$80("design:paramtypes", [Object])
], NbpSpinnerComponent.prototype, "disabled", null);
__decorate$98([
    Input(),
    __metadata$80("design:type", Boolean),
    __metadata$80("design:paramtypes", [Object])
], NbpSpinnerComponent.prototype, "required", null);
__decorate$98([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$80("design:type", Boolean),
    __metadata$80("design:paramtypes", [Object])
], NbpSpinnerComponent.prototype, "nbpShowValidation", null);
__decorate$98([
    HostBinding('class.negotiation'),
    Input(),
    __metadata$80("design:type", Boolean),
    __metadata$80("design:paramtypes", [Object])
], NbpSpinnerComponent.prototype, "nbpNegoziazione", null);
__decorate$98([
    Input(),
    __metadata$80("design:type", Object)
], NbpSpinnerComponent.prototype, "placeholder", void 0);
__decorate$98([
    Input(),
    __metadata$80("design:type", String)
], NbpSpinnerComponent.prototype, "nbpErrorMessage", void 0);
__decorate$98([
    Output(),
    __metadata$80("design:type", EventEmitter)
], NbpSpinnerComponent.prototype, "nbpValueChange", void 0);
__decorate$98([
    Output(),
    __metadata$80("design:type", EventEmitter)
], NbpSpinnerComponent.prototype, "nbpValidation", void 0);
__decorate$98([
    ViewChild(NgModel),
    __metadata$80("design:type", NgModel)
], NbpSpinnerComponent.prototype, "model", void 0);
NbpSpinnerComponent = __decorate$98([
    Component({
        selector: 'nbp-spinner',
        template: "<div class=\"spinner-container\"><div class=\"left\"><button class=\"spinner-button\" (click)=\"_onSubtractClick($event)\" [disabled]=\"value <= min || disabled\" (blur)=\"_onTouchedEvent($event)\"><span>-</span></button></div><div class=\"spinner-input-container\"><input type=\"number\" class=\"spinner-input\" name=\"spinnerValue\" [placeholder]=\"placeholder\" [(ngModel)]=\"value\" [min]=\"min\" [max]=\"max\" (blur)=\"_onTouchedEvent($event)\"></div><div class=\"right\"><button class=\"spinner-button\" (click)=\"_onAddClick($event)\" [disabled]=\"value >= max || disabled\" (blur)=\"_onTouchedEvent($event)\"><span>+</span></button></div></div>",
        styles: [":host(.ng-touched.ng-invalid,.nbp-show-validation.ng-invalid) .spinner-container{background-color:#fff;border:2px solid #c63200;border-radius:2px}:host(.negotiation) .spinner-input{font-size:14px!important;font-weight:400!important;color:#6f6f6f!important}:host(.negotiation) .spinner-button{width:30px!important;height:40px!important;background-color:#258900!important}.spinner-container{background-color:#fff;border:2px solid #323232;border-radius:2px;padding:4px;height:auto;overflow:auto;display:table;table-layout:fixed;width:100%}.spinner-container:disabled{background-color:#ccc}.spinner-container .left{width:30px;text-align:left;display:table-cell;vertical-align:middle}.spinner-container .left span{vertical-align:3px}.spinner-container .right{width:30px;text-align:right;display:table-cell;vertical-align:middle}.spinner-container .spinner-button{width:30px;height:32px;background-color:#258900;font-size:24px;line-height:24px;color:#fff;border:none;border-radius:2px}.spinner-container .spinner-button:disabled{background-color:#ccc}.spinner-container .spinner-input{border:none;height:32px;text-align:center;font-size:16px;color:#323232;width:100%}.spinner-container input[type=number]::-webkit-input-placeholder{text-overflow:ellipsis!important}.spinner-container input[type=number]:placeholder-shown{text-overflow:ellipsis!important}.spinner-container input:-ms-input-placeholder{-ms-text-overflow:ellipsis;text-overflow:ellipsis!important}.spinner-container input[type=number]::-moz-placeholder{text-overflow:ellipsis!important}.spinner-container input[type=number]::placeholder{text-overflow:ellipsis!important}.spinner-container .spinner-input-container{display:table-cell;vertical-align:middle}.spinner-container input[type=number]::-webkit-inner-spin-button,.spinner-container input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none}.spinner-container input[type=number]{-moz-appearance:textfield}.spinner-container input[type=number]::-ms-clear{display:none} /*# sourceMappingURL=nbp-spinner.component.css.map */ "],providers: [NBP_SPINNER_CONTROL_VALUE_ACCESSOR, NBP_INPUT_ELEMENT_BASE$4]
    }),
    __param$17(0, Optional()), __param$17(0, Inject(NG_VALIDATORS)),
    __param$17(1, Optional()), __param$17(1, Inject(NG_ASYNC_VALIDATORS)),
    __param$17(2, Optional()),
    __metadata$80("design:paramtypes", [Array, Array, NbpFormContainerComponent,
        Injector])
], NbpSpinnerComponent);

var __decorate$99 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$81 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente che visualizza una barra per la selezione
 * di schede
 */
let NbpTabBarComponent = class NbpTabBarComponent {
    constructor() {
        this._selectedTabIndex = 0;
        /**
         * Evento emesso dopo la selezione di una scheda
         */
        this.nbpSelectedIndexChange = new EventEmitter();
    }
    /**
     * Array di oggetti ITabItem che descrivono
     * le schede
     */
    set nbpItems(value) {
        setTimeout(function () {
            this._tabItems = value;
            // if (this._tabItems && this._tabItems.length > 0) {
            //   this.nbpSelectedIndex = 0;
            // }
        }.bind(this), 0);
    }
    get nbpItems() {
        return this._tabItems;
    }
    /**
     * Indice della scheda selezionata
     */
    set nbpSelectedIndex(value) {
        this._selectedTabIndex = value;
        this.nbpSelectedIndexChange.emit(this._selectedTabIndex);
    }
    get nbpSelectedIndex() {
        return this._selectedTabIndex;
    }
    /**
     * Metodo per selezionare una scheda
     */
    selectTab(index) {
        if (this._selectedTabIndex !== index) {
            this.nbpSelectedIndex = index;
        }
    }
};
__decorate$99([
    Input(),
    __metadata$81("design:type", Array),
    __metadata$81("design:paramtypes", [Array])
], NbpTabBarComponent.prototype, "nbpItems", null);
__decorate$99([
    Input(),
    __metadata$81("design:type", Number),
    __metadata$81("design:paramtypes", [Number])
], NbpTabBarComponent.prototype, "nbpSelectedIndex", null);
__decorate$99([
    Output(),
    __metadata$81("design:type", Object)
], NbpTabBarComponent.prototype, "nbpSelectedIndexChange", void 0);
NbpTabBarComponent = __decorate$99([
    Component({
        selector: 'nbp-tab-bar',template: "<div class=\"tabs-container\"><div *ngFor=\"let tabItem of nbpItems; let i = index\" class=\"tab-container\" [ngClass]=\"tabItem.disabled ? 'disabledTab' : 'enabledTab'\" [class.selected]=\"nbpSelectedIndex == i\" (click)=\"selectTab(i)\"><i [ngClass]=\"tabItem.icon\"></i> <span class=\"tab-title\">{{tabItem.title}}</span></div></div>",
        styles: [".tabs-container{display:flex}.tabs-container .disabledTab{pointer-events:none;cursor:not-allowed;opacity:.5;background-color:#d6d6d6}.tabs-container .enabledTab{pointer-events:auto;background-color:#f8f8f8;cursor:pointer;opacity:1}.tabs-container .tab-container{height:5.4375em;border-right:.0625em solid #ccc;text-align:center;flex-grow:1;flex-basis:0;padding:.625em}.tabs-container .tab-container:last-of-type{border:0}.tabs-container .tab-container.selected{background-color:#fff;height:5.375em}.tabs-container .tab-container.selected i{color:#258900}.tabs-container .tab-container.selected .tab-title{color:#258900}.tabs-container .tab-container i{display:block;font-size:1.5em;color:#6f6f6f}.tabs-container .tab-container .tab-title{text-transform:uppercase;color:#6f6f6f;font-size:.75em;display:inline-block;line-height:1;font-weight:600;margin-top:.625em;margin-bottom:.625em}:host-context(.contrasto-on) .tabs-container .disabledTab{background-color:#d6d6d6!important}:host-context(.contrasto-on) .tabs-container .enabledTab{background-color:#fff!important}:host-context(.contrasto-on) .tabs-container .tab-container{border:.0625em solid #000!important}:host-context(.contrasto-on) .tabs-container .tab-container.selected{background-color:#000!important;height:5.4375em}:host-context(.contrasto-on) .tabs-container .tab-container.selected i{color:#fff!important}:host-context(.contrasto-on) .tabs-container .tab-container.selected .tab-title{color:#fff!important}:host-context(.contrasto-on) .tabs-container .tab-container i{color:#000!important}:host-context(.contrasto-on) .tabs-container .tab-container .tab-title{color:#000!important} /*# sourceMappingURL=nbp-tab-bar.component.css.map */ "]
    }),
    __metadata$81("design:paramtypes", [])
], NbpTabBarComponent);

var __decorate$100 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$82 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$18 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let GlobalLoadingIdentificationService = class GlobalLoadingIdentificationService {
};
GlobalLoadingIdentificationService = __decorate$100([
    Injectable()
], GlobalLoadingIdentificationService);
let NbpLoadingInterceptor = class NbpLoadingInterceptor {
    constructor(loadingService, globalLoadingIdentifier) {
        this.loadingService = loadingService;
        this.loadingId = globalLoadingIdentifier.identifier ? globalLoadingIdentifier.identifier : null;
    }
    intercept(req, next) {
        let disableLoading = false;
        if (req && req.params.has('disableLoading')) {
            disableLoading = true;
        }
        return next
            .handle(req)
            .do(event => {
            if (disableLoading) {
                return;
            }
            if (event instanceof HttpResponse) {
                console.log(`Http Interceptor stop loading spinner (id: ${this.loadingId}) ...`);
                this.loadingService.notifyLoadingSpinnerRequest(false, this.loadingId);
            }
            else {
                console.log('Http Interceptor start loading spinner (id: ${this.loadingId}) ...');
                this.loadingService.notifyLoadingSpinnerRequest(true, this.loadingId);
            }
        })
            .catch(response => {
            if (!disableLoading && response instanceof HttpErrorResponse) {
                console.log('Http Interceptor stop loading spinner...');
                this.loadingService.notifyLoadingSpinnerRequest(false, this.loadingId);
            }
            return Observable.throw(response);
        });
    }
};
NbpLoadingInterceptor = __decorate$100([
    Injectable(),
    __param$18(1, Optional()),
    __metadata$82("design:paramtypes", [NbpLoadingService,
        GlobalLoadingIdentificationService])
], NbpLoadingInterceptor);

var __decorate$101 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$83 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpDebugInfoComponent = class NbpDebugInfoComponent {
    constructor() {
        this._primary = NbpStyle.PRIMARY;
        this._copyMessage = null;
        this._isErrorCopied = false;
    }
    ngOnChanges(changes) {
        if (changes.nbpError) {
            this._copyMessage = null;
            this._isErrorCopied = true;
        }
    }
    copyText(event) {
        let a = document.getElementById('error-infobox');
        try {
            a.select();
            document.execCommand('copy');
            if (document.selection) {
                document.selection.empty();
            }
            else if (window.getSelection) {
                window.getSelection().removeAllRanges();
            }
            this._copyMessage = 'Errore copiato correttamente nella clipboard.';
            this._isErrorCopied = true;
        }
        catch (err) {
            this._copyMessage = 'Problemi durante la copia del testo. Ritentare.';
            this._isErrorCopied = false;
        }
        setTimeout(() => {
            this._copyMessage = null;
            this._isErrorCopied = null;
        }, 5000);
    }
};
__decorate$101([
    Input(),
    __metadata$83("design:type", Object)
], NbpDebugInfoComponent.prototype, "nbpError", void 0);
NbpDebugInfoComponent = __decorate$101([
    Component({
        selector: 'nbp-debug-info',template: "<textarea class=\"info-box\" id=\"error-infobox\" readonly=\"readonly\">{{nbpError | json}}</textarea><div class=\"row\"><div class=\"col-xs-4 col-xs-offset-10 text-center mrg-t-15\"><nbp-button nbpLabel=\"Copia Errore\" [nbpStyle]=\"_primary\" (nbpClick)=\"copyText($event)\"></nbp-button></div><div class=\"col-md-24 text-center mrg-t-15\"><div class=\"row mrg-t-15\"><div *ngIf=\"!!_copyMessage\" class=\"col-md-24\"><span class=\"copy-error-message\" [ngClass]=\"{'success':_isErrorCopied , 'unsuccess':!_isErrorCopied}\">{{ _copyMessage }}</span></div></div></div></div>",
        styles: [".info-box{width:100%;height:200px;padding:12px 20px;box-sizing:border-box;border:2px solid #ccc;border-radius:4px;background-color:#f8f8f8;resize:none}.copy-error-message{font-size:20px;font-weight:700}.copy-error-message.success{color:#258900}.copy-error-message.unsuccess{color:#c63200} /*# sourceMappingURL=nbp-debug-info.component.css.map */ "]
    }),
    __metadata$83("design:paramtypes", [])
], NbpDebugInfoComponent);

var __decorate$102 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$84 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpErrorAdviceComponent = class NbpErrorAdviceComponent {
    constructor() {
        this._nbpButtonStyle = NbpStyle.PRIMARY;
        this.onError = new EventEmitter();
    }
    ngOnInit() {
        if (!this.nbpAdvice) {
            this.nbpAdvice = 'Attenzione, c\'è stato un errore durante la procedura, si prega di annullare e riprovare più tardi.';
        }
        if (!this.nbpActionLabel) {
            this.nbpActionLabel = 'Annulla';
        }
    }
    _onActionButtonClick() {
        this.onError.emit();
    }
};
__decorate$102([
    Input(),
    __metadata$84("design:type", String)
], NbpErrorAdviceComponent.prototype, "nbpAdvice", void 0);
__decorate$102([
    Input(),
    __metadata$84("design:type", String)
], NbpErrorAdviceComponent.prototype, "nbpActionLabel", void 0);
__decorate$102([
    Output(),
    __metadata$84("design:type", EventEmitter)
], NbpErrorAdviceComponent.prototype, "onError", void 0);
NbpErrorAdviceComponent = __decorate$102([
    Component({
        selector: 'nbp-error-advice',template: "<div class=\"content\"><p class=\"advice-container alert alert-danger\">{{nbpAdvice}}</p><div class=\"button-container\"><nbp-button [nbpLabel]=\"nbpActionLabel\" [nbpStyle]=\"_nbpButtonStyle\" (nbpClick)=\"_onActionButtonClick()\"></nbp-button></div></div>",
        styles: [".content{margin-top:10px;margin-right:auto;margin-bottom:10px;margin-left:auto}.button-container{text-align:center;padding-top:10px;padding-left:10px;padding-bottom:10px;padding-right:10px}.advice-container{text-align:center;padding-top:10px;padding-left:10px;padding-bottom:10px;padding-right:10px} /*# sourceMappingURL=nbp-error-advice.component.css.map */ "]
    }),
    __metadata$84("design:paramtypes", [])
], NbpErrorAdviceComponent);

var __decorate$103 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$85 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSignTypeSelectComponent = class NbpSignTypeSelectComponent {
    constructor() {
        /**
         * Evento emesso al click sui radio button di scelta del primo Step
         * @param {EventEmitter<ISignTypeData>}  nbpOnFirstStepSelect
         */
        this.nbpOnFirstStepSelect = new EventEmitter();
        /**
         * Evento emesso al click sui radio button di scelta del secondo step
         * @param {EventEmitter<ISignTypeData>}  nbpOnSecondStepSelect
         */
        this.nbpOnSecondStepSelect = new EventEmitter();
    }
    ngOnInit() {
        if (!this.nbpData) {
            this.nbpData = {
                firstStepValue: '',
                secondStepValue: ''
            };
        }
    }
    _onFirstStepSelect(event) {
        this.nbpData.firstStepValue = event;
        console.log('NbpSignTypeSelectComponent - Emitting nbpOnFirstStepSelect');
        console.dir(this.nbpData);
        this.nbpOnFirstStepSelect.emit(this.nbpData);
    }
    _onSecondStepSelect(event) {
        this.nbpData.secondStepValue = event;
        console.log('NbpSignTypeSelectComponent - Emitting nbpOnSecondStepSelect');
        console.dir(this.nbpData);
        this.nbpOnSecondStepSelect.emit(this.nbpData);
    }
};
__decorate$103([
    Input(),
    __metadata$85("design:type", Object)
], NbpSignTypeSelectComponent.prototype, "nbpCustomer", void 0);
__decorate$103([
    Input(),
    __metadata$85("design:type", Array)
], NbpSignTypeSelectComponent.prototype, "nbpFirstStepValues", void 0);
__decorate$103([
    Input(),
    __metadata$85("design:type", Array)
], NbpSignTypeSelectComponent.prototype, "nbpSecondStepValues", void 0);
__decorate$103([
    Input(),
    __metadata$85("design:type", Object)
], NbpSignTypeSelectComponent.prototype, "nbpData", void 0);
__decorate$103([
    Output(),
    __metadata$85("design:type", EventEmitter)
], NbpSignTypeSelectComponent.prototype, "nbpOnFirstStepSelect", void 0);
__decorate$103([
    Output(),
    __metadata$85("design:type", EventEmitter)
], NbpSignTypeSelectComponent.prototype, "nbpOnSecondStepSelect", void 0);
NbpSignTypeSelectComponent = __decorate$103([
    Component({
        selector: 'nbp-sign-type-select ',template: "<div class=\"row sign-container\"><div class=\"col-xs-24 col-sm-8 col-md-8 sign-customer-section\"><div class=\"row\"><div class=\"col-xs-offset-2 col-sm-offset-3 col-md-offset-3\"><div class=\"customer-circle-info\">{{nbpCustomer.circleInfo}}</div><div class=\"customer-section-title\">Cliente:</div><div class=\"customer-section-info\">{{nbpCustomer.info}}</div></div></div></div><div class=\"col-xs-24 col-sm-7 col-md-7 sign-place-section\"><nbp-radio-selection [nbpRadioList]=\"nbpFirstStepValues\" [nbpData]=\"nbpData.firstStepValue\" (nbpOnSelection)=\"_onFirstStepSelect($event)\"></nbp-radio-selection></div><div class=\"col-xs-24 col-sm-9 col-md-9 sign-type-section\"><nbp-radio-selection [nbpRadioList]=\"nbpSecondStepValues\" [nbpData]=\"nbpData.secondStepValue\" (nbpOnSelection)=\"_onSecondStepSelect($event)\"></nbp-radio-selection></div></div>",
        styles: [".sign-container{padding-top:20px;padding-bottom:20px}.sign-customer-section{background-color:#fff;min-height:145px;border:1px solid #ccc}.customer-section-title{font-size:1em;font-weight:700;padding-top:24px}.customer-section-info{font-size:1em;padding-top:6px}.customer-circle-info{width:40px;height:40px;border:1px solid #ccc;border-radius:40px;background:#fff;position:absolute;top:-20px;text-align:center;font-weight:700;padding-top:8px;color:#89bc72}.sign-place-section{background-color:#f2f2f2;min-height:145px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;padding-top:10px}.sign-place-section:before{content:'';display:block;width:20px;height:20px;background-color:#f2f2f2;border-top:1px solid #ccc;border-left:1px solid #ccc;position:absolute;transform-origin:top left;transform:rotate(-45deg) translateX(-20px);top:34px;left:0}.sign-type-section{background-color:#e3e3e3;min-height:145px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;padding-top:10px}.sign-type-section:before{content:'';display:block;width:20px;height:20px;background-color:#e3e3e3;border-top:1px solid #ccc;border-left:1px solid #ccc;position:absolute;transform-origin:top left;transform:rotate(-45deg) translateX(-20px);top:34px;left:0}::ng-deep nbp-radio .radio-label{font-weight:300!important;font-size:1em!important;padding-top:10px}@media screen and (max-width:767px){.sign-place-section{border-top:0 solid transparent;border-left:1px solid #ccc!important}.sign-place-section:before{border-top:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;top:-15px;left:34px}.sign-type-section{border-top:0 solid transparent;border-left:1px solid #ccc!important}.sign-type-section:before{border-top:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;top:-15px;left:34px}} /*# sourceMappingURL=nbp-sign-type-select.component.css.map */ "]
    }),
    __metadata$85("design:paramtypes", [])
], NbpSignTypeSelectComponent);

/**
 * Elenco Sign Description censite
 */
var SignDescription;
(function (SignDescription) {
    SignDescription[SignDescription["ALTRO"] = 0] = "ALTRO";
    SignDescription[SignDescription["ALTRO_REMOTA"] = 1] = "ALTRO_REMOTA";
    SignDescription[SignDescription["CARTACEA"] = 2] = "CARTACEA";
    SignDescription[SignDescription["DIGITALE_REMOTA"] = 3] = "DIGITALE_REMOTA";
    SignDescription[SignDescription["GRAFOMETRICA"] = 4] = "GRAFOMETRICA";
})(SignDescription || (SignDescription = {}));
/**
 * Elenco Sign Type censiti
 */
var SignType;
(function (SignType) {
    SignType[SignType["CARTA"] = 2] = "CARTA";
    SignType[SignType["FEA"] = 1] = "FEA";
    SignType[SignType["FDR"] = 0] = "FDR";
    SignType[SignType["FEA_RIATTIVAZIONE"] = 3] = "FEA_RIATTIVAZIONE";
    // FIRMA_ELETTRONICA_AVANZATA = 'FEA',
    // FIRMA_DIGITALE_REMOTA = 'FDR',
    // RIATTIVAZIONE_FEA = 'RIATTIVAZIONE_FIRMA_FEA',
    // FIRMA_CARTACEA = 'FIRMA_CARTACEA'
})(SignType || (SignType = {}));

var __decorate$104 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$86 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSignInfoHeaderComponent = class NbpSignInfoHeaderComponent {
    constructor() { }
    ngOnInit() {
        this._signDescriptionInfo = this._getSignInfo();
    }
    // TODO DA CAMBIARE TESTO E ICONE
    _getSignInfo() {
        let signInfo;
        switch (this.nbpSignDescription) {
            case SignDescription.ALTRO:
                signInfo = { text: 'Firma Altro', icon: 'icomoon-Firma_3' };
                break;
            case SignDescription.ALTRO_REMOTA:
                signInfo = { text: 'Firma altro remota', icon: 'icomoon-Firma_2' };
                break;
            case SignDescription.CARTACEA:
                signInfo = { text: 'Firma Cartacea', icon: 'icomoon-Firma_4' };
                break;
            case SignDescription.GRAFOMETRICA:
                signInfo = { text: 'Firma Grafometrica', icon: 'icomoon-Firma_3' };
                break;
            default:
                signInfo = { text: 'Firma digitale remota', icon: 'icomoon-Firma_2' };
                break;
        }
        return signInfo;
    }
};
__decorate$104([
    Input(),
    __metadata$86("design:type", Number)
], NbpSignInfoHeaderComponent.prototype, "nbpSignDescription", void 0);
__decorate$104([
    Input(),
    __metadata$86("design:type", Object)
], NbpSignInfoHeaderComponent.prototype, "nbpCustomerInfo", void 0);
NbpSignInfoHeaderComponent = __decorate$104([
    Component({selector: 'nbp-sign-info-header',
        template: "<div class=\"row sign-info-header-container\"><div class=\"col-xs-12 col-sm-12 col-md-12 sign-type-section\"><div class=\"sign-info-icon\"><span [class]=\"_signDescriptionInfo.icon\"></span></div><div class=\"sign-info-text\">{{_signDescriptionInfo.text}}</div></div><div class=\"col-xs-12 col-sm-12 col-md-12 sign-customer-info-section\"><div class=\"customer-info-container\"><div class=\"customer-info-label\">Cliente:</div><div class=\"customer-info-text\">{{nbpCustomerInfo?.info}}</div></div></div></div>",
        styles: [".sign-info-header-container{padding-top:20px;padding-bottom:20px}.base-section{min-height:120px;position:relative}.sign-type-section{min-height:120px;position:relative;background-color:#fff;border:1px solid #ccc}.sign-customer-info-section{min-height:120px;position:relative;background-color:#e3e3e3;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;padding-top:10px}.sign-customer-info-section:before{content:'';display:block;width:20px;height:20px;background-color:#e3e3e3;border-top:1px solid #ccc;border-left:1px solid #ccc;position:absolute;transform-origin:top left;transform:rotate(-45deg) translateX(-12px) translateY(-50%);top:50%;left:0}@media screen and (max-width:767px){.sign-customer-info-section{border-top:0 solid transparent;border-left:1px solid #ccc!important}.sign-customer-info-section:before{border-top:1px solid #ccc;border-right:1px solid #ccc;border-left:0 solid transparent;top:-15px;left:34px}}.sign-info-text{padding:0 0 0 100px;font-size:25px;top:50%;transform:translateY(-50%);position:absolute;color:#258900}.sign-info-icon{position:absolute;font-size:60px;top:-37px;left:50px;background-color:inherit;padding:0 10px 0 10px}.customer-info-container{padding-left:50px;position:absolute;top:50%;transform:translateY(-50%)}.customer-info-label{font-weight:700}.customer-info-text{padding-top:6px} /*# sourceMappingURL=nbp-sign-info-header.component.css.map */ "]
    }),
    __metadata$86("design:paramtypes", [])
], NbpSignInfoHeaderComponent);

var __decorate$105 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$87 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpRadioSelectionComponent = class NbpRadioSelectionComponent {
    constructor() {
        /**
         * Evento emesso al click sui radio button
         * @param {EventEmitter<any>}  nbpOnSelection
         */
        this.nbpOnSelection = new EventEmitter();
    }
    ngOnInit() { }
    ngOnChanges(changes) {
        if (changes.nbpRadioList) {
            this._radioList = this.nbpRadioList.length > 3 ? this.nbpRadioList.slice(0, 3) : this.nbpRadioList.slice();
            this._radioList.filter((radioElement) => radioElement.value === this.nbpData);
            if (!this._isNbpDataValid()) {
                this.nbpData = null;
            }
        }
    }
    _onSelection(value) {
        console.log('nbpRadioSelectionComponent - Emiting: nbpOnSelection', value);
        this.nbpOnSelection.emit(value);
    }
    _isNbpDataValid() {
        return this._radioList.filter((radioElement) => radioElement && radioElement.value === this.nbpData).length > 0;
    }
};
__decorate$105([
    Input(),
    __metadata$87("design:type", Array)
], NbpRadioSelectionComponent.prototype, "nbpRadioList", void 0);
__decorate$105([
    Input(),
    __metadata$87("design:type", String)
], NbpRadioSelectionComponent.prototype, "nbpData", void 0);
__decorate$105([
    Output(),
    __metadata$87("design:type", EventEmitter)
], NbpRadioSelectionComponent.prototype, "nbpOnSelection", void 0);
NbpRadioSelectionComponent = __decorate$105([
    Component({
        selector: 'nbp-radio-selection',template: "<div class=\"row\"><div *ngFor=\"let elementList of _radioList\" class=\"col-xs-offset-2 col-sm-offset-2 col-md-offset-2\"><div class=\"row\" [hidden]=\"elementList?.hide\"><span *ngIf=\"!!elementList?.icon\" class=\"col-xs-4 col-sm-4 col-md-4 sign-icon\" [ngClass]=\"elementList?.icon\"></span><nbp-radio name=\"offerta\" nbpSelectionSign=\"spunta\" nbpDisplayInline [disabled]=\"elementList?.disabled\" [nbpLabel]=\"elementList?.label\" [value]=\"elementList?.value\" [(ngModel)]=\"nbpData\" (change)=\"_onSelection(elementList.value)\"></nbp-radio></div></div></div>",
        styles: [".sign-icon{font-size:1.9em} /*# sourceMappingURL=nbp-radio-selection.component.css.map */ "]
    }),
    __metadata$87("design:paramtypes", [])
], NbpRadioSelectionComponent);

var __decorate$108 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$90 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// TODO cercare di no usare <any> 
// interface AvailableActiveXControls {
//   splayer: any, //ctiveXObject o meglio SplayerType
//   tube: any
// }
// interface Window {
//   [keyof AvailableActiveXControls]:any
// }
let NbpSpilayerUtilityService = class NbpSpilayerUtilityService {
    constructor() {
        this.linkActiveXReference();
    }
    get activeXId() {
        return this._activeXId;
    }
    set activeXId(id) {
        this._activeXId = id;
    }
    linkActiveXReference() {
        console.log('Linking ActiveX Reference for id ' + this._activeXId);
        if (this._activeXId) {
            this._activeX = window[this._activeXId];
        }
        console.log('Linking ActiveX Reference found ' + this._activeX);
        if (this._activeX) {
            console.log('Linking ActiveX Reference method ' + this._activeX.IsISPADContrattiEnabled);
        }
    }
    isActiveXInstantiated() {
        let activeXinstantiated = !!this._activeX;
        if (activeXinstantiated && !this._activeX.IsISPADContrattiEnabled) {
            console.warn("ActiveX present but method not recognized");
            activeXinstantiated = false;
        }
        return activeXinstantiated;
    }
    isISPADContrattiEnabled() {
        let operationResut = false;
        if (this.isActiveXInstantiated()) {
            operationResut = this._activeX.IsISPADContrattiEnabled();
            console.log('ISPAD Contratti attivo: ' + operationResut);
        }
        return operationResut;
    }
    printContract(xml) {
        if (this.isActiveXInstantiated()) {
            return this._activeX.PrintContract(xml);
        }
        return false;
    }
    setLeanBankingEndPoint(endPoint, port) {
        if (this.isActiveXInstantiated()) {
            this._activeX.SetLeanBankingEndPoint(endPoint, port);
        }
        else {
            console.log("Impossibile modificare LeanBankingEndPoint");
        }
    }
    printDatiXml(xml, sincrono, descrizione) {
        if (this.isActiveXInstantiated()) {
            return this._activeX.PrintDatiXml(xml, sincrono, descrizione);
        }
        return false;
    }
    openBrowser(xml) {
        if (this.isActiveXInstantiated()) {
            return this._activeX.OpenBrowser(xml);
        }
        return false;
    }
    isPadPresent() {
        if (this.isActiveXInstantiated()) {
            return this._activeX.IsPadPresent();
        }
        return false;
    }
    isTabletPresent() {
        if (this.isActiveXInstantiated()) {
            return this._activeX.IsTabletPresent();
        }
        return false;
    }
    closeBrowser(caption, message, type) {
        if (this.isActiveXInstantiated()) {
            this._activeX.CloseBrowser(caption, message, type);
        }
    }
    showISPADContratti() {
        if (this.isActiveXInstantiated()) {
            this._activeX.ShowISPADContratti();
        }
    }
};
NbpSpilayerUtilityService = __decorate$108([
    Injectable(),
    __metadata$90("design:paramtypes", [])
], NbpSpilayerUtilityService);

var __decorate$109 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$91 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Servizio Mock di collegamento con ActiveX SPILayerMulticanale
 */
let SpilayerMockUtilityService = class SpilayerMockUtilityService {
    constructor() {
        this._activeXId = 'MockActveX';
        // Per ora non usati, forse per usarli dovremmo ritornare degli observavle<boolean> al posto
        // di boolean
        this._spilayerEventStream = new BehaviorSubject('');
        this._spilayerSignResultStream = new BehaviorSubject({ event: '', result: false });
    }
    // ADD EVENT_STREAM (implementato)
    // in firmdebug, ancora da implementare --> add SIGN_RESULT_STREAM
    get activeXId() {
        return this._activeXId;
    }
    set activeXId(id) {
        this._activeXId = id;
    }
    linkActiveXReference() {
        console.log('Mock linkActiveXReference()');
    }
    isActiveXInstantiated() {
        return true;
    }
    isISPADContrattiEnabled() {
        this._spilayerEventStream.next('isISPADContrattiEnabled');
        let result = confirm(`Operazione isISPADContrattiEnabled (mock) selezionare valore di ritorno.\n 
                         Ok     -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione isISPADContrattiEnabled ${result}`);
        return result;
    }
    printContract(xml) {
        this._spilayerEventStream.next('printContract');
        let result = confirm(`Firma FEA - Operazione PrintContract (mock) selezionare valore di ritorno.\n 
                         Ok     -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione PrintContract ${result}`);
        return result;
    }
    setLeanBankingEndPoint(endPoint, port) {
        this._spilayerEventStream.next('setLeanBankingEndPoint');
        console.log("SpilayerMockUtilityService - setLeanBankingEndPoint");
        alert(`Invocazione Operazione setLeanBankingEndPoint (mock).`);
    }
    printDatiXml(xml, sincrono, descrizione) {
        this._spilayerEventStream.next('printDatiXml');
        let result = confirm(`Firma FEA - Operazione printDatiXml (mock) selezionare valore di ritorno.\n 
                         Ok     -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione printDatiXml ${result}`);
        return result;
    }
    openBrowser(xml) {
        this._spilayerEventStream.next('openBrowser');
        let result = confirm(`Firma FDR - Operazione openBrowser (mock) selezionare valore di ritorno.\n 
                         Ok -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione openBrowser ${result}`);
        return result;
    }
    isPadPresent() {
        this._spilayerEventStream.next('isPadPresent');
        let result = confirm(`Firma FEA - Operazione isPadPresent (mock) selezionare valore di ritorno.\n 
                         Ok     -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione isPadPresent ${result}`);
        return result;
    }
    isTabletPresent() {
        this._spilayerEventStream.next('isTabletPresent');
        let result = confirm(`Firma FEA - Operazione isTabletPresent (mock) selezionare valore di ritorno.\n 
                         Ok     -> response true \n 
                         Cancel -> response false`);
        console.log(`Risultato dell'operazione isTabletPresent ${result}`);
        return result;
    }
    closeBrowser(caption, message, type) {
        this._spilayerEventStream.next('closeBrowser');
        console.log("SpilayerMockUtilityService - closeBrowser");
        alert(`Invocazione Operazione closeBrowser (mock).`);
    }
    showISPADContratti() {
        this._spilayerEventStream.next('showISPADContratti');
        console.log("SpilayerMockUtilityService - showISPADContratti");
        alert(`Invocazione Operazione showISPADContratti (mock).`);
    }
};
SpilayerMockUtilityService = __decorate$109([
    Injectable(),
    __metadata$91("design:paramtypes", [])
], SpilayerMockUtilityService);

var __decorate$107 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$89 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$19 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpSpilayerService = class NbpSpilayerService {
    constructor(appConfig, spilayerUtility, mockSpilayerUtility) {
        this.appConfig = appConfig;
        this.spilayerUtility = spilayerUtility;
        this.mockSpilayerUtility = mockSpilayerUtility;
        // TODOREVIEW caricamento dell' ambiente in APP_INITIALIZER
        if (this.appConfig && this.appConfig.getApplicationInfo) {
            this.appConfig.getApplicationInfo().subscribe((appInfo) => {
                this._environment = appInfo.environment;
            });
        }
        if (spilayerUtility.isActiveXInstantiated()) {
            this.activeXUtility = spilayerUtility;
            console.log('SPILayerMulticanale ActiveX istanziato nel costruttore');
        }
    }
    /** refresh dell' ActiveX dopo che il tag è stato istanziato nella pagina */
    updateActiveXReference(objectId) {
        console.log('updateActiveXReference ' + objectId);
        if (this.spilayerUtility) {
            this.spilayerUtility.activeXId = objectId;
            this.spilayerUtility.linkActiveXReference();
        }
        if (this.mockSpilayerUtility) {
            this.mockSpilayerUtility.activeXId = objectId;
            // TODO REVIEW this.mockSpilayerUtility.linkActiveXReference();
        }
        this.selectSpilayerIfActiveXAvailable();
    }
    selectSpilayerIfActiveXAvailable() {
        console.log('SPILayerMulticanale selectActiveXOrMock()');
        if (this.spilayerUtility.isActiveXInstantiated()) {
            this.activeXUtility = this.spilayerUtility;
            console.log('SPILayerMulticanale ActiveX istanziato');
        }
        else {
            if (this._environment && this._environment === 'PRODUZIONE') {
                console.warn('SPILayerMulticanale non istanziato!');
                //TODO verificare se visualizzare modale errore
            }
            else {
                this.activeXUtility = this.mockSpilayerUtility;
                console.log('SPILayerMulticanale Mock istanziato in selectSpilayerIfActiveXAvailable');
            }
        }
    }
    // WARNING se ISPAD non attivo
    isISPADContrattiEnabled() {
        if (!this.activeXUtility) {
            console.warn('SPILayerMulticanale not istantiated!');
            return false;
        }
        let operationResult = this.activeXUtility.isISPADContrattiEnabled();
        console.log('ISPAD Contratti attivo: ' + operationResult);
        return operationResult;
    }
    printContract(xml) {
        if (!this.activeXUtility) {
            console.warn('SPILayerMulticanale not istantiated!');
            return false;
        }
        let operationResult = this.activeXUtility.isISPADContrattiEnabled();
        if (operationResult) {
            operationResult = this.activeXUtility.printContract(xml);
            console.log('SPILayerMulticanale ha lanciato correttamente la stampa: ' + operationResult);
        }
        return operationResult;
    }
    openBrowser(xml) {
        if (!this.activeXUtility) {
            console.warn('SPILayerMulticanale not istantiated!');
            return false;
        }
        let operationResult = this.activeXUtility.isISPADContrattiEnabled();
        if (operationResult) {
            operationResult = this.activeXUtility.openBrowser(xml);
            console.log(`SPILayerMulticanale ha lanciato correttamente l'apertura del browser: ${operationResult}`);
        }
        return operationResult;
    }
    closeBrowser(caption, message, type) {
        if (!this.activeXUtility) {
            console.warn('SPILayerMulticanale not istantiated!');
            return false;
        }
        let operationResult = this.activeXUtility.isISPADContrattiEnabled();
        if (operationResult) {
            this.activeXUtility.closeBrowser();
            console.log(`SPILayerMulticanale chiamata CloseBrowser: ${operationResult}`);
        }
    }
    showISPADContratti() {
        this.activeXUtility.showISPADContratti();
        console.log('SPILayerMulticanale chiamata ShowISPADContratti');
    }
};
NbpSpilayerService = __decorate$107([
    Injectable(),
    __param$19(0, Inject(APP_CONFIG)),
    __metadata$89("design:paramtypes", [Object, NbpSpilayerUtilityService,
        SpilayerMockUtilityService])
], NbpSpilayerService);

var __decorate$106 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$88 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

let NbpSignSpilayerComponent = class NbpSignSpilayerComponent {
    constructor(spilayerService) {
        this.spilayerService = spilayerService;
        /**
         * Identificativo del tag Object contenente lo SpiLayerMulticanale.
         * Da utilizzare per l'invocazione dei metodi di firma del ActiveX.
         */
        this.nbpObjectId = 'spilayerMulticanale';
        // TODO per test
        // this.nbpObjectId = 'spilayerMulticanale'; 
    }
    ngOnInit() {
        if (!this.nbpObjectId) {
            console.warn("NbpSignSpilayerComponent - attributo nbpObjectId mancante");
        }
    }
    ngAfterViewInit() {
        if (this.nbpObjectId) {
            // used to debug on chrome, must be disabled for release
            //     let emulator = new LowLevelSpilayerEmulator(); 
            //     (window as any)[this.nbpObjectId] = emulator; 
            this.spilayerService.updateActiveXReference(this.nbpObjectId);
        }
    }
    ngOnDestroy() {
        this.spilayerService.updateActiveXReference(null);
    }
};
__decorate$106([
    Input(),
    __metadata$88("design:type", String)
], NbpSignSpilayerComponent.prototype, "nbpObjectId", void 0);
NbpSignSpilayerComponent = __decorate$106([
    Component({selector: 'nbp-sign-spilayer',
        template: "<object [id]=\"nbpObjectId\" classid=\"clsid:D74DF0CB-94F9-4F14-9A98-B8552608A76F\" height=\"0px\" width=\"0px\"></object>"
    }),
    __metadata$88("design:paramtypes", [NbpSpilayerService])
], NbpSignSpilayerComponent);

var __decorate$110 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$92 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPaperlessSignComponent = class NbpPaperlessSignComponent {
    constructor() {
        this.secondary = NbpStyle.SECONDARY;
        /**
         * Evento sulla pressione del tasto di riavvio tablet
         */
        this.onReEnableTablet = new EventEmitter();
    }
    _onReEnableTablet() {
        this.onReEnableTablet.emit();
    }
};
__decorate$110([
    Output(),
    __metadata$92("design:type", EventEmitter)
], NbpPaperlessSignComponent.prototype, "onReEnableTablet", void 0);
NbpPaperlessSignComponent = __decorate$110([
    Component({selector: 'nbp-paperless-sign',
        template: "<div class=\"tablet-sign-container row\"><div class=\"col-md-24\"><div class=\"row\"><div class=\"col-md-9 tablet-image-container pad-r-10\"><span class=\"tablet-image orizontal-container vertical-alignment text-center\"></span></div><div class=\"col-md-15 tablet-text-container\"><div class=\"vertical-alignment\"><h1>Il cliente sta firmando la documentazione sul tablet</h1><p class=\"pad-b-12\">Quando avrà terminato, clicca sul pulsante CONTINUA per proseguire.<br>In caso di problemi tecnici con il tablet, clicca sul pulsante RIAVVIA TABLET.</p><div class=\"button-container\"><nbp-button [nbpLabel]=\"'Riavvia Tablet'\" [nbpStyle]=\"secondary\" (nbpClick)=\"_onReEnableTablet()\"></nbp-button></div></div></div></div></div></div>",
        styles: [".tablet-sign-container{background-color:#f2f2f2}.tablet-image-container,.tablet-sign-container,.tablet-text-container{height:240px}.tablet-image{display:inline-block;height:140px;width:217px;background-image:url(/cjlib/assets/images/immagine_tablet.png);background-repeat:no-repeat}.vertical-alignment{transform:translateY(-50%);top:50%;position:absolute}.vertical-alignment.orizontal-container{transform:translate(-50%,-50%);left:50%;position:absolute}h1{font-size:25px;margin:0;padding-bottom:15px;color:#000}p{font-size:16px;color:#6f6f6f;margin-bottom:30px}.button-container{width:25%} /*# sourceMappingURL=nbp-paperless-sign.component.css.map */ "]
    }),
    __metadata$92("design:paramtypes", [])
], NbpPaperlessSignComponent);

var __decorate$112 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$94 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSignService = class NbpSignService {
    constructor(spilayerService) {
        this.spilayerService = spilayerService;
    }
    signFDR(xml) {
        let printResult = this.spilayerService.openBrowser(xml);
        return (printResult);
    }
    signFEA(xml, secondActivation) {
        let printResult = true;
        if (!secondActivation) {
            printResult = this.spilayerService.printContract(xml);
        }
        if (printResult) {
            this.spilayerService.showISPADContratti();
        }
        return (printResult);
    }
    signCartacea(xml) {
        return this.spilayerService.printContract(xml);
    }
};
NbpSignService = __decorate$112([
    Injectable(),
    __metadata$94("design:paramtypes", [NbpSpilayerService])
], NbpSignService);

var __decorate$111 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$93 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSignComponent = class NbpSignComponent {
    constructor(signService) {
        this.signService = signService;
        this._secondActivation = false;
        /**
         * Evento emesso dopo l'invocazione della procedura di firma sullo
         * SPILayerMulticanale
         * @param {EventEmitter<any>} nbpOnSignStarted
         */
        this.nbpOnSignStarted = new EventEmitter();
        /**
         * Evento emesso al click del pulsante per il riavvio del Tablet
         * @param {EventEmitter<any>} nbpOnRiavviaTablet
         */
        this.nbpOnRiavviaTablet = new EventEmitter();
        /**
         * Evento emesso in caso di click del pulsante di ErrorAdvice
         * @param {EventEmitter<any>} nbpOnErrorAdvise
         */
        this.nbpOnErrorAdvise = new EventEmitter();
        /**
         * Evento emesso in caso di firma cartacea e click del pulsante 'Firma Completata'
         * @param {EventEmitter<any>} nbpOnPaperSignCompleted
         */
        this.nbpOnPaperSignConfirmed = new EventEmitter();
        this._signResult = true;
        this._errorAdvice = 'Attenzione, c\'è stato un errore durante la procedura.';
        this._actionLabel = 'Riprova';
    }
    /**
     * Comunica al componente che è la seconda attivazione del processo di firma
     * per l'XMLToSign.
     * NOTA: così non sarà chiamato il metodo PrintContract dello SPILayerMulticanale
     */
    get nbpSecondActivation() { return this._secondActivation; }
    ;
    set nbpSecondActivation(value) { this._secondActivation = coerceBooleanProperty(value); }
    ;
    ngOnInit() {
        // Avvio del Tablet per la firma con invocazione metodi SPILayerMulticanale
        // metodo - PrintContract per firma FEA  
        // metodo - OpenBrowser per firma FDR
        // TODO: cosa dobbiamo fare per la firma CARTACEA ???
        if (!this.nbpSignType || !this.nbpXmlToSign
            || (this.nbpSignType.type !== SignType.FEA
                && this.nbpSignType.type !== SignType.FDR
                && this.nbpSignType.type !== SignType.CARTA)) {
            console.error('NbpSignComponent parametri obbligatori non presenti');
        }
        else {
            this._checkPaperPaperlessProcess(); // TODOREVIEW
        }
    }
    ngAfterViewInit() {
        if (!this.nbpSignType || !this.nbpXmlToSign
            || (this.nbpSignType.type !== SignType.FEA
                && this.nbpSignType.type !== SignType.FDR
                && this.nbpSignType.type !== SignType.CARTA)) {
            console.error('NbpSignComponent parametri obbligatori non presenti');
        }
        else {
            setTimeout(() => {
                this._startSignProcess();
            });
        }
    }
    /**
     * Invoca il corretto metodo di firma sull'ActiveX SPILayerMulticanale
     */
    _startSignProcess() {
        switch (this.nbpSignType.type) {
            case SignType.FEA:
                this._signResult = this.signService.signFEA(this.nbpXmlToSign, this._secondActivation);
                this._secondActivation = true;
                console.log('NbpSignComponent - emitting nbpOnSignStarted');
                this.nbpOnSignStarted.emit(this._signResult);
                break;
            case SignType.FDR:
                this._signResult = this.signService.signFDR(this.nbpXmlToSign);
                console.log('NbpSignComponent - emitting nbpOnSignStarted');
                this.nbpOnSignStarted.emit(this._signResult);
                break;
            case SignType.CARTA:
                this._signResult = this.signService.signCartacea(this.nbpXmlToSign);
                break;
        }
    }
    /**
     * Controlla se la firma è paperless o cartacea
     */
    _checkPaperPaperlessProcess() {
        this._isPaperless = this.nbpSignType.type !== SignType.CARTA;
    }
    _onRiavviaTablet() {
        console.log('NbpSignComponent - emitting nbpOnRiavviaTablet');
        this.nbpOnRiavviaTablet.emit();
        this._startSignProcess();
    }
    _onSignatureConfirm() {
        console.log('NbpSignComponent - emitting nbpOnPaperSignConfirmed');
        // this.nbpOnPaperSignCompleted.emit();
        this.nbpOnPaperSignConfirmed.emit();
    }
    _onErrorAdvise() {
        console.log('NbpSignComponent - emitting nbpOnErrorAdvise');
        this._startSignProcess();
        this.nbpOnErrorAdvise.emit();
    }
};
__decorate$111([
    Input(),
    __metadata$93("design:type", Object)
], NbpSignComponent.prototype, "nbpSignType", void 0);
__decorate$111([
    Input(),
    __metadata$93("design:type", Object)
], NbpSignComponent.prototype, "nbpCustomerInfo", void 0);
__decorate$111([
    Input(),
    __metadata$93("design:type", String)
], NbpSignComponent.prototype, "nbpXmlToSign", void 0);
__decorate$111([
    Input(),
    __metadata$93("design:type", Boolean),
    __metadata$93("design:paramtypes", [Object])
], NbpSignComponent.prototype, "nbpSecondActivation", null);
__decorate$111([
    Output(),
    __metadata$93("design:type", EventEmitter)
], NbpSignComponent.prototype, "nbpOnSignStarted", void 0);
__decorate$111([
    Output(),
    __metadata$93("design:type", EventEmitter)
], NbpSignComponent.prototype, "nbpOnRiavviaTablet", void 0);
__decorate$111([
    Output(),
    __metadata$93("design:type", EventEmitter)
], NbpSignComponent.prototype, "nbpOnErrorAdvise", void 0);
__decorate$111([
    Output(),
    __metadata$93("design:type", EventEmitter)
], NbpSignComponent.prototype, "nbpOnPaperSignConfirmed", void 0);
NbpSignComponent = __decorate$111([
    Component({selector: 'nbp-sign',
        template: "<div><nbp-sign-info-header [nbpSignDescription]=\"nbpSignType?.description\" [nbpCustomerInfo]=\"nbpCustomerInfo\"></nbp-sign-info-header><div *ngIf=\"(_signResult && _isPaperless)\"><nbp-paperless-sign (onReEnableTablet)=\"_onRiavviaTablet()\"></nbp-paperless-sign></div><div *ngIf=\"(_signResult && !_isPaperless)\"><nbp-paper-sign (onSignatureConfirm)=\"_onSignatureConfirm()\"></nbp-paper-sign></div><nbp-sign-spilayer nbpObjectId=\"spilayerMulticanale\"></nbp-sign-spilayer></div><nbp-error-advice *ngIf=\"!_signResult\" [nbpAdvice]=\"_errorAdvice\" [nbpActionLabel]=\"_actionLabel\" (onError)=\"_onErrorAdvise()\"></nbp-error-advice>"
    }),
    __metadata$93("design:paramtypes", [NbpSignService])
], NbpSignComponent);

class NbpAutocompleteDatasource extends INbpAutocompleteDataSource {
    constructor(arrayData, defaultPageSize) {
        super();
        this.defaultPageSize = defaultPageSize;
        this.arrayData = arrayData ? arrayData : [];
    }
    getPage(filterFields, filterString) {
        let shadowData = this.arrayData.slice();
        /*let currentPageSize = pageSize ? pageSize : (this.defaultPageSize ? this.defaultPageSize : this.arrayData.length);
        let pageToreturn = pageNumber ? pageNumber : 1;
        let start = (pageToreturn - 1) * currentPageSize;
        let end = start + currentPageSize;
    
        let data = shadowData.slice(start, end);*/
        let data = shadowData.filter((element) => {
            let result = false;
            let propertyData = getPropertyValueByPath(element, filterFields);
            if (!!propertyData) {
                result = propertyData.toLowerCase().startsWith(filterString.toLowerCase());
            }
            return result;
        });
        let dataPage = {
            data: data
        };
        return Observable.of(dataPage);
    }
}

var __decorate$113 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$95 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$20 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpStepNavigabiliComponent = class NbpStepNavigabiliComponent {
    // Avanti() { }
    // Indietro() { }
    constructor(document) {
        this.document = document;
        this.stickyActive = false;
        /**
         * Booleano opzionale che indica se si voglia gestire o meno il comportamento sticky allo scroll.
         * Se false, il componente verrà nascosto allo scroll, altrimenti gli verrà assegnata una posizione fissa.
         */
        this.sticky = true;
        /**
         * Evento emesso all'avanzamento. Include indice (index) e step selezionato (data).
         */
        this.nbpOnStepClick = new EventEmitter();
    }
    selectStep(index) {
        console.log("Select Step: " + JSON.stringify(this.nbpSteps[index]));
        let selectedStep = this.nbpSteps[index];
        if (!selectedStep.disabled && !selectedStep['disableClick']) {
            let navigationStepEvent = {
                index: index,
                data: this.nbpSteps[index]
            };
            this.nbpOnStepClick.emit(navigationStepEvent);
        }
    }
    ;
    onWindowScroll() {
        if (this.sticky == false) {
            return;
        }
        let number = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        if (number > 70) {
            this.stickyActive = true; //versione reply
            //this.sticky = true //versione nuova
        }
        else {
            this.stickyActive = false; //versione reply
            //this.sticky = false //versione nuova
        }
    }
    ngOnInit() {
        // this.nbpSteps[0].active = 'active';
    }
};
__decorate$113([
    Input(),
    __metadata$95("design:type", Boolean)
], NbpStepNavigabiliComponent.prototype, "sticky", void 0);
__decorate$113([
    Input(),
    __metadata$95("design:type", Array)
], NbpStepNavigabiliComponent.prototype, "nbpSteps", void 0);
__decorate$113([
    Output(),
    __metadata$95("design:type", EventEmitter)
], NbpStepNavigabiliComponent.prototype, "nbpOnStepClick", void 0);
__decorate$113([
    HostListener("window:scroll", []),
    __metadata$95("design:type", Function),
    __metadata$95("design:paramtypes", []),
    __metadata$95("design:returntype", void 0)
], NbpStepNavigabiliComponent.prototype, "onWindowScroll", null);
NbpStepNavigabiliComponent = __decorate$113([
    Component({
        selector: 'nbp-step-navigabili',
        template: "<div class=\"step-container\" style=\"margin-top: -0.8em;\" [ngClass]=\"{'sticky':stickyActive}\"><div class=\"cont-step-header container\"><table class=\"step-header-table\"><tr class=\"step-header-row\"><td *ngFor=\"let step of nbpSteps; let i = index\" class=\"completed-step\" [ngClass]=\"{'step-corrente': step.selected, 'disabled-step': step.disabled,'step-completare':step.activated && !step.selected && !step.disabled,'step-completato' : !step.selected && !step.disabled && !step.activated}\"><div class=\"step-cerchio\" [ngClass]=\"{'completed' : !step.selected && !step.disabled}\" (click)=\"selectStep(i)\"><i class=\"icomoon-ToDo_Stepper\"></i> <i class=\"icomoon-ToDo_Stepper2\"></i> <i class=\"icomoon-Freccia_Stepper\"></i> <i class=\"icomoon-Spunta_Stepper\"></i> <i class=\"icomoon-Spunta_Stepper2\"></i></div><span class=\"tabName\" (click)=\"selectStep(i)\">{{step.name}}</span></td></tr></table></div></div><div *ngIf=\"stickyActive\" style=\"height:5.375em\"></div>",
        styles: [".step-container{background-color:#f8f8f8;border-bottom:.0625em solid #ccc;margin-top:-.125em}.sticky{position:fixed;right:0;left:0;z-index:1030;top:3.375em}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.sticky .step-header-table{top:0}.step-header-table{top:-7px;position:relative}}.icomoon-ToDo_Stepper{display:none;color:#258900;font-size:1.084em;color:#ccc;position:relative;top:-3px;left:-2px}.icomoon-ToDo_Stepper2{display:none!important;color:#258900;font-size:1.084em;position:relative;top:-3px;left:-2px}.icomoon-Freccia_Stepper{display:none;font-size:1.834em;color:#258900;position:relative;top:-3px;left:-2px}.icomoon-Spunta_Stepper{display:none;font-size:1.834em;color:#258900;position:relative;top:-3px;left:-2px}.icomoon-Spunta_Stepper2{display:none;font-size:1.834em;color:#258900;position:relative;top:-3px;left:-2px}.cont-step-header{padding:0!important;height:3.25em!important}.step-header-table{table-layout:fixed;width:100%;margin-top:-.75em}.step-header-row{text-align:center;color:#6f6f6f;height:3.125em;text-transform:uppercase;font-size:.75em;font-weight:700}.step-header-row .tabName{font-size:.75em}.step-header-row td{padding-top:.375em;vertical-align:top;position:relative}.step-header-row td:last-child::after{display:none}.step-header-row td::after{content:\"\";display:block;position:absolute;top:1.8125em;width:100%;height:.125em;left:50%;border-top:0 solid;border-bottom:.167em;margin-left:15%;width:69%;background-color:#89bc72}.step-header-row .step-cerchio{position:relative;z-index:1;margin:1em auto .5em auto;display:block;width:1.5625em;height:1.5625em;border-radius:100%;background-color:#f8f8f8;cursor:pointer}.step-header-row .step-cerchio.completed:hover{background-color:#fff}.step-header-row .step-cerchio.completed:hover .icomoon-Spunta_Stepper{display:none!important}.step-header-row .step-cerchio.completed:hover .icomoon-Spunta_Stepper2{display:inline!important}.step-header-row .step-cerchio.completed:hover .icomoon-ToDo_Stepper{display:none!important}.step-header-row .step-cerchio.completed .icomoon-Spunta_Stepper{display:inline!important}.step-header-row .step-cerchio.completed .icomoon-ToDo_Stepper{display:none!important}.step-header-row .step-corrente{color:#258900}.step-header-row .step-corrente .step-cerchio{margin-top:.75em;width:1.5625em;height:1.6825em;background-color:#f8f8f8}.step-header-row .step-corrente .icomoon-Freccia_Stepper{display:inline!important}.step-header-row .step-corrente span{cursor:pointer;color:#258900}.step-header-row .disabled-step{color:#258900}.step-header-row .disabled-step .step-cerchio{cursor:default;width:1.004em;height:1.004em;margin-bottom:.71em;margin-top:1.2em}.step-header-row .disabled-step .tabName{opacity:.5;cursor:default}.step-header-row .disabled-step .icomoon-ToDo_Stepper{display:inline!important;opacity:.5;color:#258900}.step-header-row .step-completare{color:#258900}.step-header-row .step-completare .step-cerchio{width:1.004em;height:1.004em;margin-bottom:.71em;margin-top:1.2em}.step-header-row .step-completare .step-cerchio:hover{background-color:#fff}.step-header-row .step-completare .step-cerchio:hover .icomoon-ToDo_Stepper2{display:inline!important}.step-header-row .step-completare .step-cerchio:hover .icomoon-Spunta_Stepper{display:none!important}.step-header-row .step-completare .step-cerchio:hover .icomoon-ToDo_Stepper{display:none!important;color:#258900}.step-header-row .step-completare .step-cerchio .icomoon-ToDo_Stepper{display:inline!important;color:#258900}.step-header-row .step-completare .step-cerchio .icomoon-Spunta_Stepper{display:none!important}.step-header-row .step-completare .step-cerchio .icomoon-Spunta_Stepper2{display:none!important}.step-header-row .step-completare span{cursor:pointer}.step-header-row .completed-step{color:#258900}.step-header-row .completed-step::after{background-image:none;background-color:#258900;border-style:solid}.step-header-row .completed-step span{cursor:pointer}.step-header-row .step-completato{color:#258900}.step-header-row .step-completato .step-cerchio{margin-top:.75em;margin-bottom:.6em}.step-header-row .step-completato span{cursor:pointer}.step-content{padding:1.25em;text-align:left}:host-context(.contrasto-on) .step-container{background-color:#fff;border-bottom:.0625em solid #000}:host-context(.contrasto-on) .icomoon-ToDo_Stepper{color:#000}:host-context(.contrasto-on) .icomoon-ToDo_Stepper2{color:#000}:host-context(.contrasto-on) .icomoon-Freccia_Stepper{color:#000}:host-context(.contrasto-on) .icomoon-Spunta_Stepper{color:#000}:host-context(.contrasto-on) .icomoon-Spunta_Stepper2{color:#000}:host-context(.contrasto-on) .step-header-row{color:#fff}:host-context(.contrasto-on) .step-header-row td::after{background-color:#fff}:host-context(.contrasto-on) .step-header-row .step-cerchio{background-color:#fff}:host-context(.contrasto-on) .step-header-row .step-cerchio.completed:hover{background-color:#fff}:host-context(.contrasto-on) .step-header-row .step-corrente{color:#000}:host-context(.contrasto-on) .step-header-row .step-corrente .step-cerchio{background-color:#fff}:host-context(.contrasto-on) .step-header-row .step-corrente span{color:#000}:host-context(.contrasto-on) .step-header-row .disabled-step{color:#000}:host-context(.contrasto-on) .step-header-row .disabled-step .icomoon-ToDo_Stepper{color:#000}:host-context(.contrasto-on) .step-header-row .step-completare{color:#000}:host-context(.contrasto-on) .step-header-row .step-completare .step-cerchio:hover{background-color:#fff}:host-context(.contrasto-on) .step-header-row .step-completare .step-cerchio:hover .icomoon-ToDo_Stepper{color:#000}:host-context(.contrasto-on) .step-header-row .step-completare .step-cerchio .icomoon-ToDo_Stepper{color:#000}:host-context(.contrasto-on) .step-header-row .completed-step{color:#000}:host-context(.contrasto-on) .step-header-row .completed-step::after{background-color:#000}:host-context(.contrasto-on) .step-header-row .step-completato{color:#000} /*# sourceMappingURL=nbp-step-navigabili.component.css.map */ "]
    }),
    __param$20(0, Inject(DOCUMENT)),
    __metadata$95("design:paramtypes", [Object])
], NbpStepNavigabiliComponent);

var __decorate$114 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$96 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$21 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
* Provider Expression that allows nbp-combo to register as a ControlValueAccessor.
* This allows it to support [(ngModel)].
* @docs-private
*/
const NBP_COMBO_CONTROL_VALUE_ACCESSOR$1 = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpComboFilterComponent),
    multi: true
};
const NBP_INPUT_ELEMENT_BASE$5 = {
    provide: NbpInputElementBase,
    useExisting: forwardRef(() => NbpComboFilterComponent),
    multi: true
};
/** intero autogenerato usato per id unici per nbpCombo component */
let nextId$22 = 0;
/**
* Componente per la implementazione della combobox, supporta tutti gli attributi standard html per il tag input.
* Personalizzabile per la gestione di currency grazie all'applicaizone di opportuni pipes
* definiti dalla libreria.
*/
let NbpComboFilterComponent = class NbpComboFilterComponent extends NbpInputElementBase {
    constructor(validatori, asyncValidatori, formatterService, element, inj) {
        super(validatori, asyncValidatori); // ValueAccessor base
        this.validatori = validatori;
        this.asyncValidatori = asyncValidatori;
        this.formatterService = formatterService;
        this.element = element;
        this.inj = inj;
        /**
        * Identificativo univoco per il text field.
        * Se nessun id è fornito e' auto-generato.
        */
        this.id = `nbp-combo-filter-${++nextId$22}`;
        //modificaReply
        /**
        * Elementi del DropBox:visualizza tutti o solo quelli filtrati
        */
        this.showAllItems = false;
        /**
        * (Opzionale)
        * Booleano che consente di visualizzare i messaggi di feedback relativi alla validazione.
        * Valore di default false
        */
        this.nbpShowValidation = false;
        this.showErrorLabel = false;
        /**
        * Il testo del placeholder.
        */
        this.placeholder = '';
        /**
        * Evento emesso quando è selezionato un elemento della combobox.
        */
        this.select = new EventEmitter();
        /**
        * Evento emesso quando la dropdown viene chiuda
        */
        this.dropdownClosed = new EventEmitter();
        /**
        * Evento emesso quando la dropdown viene aperta
        */
        this.dropdownOpened = new EventEmitter();
        /**
        * (Opzionale) Funzione custom di validazione del campo
        */
        this.nbpValidation = new EventEmitter();
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this._dropdownVisible = false;
        this._arrowClicked = false;
        this._nbpPipe = NbpPipe;
    }
    /**
    * Flag che abilita/disabilita le funzionalità associate alla combobox
    */
    get disabled() { return this._nbpDisabled; }
    set disabled(value) { this._nbpDisabled = coerceBooleanProperty(value); }
    /**
    * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato alla combobox
    */
    get required() { return this._nbpRequired; }
    set required(value) { this._nbpRequired = coerceBooleanProperty(value); }
    /**
    * Flag che imposta come obbligatorio o meno il campo di input (disabilitato) associato alla combobox
    */
    get nbpShowEmptyValue() { return this._nbpShowEmptyValue; }
    set nbpShowEmptyValue(value) { this._nbpShowEmptyValue = coerceBooleanProperty(value); }
    /**
    * (opzionale ) Booleano che gestisce l’attributo  bordo giallo della combobox.
    * Al primo click/focus tornerà alla versione di default.
    * valore default false
    */
    get nbpHighlightedDefault() { return this._nbpHighlightedDefault; }
    ;
    set nbpHighlightedDefault(value) { this._nbpHighlightedDefault = coerceBooleanProperty(value); }
    ;
    /**
    * Definisce quando il binding del ngModel deve essere fatto sull'attributo nbpKeyField
    *
    */
    get nbpBindingToKeyField() { return this._nbpBindingToKeyField; }
    ;
    set nbpBindingToKeyField(value) { this._nbpBindingToKeyField = coerceBooleanProperty(value); }
    ;
    _getDropdownState() {
        return this._dropdownVisible ? 'expanded' : 'collapsed';
    }
    _getModelValue(item) {
        if (!item || item && item.emptyValue) {
            return;
        }
        return (this._nbpBindingToKeyField && this.nbpKeyField) ? getPropertyValueByPath(item, this.nbpKeyField) : item;
    }
    _evaluateCurrentSelectionIndex() {
        let currentSelection;
        if (this.value) {
            if (this.nbpKeyField && this.nbpBindingToKeyField) {
                currentSelection = this._nbpShadowData.findIndex((item) => getPropertyValueByPath(item, this.nbpKeyField) === this.value);
            }
            else {
                currentSelection = this._nbpShadowData.findIndex((item) => item === this.value);
            }
            return currentSelection;
        }
        return 0;
    }
    _onPreSelectEvent(item) {
        this._nbpViewValue = this._getViewModelElement(item);
        this.value = this._getModelValue(item);
        this.nbpValidation.emit(this.model);
        // TODO validazione anche su set programmatica del value
        event.stopPropagation();
        this.select.emit(item);
    }
    _manageDropdownState(event) {
        switch (event.key.toLowerCase()) {
            case 'enter':
                event.preventDefault();
                if (this._dropdownVisible) {
                    if (!!this._preSelectedElementIndex || this._preSelectedElementIndex === 0) {
                        this._onPreSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
                    }
                }
                this._dropdownVisible = !this._dropdownVisible;
                break;
            case 'tab':
                if (this._dropdownVisible) {
                    event.preventDefault();
                    if (!!this._preSelectedElementIndex || this._preSelectedElementIndex === 0) {
                        this._onPreSelectEvent(this._nbpShadowData[this._preSelectedElementIndex]);
                    }
                }
                this._dropdownVisible = false;
                break;
            default:
                this._dropdownVisible = false;
                break;
        }
        if (this._evaluateCurrentSelectionIndex() >= 0) {
            this.scrollToSelectedIndex(this._evaluateCurrentSelectionIndex());
        }
        else {
            this._preSelectedElementIndex = null;
        }
    }
    _isAlphaNumericCharacter(keyCode) {
        return (keyCode >= 48 && keyCode <= 57) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 95 && keyCode <= 122);
    }
    _isOptionPreselected(item) {
        let currentPreSelection = this._nbpShadowData.findIndex((element) => element === item);
        return currentPreSelection === this._preSelectedElementIndex;
    }
    scrollToSelectedIndex(elementIndex) {
        if (this._dropdownVisible) {
            setTimeout(() => {
                document.getElementById('combo-filter-element_' + elementIndex).scrollIntoViewIfNeeded();
            });
        }
    }
    _moveNext(event) {
        if (this._nbpDisabled) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : (this.nbpShowEmptyValue) ? 0 : -1;
        let nextSelection = currentSelection + 1;
        if (nextSelection >= this._nbpShadowData.length) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        // this._onPreSelectEvent(this._nbpShadowData[nextSelection]);
        this._preSelectedElementIndex = nextSelection;
    }
    _movePrev(event) {
        if (this._nbpDisabled) {
            return;
        }
        event.preventDefault();
        let currentSelection = this._preSelectedElementIndex !== null && this._preSelectedElementIndex !== undefined ?
            this._preSelectedElementIndex : 0;
        let nextSelection = currentSelection < 0 ? 0 : currentSelection - 1;
        if (nextSelection < 0) {
            nextSelection = currentSelection;
        }
        this.scrollToSelectedIndex(nextSelection);
        // this._onPreSelectEvent(this._nbpShadowData[nextSelection]);
        this._preSelectedElementIndex = nextSelection;
    }
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        this._prepareDataSource();
        //modificareply
        if (this.firstFocus) {
            this.elementRef.nativeElement.focus();
            this.elementRef.nativeElement.click();
        }
    }
    _prepareDataSource() {
        if (this.nbpDataSource) {
            let currentPageStream = this.nbpDataSource.getPage();
            this.datasourceSubscription = currentPageStream.subscribe((value) => {
                if (value.data && value.data.length) {
                    this._nbpShadowData = value.data.slice();
                    if (this.nbpShowEmptyValue) {
                        if (this.nbpViewField) {
                            let emptyObject = { emptyValue: true };
                            emptyObject = generateObjectFromStringPath(emptyObject, this.nbpViewField);
                            if (this.nbpKeyField) {
                                emptyObject = generateObjectFromStringPath(emptyObject, this.nbpKeyField);
                            }
                            this._nbpShadowData.unshift(emptyObject);
                        }
                        else {
                            this._nbpShadowData.unshift(null);
                        }
                    }
                    // console.log('Resolve Subscribe');
                }
                else {
                    this._nbpShadowData = new Array();
                }
                
                this._nbpShadowDataFull = this._nbpShadowData.slice();
            }, (error) => {
                console.log(JSON.stringify(error));
            });
        }
    }
    _manageDropdown(event) {
        if (!this._dropdownVisible && this.containsFilterValue !== "") {
            this._dropdownVisible = true;
        }
    }
    _getViewValue(item) {
        if (!item) {
            return null;
        }
        return this.formatterService.displayValueTransformation(this._getViewModelElement(item), this.nbpFilter, this.nbpFilterArg);
    }
    _getValue(item) {
        return (this._nbpBindingToKeyField && this.nbpKeyField) ? getPropertyValueByPath(item, this.nbpKeyField) : item;
    }
    _getDropDownLabel(item) {
        return this.formatterService.displayValueTransformation((this.nbpViewField ? getPropertyValueByPath(item, this.nbpViewField) : item), this.nbpFilter, this.nbpFilterArg);
    }
    _onSelectEvent(item) {
        if (item) {
            // Alla selezione, il filtro contains viene settato uguale all'item
            this.containsFilterValue = this._getDropDownLabel(item);
            this.onContainsFilterChange();
            this._nbpViewValue = this._getViewModelElement(item);
            this.value = this._getValue(item);
            this.nbpValidation.emit(this.model);
            this._dropdownVisible = !this._dropdownVisible;
            // TODO validazione anche su set programmatica del value
            event.stopPropagation();
            this.select.emit(item);
        }
    }
    _getViewModelElement(item) {
        if (this._nbpBindingToKeyField) {
            return this.nbpKeyField ? this._getSelectedElement(item) : item;
        }
        return this.nbpViewField ? getPropertyValueByPath(item, this.nbpViewField) : item;
    }
    _getSelectedElement(item) {
        let elems = this._nbpShadowData.filter((elem) => {
            return getPropertyValueByPath(elem, this.nbpKeyField) === item;
        });
        if (elems.length > 0) {
            let selectedElem = elems[0];
            return this.nbpViewField ? getPropertyValueByPath(selectedElem, this.nbpViewField) : item;
        }
        else {
            return item;
        }
    }
    _isOptionSelected(item) {
        if (!item || !this.value) {
            return false;
        }
        if (this.nbpKeyField && item && getPropertyValueByPath(item, this.nbpKeyField)) {
            let currentValue = this.value;
            if (this._nbpBindingToKeyField) {
                return getPropertyValueByPath(item, this.nbpKeyField) === currentValue;
            }
            else {
                return getPropertyValueByPath(item, this.nbpKeyField) === getPropertyValueByPath(currentValue, this.nbpKeyField);
            }
        }
        if (item) {
            return item === this.value;
        }
        return false;
    }
    _onInputFocus(event) {
        if (!this._nbpDisabled
            && this._nbpShadowData
            && this._nbpShadowData.length > 0 && !this._arrowClicked) {
            this._dropdownVisible = !this._dropdownVisible;
            this._dropdownVisible ? this.dropdownOpened.emit() : this.dropdownClosed.emit();
        }
    }
    _onInputClick(event) {
        //modificaReply
        if (this.showAllItems) {
            this._nbpShadowData = this._nbpShadowDataFull.slice();
        }
        //--------------------
        if (!this._nbpDisabled
            && this._nbpShadowData
            && this._nbpShadowData.length > 0) {
            this._dropdownVisible = !this._dropdownVisible;
            this._arrowClicked = !this._arrowClicked;
        }
    }
    _onTouchedEvent(event) {
        this.touch();
        this.showErrorLabel = true;
    }
    _closeDropDown(target) {
        if (!this._dropdownVisible) {
            return;
        }
        let parentFound = false;
        while (target != null && !parentFound) {
            if (target === this.element.nativeElement) {
                parentFound = true;
            }
            target = target.parentElement;
        }
        if (!parentFound) {
            this._dropdownVisible = false;
            this._arrowClicked = false;
            this.dropdownClosed.emit();
        }
    }
    onFocusout(target) {
        this._closeDropDown(target);
    }
    onClick(target) {
        this._closeDropDown(target);
    }
    /**
    * Listener per cambio del filtro "contains" -> si occupa di filtrare le opzioni in base a quanto inserito
    */
    onContainsFilterChange() {
        if (this.containsFilterValue) {
            let checkString = this.containsFilterValue.toLowerCase();
            let startingIndex = this.nbpShowEmptyValue ? 1 : 0;
            this._nbpShadowData = this._nbpShadowDataFull.filter((elem, index) => {
                if (index >= startingIndex) {
                    let elemLabel = this._getDropDownLabel(elem);
                    return elemLabel && elemLabel.toLowerCase().includes(checkString);
                }
                else {
                    return true;
                }
            });
        }
        else {
            this._nbpShadowData = this._nbpShadowDataFull.slice();
        }
    }
};
__decorate$114([
    Input(),
    __metadata$96("design:type", String)
], NbpComboFilterComponent.prototype, "name", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Object)
], NbpComboFilterComponent.prototype, "id", void 0);
__decorate$114([
    Input("showallitems"),
    __metadata$96("design:type", Boolean)
], NbpComboFilterComponent.prototype, "showAllItems", void 0);
__decorate$114([
    HostBinding('class.nbp-show-validation'),
    Input(),
    __metadata$96("design:type", Boolean)
], NbpComboFilterComponent.prototype, "nbpShowValidation", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", String)
], NbpComboFilterComponent.prototype, "nbpErrorMessage", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean)
], NbpComboFilterComponent.prototype, "showErrorLabel", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean),
    __metadata$96("design:paramtypes", [Object])
], NbpComboFilterComponent.prototype, "disabled", null);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean),
    __metadata$96("design:paramtypes", [Object])
], NbpComboFilterComponent.prototype, "required", null);
__decorate$114([
    Input(),
    __metadata$96("design:type", String)
], NbpComboFilterComponent.prototype, "placeholder", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean),
    __metadata$96("design:paramtypes", [Object])
], NbpComboFilterComponent.prototype, "nbpShowEmptyValue", null);
__decorate$114([
    Input(),
    __metadata$96("design:type", INbpDataSource)
], NbpComboFilterComponent.prototype, "nbpDataSource", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", String)
], NbpComboFilterComponent.prototype, "nbpViewField", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", String)
], NbpComboFilterComponent.prototype, "nbpKeyField", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean),
    __metadata$96("design:paramtypes", [Object])
], NbpComboFilterComponent.prototype, "nbpHighlightedDefault", null);
__decorate$114([
    Input(),
    __metadata$96("design:type", Number)
], NbpComboFilterComponent.prototype, "nbpFilter", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Object)
], NbpComboFilterComponent.prototype, "nbpFilterArg", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean),
    __metadata$96("design:paramtypes", [Object])
], NbpComboFilterComponent.prototype, "nbpBindingToKeyField", null);
__decorate$114([
    Output(),
    __metadata$96("design:type", EventEmitter)
], NbpComboFilterComponent.prototype, "select", void 0);
__decorate$114([
    Output(),
    __metadata$96("design:type", Object)
], NbpComboFilterComponent.prototype, "dropdownClosed", void 0);
__decorate$114([
    Output(),
    __metadata$96("design:type", Object)
], NbpComboFilterComponent.prototype, "dropdownOpened", void 0);
__decorate$114([
    Output(),
    __metadata$96("design:type", EventEmitter)
], NbpComboFilterComponent.prototype, "nbpValidation", void 0);
__decorate$114([
    ViewChild(NgModel),
    __metadata$96("design:type", NgModel)
], NbpComboFilterComponent.prototype, "model", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Boolean)
], NbpComboFilterComponent.prototype, "firstFocus", void 0);
__decorate$114([
    Input(),
    __metadata$96("design:type", Number)
], NbpComboFilterComponent.prototype, "tabindex", void 0);
__decorate$114([
    ViewChild('autoFocusComboFilter'),
    __metadata$96("design:type", ElementRef)
], NbpComboFilterComponent.prototype, "elementRef", void 0);
__decorate$114([
    HostListener('document: focusout', ['$event.target']),
    __metadata$96("design:type", Function),
    __metadata$96("design:paramtypes", [HTMLElement]),
    __metadata$96("design:returntype", void 0)
], NbpComboFilterComponent.prototype, "onFocusout", null);
__decorate$114([
    HostListener('document: click', ['$event.target']),
    __metadata$96("design:type", Function),
    __metadata$96("design:paramtypes", [HTMLElement]),
    __metadata$96("design:returntype", void 0)
], NbpComboFilterComponent.prototype, "onClick", null);
NbpComboFilterComponent = __decorate$114([
    Component({
        selector: 'nbp-combo-filter',template: "<div class=\"dropdown-container\"><input type=\"hidden\" [(ngModel)]=\"value\"><div class=\"dropdown-inner-container\" (keydown.arrowdown)=\"_moveNext($event)\" (keydown.arrowup)=\"_movePrev($event)\" (keydown.enter)=\"_manageDropdownState($event)\" (keydown.esc)=\"_manageDropdownState($event)\" (keydown.tab)=\"_manageDropdownState($event)\" (keyup.tab)=\"_manageDropdownState($event)\" (keydown.shift.tab)=\"_manageDropdownState($event)\" (keyup.shift.tab)=\"_manageDropdownState($event)\" (focusout)=\"_onTouchedEvent($event)\"><input type=\"text\" [id]=\"id\" [name]=\"name\" [placeholder]=\"placeholder\" class=\"dropdown-input-box form-control\" [ngClass]=\"{ 'dropdown-input-box-green': _dropdownVisible || _focusActive, 'highlight-default':nbpHighlightedDefault, 'input-box-disabled': disabled }\" (input)=\"_manageDropdown($event)\" [value]=\"_getViewValue(value)\" [required]=\"required\" [(ngModel)]=\"containsFilterValue\" (ngModelChange)=\"onContainsFilterChange()\" autocomplete=\"off\" (focus)=\"_focusActive = true;\" (focusout)=\"_focusActive = false;\" [tabindex]=\"tabindex\" #autoFocusComboFilter> <button class=\"dropdown-button\" (click)=\"_onInputClick($event)\" [ngClass]=\"{'collapse-disabled' : disabled}\" tabindex=\"-1\"><span class=\"dropdown-button-border\"></span> <span [ngClass]=\"{'triangolo-bottom' : !_dropdownVisible, 'triangolo-top' : _dropdownVisible}\"></span></button></div><ul [@dropdownAnimationState]=\"_getDropdownState()\" [style.visibility]=\"_dropdownVisible ? 'visible' : 'hidden'\"><li *ngFor=\"let item of _nbpShadowData; let i = index\" (click)=\"_onSelectEvent(item)\" [ngClass]=\"{'active': _isOptionSelected(item), 'preselected':_isOptionPreselected(item), 'last': i === _nbpShadowData.length - 1  }\" [id]=\"'combo-filter-element_'+i\"><span>{{_getDropDownLabel(item) }}</span></li></ul></div>",
        styles: [":host{position:relative;display:block}:host(.ng-invalid.nbp-show-validation) .dropdown-input-box{border:2px solid #c63200!important;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}:host(.ng-invalid.nbp-show-validation) .dropdown-input-box:focus{border:2px solid #c63200!important}.highlight-default{border:2px solid #fce07f!important;outline:0;box-shadow:none!important}.dropdown-container{display:inline-block;position:relative;width:100%}.dropdown-container ul{opacity:1;background:#fff;border-top-width:0;border-right-color:#323232;border-right-style:solid;border-right-width:1px;border-bottom-color:#323232;border-bottom-style:solid;border-bottom-width:1px;border-left-color:#323232;border-left-style:solid;border-left-width:1px;border-radius:0 0 2px 2px;list-style:none;margin:0 0 .625em 0;padding:0;position:absolute;width:100%;z-index:1000;overflow-y:auto}.dropdown-container ul>li{cursor:pointer;min-height:3.125em;padding:17px 12px;border-bottom:1px solid #f2f2f2;text-align:left}.dropdown-container ul>li:hover{background:#c4dbbc}.dropdown-container ul>li.preselected{background:#c4dbbc}.dropdown-container ul>li.preselected.active{box-shadow:inset 0 0 1em #258900}.dropdown-container ul>li.active{background:#89bc72}.dropdown-container ul>li.last{border-bottom:none}.dropdown-container ul.ng-hide-add{transition:all ease-out .25s}.dropdown-container ul.ng-hide-remove{transition:all ease-out .25s}.dropdown-container ul.ng-hide{opacity:0;max-height:0}.dropdown-inner-container{position:relative;z-index:999}.dropdown-label{color:#6f6f6f;font-size:1em;margin:0 0 0 .75em!important}.dropdown-input-box{margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:.375em 2.3em .375em 1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#323232;border:1px solid #323232;border-radius:2px;font-size:1em!important;height:3.125em}.dropdown-input-box:focus{border:2px solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box::-ms-clear{display:none}.dropdown-input-box:disabled{background-color:#fff!important;cursor:default;box-shadow:none!important}.dropdown-input-box.input-box-disabled{background-color:#fff!important;border:1px solid #6f6f6f;opacity:.5!important;cursor:not-allowed}::placeholder{color:#6f6f6f;opacity:1}:-ms-input-placeholder{color:#6f6f6f}::-ms-input-placeholder{color:#6f6f6f}.dropdown-input-box-green{border:2px solid #89bc72;outline:0;box-shadow:none!important}.dropdown-input-box-disabled{background-color:#fff!important;opacity:.5!important}.dropdown-button{position:absolute;top:0;right:0;width:2.5em;height:3.125em;text-align:center;color:#ccc;border-color:transparent;background-color:transparent!important}.dropdown-button[role=\"\"]{cursor:default;opacity:.5}.dropdown-button.collapse-disabled{pointer-events:none}.dropdown-button.collapse-disabled .dropdown-button-border{border-left:1px solid #6f6f6f!important}.dropdown-button.collapse-disabled .triangolo-bottom{border-style:solid;border-width:8px 6.5px 0 6.5px;border-color:#6f6f6f transparent transparent transparent}.dropdown-button.collapse-disabled .triangolo-top{border-style:solid;border-width:0 6.5px 8px 6.5px;border-color:transparent transparent #6f6f6f transparent}.dropdown-button-border{position:absolute;display:inline-block;height:60%;top:20%;left:0;border-left:1px solid #323232}.has-error .dropdown-input-box{border:2px solid #c63200;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .dropdown-input-box:focus{border:2px solid #c63200}.dropdown-error-message{color:#c63200;font-size:1em;margin-top:.625em;margin-bottom:.625em;opacity:1}.dropdown-error-message.ng-hide-add{transition:all ease-out .25s}.dropdown-error-message.ng-hide-remove{transition:all ease-out .25s}.dropdown-error-message.ng-hide{opacity:0;margin-top:-.625em}.triangolo-top{width:0;height:0;border-style:solid;border-width:0 .625em .625em .625em;border-color:transparent transparent #258900 transparent;display:inline-block!important}.triangolo-bottom{width:0;height:0;border-style:solid;border-width:.625em .625em 0 .625em;border-color:#258900 transparent transparent transparent;display:inline-block!important}.yellow-border{border:2px solid #fce07f}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box{border-color:#000!important}:host-context(.contrasto-on) :host(.ng-invalid.nbp-show-validation) .dropdown-input-box:focus{border-color:#000!important}:host-context(.contrasto-on) .highlight-default{border-color:#000!important}:host-context(.contrasto-on) .dropdown-container ul{background:#fff;border-right-color:#000;border-bottom-color:#000;border-left-color:#000}:host-context(.contrasto-on) .dropdown-container ul>li{border-bottom-color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li:hover{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-container ul>li.active{background:#000;color:#fff}:host-context(.contrasto-on) .dropdown-label{color:#000}:host-context(.contrasto-on) .dropdown-input-box{color:#000;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box:disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-input-box.input-box-disabled{background-color:#fff!important;border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-green{border-color:#000}:host-context(.contrasto-on) .dropdown-input-box-disabled{background-color:#fff!important}:host-context(.contrasto-on) .dropdown-button{color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .dropdown-button-border{border-left-color:#000!important}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .dropdown-button.collapse-disabled .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .dropdown-button-border{border-left-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box{border-color:#000}:host-context(.contrasto-on) .has-error .dropdown-input-box:focus{border-color:#000}:host-context(.contrasto-on) .dropdown-error-message{color:#000}:host-context(.contrasto-on) .triangolo-top{border-bottom-color:#000}:host-context(.contrasto-on) .triangolo-bottom{border-top-color:#000}:host-context(.contrasto-on) .yellow-border{border-color:#fff} /*# sourceMappingURL=nbp-combo-filter.component.css.map */ "],
        viewProviders: [NbpFormatterService],
        providers: [NBP_COMBO_CONTROL_VALUE_ACCESSOR$1, NBP_INPUT_ELEMENT_BASE$5],
        animations: [
            trigger('dropdownAnimationState', [
                state('expanded', style({ opacity: 1, visibility: 'visible' })),
                state('collapsed, void', style({ opacity: 0, visibility: 'hidden' })),
                transition('expanded => collapsed', animate('100ms ease-in')),
                transition('collapsed => expanded', animate('100ms ease-out'))
            ])
        ]
    }),
    __param$21(0, Optional()), __param$21(0, Inject(NG_VALIDATORS)),
    __param$21(1, Optional()), __param$21(1, Inject(NG_ASYNC_VALIDATORS)),
    __metadata$96("design:paramtypes", [Array, Array, NbpFormatterService,
        ElementRef, Injector])
], NbpComboFilterComponent);

var __decorate$116 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$98 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpToggleTabComponent = class NbpToggleTabComponent {
    constructor() {
        /**
         * Titolo del tab
         */
        this.title = '';
        /**
         * Booleano che indica se il tab è selezionato inizialmente
         */
        this.active = false;
        /**
         * Booleano che indica se il tab è disabilitato
         */
        this.disabled = false;
    }
};
__decorate$116([
    Input(),
    __metadata$98("design:type", Object)
], NbpToggleTabComponent.prototype, "title", void 0);
__decorate$116([
    Input(),
    __metadata$98("design:type", Object)
], NbpToggleTabComponent.prototype, "active", void 0);
__decorate$116([
    Input(),
    __metadata$98("design:type", Object)
], NbpToggleTabComponent.prototype, "disabled", void 0);
NbpToggleTabComponent = __decorate$116([
    Component({selector: 'nbp-toggle-tab',
        template: `
    <ng-content *ngIf="active"></ng-content>
  `,
        styles: [".centre{display:table;margin-left:auto;margin-right:auto}.tabs-container{border-collapse:collapse}.tabs-container .tab-container{display:table-cell;height:3.125em;width:12.5em;text-align:center;background-color:#fff;border:1px solid #ccc;padding:5px;cursor:pointer}.tabs-container .tab-container.active{background-color:#258900;box-shadow:inset 0 2px 3px 0 rgba(0,0,0,.2)}.tabs-container .tab-container.active a{color:#fff}.tabs-container .tab-container.active i{color:#258900}.tabs-container .tab-container.active .tab-title{color:#fff}.tabs-container .tab-container.disabled{pointer-events:none;cursor:not-allowed;opacity:.5}.tabs-container .tab-container i{display:block;font-size:24px;color:#6f6f6f}.tabs-container .tab-container .tab-title{text-transform:uppercase;color:#6f6f6f;display:table-cell;height:2.5em;width:11.875em;font-weight:600;margin:auto;vertical-align:middle}:host-context(.contrasto-on) .tabs-container{display:table;border-collapse:collapse}:host-context(.contrasto-on) .tabs-container .tab-container{border-color:#000;background-color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container.active{background-color:#000;box-shadow:none}:host-context(.contrasto-on) .tabs-container .tab-container.active i{color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container.active .tab-title{color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container i{color:#000}:host-context(.contrasto-on) .tabs-container .tab-container .tab-title{color:#000} /*# sourceMappingURL=nbp-tab-toggle.component.css.map */ "]
    })
], NbpToggleTabComponent);

var __decorate$115 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$97 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpToggleTabsetComponent = class NbpToggleTabsetComponent {
    constructor() {
        // @Input() vertical ;
        this.onSelect = new EventEmitter();
    }
    ngAfterContentInit() {
        const actives = this.tabs.filter(t => t.active);
        if (actives.length > 1) {
            console.error(`Multiple active tabs set 'active'`);
        }
        else if (!actives.length && this.tabs.length) {
            this.tabs.first.active = true;
        }
    }
    tabClicked(tab) {
        this.tabs.forEach(element => element.active = false);
        tab.active = true;
        this.onSelect.emit(tab);
    }
};
__decorate$115([
    Output(),
    __metadata$97("design:type", Object)
], NbpToggleTabsetComponent.prototype, "onSelect", void 0);
__decorate$115([
    ContentChildren(NbpToggleTabComponent),
    __metadata$97("design:type", QueryList)
], NbpToggleTabsetComponent.prototype, "tabs", void 0);
NbpToggleTabsetComponent = __decorate$115([
    Component({selector: 'nbp-toggle-tabset',
        template: "<div class=\"centre\"><div class=\"tabs-container\"><div *ngFor=\"let tab of tabs; let i = index\" class=\"tab-container\" [class.disabled]=\"tab.disabled\" [class.active]=\"tab.active\" (click)=\"tabClicked(tab)\"><div (click)=\"tabClicked(tab)\" class=\"tab-title\"><span style=\"font-size: 0.750em; font-family: Arial\">{{tab.title}}</span></div></div></div></div><div><ng-content></ng-content></div>",
        styles: [".centre{display:table;margin-left:auto;margin-right:auto}.tabs-container{border-collapse:collapse}.tabs-container .tab-container{display:table-cell;height:3.125em;width:12.5em;text-align:center;background-color:#fff;border:1px solid #ccc;padding:5px;cursor:pointer}.tabs-container .tab-container.active{background-color:#258900;box-shadow:inset 0 2px 3px 0 rgba(0,0,0,.2)}.tabs-container .tab-container.active a{color:#fff}.tabs-container .tab-container.active i{color:#258900}.tabs-container .tab-container.active .tab-title{color:#fff}.tabs-container .tab-container.disabled{pointer-events:none;cursor:not-allowed;opacity:.5}.tabs-container .tab-container i{display:block;font-size:24px;color:#6f6f6f}.tabs-container .tab-container .tab-title{text-transform:uppercase;color:#6f6f6f;display:table-cell;height:2.5em;width:11.875em;font-weight:600;margin:auto;vertical-align:middle}:host-context(.contrasto-on) .tabs-container{display:table;border-collapse:collapse}:host-context(.contrasto-on) .tabs-container .tab-container{border-color:#000;background-color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container.active{background-color:#000;box-shadow:none}:host-context(.contrasto-on) .tabs-container .tab-container.active i{color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container.active .tab-title{color:#fff}:host-context(.contrasto-on) .tabs-container .tab-container i{color:#000}:host-context(.contrasto-on) .tabs-container .tab-container .tab-title{color:#000} /*# sourceMappingURL=nbp-tab-toggle.component.css.map */ "]
    })
], NbpToggleTabsetComponent);

var __decorate$117 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$99 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSwitchBinaryComponent = class NbpSwitchBinaryComponent {
    constructor() {
        /**
         * Evento emesso al click del componente.
         * Emette i seguenti valori:
         * ON - OFF
         */
        this.nbpOnClick = new EventEmitter();
        this._onToggle = function () {
            if (!this.nbpDisabled) {
                this.nbpActive = !this.nbpActive;
                this._emitOnClickEvent();
            }
        };
        this._emitOnClickEvent = function () {
            let output = this.nbpActive ? 'ON' : 'OFF';
            this.nbpOnClick.emit(output);
        };
    }
    /**
     *Booleano che abilita/disabilita il componente
     */
    get disabled() { return this.nbpDisabled; }
    set disabled(value) { this.nbpDisabled = coerceBooleanProperty(value); }
    /**
     * Booleano che permette di selezionare ON/OFF del componente
     * se nbpActive presente o uguale a TRUE --> binary-switch = ON
     * binary-switch = OFF altrimentin
     */
    get nbpActive() { return this._nbpActive; }
    set nbpActive(value) { this._nbpActive = coerceBooleanProperty(value); }
    ngOnInit() {
        // controlliamo se l'array nbpLabels è di due elementi
        if (!this.nbpLabels) {
            // console.log('Componente nbpSwitchBinary utilizzato con lables di default: On/Off');
            this.nbpLabels = ['On', 'Off'];
        }
        else if (this.nbpLabels.length > 2) {
            this.nbpLabels.splice(2);
            console.log('Componente nbpSwitchBinary utilizzato con lables custom: ' + this.nbpLabels.join('/'));
        }
    }
};
__decorate$117([
    Input(),
    __metadata$99("design:type", Array)
], NbpSwitchBinaryComponent.prototype, "nbpLabels", void 0);
__decorate$117([
    Input(),
    __metadata$99("design:type", Boolean),
    __metadata$99("design:paramtypes", [Object])
], NbpSwitchBinaryComponent.prototype, "disabled", null);
__decorate$117([
    Input(),
    __metadata$99("design:type", Boolean),
    __metadata$99("design:paramtypes", [Object])
], NbpSwitchBinaryComponent.prototype, "nbpActive", null);
__decorate$117([
    Output(),
    __metadata$99("design:type", EventEmitter)
], NbpSwitchBinaryComponent.prototype, "nbpOnClick", void 0);
NbpSwitchBinaryComponent = __decorate$117([
    Component({
        selector: 'nbp-switch-binary',template: "<div class=\"switch-container btn-group\" [ngClass]=\"{'switch-binary-disabled': disabled}\"><label id=\"switchBinaryLabel\" class=\"switch-binary\" [ngClass]=\"{'switch-binary-true': nbpActive}\" (click)=\"_onToggle()\"><div id=\"switchBinarySliderBox\" class=\"slider-box\"></div><span class=\"switch-label-icon-on\">{{nbpLabels[0]}}</span> <span class=\"switch-label-icon-off\">{{nbpLabels[1]}}</span></label></div>",
        styles: [".switch-binary-disabled #switchBinaryLabel{cursor:not-allowed;pointer-events:none!important;opacity:.5}.switch-binary-disabled #switchBinarySliderBox{cursor:not-allowed;pointer-events:none!important}.switch-binary{position:relative;display:inline-block;width:100px;height:50px;cursor:pointer;background-color:#ccc;-webkit-transition:0s;transition:0s}.switch-binary .switch-label-icon-on{font-weight:700;text-align:center;font-size:.75em;color:#fff;width:50px;display:table-cell;line-height:50px;box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.switch-binary .switch-label-icon-off{font-weight:700;text-align:center;font-size:.75em;color:#6f6f6f;width:50px;display:table-cell;line-height:50px;box-shadow:inset .25em .25em .25em 0 rgba(0,0,0,.2)}.slider-box{position:absolute;content:\"\";cursor:pointer;height:50px;width:50px;left:0;bottom:0;background-color:#fff;-webkit-transition:0s;transition:0s;border:1px solid #ccc}.switch-binary-true{background-color:#258900}.switch-binary-true-disabled{background-color:#5ca740}.switch-binary-true .slider-box{-webkit-transform:translateX(50px);-ms-transform:translateX(50px);transform:translateX(50px)}:host-context(.contrasto-on) .slider-box{background-color:#fff;border-color:#000}:host-context(.contrasto-on) .switch-binary .switch-label-icon-on{color:#fff}:host-context(.contrasto-on) .switch-binary .switch-label-icon-off{color:#fff}:host-context(.contrasto-on) .switch-binary-true{background-color:#000} /*# sourceMappingURL=nbp-switch-binary.component.css.map */ "]
    }),
    __metadata$99("design:paramtypes", [])
], NbpSwitchBinaryComponent);

var __decorate$118 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$100 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$23 = 0;
let NbpAccordionLightComponent = class NbpAccordionLightComponent {
    constructor() {
        // TODO NIS questo componente sarebbe da unire al nbp-accordion-showmore aggiungendo uno style magari!!
        this.id = `nbp-accordion-button-${++nextId$23}`;
        this._isShowMore = false;
        this._disabled = false;
        /**
         * (Opzionale) Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         *Default accordion collassato.
         */
        this.nbpCollapsed = true;
        /**
         * Evento emesso sul toggle del componente.
         * @param {EventEmitter<NbpAccordionEvent>}  nbpOnToggle
         */
        this.nbpOnToggle = new EventEmitter();
    }
    /**
     * Identifica il tipo di nbp-accordion-light
     */
    get nbpShowMore() {
        return this._isShowMore;
    }
    set nbpShowMore(value) { this._isShowMore = coerceBooleanProperty(value); }
    /**
     * disabilita il pulsante
     */
    get disabled() {
        return this._disabled;
    }
    set disabled(value) { this._disabled = coerceBooleanProperty(value); }
    //     Methods
    /**
     * metodo utilizzabile per l’apertura programmatica
     */
    open() {
        this.nbpCollapsed = false;
    }
    /**
     * metodo utilizzabile per la chiusura programmatica
     */
    close() {
        this.nbpCollapsed = true;
    }
    /**
     * metodo utilizzabile per verificare se il componente è collassato
     */
    isCollapsed() {
        return this.nbpCollapsed;
    }
    ngOnInit() {
    }
    _toggleCollapse() {
        if (!this._disabled) {
            this.nbpCollapsed = !this.nbpCollapsed;
            this._onToggle();
        }
    }
    _onToggle() {
        let acordionEvent = new NbpAccordionEvent();
        acordionEvent.source = this;
        acordionEvent.isCollapsed = this.nbpCollapsed;
        this.nbpOnToggle.emit(acordionEvent);
    }
};
__decorate$118([
    Input(),
    __metadata$100("design:type", String)
], NbpAccordionLightComponent.prototype, "id", void 0);
__decorate$118([
    Input(),
    __metadata$100("design:type", Boolean),
    __metadata$100("design:paramtypes", [Object])
], NbpAccordionLightComponent.prototype, "nbpShowMore", null);
__decorate$118([
    Input(),
    __metadata$100("design:type", Boolean),
    __metadata$100("design:paramtypes", [Object])
], NbpAccordionLightComponent.prototype, "disabled", null);
__decorate$118([
    Input(),
    __metadata$100("design:type", String)
], NbpAccordionLightComponent.prototype, "nbpTitle", void 0);
__decorate$118([
    Input(),
    __metadata$100("design:type", Boolean)
], NbpAccordionLightComponent.prototype, "nbpCollapsed", void 0);
__decorate$118([
    Input(),
    __metadata$100("design:type", String)
], NbpAccordionLightComponent.prototype, "nbpIcon", void 0);
__decorate$118([
    Output(),
    __metadata$100("design:type", EventEmitter)
], NbpAccordionLightComponent.prototype, "nbpOnToggle", void 0);
NbpAccordionLightComponent = __decorate$118([
    Component({selector: 'nbp-accordion-light',
        template: "<div class=\"panel\" [ngClass]=\"{'nbp-panel-showmore': _isShowMore, 'nbp-panel-button': !_isShowMore, 'nbp-panel-disabled':_disabled }\"><div class=\"panel-heading\" role=\"button\" [ngClass]=\"{'panel-heading-round': !isCollapsed()}\" role=\"tab\" [id]=\"id\" (click)=\"_toggleCollapse()\"><h4 class=\"panel-title\"><span class=\"icon accordion-icon\" [ngClass]=\"nbpIcon\" *ngIf=\"!!nbpIcon\"></span> <span class=\"title\" [ngClass]=\"{'accordion-title-icon':!!nbpIcon}\">{{nbpTitle}}</span><div *ngIf=\"!_isShowMore\"><span [ngClass]=\"{'triangolo-bottom-accordion': isCollapsed(), 'triangolo-top-accordion': !isCollapsed()}\"></span></div><a role=\"button\" class=\"collapsed pull-right\" *ngIf=\"_isShowMore\"><span class=\"icon\" [ngClass]=\"{'ico-comuni-freccia-accordion-apri':isCollapsed() , 'ico-comuni-freccia-accordion-chiudi':!isCollapsed()}\"></span></a></h4></div><div class=\"panel-collapse\" [ngClass]=\"{'in panel-open':!isCollapsed()}\"><div class=\"panel-body\"><ng-content></ng-content></div></div></div>",
        styles: [".panel{box-shadow:none;background-color:transparent}.panel.nbp-panel-disabled{opacity:.5}.panel.nbp-panel-disabled .panel-heading:hover,.panel.nbp-panel-disabled [role=button]:hover{cursor:not-allowed!important}.panel .panel-open{background-color:#f8f8f8!important;border:1px!important;border-color:#6f6f6f}.panel .panel-heading{padding:1em 1.25em 1em 1.25em!important;height:50px;width:300px;box-shadow:none}.panel .panel-heading:hover{cursor:pointer}.panel .panel-heading .title{display:inline-block;max-width:90%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.panel .panel-collapse{max-height:0;transition:max-height .15s ease-out;overflow:hidden}.panel .panel-collapse .panel-body{border:1px!important;box-shadow:none;background-color:#f8f8f8!important}.panel .panel-collapse.in{max-height:1000em;transition:max-height .25s ease-in}:host-context(.contrasto-on) .panel-body{background-color:#fff!important;border-top:none!important;color:#000}.panel.nbp-panel-showmore{border:0!important;border-color:#fff}.panel.nbp-panel-showmore .panel-heading{border:1px!important;color:#258900;border-color:#6f6f6f;background-color:transparent}.panel.nbp-panel-showmore .panel-heading .panel-title{color:green;font-weight:700;font-size:.75em!important;text-transform:uppercase}.panel.nbp-panel-showmore .panel-heading .accordion-arrow{color:#000;position:relative;font-size:26px!important;margin-top:1.156em}.panel.nbp-panel-showmore .panel-heading .stringa{color:#fff;font-size:.75em!important;margin-right:1.875em;font-weight:700;font-family:arial}.panel.nbp-panel-showmore .panel-heading h4{margin:0;font-size:1em}.panel.nbp-panel-showmore .panel-body{border-radius:0 0 2px 2px!important}.panel.nbp-panel-showmore .panelTitle{font-size:.875em;font-weight:700}.panel.nbp-panel-showmore .accordionIcon{font-size:32px;position:absolute;top:9px}.panel.nbp-panel-showmore a{text-decoration:none!important;margin-top:-5px}.panel.nbp-panel-showmore a .icon:before{font-size:26px}.panel.nbp-panel-showmore>.panel-heading{background-color:transparent!important;position:relative}.panel.nbp-panel-showmore>.panel-heading .accordion-icon{font-size:32px;position:absolute;top:9px}.panel.nbp-panel-showmore>.panel-heading>.panel-title{font-size:.875em;font-weight:700}.panel.nbp-panel-showmore>.panel-heading>.panel-title>.title{padding:2px 2px 2px 0}.panel.nbp-panel-showmore>.panel-heading>.panel-title .accordion-title-icon{padding:2px 2px 2px 42px!important;margin-bottom:-4px}.panel.nbp-panel-showmore>.panel-heading>.panel-open{background-color:#5ca740!important}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-open{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-heading{background-color:#fff!important}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-heading .panel-title{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-heading .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .panel-heading .stringa{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .panel.nbp-panel-showmore .accordion-green-header>.panel-heading:hover{background-color:#fff!important;color:#000;border:1px solid #000}:host-context(.contrasto-on) .panel.nbp-panel-showmore .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:1px solid #000!important}.panel.nbp-panel-button .panel-heading{text-align:center;border:1px solid #258900!important;background-color:transparent;border-radius:25px}.panel.nbp-panel-button .panel-heading:hover{background-color:#258900!important}.panel.nbp-panel-button .panel-heading:hover .panel-title{color:#fff}.panel.nbp-panel-button .panel-heading:hover .triangolo-top-accordion{border-color:transparent transparent #fff transparent}.panel.nbp-panel-button .panel-heading:hover .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent}.panel.nbp-panel-button .panel-heading.panel-heading-round{background-color:#258900!important}.panel.nbp-panel-button .panel-heading.panel-heading-round .panel-title{color:#fff}.panel.nbp-panel-button .panel-heading.panel-heading-round .triangolo-top-accordion{border-color:transparent transparent #fff transparent}.panel.nbp-panel-button .panel-heading.panel-heading-round .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent}.panel.nbp-panel-button .panel-heading .panel-title{color:#258900;font-weight:700;font-size:.75em!important;text-transform:uppercase}.panel.nbp-panel-button .panel-heading .accordion-arrow{color:#000;position:relative;font-size:26px!important;margin-top:1.156em}.panel.nbp-panel-button .panel-heading .triangolo-top-accordion{border-style:solid;border-width:0 7px 7px 7px;border-color:transparent transparent #258900 transparent;display:inline-block!important}.panel.nbp-panel-button .panel-heading .triangolo-bottom-accordion{border-style:solid;border-width:7px 7px 0 7px;border-color:#258900 transparent transparent transparent;display:inline-block!important}.panel.nbp-panel-button .panel-heading .stringa{color:#fff;font-size:.75em!important;margin-right:1.875em;font-weight:700;font-family:arial}.panel.nbp-panel-button .panel-heading h4{margin:0;font-size:1em}.panel.nbp-panel-button .panelTitle{font-size:.875em;font-weight:700;text-transform:uppercse}.panel.nbp-panel-button .accordionIcon{font-size:32px;position:absolute;top:9px}.panel.nbp-panel-button.nbp-panel-button>.panel-heading{background-color:transparent;position:relative}.panel.nbp-panel-button.nbp-panel-button>.panel-heading .accordion-icon{font-size:32px;position:absolute;top:9px}.panel.nbp-panel-button.nbp-panel-button>.panel-heading>.panel-title{font-size:.875em;font-weight:700;text-transform:uppercse}.panel.nbp-panel-button.nbp-panel-button>.panel-heading>.panel-title>.title{padding:2px 2px 2px 0}.panel.nbp-panel-button.nbp-panel-button>.panel-heading>.panel-title .accordion-title-icon{padding:2px 2px 2px 42px!important;margin-bottom:-4px}.panel.nbp-panel-button.nbp-panel-button>.panel-heading>.panel-open{background-color:#5ca740!important}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-open{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-open .panel-title{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-open .stringa{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-open .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading{background-color:#000!important;border:1px solid #000!important}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover{background-color:#fff!important;color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover .panel-title{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover .stringa{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover .accordion-arrow{color:#000}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover .triangolo-top-accordion{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading:hover .triangolo-bottom-accordion{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading .panel-title{color:#fff}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading .accordion-arrow{color:#fff}:host-context(.contrasto-on) .panel.nbp-panel-button .panel-heading .stringa{color:#fff}:host-context(.contrasto-on) .panel.nbp-panel-button .accordion-green-header>.panel-heading{background-color:#000!important}:host-context(.contrasto-on) .panel.nbp-panel-button .accordion-green-header>.panel-heading:hover{background-color:#fff!important;color:#000;border:1px solid #000}:host-context(.contrasto-on) .panel.nbp-panel-button .accordion-green-header>.panel-open{background-color:#fff!important;color:#000;border:1px solid #000!important}:host-context(.contrasto-on) .panel.nbp-panel-button .triangolo-top-accordion{border-color:transparent transparent #fff transparent}:host-context(.contrasto-on) .panel.nbp-panel-button .triangolo-bottom-accordion{border-color:#fff transparent transparent transparent} /*# sourceMappingURL=nbp-accordion-light.component.css.map */ "]
    }),
    __metadata$100("design:paramtypes", [])
], NbpAccordionLightComponent);

var __decorate$119 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$101 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$24 = 0;
let NbpAlertBoxComponent = class NbpAlertBoxComponent {
    constructor() {
        /**
         * (Opzionale) Id del componente, se non viene fornito
         * è autogenerato
         */
        this.id = `nbp-alert-box-${++nextId$24}`;
        this._alertType = NbpAlertType;
        /**
         * Evento emesso alla chiusura della AlertBox
         */
        this.nbpClose = new EventEmitter();
    }
    closeIconClick() {
        this.nbpClose.emit();
    }
};
__decorate$119([
    Input(),
    __metadata$101("design:type", Object)
], NbpAlertBoxComponent.prototype, "id", void 0);
__decorate$119([
    Input(),
    __metadata$101("design:type", Number)
], NbpAlertBoxComponent.prototype, "nbpAlertType", void 0);
__decorate$119([
    Output(),
    __metadata$101("design:type", EventEmitter)
], NbpAlertBoxComponent.prototype, "nbpClose", void 0);
NbpAlertBoxComponent = __decorate$119([
    Component({
        selector: 'nbp-alert-box',template: "<div class=\"nbpAlertContainer\" [ngClass]=\"{ 'informativa': nbpAlertType === _alertType.INFORMATIVA, 'informativa-positiva': nbpAlertType === _alertType.INFORMATIVA_POSITIVA, 'informativa-promozionale': nbpAlertType === _alertType.INFORMATIVA_PROMOZIONALE, 'warning': nbpAlertType === _alertType.WARNING, 'warning-bloccante': nbpAlertType === _alertType.WARNING_BLOCCANTE }\"><div class=\"nbpAlertIconContainer\"><span class=\"icon\" [ngClass]=\"{ 'icomoon-Simboli_Risorsa-4': nbpAlertType === _alertType.INFORMATIVA, 'icomoon-Simboli_Risorsa-19': nbpAlertType === _alertType.INFORMATIVA_POSITIVA, 'icomoon-Soldi_Risorsa-35': nbpAlertType === _alertType.INFORMATIVA_PROMOZIONALE, 'icomoon-Simboli_Risorsa-5': nbpAlertType === _alertType.WARNING, 'icomoon-Simboli_Risorsa-22': nbpAlertType === _alertType.WARNING_BLOCCANTE }\"></span></div><div class=\"nbpAlertMessageContainer\"><div class=\"nbpAlertClosingIcon\"><span class=\"icon icon-times\" (click)=\"closeIconClick()\"></span></div><div><ng-content></ng-content></div></div></div>",
        styles: [":host{display:inline-block;width:inherit}.nbpAlertContainer{width:550px;min-height:72px;display:table;table-layout:fixed;-webkit-box-shadow:0 0 17px 0 rgba(0,0,0,.18);-moz-box-shadow:0 0 17px 0 rgba(0,0,0,.18);box-shadow:0 0 17px 0 rgba(0,0,0,.18)}.nbpAlertContainer .nbpAlertIconContainer{display:table-cell;vertical-align:middle;text-align:center;padding:14px 18px;font-size:36px;width:72px;line-height:1}.nbpAlertContainer .nbpAlertIconContainer .icon:before{vertical-align:middle}.nbpAlertContainer .nbpAlertMessageContainer{display:table-cell;vertical-align:middle;text-align:justify;position:relative;font-size:16px;color:#323232;padding:14px 50px 14px 18px}.nbpAlertContainer .nbpAlertMessageContainer .nbpAlertClosingIcon{position:absolute;top:14px;right:18px;font-size:20px;cursor:pointer}.nbpAlertContainer .nbpAlertMessageContainer .nbpAlertClosingIcon .icon:before{vertical-align:initial}.nbpAlertContainer .nbpAlertMessageContainer div{vertical-align:middle}.nbpAlertContainer.informativa{border:2px solid #1e8a00}.nbpAlertContainer.informativa .nbpAlertIconContainer{color:#c4dbbc;background-color:#1e8a00}.nbpAlertContainer.informativa-positiva{border:2px solid #1e8a00}.nbpAlertContainer.informativa-positiva .nbpAlertIconContainer{color:#c4dbbc;background-color:#1e8a00}.nbpAlertContainer.informativa-promozionale{border:2px solid #0095ca}.nbpAlertContainer.informativa-promozionale .nbpAlertIconContainer{color:#bce5f4;background-color:#0095ca}.nbpAlertContainer.warning{border:2px solid #fe9800}.nbpAlertContainer.warning .nbpAlertIconContainer{color:#ffe7bb;background-color:#fe9800}.nbpAlertContainer.warning-bloccante{border:2px solid #f55854}.nbpAlertContainer.warning-bloccante .nbpAlertIconContainer{color:#fad2d2;background-color:#f55854}:host-context(.contrasto-on) .nbpAlertContainer{border:2px solid #000}:host-context(.contrasto-on) .nbpAlertContainer .nbpAlertIconContainer{font-weight:700;color:#fff;background-color:#000}:host-context(.contrasto-on) .nbpAlertContainer .nbpAlertMessageContainer{color:#000} /*# sourceMappingURL=nbp-alert-box.component.css.map */ "]
    })
], NbpAlertBoxComponent);

var __decorate$120 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NbpSliceAndEllipsisPipe = class NbpSliceAndEllipsisPipe extends SlicePipe {
    transform(stringToFilter, maxChar) {
        if (maxChar >= 0 && stringToFilter.length >= maxChar) {
            return (super.transform(stringToFilter, 0, maxChar) + '...');
        }
        else {
            return stringToFilter;
        }
    }
};
NbpSliceAndEllipsisPipe = __decorate$120([
    Pipe({
        name: 'nbpSliceAndEllipsis'
    })
], NbpSliceAndEllipsisPipe);

var __decorate$121 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$102 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpEllipsisDirective = class NbpEllipsisDirective {
    constructor(elRef) {
        this.elRef = elRef;
    }
    ngAfterViewChecked() {
        this.ellipsizeTextBox();
    }
    hasOverflow() {
        const el = this.elRef.nativeElement;
        return el.scrollHeight > el.offsetHeight;
    }
    ellipsizeTextBox() {
        // rifattorizzare funzione xke troppo pesante  
        // idea contare il numero di righe e passare un quantitativo di caratteri leggermente maggiore del max possibile nel box
        const el = this.elRef.nativeElement;
        this.paragraph = el.innerHTML;
        this.wordArray = this.paragraph.split(' ');
        while (this.hasOverflow()) {
            this.wordArray.pop();
            el.innerHTML = this.wordArray.join(' ') + '...';
        }
    }
};
NbpEllipsisDirective = __decorate$121([
    Directive({
        selector: '[nbpEllipsis]'
    }),
    __metadata$102("design:paramtypes", [ElementRef])
], NbpEllipsisDirective);

var __decorate$122 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$103 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPaperSignComponent = class NbpPaperSignComponent {
    constructor() {
        this.secondary = NbpStyle.SECONDARY;
        /**
        * Evento sulla pressione del tasto di firma completata
        */
        this.onSignatureConfirm = new EventEmitter();
    }
    _onSignatureConfirm() {
        console.log('NbpPaperSignComponent - emitting event onSignatureConfirm');
        this.onSignatureConfirm.emit();
    }
};
__decorate$122([
    Output(),
    __metadata$103("design:type", EventEmitter)
], NbpPaperSignComponent.prototype, "onSignatureConfirm", void 0);
NbpPaperSignComponent = __decorate$122([
    Component({selector: 'nbp-paper-sign',
        template: "<div class=\"paper-sign-container row\"><div class=\"col-md-24\"><div class=\"row\"><div class=\"col-md-9 paper-image-container pad-r-10\"><span class=\"paper-image icomoon-Firma_3 orizontal-container vertical-alignment text-center\"></span></div><div class=\"col-md-15 paper-text-container\"><div class=\"vertical-alignment\"><h1>Il cliente sta firmando la documentazione cartacea</h1><p class=\"pad-b-12\">Quando avrà terminato, clicca sul pulsante Conferma Firma e CONTINUA per proseguire.</p><div class=\"button-container\"><nbp-button [nbpLabel]=\"'Conferma Firma'\" [nbpStyle]=\"secondary\" (nbpClick)=\"_onSignatureConfirm()\"></nbp-button></div></div></div></div></div></div>",
        styles: [".paper-sign-container{background-color:#f2f2f2;height:240px}.paper-image-container,.paper-sign-container,.paper-text-container{height:240px}.paper-image{font-size:140px;color:#6c6c6c;display:inline-block;background-repeat:no-repeat}.vertical-alignment{transform:translateY(-50%);top:50%;position:absolute}.vertical-alignment.orizontal-container{transform:translate(-50%,-50%);left:50%;position:absolute}h1{font-size:25px;margin:0;padding-bottom:15px;color:#000}p{font-size:16px;color:#6f6f6f;margin-bottom:30px}.button-container{width:25%} /*# sourceMappingURL=nbp-paper-sign.component.css.map */ "]
    }),
    __metadata$103("design:paramtypes", [])
], NbpPaperSignComponent);

var __decorate$123 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
/**
 * Service used to trigger downloads of files.
 * @example
 * downloadService.download(`data:text/plain;base64,ZXhhbXBsZQ==`, '1.txt')
 *                .subscribe();
 * @example
 * httpClient.get('https://loremflickr.com/320/240', { responseType: 'blob' })
 *           .mergeMap(res => downloadService.download(res, '1.jpg'))
 *           .subscribe();
 */
let DownloadService = class DownloadService {
    /**
     * Download an ArrayBuffer, a Blob, or a data URL.
     * @param toDownload The object to download.
     * @param filename   An optional default filename.
     * @param mime       An optional mime type hint.
     * @returns An Observable which completes when the download is triggered.
     */
    download(toDownload, filename, mime) {
        const needsBlob = typeof toDownload !== 'string' || window.navigator.msSaveOrOpenBlob;
        // If we have a data URL and we are not on IE, we can already start the download.
        if (!needsBlob && typeof toDownload === 'string') {
            return this.downloadDataURL(toDownload, filename);
        }
        const blob = this.createBlob(toDownload, mime);
        // On IE, use its propietary API.
        if (window.navigator.msSaveOrOpenBlob) {
            window.navigator.msSaveOrOpenBlob(blob, filename);
            return Observable.of(null);
        }
        return this.createDataURLFromBlob(blob)
            .mergeMap(dataURL => this.downloadDataURL(dataURL, filename));
    }
    /**
     * Create a blob from an ArrayBuffer, a Blob, or a data URL.
     * @param arg      The object to convert to a blob.
     * @param mimeType An optional mime type hint.
     */
    createBlob(arg, mimeType) {
        if (arg instanceof ArrayBuffer) {
            return new Blob([arg], { type: mimeType });
        }
        else if (arg instanceof Blob) {
            return arg;
        }
        // We assume the string is a data URL.
        const { buffer, mime } = this.decodeDataURL(arg);
        return this.createBlob(buffer, mime);
    }
    /**
     * Create a Blob, given a data URL.
     * This function is called only on IE.
     * @param dataURL The data URL to process.
     */
    decodeDataURL(dataURL) {
        const byteString = atob(dataURL.split(',')[1]), mime = dataURL.split(',')[0].split(':')[1].split(';')[0], buffer = new ArrayBuffer(byteString.length), byteArray = new Uint8Array(buffer);
        for (let i = 0; i < byteString.length; i++) {
            byteArray[i] = byteString.charCodeAt(i);
        }
        return { buffer, mime };
    }
    /**
     * Create a data URL from a Blob.
     * The FileReader API is supported by all major browsers.
     * https://caniuse.com/#feat=filereader
     * @param blob The Blob to be data-URL-encoded.
     */
    createDataURLFromBlob(blob) {
        const reader = new FileReader();
        return new Observable((observer) => {
            reader.onerror = err => {
                observer.error(err);
            };
            reader.onload = () => {
                observer.next(reader.result);
                observer.complete();
            };
            reader.readAsDataURL(blob);
        });
    }
    /**
     * Trigger the download of a data URL.
     * This method is usable only on Firefox / Chrome
     * @param dataURL  The data URL to download.
     * @param filename An optional filename hint.
     */
    downloadDataURL(dataURL, filename) {
        const anchor = document.createElement('a');
        anchor.href = dataURL;
        anchor.download = filename || 'download';
        document.documentElement.appendChild(anchor);
        anchor.click();
        document.documentElement.removeChild(anchor);
        // For consistency with the other methods.
        return Observable.of(dataURL);
    }
};
DownloadService = __decorate$123([
    Injectable()
], DownloadService);

var __decorate$125 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$105 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpBurgerMenuGenericComponent = class NbpBurgerMenuGenericComponent {
    constructor(router, activatedRoute, translate) {
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.translate = translate;
        /**
         * Permette di disabilitare la traduzzione delle voci di menu
         */
        this.nbpTranslate = true;
        /**
         * (Opzionale) booleano per disabilitare la possibilità di fare logout.
         * Valore default false
         */
        this.nbpDisableLogout = false;
        /**
         * Evento emesso sulla pressione del logout.
         * @param {EventEmitter<INbpUser>}  nbpOnLogout
         */
        this.nbpOnLogout = new EventEmitter();
        /**
         * Evento emesso sulla pressione di ogni voce di menu'.
         * @param {EventEmitter<INbpItemMenu>}  nbpOnItemClick
         */
        this.nbpOnItemClick = new EventEmitter();
        /**
         * Evento emesso all'apertura del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnOpen = new EventEmitter();
        /**
         * Evento emesso alla chiusure del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnClose = new EventEmitter();
        this._isOpen = false; // true in test phase
        this._showSecondLevelMenu = false; // false in test phase
        this.maxItemsSections = 0;
        this.reverse = "";
    }
    ;
    _translate(label) {
        if (!this.nbpTranslate) {
            return label;
        }
        return this.translate.instant(label);
    }
    _changeRoute(routeValue) {
        if (routeValue.external) {
            if (routeValue.link.search('http://') > -1) {
                window.location.href = routeValue.link;
            }
            else {
                window.location.href = 'http://' + routeValue.link;
            }
        }
        else {
            this.router.navigate([routeValue.link]);
        }
    }
    _onClick(item) {
        // console.log('click item menu: ' + JSON.stringify(item));
        this.reverse = "";
        this.nbpOnItemClick.emit(item);
        if (!item.secondLevelMenu) {
            this.toggle();
        }
        if (item.secondLevelMenu && item.secondLevelMenu.sections && item.secondLevelMenu.sections.length > 0) {
            this._selectedItem = item;
            this._showSecondLevelMenu = true;
            setTimeout(() => {
                var height = document.getElementsByClassName('second-level-menu')[0].clientHeight + 20;
                this.height = height;
            }, 100);
        }
    }
    _goBack() {
        this.reverse = "R";
        this._selectedItem.secondLevelMenu.sections.forEach((section) => {
            if (section.items.length > this.maxItemsSections)
                this.maxItemsSections = section.items.length;
        });
        setTimeout(() => {
            this._showSecondLevelMenu = false;
            this._selectedItem = null;
            var height = document.getElementsByClassName('first-level-menu')[0].clientHeight + 20;
            this.height = height;
        }, this.maxItemsSections * 500);
    }
    // Metodi Pubblici del componente
    /**
     * Permette apertura programmatica del BurgerMenu
     */
    open() {
        this._isOpen = true;
        this.nbpOnOpen.emit();
        setTimeout(() => {
            if (!this._showSecondLevelMenu) {
                var height = document.getElementsByClassName('first-level-menu')[0].clientHeight + 20;
            }
            else {
                var height = document.getElementsByClassName('second-level-menu')[0].clientHeight + 20;
            }
            this.height = height;
        }, 100);
    }
    /**
     * Permette la chiusura programmatica del BurgerMenu
     */
    close() {
        this._isOpen = false;
        this.nbpOnClose.emit();
        setTimeout(() => {
            this.height = 0;
        }, 100);
    }
    setMove(i, _showSecondLevelMenu) {
        if (_showSecondLevelMenu) {
            return 'moveIn' + i;
        }
        else {
            return 'moveInR' + i;
        }
    }
    setMoveTitle(_showSecondLevelMenu) {
        if (_showSecondLevelMenu)
            return 'moveInTitle';
        else
            return 'moveInTitleR';
    }
    setMoveFirstLevel() {
        if (this._isOpen) {
            // alert("open");
            return 'first-level-menu-open';
        }
        else {
            // alert("close");
            return 'first-level-menu-close';
        }
    }
    setMoveSecondLevel() {
        if (this._isOpen) {
            // alert("open");
            return 'second-level-menu-open';
        }
        else {
            // alert("close");
            return 'second-level-menu-close';
        }
    }
    /**
     * Permette di eseguire il toggle del BurgerMenu
     */
    toggle() {
        this._isOpen ? this.close() : this.open();
    }
    onLogout() {
        alert('logOut');
    }
    ngOnInit() {
    }
};
__decorate$125([
    Input(),
    __metadata$105("design:type", Object)
], NbpBurgerMenuGenericComponent.prototype, "nbpMenu", void 0);
__decorate$125([
    Input(),
    __metadata$105("design:type", Boolean)
], NbpBurgerMenuGenericComponent.prototype, "nbpTranslate", void 0);
__decorate$125([
    Input(),
    __metadata$105("design:type", Object)
], NbpBurgerMenuGenericComponent.prototype, "nbpUser", void 0);
__decorate$125([
    Input(),
    __metadata$105("design:type", Boolean)
], NbpBurgerMenuGenericComponent.prototype, "nbpDisableLogout", void 0);
__decorate$125([
    Output(),
    __metadata$105("design:type", EventEmitter)
], NbpBurgerMenuGenericComponent.prototype, "nbpOnLogout", void 0);
__decorate$125([
    Output(),
    __metadata$105("design:type", EventEmitter)
], NbpBurgerMenuGenericComponent.prototype, "nbpOnItemClick", void 0);
__decorate$125([
    Output(),
    __metadata$105("design:type", EventEmitter)
], NbpBurgerMenuGenericComponent.prototype, "nbpOnOpen", void 0);
__decorate$125([
    Output(),
    __metadata$105("design:type", EventEmitter)
], NbpBurgerMenuGenericComponent.prototype, "nbpOnClose", void 0);
NbpBurgerMenuGenericComponent = __decorate$125([
    Component({
        selector: 'nbp-burger-menu-generic',template: "<div class=\"menu\" [ngClass]=\"{'closed': !_isOpen, 'open': _isOpen}\" [style.height.px]=\"height\"><div class=\"container first-level-menu\" [ngClass]=\"{'open': !_showSecondLevelMenu}\"><div class=\"row\"><div class=\"col-sm-16\"><div><div class=\"col-sm-12 section-menu p-0\" *ngFor=\"let section of nbpMenu.sections; let i = index\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item);_changeRoute(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\" style=\"padding-top:0.25em\"></span> <span>{{_translate(item.label)}}</span></a></li></ul></div></div></div><div class=\"col-sm-8\"><ng-content selector=\"app-logged-user\"></ng-content></div></div></div><ng-container *ngIf=\"_showSecondLevelMenu\"><div class=\"container second-level-menu\" [ngClass]=\"setMoveSecondLevel()\"><div class=\"row upper-bar\"><div class=\"menu-principale pull-left\"><span class=\"glyphicon icon icon-arrow-left\" (click)=\"_goBack();\"></span> <span class=\"menu-principale-title\" (click)=\"_goBack();\">Menu principale</span></div></div><div class=\"row second-level-buttons\"><div [ngClass]=\"'moveInTitle' + reverse\" class=\"selected-first-level-menu\"><span class=\"icon {{_selectedItem.icon}}\"></span> <span class=\"selected-first-level-label\">{{_translate(_selectedItem.label)}}</span></div><div class=\"col-sm-8 p-0\" *ngFor=\"let section of _selectedItem.secondLevelMenu.sections;\" [ngClass]=\"{'main-menu-container-pad-l': i > 0, 'main-menu-container-pad-r': i !== _selectedItem.secondLevelMenu.sections.length - 1}\"><ul class=\"main-menu\"><li><ng-container *ngFor=\"let item of section.items;  let i = index\"><a [ngClass]=\"'moveIn' + reverse + (i + 1)\" (click)=\"_onClick(item);_changeRoute(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\"></span> <span>{{_translate(item.label)}}</span></a></ng-container></li></ul></div></div></div></ng-container></div>",
        styles: [".menu{position:relative;width:100%;height:0;overflow-x:hidden;overflow-y:hidden;background-color:#323232;-moz-transition:height .25s ease-out;-o-transition:height .25s ease-out;transition:height .25s ease-out}.menu .icon{margin-right:.313em;font-size:1.563em;vertical-align:middle}.menu.closed{height:0}.main-menu-container{padding:0}.section-menu:nth-child(2n+3){clear:left}.p-0{padding:0!important}.main-menu{list-style:none;padding:0 .313em 0 .313em;margin:0}.main-menu a{color:#ccc;display:table;width:100%;padding:0 1.25em 0 1.25em;margin:.62em 0 .62em 0;text-decoration:none;cursor:pointer;height:2.813em}.main-menu a:active,.main-menu a:focus,.main-menu a:hover{background-color:#258900;color:#fff}.main-menu a span{display:table-cell;vertical-align:middle;text-align:left}.main-menu a span:nth-child(1){width:1.563em}.main-menu .select{background-color:#258900;color:#fff;border:.0625em solid #258900}.upper-bar{border-bottom:.0625em solid #6f6f6f}.menu-principale{color:#ccc;font-size:1em;padding:1em .625em .625em .625em;cursor:pointer}.menu-principale .icon{font-size:.875em}.menu-principale-title{vertical-align:top}.selected-first-level-menu{color:#ccc;padding:1.875em 1.875em 1.875em 1.875em}.selected-first-level-menu .selected-first-level-label{font-size:1.125em}.first-level-menu{position:absolute;left:0;visibility:hidden;right:0;opacity:0;left:-6.25em;-moz-transition:all .35s ease-out;-o-transition:all .35s ease-out;transition:all .35s ease-out}.first-level-menu.open{opacity:1;left:0;visibility:visible;margin-top:.625em;-moz-transition:all .35s ease-out;-o-transition:all .35s ease-out;transition:all .35s ease-out}.second-level-menu{position:absolute;left:0;visibility:hidden;right:0;opacity:0;left:6.25em}.second-level-menu-open{opacity:1;visibility:visible;left:0}.second-level-menu-close{opacity:1;visibility:hidden;left:0;animation-name:example2;animation-duration:1s;animation-fill-mode:forwards;animation-delay:3s}@keyframes example2{from{opacity:1}to{opacity:0}}@media (max-width:992px){.main-menu a{width:14.375em}}:host-context(.contrasto-on) .menu{background-color:#000}:host-context(.contrasto-on) .menu.open{border-color:#fff}:host-context(.contrasto-on) .main-menu a{color:#fff;border-color:#fff}:host-context(.contrasto-on) .main-menu a:active,:host-context(.contrasto-on) .main-menu a:focus,:host-context(.contrasto-on) .main-menu a:hover{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .main-menu .select{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .upper-bar{border-color:#fff}:host-context(.contrasto-on) .menu-principale{color:#fff}:host-context(.contrasto-on) .selected-first-level-menu{color:#fff}.moveInTitle{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:0s}.moveIn1{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.25s}.moveIn2{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.5s}.moveIn3{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.75s}.moveIn4{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1s}.moveIn5{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.25s}.moveIn6{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.5s}.moveIn7{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.75s}.moveIn8{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2s}.moveIn9{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2.25s}.moveInTitleR{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:0s}.moveInR1{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.25s}.moveInR2{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.5s}.moveInR3{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.75s}.moveInR4{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1s}.moveInR5{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.25s}.moveInR6{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.5s}.moveInR7{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.75s}.moveInR8{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2s}.moveInR9{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2.25s}@keyframes example{from{opacity:0;margin-left:600px}to{opacity:1;margin-left:0}}@keyframes exampleR{from{opacity:1;margin-left:0}to{opacity:0;margin-left:600px}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){[class*=' icon-']::before{font-size:1.375em!important}} /*# sourceMappingURL=nbp-burger-menu-generic.component.css.map */ "]
    }),
    __metadata$105("design:paramtypes", [Router,
        ActivatedRoute,
        TranslateService])
], NbpBurgerMenuGenericComponent);

var __decorate$127 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$107 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpMenuOperationComponent = class NbpMenuOperationComponent {
    constructor(router, activatedRoute, translate) {
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.translate = translate;
        /**
         * Permette di disabilitare la traduzzione delle voci di menu
         */
        this.nbpTranslate = true;
        /**
         * Evento emesso sulla pressione di ogni voce di menu'.
         * @param {EventEmitter<INbpItemMenu>}  nbpOnItemClick
         */
        this.nbpOnItemClick = new EventEmitter();
        /**
         * Evento emesso all'apertura del menu operazioni.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnOpen = new EventEmitter();
        /**
         * Evento emesso alla chiusure del menu operazioni.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnClose = new EventEmitter();
        this._isOpen = false;
        this.maxItemsSections = 0;
        this.reverse = "";
    }
    _translate(label) {
        if (!this.nbpTranslate) {
            return label;
        }
        return this.translate.instant(label);
    }
    _changeRoute(routeValue) {
        if (routeValue.external) {
            if (routeValue.link.search('http://') > -1) {
                window.location.href = routeValue.link;
            }
            else {
                window.location.href = 'http://' + routeValue.link;
            }
        }
        else {
            this.router.navigate([routeValue.link]);
        }
    }
    _onClick(item) {
        // console.log('click item menu: ' + JSON.stringify(item));
        this.reverse = "";
        this.nbpOnItemClick.emit(item);
        this.toggle();
    }
    /**
     * Permette apertura programmatica del BurgerMenu
     */
    open() {
        this._isOpen = true;
        this.nbpOnOpen.emit();
        setTimeout(() => {
            var height = document.getElementsByClassName('first-level-menu-operation')[0].clientHeight + 20;
            this.height = height;
        }, 100);
    }
    /**
     * Permette la chiusura programmatica del BurgerMenu
     */
    close() {
        this._isOpen = false;
        this.nbpOnClose.emit();
        setTimeout(() => {
            this.height = 0;
        }, 100);
    }
    setMoveFirstLevel() {
        if (this._isOpen) {
            return 'first-level-menu-operation-open';
        }
        else {
            return 'first-level-menu-operation-close';
        }
    }
    /**
     * Permette di eseguire il toggle del BurgerMenu
     */
    toggle() {
        this._isOpen ? this.close() : this.open();
    }
    ngOnInit() {
        this.title = (this.nbpMenu) ? this.nbpMenu.title : "Operazione e pagamenti";
    }
};
__decorate$127([
    Input(),
    __metadata$107("design:type", Object)
], NbpMenuOperationComponent.prototype, "nbpMenu", void 0);
__decorate$127([
    Input(),
    __metadata$107("design:type", Boolean)
], NbpMenuOperationComponent.prototype, "nbpTranslate", void 0);
__decorate$127([
    Output(),
    __metadata$107("design:type", EventEmitter)
], NbpMenuOperationComponent.prototype, "nbpOnItemClick", void 0);
__decorate$127([
    Output(),
    __metadata$107("design:type", EventEmitter)
], NbpMenuOperationComponent.prototype, "nbpOnOpen", void 0);
__decorate$127([
    Output(),
    __metadata$107("design:type", EventEmitter)
], NbpMenuOperationComponent.prototype, "nbpOnClose", void 0);
NbpMenuOperationComponent = __decorate$127([
    Component({
        selector: 'nbp-menu-operation',template: "<div class=\"menu\" [ngClass]=\"{'closed': !_isOpen, 'open': _isOpen}\" [style.height.px]=\"height\"><div class=\"container first-level-menu-operation open\"><div class=\"row text-center\"><span class=\"title-operation\" style=\"color: #ffffff;\">{{_translate(title)}}</span></div><div class=\"row\"><div class=\"col-sm-24\"><div *ngIf=\"nbpMenu\"><div class=\"col-sm-8 section-menu p-0\" *ngFor=\"let section of nbpMenu.sections; let i = index\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item);_changeRoute(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\" style=\"padding-top:0.25em\"></span> <span>{{_translate(item.label)}}</span></a></li></ul></div></div></div></div></div></div>",
        styles: [".menu{position:relative;width:100%;height:0;overflow-x:hidden;overflow-y:hidden;background-color:#323232;-moz-transition:height .25s ease-out;-o-transition:height .25s ease-out;transition:height .25s ease-out}.menu .icon{margin-right:.313em;font-size:1.422em!important;vertical-align:middle}.title-operation{color:#fff;font-size:1.85em}.menu.closed{height:0}.main-menu-container{padding:0}.section-menu:nth-child(2n+3) a{color:#fa9600;border:1px solid #fa9600;border-radius:4px}.section-menu:nth-child(2n+3) a:hover{background-color:#fa9600;color:#323232;border-color:#323233}.p-0{padding:0!important}.main-menu{list-style:none;padding:0 2.187em 0 2.187em;margin:0}.main-menu a{color:#ccc;display:table;width:100%;padding:0 1.25em 0 1.25em;margin:.62em 0 .62em 0;text-decoration:none;font-weight:700;cursor:pointer;height:2.813em;border:1px solid #6f6f6f;border-radius:4px}.main-menu a:active,.main-menu a:focus,.main-menu a:hover{background-color:#258900;color:#fff;border:1px solid #258900}.main-menu a span{display:table-cell;vertical-align:middle;text-align:center;text-transform:uppercase;font-size:.75em}.main-menu a span:nth-child(1){width:1.563em}.main-menu .select{background-color:#258900;color:#fff;border:.0625em solid #258900}.upper-bar{border-bottom:.0625em solid #6f6f6f}.menu-principale{color:#ccc;font-size:1em;padding:1em .625em .625em .625em;cursor:pointer}.menu-principale .icon{font-size:.875em}.first-level-menu-operation{position:absolute;left:0;visibility:hidden;right:0;opacity:0;left:-6.25em;-moz-transition:all .35s ease-out;-o-transition:all .35s ease-out;transition:all .35s ease-out}.first-level-menu-operation.open{opacity:1;left:0;visibility:visible;margin-top:.625em;-moz-transition:all .35s ease-out;-o-transition:all .35s ease-out;transition:all .35s ease-out}@keyframes example2{from{opacity:1}to{opacity:0}}@media (max-width:992px){.main-menu a{width:10.375em}}:host-context(.contrasto-on) .menu{background-color:#000}:host-context(.contrasto-on) .menu.open{border-color:#fff}:host-context(.contrasto-on) .main-menu a{color:#fff;border-color:#fff}:host-context(.contrasto-on) .main-menu a:active,:host-context(.contrasto-on) .main-menu a:focus,:host-context(.contrasto-on) .main-menu a:hover{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .main-menu .select{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .upper-bar{border-color:#fff}:host-context(.contrasto-on) .menu-principale{color:#fff}:host-context(.contrasto-on) .selected-first-level-menu-operation{color:#fff}.moveInTitle{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:0s}.moveIn1{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.25s}.moveIn2{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.5s}.moveIn3{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.75s}.moveIn4{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1s}.moveIn5{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.25s}.moveIn6{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.5s}.moveIn7{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.75s}.moveIn8{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2s}.moveIn9{opacity:0;margin-left:300px;animation-name:example;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2.25s}.moveInTitleR{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:0s}.moveInR1{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.25s}.moveInR2{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.5s}.moveInR3{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:.75s}.moveInR4{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1s}.moveInR5{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.25s}.moveInR6{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.5s}.moveInR7{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:1.75s}.moveInR8{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2s}.moveInR9{opacity:1;margin-left:0;animation-name:exampleR;animation-duration:1s;animation-fill-mode:forwards;animation-delay:2.25s}@keyframes example{from{opacity:0;margin-left:600px}to{opacity:1;margin-left:0}}@keyframes exampleR{from{opacity:1;margin-left:0}to{opacity:0;margin-left:600px}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){[class*=' icon-']::before{font-size:1.375em!important}} /*# sourceMappingURL=nbp-menu-operation.component.css.map */ "]
    }),
    __metadata$107("design:paramtypes", [Router,
        ActivatedRoute,
        TranslateService])
], NbpMenuOperationComponent);

var __decorate$126 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$106 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpCustomerInfoGenericComponent = class NbpCustomerInfoGenericComponent {
    constructor() {
        /**
         * Titolo del pannello.
         */
        this.clientTitle = "INFORMAZIONI UTENTE";
        /**
         * Booleano che indica se mostrare o meno la freccia che apre il customer-info.
         * Default è true.
         */
        this.showArrow = true;
        /**
         * Booleano che indica se allineare o meno a destra il contenuto del customer-info.
         * Default è false.
         */
        this.alignRight = false;
        /**
         * Booleano che pilota la visualizzazione iniziale dell’accordion collassato o espanso.
         */
        this._isCollapsed = true;
        this._key = [];
        this._clientInfoKey = [];
        this._clientInfoValue = [];
        this._clientInfoHtml = [];
        this.selectedClient = 0;
    }
    _toggleCollapse() {
        this._isCollapsed = !this._isCollapsed;
        this.burger.close();
        if (!!this.operation) {
            this.operation.close();
        }
    }
    closeCustomer() {
        this._isCollapsed = true;
    }
    ngOnInit() {
        // for (var i = 0; i < Object.keys(this.clientsInfo).length; i++) {
        for (var i = 0; i < this.clientsInfo.length; i++) {
            // bisogna ricordare indici del json per usarli in view
            //this.indexClientsInfo.push(i);
            this._clientInfoKey[i] = [];
            this._clientInfoValue[i] = [];
            for (let key in this.clientsInfo[i]) {
                this._clientInfoKey[i].push(key);
                this._clientInfoValue[i].push(this.clientsInfo[i][key]);
            }
        }
    }
    selectClient(indexClient) {
        this.selectedClient = indexClient;
    }
};
__decorate$126([
    Input(),
    __metadata$106("design:type", NbpBurgerMenuGenericComponent)
], NbpCustomerInfoGenericComponent.prototype, "burger", void 0);
__decorate$126([
    Input(),
    __metadata$106("design:type", NbpMenuOperationComponent)
], NbpCustomerInfoGenericComponent.prototype, "operation", void 0);
__decorate$126([
    Input("clientsInfo"),
    __metadata$106("design:type", Object)
], NbpCustomerInfoGenericComponent.prototype, "clientsInfo", void 0);
__decorate$126([
    Input(),
    __metadata$106("design:type", String)
], NbpCustomerInfoGenericComponent.prototype, "clientTitle", void 0);
__decorate$126([
    Input(),
    __metadata$106("design:type", Boolean)
], NbpCustomerInfoGenericComponent.prototype, "showArrow", void 0);
__decorate$126([
    Input(),
    __metadata$106("design:type", Boolean)
], NbpCustomerInfoGenericComponent.prototype, "alignRight", void 0);
NbpCustomerInfoGenericComponent = __decorate$126([
    Component({
        selector: 'nbp-customer-info-generic',template: "<div [ngClass]=\"{'align-right': alignRight, 'full-width': !showArrow}\" class=\"container-ident-cliente\" nowrap=\"nowrap\"><span class=\"voce-ident-cliente\">{{_clientInfoKey[selectedClient][0] | uppercase}}</span> <span class=\"testo-ident-cliente\">{{_clientInfoValue[selectedClient][0]}}</span><br><span class=\"voce-ident-cliente\">{{_clientInfoKey[selectedClient][1] | uppercase}}</span> <span class=\"testo-ident-cliente\">{{_clientInfoValue[selectedClient][1]}}</span><br><span class=\"voce-ident-cliente\">{{_clientInfoKey[selectedClient][2] | uppercase}}</span> <span class=\"testo-ident-cliente\">{{_clientInfoValue[selectedClient][2]}}</span></div><div *ngIf=\"showArrow\" class=\"container-arrow\" style=\"margin-top: 6px;\"><span class=\"accordion-arrow\" [ngClass]=\"{'icon ico-comuni-freccia-accordion-apri':_isCollapsed , 'icon ico-comuni-freccia-accordion-chiudi':!_isCollapsed}\" (click)=\"_toggleCollapse()\"></span></div><div class=\"container-row\" style=\"margin-top: -4px;\"><div [ngClass]=\"{'triangolo':!_isCollapsed,'triangolo-hide':_isCollapsed}\"></div><div [ngClass]=\"{'triangolo-border':!_isCollapsed,'triangolo-hide':_isCollapsed}\"></div><div class=\"info-cliente-open\" [hidden]=\"_isCollapsed\" [ngClass]=\"{'border-pannel':!_isCollapsed}\"><div class=\"row info-cliente-title collapse\" [ngClass]=\"{'in':!_isCollapsed}\">{{clientTitle}}</div><div class=\"container-row\" style=\"width:100%!important\"><div class=\"collapse\" [ngClass]=\"{'in':!_isCollapsed}\" style=\"width:100%!important\"><div *ngFor=\"let item of clientsInfo; let i = index\" style=\"width:100%!important\"><div *ngIf=\"item.html\" [innerHTML]=\"item.html\"></div><div *ngIf=\"!item.html\" class=\"panel-body\" (click)=\"selectClient(i)\" [ngClass]=\"{'selected-client': i === selectedClient}\"><span>{{_clientInfoKey[i][1] | uppercase}}</span> <span>{{_clientInfoValue[i][1]}}</span><br><span>{{_clientInfoValue[i][0]}}</span><ng-container *ngIf=\"i === selectedClient\"><span class=\"icomoon-Simboli_Risorsa-182 icon-select\"></span></ng-container></div></div></div></div></div></div>",
        styles: [".accordion-arrow{cursor:pointer;font-size:1.6em}.align-right{text-align:right}.container-row{display:table-row;float:left!important}.container-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:78%;font-weight:400;float:left;padding-top:6px;padding-left:7px;padding-right:7px;padding-bottom:7px;margin-left:-3.3px}.full-width{width:100%}.voce-ident-cliente{margin-top:0;margin-bottom:0;font-size:1em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.border-pannel{border:1px solid #797979!important}.testo-ident-cliente{margin-top:0;margin-bottom:0;font-size:1em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}.panel-body{font-family:Arial;font-weight:400;font-style:normal;font-size:.81em;width:100%;border-top:1px solid gray;vertical-align:middle;z-index:90;cursor:pointer;text-align:left;color:#ccc}.panel-body:hover{background-color:gray;color:#fff}.info-cliente-title{font-family:Arial;font-style:normal;font-size:14px;color:#ccc;padding:10px 0 10px 0;border-bottom:0 solid gray;margin-left:auto;margin-right:auto}.info-cliente-open{position:relative;background-color:#323232;z-index:90;border:0;border-radius:0;text-align:center;margin-top:.5625em;display:table;color:#fff;width:22.25em;margin-left:-6px}.container-arrow{float:right;padding-top:.9em;padding-right:1.375em}.triangolo{width:0;height:0;z-index:91;border-left:.563em solid transparent;border-right:.563em solid transparent;border-bottom:.563em solid #323232;float:right;margin-right:1.96em;position:relative;top:1px}.triangolo-border{width:0;height:0;z-index:90;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid #797979;float:right;margin-right:0;position:relative;top:0;left:19px;margin-bottom:-1px}.triangolo-hide{width:0;height:0;z-index:90;border-left:.563em solid transparent;border-right:.563em solid transparent;border-bottom:.563em solid transparent;float:right;margin-right:1.75em;position:relative;top:1px}.icon-select{color:#1ed31e;display:block;float:right;position:relative;top:-.56em}.selected-client{background-color:#444;color:#fff;font-weight:700}:host-context(.contrasto-on) .border-pannel{border:1px solid #fff!important}:host-context(.contrasto-on) .panel-body{border-top:1px solid #fff;color:#fff}:host-context(.contrasto-on) .panel-body:hover{background-color:#fff;color:#000;border-color:#000}:host-context(.contrasto-on) .info-cliente-title{color:#fff;border-bottom:0 solid #fff}:host-context(.contrasto-on) .info-cliente-open{background-color:#000}:host-context(.contrasto-on) .triangolo{border-bottom-color:#000}:host-context(.contrasto-on) .triangolo-border{border-bottom:.625em solid #fff}:host-context(.contrasto-on) .icon-select{color:#000}:host-context(.contrasto-on) .selected-client{background-color:#fff;color:#000;font-weight:700}:host-context(.contrasto-on) .selected-client.panel-body{border-color:#000} /*# sourceMappingURL=nbp-customer-info-generic.component.css.map */ "]
    }),
    __metadata$106("design:paramtypes", [])
], NbpCustomerInfoGenericComponent);

var __decorate$124 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$104 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpHeaderGenericComponent = class NbpHeaderGenericComponent {
    constructor(http, router) {
        this.http = http;
        this.router = router;
        /**
         * Stringa da visualizzare come titolo del customer-info. Viene passato al componente nbp-customer-info-generic.
         */
        this.clientTitle = "INFORMAZIONI UTENTE";
        /**
         * Proprietà che indica il nome della funzione da eseguire al click su logged-user
         */
        this.userClick = () => { };
        /**
         * Proprietà che indica il nome della funzione da eseguire al click sull'icona Intesa dell'header.
         * Di default è la navigazione alla home.
         */
        this.iconClick = () => { this.router.navigate(['home']); };
        /**
         * Proprietà tipo string indicante l'url di un file json usato per settare un icona alternativa a quella di default.
         * Il programmatore ha la possibilità di definire la nomenclatura di suo gradimento con la condizione che termini in .json.
         * Il file prescelto dovrà essere raggiungibile da una chiamata HTTP di tipo GET che provvederà alla lettura.
         *
         * Esempi:
         *
         * 1) assets/logo.json
         * 2) assets/_logo.json
         * 3) assets/_logoCustom.json
         * 4) xxxxxx/yyyyyy.json
         * 4) .......................
         *
         * Il file json di configurazione immagine conterrà i campi
         *  1) urlImage,
         *  2) width,
         *  3) height.
         *
         * Se il file viene trovato verra inserita l'icona definita in urlImage sopra all'icona Intesa San Paolo.
         * In caso contrario verrà visualizzata la label passata nella proprietà [name] del componente header.
         *
         * esempio:
         *
         *  denominazione File di Configurazione Logo : assets/logo.json
         *  {
         *  "urlImage": "assets/images/logoProva.png",
         *  "width": "30px",
         *  "height": "30px"
         *   }
         *
         *
         */
        this.urlCustomLogo = "";
        /**
        * tradurre le voci di menu
        */
        this.nbpTranslate = true;
        /**
         * Funzione custom lanciata al click sul tasto di uscita del burger menu.
         */
        this.exitClick = () => { };
        /**
         * Booleano che indica se mostrare o meno il tasto di uscita del burger menu.
         * Default è false.
         */
        this.showExit = false;
        /**
         * Booleano che indica se mostrare o meno la freccia che apre il customer-info.
         * Default è true.
         */
        this.showClientArrow = true;
        /**
         * Booleano che indica se allineare o meno a destra il contenuto del customer-info.
         * Default è false.
         */
        this.alignClientRight = false;
        /**
         * File Configurazione Alternativa Logo : assets/logo.json.
         * Il file dovrà definire i campi urlImage, width e height.
         *
         * Se il file viene trovato verra inserita l'icona definita sopra all'icona Intesa San Paolo.
         * In caso contrario verrà visualizzata la label passata nella proprietà [name] del componente header.
         *
         * esempio:
         *
         *  denominazione File di Configurazione Logo : assets/logo.json
         *  {
         *  "urlImage": "assets/images/logoProva.png",
         *  "width": "30px",
         *  "height": "30px"
         *   }
         *
         *
         */
        this.logoJson = null;
    }
    openTab() {
        if (!!this.ChildMO) {
            this.ChildMO.close();
        }
        if (!!this.ChildBM) {
            this.ChildBM.toggle();
        }
        if (!!this.ChildCC) {
            this.ChildCC.closeCustomer();
        }
    }
    openOperation() {
        if (!!this.ChildBM) {
            this.ChildBM.close();
        }
        if (!!this.ChildMO) {
            this.ChildMO.toggle();
        }
        if (!!this.ChildCC) {
            this.ChildCC.closeCustomer();
        }
    }
    isMenuOpen() {
        return this.ChildBM ? this.ChildBM._isOpen : false;
    }
    isMenuOperationOpen() {
        if (!!this.ChildMO) {
            return this.ChildMO._isOpen;
        }
        else {
            return false;
        }
    }
    onLogout() {
    }
    ngOnInit() {
        if (this.urlCustomLogo)
            this.http.get(this.urlCustomLogo)
                .subscribe((res) => {
                this.logoJson = res.json();
            });
    }
    customClickAndClose() {
        this.userClick();
        if (!!this.ChildBM) {
            this.ChildBM.close();
        }
        if (!!this.ChildMO) {
            this.ChildMO.close();
        }
    }
};
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "burger", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "operation", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "user", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "name", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "clients", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", String)
], NbpHeaderGenericComponent.prototype, "clientTitle", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "userClick", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "iconClick", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "urlCustomLogo", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Boolean)
], NbpHeaderGenericComponent.prototype, "nbpTranslate", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Object)
], NbpHeaderGenericComponent.prototype, "exitClick", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Boolean)
], NbpHeaderGenericComponent.prototype, "showExit", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Boolean)
], NbpHeaderGenericComponent.prototype, "showClientArrow", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", Boolean)
], NbpHeaderGenericComponent.prototype, "alignClientRight", void 0);
__decorate$124([
    Input(),
    __metadata$104("design:type", String)
], NbpHeaderGenericComponent.prototype, "nbpLogo", void 0);
__decorate$124([
    ViewChild(NbpCustomerInfoGenericComponent),
    __metadata$104("design:type", NbpCustomerInfoGenericComponent)
], NbpHeaderGenericComponent.prototype, "ChildCC", void 0);
__decorate$124([
    ViewChild('ChildBM'),
    __metadata$104("design:type", NbpBurgerMenuGenericComponent)
], NbpHeaderGenericComponent.prototype, "ChildBM", void 0);
__decorate$124([
    ViewChild('ChildMO'),
    __metadata$104("design:type", NbpMenuOperationComponent)
], NbpHeaderGenericComponent.prototype, "ChildMO", void 0);
NbpHeaderGenericComponent = __decorate$124([
    Component({
        selector: 'nbp-header-generic',template: "<div class=\"header\"><div class=\"navbar\" id=\"header-navbar\"><div class=\"container\" style=\"display: table;\"><div *ngIf=\"logoJson; then logoAlternativo else logoTradizionale\"></div><ng-template #logoTradizionale><div class=\"navbar-logo pull-left col-md-14 col-sm-4 col-xs-4\" style=\"top: 8px;\"><label class=\"nome-applicativo\">{{name}}</label> <a *ngIf=\"!nbpLogo\" class=\"navbar-logo-brand-small\" (click)=\"iconClick()\"><span class=\"sr-only\">Intesa San Paolo</span> </a><img *ngIf=\"nbpLogo\" src=\"{{nbpLogo}}\" class=\"navbar-logo-brand-small-custom\" (click)=\"iconClick()\"></div></ng-template><ng-template #logoAlternativo><div class=\"navbar-logo pull-left col-md-14 col-sm-4 col-xs-4\" style=\"top: 8px; left:-14px\"><img src=\"{{logoJson.urlImage}}\" [ngStyle]=\"{ 'height': logoJson.height, 'width': logoJson.width}\"> <a *ngIf=\"!nbpLogo\" class=\"navbar-logo-brand-small\" (click)=\"iconClick()\"><span class=\"sr-only\">Intesa San Paolo</span> </a><img *ngIf=\"nbpLogo\" src=\"{{nbpLogo}}\" class=\"navbar-logo-brand-small-custom\" (click)=\"iconClick()\"></div></ng-template><div class=\"navbar-toggle pull-right col-md-4 col-sm-8 col-xs-8\" (click)=\"openTab()\" [ngClass]=\"{'navbar-toggle-open': isMenuOpen()}\"><button type=\"button\"><span class=\"icon {{isMenuOpen() ? 'ico-comuni-chiudi' : 'ico-navbar-menu'}}\"></span><div [ngClass]=\"{'menuMargin': !isMenuOpen()}\"><label style=\"color: #f8f8f8 !important; margin: 0 0 0 0.0em !important; cursor: pointer; font-size: 0.75em !important; padding-top:10px\">Menu</label></div></button></div><div *ngIf=\"operation\" class=\"navbar-toggle pull-right col-md-4 col-sm-8 col-xs-8\" (click)=\"openOperation()\" [ngClass]=\"{'navbar-toggle-open': isMenuOperationOpen()}\"><button type=\"button\"><span class=\"icon {{isMenuOperationOpen() ? 'ico-comuni-chiudi' : 'icomoon-Soldi_Risorsa-45'}}\"></span><div [ngClass]=\"{'operationMargin': !isMenuOperationOpen(), 'menuMargin': isMenuOperationOpen()}\"><label style=\"color: #f8f8f8 !important; margin: 0 0 0 0.0em !important; cursor: pointer; font-size: 0.75em !important; padding-top:10px\">Operazioni</label></div></button></div><div *ngIf=\"clients\" class=\"navbar-info-cliente col-md-6 col-sm-10 col-xs-10 pull-right\"><div><nbp-customer-info-generic [showArrow]=\"showClientArrow\" [alignRight]=\"alignClientRight\" [burger]=\"ChildBM\" [operation]=\"ChildMO\" [clientsInfo]=\"clients\" [clientTitle]=\"clientTitle\"></nbp-customer-info-generic></div></div><ng-content></ng-content></div><nbp-burger-menu-generic #ChildBM [nbpMenu]=\"burger\" [nbpTranslate]=\"nbpTranslate\"><nbp-logged-user-generic [nbpUser]=\"user\" (nbpLogout)=\"onLogout()\" (click)=\"customClickAndClose()\" disableLogout></nbp-logged-user-generic><div *ngIf=\"showExit\" class=\"exit-button-container\"><span class=\"exit-button\"><a (click)=\"exitClick()\"><table><tr><th class=\"exit-image-container\"><div class=\"icon icomoon-Sicurezza_Risorsa-19\"></div></th><th class=\"exit-info\"><span>Esci</span></th></tr></table></a></span></div></nbp-burger-menu-generic><nbp-menu-operation #ChildMO [nbpMenu]=\"operation\" [nbpTranslate]=\"nbpTranslate\"></nbp-menu-operation></div></div>",
        styles: [".header{width:100%;background-color:#f2f2f2;box-shadow:0 0 1.25em -.625em rgba(0,0,0,.8)}.header .navbar{position:relative;border:0!important;border-radius:0!important;margin:0!important;left:0;right:0;width:100%;background-color:#258900}.header .navbar .container{display:table;position:relative;padding-right:0;background-color:#258900;height:3em}.header .navbar .container-slim{height:3.125em!important}.header .row{margin:0}.header-overlay{position:relative;top:0;left:0;width:100%;height:100%;background:#f2f2f2}.navbar .container .navbar-logo{display:table-cell;vertical-align:middle;width:17em}.navbar .container .navbar-toggle{display:table-cell;vertical-align:middle;width:5em;height:4.375em;background-color:transparent;border:0;border-radius:0;margin:0;padding:0;text-align:center;cursor:pointer}.navbar .container .navbar-toggle:hover{background:#323232}.navbar .container .navbar-toggle:focus{background:#323232}.navbar .container .navbar-toggle:active{background:#323232}.navbar .container .navbar-info-cliente{display:table-cell;vertical-align:middle;width:22.25em;height:4.375em;background-color:transparent;border-left:1px solid #fff;border-right:1px solid #fff;text-align:left;color:#fff;line-height:1em;padding-top:4px}.navbar .container .navbar-info-cliente .container-arrow{float:right;padding-top:1.25em;padding-right:1.5625em}.navbar .container .navbar-info-cliente .accordion-arrow{cursor:pointer;font-size:1.6em}.navbar .container .navbar-info-cliente .info-cliente-open{position:absolute;background-color:#323232;z-index:1000;width:22.25em;height:9.8125em;border:0;border-radius:0;text-align:center;margin-top:.5625em;display:table}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-title{vertical-align:middle;height:2.3125em;display:table-cell}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left;background-color:#3f3f3f;font-weight:700}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select .icon{float:right;color:#258900;padding-right:10px}.navbar .container .navbar-info-cliente .info-cliente-open .title-nsg-label{color:#ccc;text-transform:uppercase}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente{margin-left:1em;color:#ccc}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente-selected{margin-left:1em;color:#fff}.navbar .container .navbar-hole{display:table-cell;vertical-align:middle;margin-top:5px;margin-bottom:5px}.navbar-logo-brand{display:block;width:8.9375em;height:1.563em;background-image:url(/cjlib/assets/images/sprite2.png);background-repeat:no-repeat}.navbar-logo-brand-small{cursor:pointer;display:block;background-image:url(/cjlib/assets/images/sprite.png);background-repeat:no-repeat;width:8.9375em;height:1.563em;background-size:8.9375em;margin-top:3px}.navbar-logo-brand-small-custom{display:block;height:25px;background-repeat:no-repeat}.navbar-toggle button{position:relative;top:52%;transform:translateY(-50%);border:none;background:0 0;outline:0;padding-bottom:3px}.navbar-toggle .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle .ico-navbar-menu{color:#fff;width:32px;height:28px;font-size:1.65em!important}.navbar-toggle .ico-navbar-menu:before{font-size:32px}.navbar-toggle .icomoon-Soldi_Risorsa-45{color:#fff;height:28px;font-size:1.65em!important}.navbar-toggle .icomoon-Soldi_Risorsa-45:before{font-size:32px}.navbar-toggle .ico-comuni-chiudi{color:#fff;font-size:1.65em!important}.navbar-toggle .menuMargin{margin-top:-.2em}.navbar-toggle .operationMargin{margin-top:-.69em}.navbar-toggle-operation button{position:relative;top:50%;transform:translateY(-50%);border:none;background:0 0;outline:0}.navbar-toggle-operation .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle-operation .icomoon-Modifica_matita{color:#fff;font-size:1.5em;margin:.313em auto}.navbar-toggle-operation span.labelOperazioni{color:#fff;font-size:.75em}.navbar-toggle-open{background:#323232!important}.nome-applicativo{position:relative;font-size:1.5em;margin-bottom:-.417em;color:#fff;font-weight:400}.header-paging-container,.header-progress-container{border-bottom:1px solid #ccc}@media (max-width:768px){.navbar .container{width:100%}}@media (-webkit-min-device-pixel-ratio:2){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite.png)}}@media (min-resolution:192dpi){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite.png)}}.triangolo{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid #323232;float:right;margin-right:1.75em}.triangolo-hide{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid transparent;float:right}.container-row{display:table-row}.container-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:78%;padding-left:.625em;font-weight:400;float:left}.voce-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.testo-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}@media (max-width:992px){.nome-applicativo{font-size:1.2em}.navbar .container .navbar-logo{width:13em}}.exit-button-container{padding:0}[class*=\" ico-\"]:before{vertical-align:middle}.exit-button{margin:0}.exit-button a{color:#fa9600;display:table;padding:0 1.25em 0 1.25em;margin:.5em 0 .5em 0;text-decoration:none;cursor:pointer;width:100%!important;height:2.813em;width:19.375em}.exit-button a:active,.exit-button a:focus,.exit-button a:hover{background-color:#fa9600;color:#323232}.exit-button a table{width:100%;display:table-cell;vertical-align:middle}.exit-image-container div{vertical-align:middle;font-size:1.563em!important;margin:0!important}.exit-image-container img{position:relative;border-radius:50%;width:100%}.exit-info{padding-left:.625em;vertical-align:middle;line-height:1;font-weight:400}:host-context(.contrasto-on) .header{background-color:#fff}:host-context(.contrasto-on) .header .navbar{background-color:#000}:host-context(.contrasto-on) .header .navbar .container{background-color:#000}:host-context(.contrasto-on) .header .navbar-tape{background-color:#000}:host-context(.contrasto-on) .header-overlay{background:#fff}:host-context(.contrasto-on) .exit-button a{color:#fff}:host-context(.contrasto-on) .exit-button a:active,:host-context(.contrasto-on) .exit-button a:focus,:host-context(.contrasto-on) .exit-button a:hover{background-color:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle{background-color:transparent}:host-context(.contrasto-on) .navbar .container .navbar-toggle:hover{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle:focus{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle:active{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation{background-color:transparent}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open{background:#fff!important;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-info-cliente{background-color:transparent;border-color:#fff;color:#fff}:host-context(.contrasto-on) .navbar-toggle .icon-bar{background-color:#fff!important}:host-context(.contrasto-on) .navbar-toggle .ico-comuni-chiudi,:host-context(.contrasto-on) .navbar-toggle .ico-navbar-menu,:host-context(.contrasto-on) .navbar-toggle .icomoon-Modifica_matita,:host-context(.contrasto-on) .navbar-toggle .icomoon-Soldi_Risorsa-45{color:#fff}:host-context(.contrasto-on) .navbar-toggle-open{background:#000!important}:host-context(.contrasto-on) .prev-page-btn-container .prev-page-btn{color:#000}:host-context(.contrasto-on) .page-title-container{border-color:#fff}:host-context(.contrasto-on) .nome-applicativo{color:#fff}:host-context(.contrasto-on) .header-paging-container,:host-context(.contrasto-on) .header-progress-container{border-color:#fff}:host-context(.contrasto-on) .triangolo{border-color:#fff;background:#000}:host-context(.contrasto-on) .container-ident-cliente{color:inherit}:host-context(.contrasto-on) .voce-ident-cliente{color:inherit}:host-context(.contrasto-on) .testo-ident-cliente{color:inherit} /*# sourceMappingURL=nbp-header-generic.component.css.map */ "]
    }),
    __metadata$104("design:paramtypes", [Http, Router])
], NbpHeaderGenericComponent);

var __decorate$128 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$108 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// import { TooltipComponent } from '../tooltip/tooltip.component';
let NbpFloaterComponent = class NbpFloaterComponent {
    constructor() {
        /**
         * Box Principale Floater.
         *
         * Tipo: IBoxFloater è costituito da un array di oggetti Json.
         *
         * Ciascun oggetto Json permette di implementare  un pulsante del paginatore ed è cosi definito:
         *
         * { icon: l'icona visualizzata nel pulsante del Floater,
         *   iconText: testo visualizzato immediatamente sotto l'icona,
         *   tooltip: tooltip pulsante,
         *   scrollTo: Id del codice Html a cui il Floater si muoverà alla digitazione del pulsante,
         *   callbackBefore: funzione chiamata prima del movimento verso l'Id,
         *   callbackAfter: funzione chiamata dopo il movimento verso l'Id
         * };
         *
         * E' il box principale visualizzato dal Floater. Nella visualizzazione si alterna in modalità toggle
         * con il Box Secondario. O appare l'uno o l'altro. Lo switching avviene attraverso la digitazione del
         * pulsante di help oppure le freccie di espansione
         *
         */
        this.boxPrincipaleContents = [];
        /**
         * Icona apertura Box Principale
         *
         * Tipo: String.
         *
         * Rappesenta l'icona visualizzata quando il Box Principale è Chiuso
         *
         */
        this.iconBoxPrincipale = "icomoon-FloaterMenu";
        /**
         * Icona apertura Box Secondario
         *
         * Tipo: String.
         *
         * Rappesenta l'icona visualizzata quando il Box Principale è Chiuso
         *
         */
        this.iconBoxSecondario = "icomoon-Messagi_messagio3";
        /**
         * Box secondario Floater
         *
         * Tipo: IBoxFloater è costituito da un array di oggetti Json.
         *
         * Ciascun oggetto Json permette di implementare  un pulsante del paginatore ed è cosi definito:
         *
         * { icon: l'icona visualizzata nel pulsante del Floater,
         *   iconText: testo visualizzato immediatamente sotto l'icona,
         *   tooltip: tooltip pulsante,
         *   scrollTo: Id del codice Html a cui il Floater si muoverà alla digitazione del pulsante,
         *   callbackBefore: funzione chiamata prima del movimento verso l'Id,
         *   callbackAfter: funzione chiamata dopo il movimento verso l'Id
         * };
         *
         * E' il box secondario visualizzato dal Floater in alternativa al Box Principale.
         *
         */
        this.boxSecondarioContents = [];
        this.helpTooltipMessage = "";
        this.helpTooltip = false;
        this.sizeTooltip = NbpSize.MD;
        this.toggleOperazioni = true;
        this.toggleAssistenza = false;
        this.activeTooltip = -1;
    }
    /**
     * setActiveToolTip
     *
     *  Funzione di selezione del tooltip attivo.
     *  I tooltip sono numerizzati da un ciclo for di visualizzazione
     *  sulla base della posizione nell'array del loro pulsante di attivazione.
     *  Questa funzione riceve in input il numero del tooltip e lo setta come attivo
     */
    setActiveTooltip(numberTooltip) {
        this.activeTooltip = numberTooltip;
    }
    /**
     * selectTooltipClassMouseOver
     *
     * ritorna valore boolean connesso al mouse over del tooltip
     *
     */
    selectTooltipClassMouseOver(p) {
        if (this.activeTooltip == p)
            return true;
        return false;
    }
};
__decorate$128([
    Input(),
    __metadata$108("design:type", Array)
], NbpFloaterComponent.prototype, "boxPrincipaleContents", void 0);
__decorate$128([
    Input(),
    __metadata$108("design:type", String)
], NbpFloaterComponent.prototype, "iconBoxPrincipale", void 0);
__decorate$128([
    Input(),
    __metadata$108("design:type", String)
], NbpFloaterComponent.prototype, "iconBoxSecondario", void 0);
__decorate$128([
    Input(),
    __metadata$108("design:type", Array)
], NbpFloaterComponent.prototype, "boxSecondarioContents", void 0);
__decorate$128([
    Input("helpTooltip"),
    __metadata$108("design:type", String)
], NbpFloaterComponent.prototype, "helpTooltipMessage", void 0);
NbpFloaterComponent = __decorate$128([
    Component({
        selector: 'nbp-floater',
        template: "<div fxLayout=\"column\" fxLayoutAlign=\"center start\"><div class=\"posizioneFissaFloater\"><div *ngIf=\"toggleOperazioni\"><div class=\"boxFrecciaOperazioni\" style=\"margin-bottom:-1px\" (mouseenter)=\"helpTooltip=false; activeTooltip = -1\" (click)=\"toggleOperazioni=!toggleOperazioni;toggleAssistenza=false;helpTooltip=false\"><div class=\"icomoon-Simboli_Risorsa-10 iconFreccia\"></div></div><div class=\"box-operazioni\" *ngFor=\"let item of boxPrincipaleContents; let p = index\"><div fxLayout=\"row\" fxLayoutAlign=\"start stretch\"><div (mouseenter)=\"helpTooltip=false; activeTooltip = p\" (mouseleave)=\"helpTooltip = false; activeTooltip = -1\" (click)=\"item.function()\" [scrollTo]=\"item.scrollTo\" [callbackBefore]=\"item.callbackBefore\" [callbackAfter]=\"item.callbackAfter\" class=\"boxPrincipale floater-container\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly center\" fxLayoutGap=\"-4px\"><div class=\"{{item.icon}} iconParlaConNoi iconMargin\"></div></div><div *ngIf=\"activeTooltip == p && item.tooltip\" [ngClass]=\"item.tooltip ? 'floaterTooltip' : 'floaterTooltipEmpty'\" class=\"floaterTooltip floater-tooltip\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly center\">{{item.tooltip}}</div></div></div></div><div *ngIf=\"!toggleOperazioni\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\"><div style=\"border-bottom: 0px solid #258900\" (mouseenter)=\"helpTooltip=false; activeTooltip = -1\" class=\"boxPrincipale\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly center\" (click)=\"toggleOperazioni=!toggleOperazioni;toggleAssistenza=false;activeTooltip = -1\" [ngClass]=\"!toggleOperazioni ? 'boxPrimarioGreen' : 'boxPrimarioGreen'\"><div class=\"icomoon-FloaterMenu iconHelp iconMargin\"></div></div></div><div *ngIf=\"!toggleAssistenza\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\"><div style=\"border-bottom: 0px solid #333333\" (mouseenter)=\"helpTooltip = true\" (mouseleave)=\"helpTooltip = false\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly center\" (click)=\"toggleAssistenza=!toggleAssistenza;toggleOperazioni=false\" [ngClass]=\"helpTooltip ? 'boxSecondarioGray' : 'boxSecondarioBlack'\"><div class=\"iconHelp iconMargin\" [ngClass]=\"iconBoxSecondario\"></div></div><div *ngIf=\"helpTooltip\" class=\"floaterTooltip\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly\">{{helpTooltipMessage}}</div></div><div *ngIf=\"toggleAssistenza\"><div *ngFor=\"let item of boxSecondarioContents; let p = index\"><div fxLayout=\"row\" fxLayoutAlign=\"start stretch\"><div (mouseenter)=\"activeTooltip = 100 + p\" (mouseleave)=\"activeTooltip = -1\" (click)=\"item.function()\" [scrollTo]=\"item.scrollTo\" [callbackBefore]=\"item.callbackBefore\" [callbackAfter]=\"item.callbackAfter\" [ngClass]=\"activeTooltip == 100 + p ? 'boxSecondarioBlack' : 'boxSecondarioGray'\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly center\" fxLayoutGap=\"-4px\"><div class=\"{{item.icon}} iconAssistenza iconMarginAssistenza\"></div><div class=\"textIcon\">{{item.iconText}}</div></div><div *ngIf=\"activeTooltip == 100 + p\" (click)=\"item.function()\" class=\"floaterTooltip\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly\">{{item.tooltip}}</div></div></div></div><div (click)=\"toggleAssistenza=!toggleAssistenza;toggleOperazioni=false;helpTooltip=false\"><div *ngIf=\"toggleAssistenza\" class=\"boxFrecciaAssistenzaGray\"><div class=\"icomoon-Simboli_Risorsa-11 iconFreccia\" style=\"margin-top:-1px\"></div></div></div></div></div>",
        styles: [".floaterTooltip{min-height:100%;background-color:#333;color:#fff;font-size:.813em;font-family:Arial;padding:1em;cursor:pointer;width:12.14em}.floater-container:hover{background-color:#5aa942!important}.floater-tooltip{background-color:#5aa942!important;font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:.875em}.iconMargin{margin-top:7.5px;margin-left:-1px!important}.iconMarginAssistenza{margin-top:3.5px;margin-left:-1px!important}.floaterTooltipEmpty{height:0%;width:0%;padding:0}.boxPrincipale{margin-top:-1px;font-weight:400;font-family:Arial;font-size:13px;background-color:#258900;padding:0;width:50px;height:50px;text-align:center;cursor:pointer;border-bottom:0 solid #258900}.boxPrimarioGreen{margin-top:-1px;font-weight:400;font-family:Arial;font-size:13px;background-color:#258900;padding:0;width:50px;height:50px;text-align:center;cursor:pointer;border-bottom:0 solid #258900}.boxSecondarioBlack{margin-top:-1px;font-weight:400;font-family:Arial;font-size:13px;background-color:#333;padding:0;width:50px;height:50px;text-align:center;cursor:pointer;border-bottom:0 solid #333}.boxSecondarioGray{margin-top:-1px;font-weight:400;font-family:Arial;font-size:13px;background-color:#333;border:0;padding:0;width:50px;height:50px;text-align:center;cursor:pointer;border-bottom:0 solid #333}.boxSecondarioBlack1{font-weight:400;font-family:Arial;font-size:13px;background-color:#333;padding:0;width:50px;height:45px;text-align:center;cursor:pointer;border-bottom:0 solid #333}.boxSecondarioGray1{font-weight:400;font-family:Arial;font-size:13px;background-color:#333;border:0;padding:0;width:50px;height:50px;text-align:center;cursor:pointer;border-bottom:0 solid #333}.boxFrecciaOperazioni{background-color:#258900;width:50px;height:20px;text-align:center;cursor:pointer;border-top:0 solid #258900;border-bottom:1px solid #258900}.boxFrecciaAssistenzaBlack{background-color:#333;width:50px;height:20px;text-align:center;cursor:pointer;border-top:0 solid #333;border-bottom:0 solid #333}.boxFrecciaAssistenzaGray{background-color:#333;width:50px;height:20px;text-align:center;cursor:pointer;border-top:0 solid #333}.iconParlaConNoi{font-size:30px;color:#fff;font-weight:600}.iconAssistenza{font-size:30px;color:#fff;font-weight:400}.iconHelp{font-size:30px;color:#fff;font-weight:400}.iconFreccia{font-size:20px;color:#fff;font-weight:600}.textIcon{font-weight:400;font-family:Arial;font-size:13px;font-size:10px;color:#fff}.posizioneFissaFloater{position:fixed;top:50%;transform:translatey(-50%)}:host-context(.contrasto-on) .floater-container:hover{background-color:#fff!important}:host-context(.contrasto-on) .floater-tooltip{background-color:#fff!important;color:#000!important;border:1px solid #000;border-left:none}:host-context(.contrasto-on) .floaterTooltip{background-color:#000;color:#fff}:host-context(.contrasto-on) .boxPrincipale{background-color:#fff}:host-context(.contrasto-on) .boxPrimarioGreen{background-color:#fff;border-right:1px solid #000;border-top:1px solid #000}:host-context(.contrasto-on) .boxPrimarioGreen .iconHelp{color:#000}:host-context(.contrasto-on) .box-operazioni .boxPrincipale{border-right:1px solid #000}:host-context(.contrasto-on) .box-operazioni .boxPrincipale.floater-container:hover{border-right:none}:host-context(.contrasto-on) .boxSecondarioBlack{background-color:#000}:host-context(.contrasto-on) .boxSecondarioGray{background-color:#000}:host-context(.contrasto-on) .boxSecondarioBlack1{background-color:#000}:host-context(.contrasto-on) .boxSecondarioGray1{background-color:#000}:host-context(.contrasto-on) .boxFrecciaOperazioni{background-color:#fff;border-bottom:1px solid #000}:host-context(.contrasto-on) .boxFrecciaOperazioni .iconFreccia{color:#000;border-right:1px solid #000;border-top:1px solid #000}:host-context(.contrasto-on) .boxFrecciaAssistenzaBlack{background-color:#000}:host-context(.contrasto-on) .boxFrecciaAssistenzaGray{background-color:#000}:host-context(.contrasto-on) .iconParlaConNoi{color:#000}:host-context(.contrasto-on) .iconAssistenza{color:#fff}:host-context(.contrasto-on) .iconHelp{color:#fff}:host-context(.contrasto-on) .textIcon{color:#fff} /*# sourceMappingURL=nbp-floater.component.css.map */ "]
    }),
    __metadata$108("design:paramtypes", [])
], NbpFloaterComponent);

var __decorate$129 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$109 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let SmoothScrollToDirective = 
/**
* SmoothScrollToDirective
* Direttiva di controllo del movimento della pagina.
* I suoi parametri sono:
*	scrollTo: definisce l'Id html da raggiungere
*	duration: durata dello scrolling;
*	offset: offset dello spostamento;
*	easing: tipo di movimento desiderato;
*	callbackBefore: funzione da chiamare prima;
*	callbackAfter: funzione da chiamare dopo;
*
*/
class SmoothScrollToDirective {
    constructor() { }
    onClick() {
        this.targetElement = document.getElementById(this.scrollTo);
        if (!this.targetElement)
            return;
        let self = this;
        let _callbackBefore = this.callbackBefore;
        let callbackBefore = function (element) {
            if (_callbackBefore)
                _callbackBefore(self.scrollTo);
        };
        let _callbackAfter = this.callbackAfter;
        let callbackAfter = function (element) {
            if (_callbackAfter)
                _callbackAfter(self.scrollTo);
        };
        new SmoothScroll(this.targetElement, {
            duration: this.duration,
            offset: this.offset,
            easing: this.easing,
            callbackBefore: callbackBefore,
            callbackAfter: callbackAfter,
            containerId: this.containerId
        });
    }
    ;
};
__decorate$129([
    Input(),
    __metadata$109("design:type", Object)
], SmoothScrollToDirective.prototype, "scrollTo", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", Number)
], SmoothScrollToDirective.prototype, "duration", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", Number)
], SmoothScrollToDirective.prototype, "offset", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", String)
], SmoothScrollToDirective.prototype, "easing", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", Object)
], SmoothScrollToDirective.prototype, "callbackBefore", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", Object)
], SmoothScrollToDirective.prototype, "callbackAfter", void 0);
__decorate$129([
    Input(),
    __metadata$109("design:type", String)
], SmoothScrollToDirective.prototype, "containerId", void 0);
__decorate$129([
    HostListener('click'),
    __metadata$109("design:type", Function),
    __metadata$109("design:paramtypes", []),
    __metadata$109("design:returntype", void 0)
], SmoothScrollToDirective.prototype, "onClick", null);
SmoothScrollToDirective = __decorate$129([
    Directive({
        selector: '[scrollTo]'
    })
    /**
    * SmoothScrollToDirective
    * Direttiva di controllo del movimento della pagina.
    * I suoi parametri sono:
    *	scrollTo: definisce l'Id html da raggiungere
    *	duration: durata dello scrolling;
    *	offset: offset dello spostamento;
    *	easing: tipo di movimento desiderato;
    *	callbackBefore: funzione da chiamare prima;
    *	callbackAfter: funzione da chiamare dopo;
    *
    */
    ,
    __metadata$109("design:paramtypes", [])
], SmoothScrollToDirective);
class SmoothScroll {
    constructor(element, options) {
        this.smoothScroll(element, options);
    }
    smoothScroll(element, options) {
        options = options || {};
        // Options
        var duration = options.duration || 800, offset = options.offset || 0, easing = options.easing || 'easeInOutQuart', callbackBefore = options.callbackBefore || function () { }, callbackAfter = options.callbackAfter || function () { }, container = document.getElementById(options.containerId) || null, containerPresent = (container != undefined && container != null);
        /**
         * Legge la posizione corrente
         */
        var getScrollLocation = function () {
            if (containerPresent) {
                return container.scrollTop;
            }
            else {
                if (window.pageYOffset) {
                    return window.pageYOffset;
                }
                else {
                    return document.documentElement.scrollTop;
                }
            }
        };
        /**
         * easing pattern:
         *
         * @see http://archive.oreilly.com/pub/a/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html
         */
        var getEasingPattern = function (type, time) {
            switch (type) {
                case 'easeInQuad': return time * time; // accelerating from zero velocity
                case 'easeOutQuad': return time * (2 - time); // decelerating to zero velocity
                case 'easeInOutQuad': return time < 0.5 ? 2 * time * time : -1 + (4 - 2 * time) * time; // acceleration until halfway, then deceleration
                case 'easeInCubic': return time * time * time; // accelerating from zero velocity
                case 'easeOutCubic': return (--time) * time * time + 1; // decelerating to zero velocity
                case 'easeInOutCubic': return time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1; // acceleration until halfway, then deceleration
                case 'easeInQuart': return time * time * time * time; // accelerating from zero velocity
                case 'easeOutQuart': return 1 - (--time) * time * time * time; // decelerating to zero velocity
                case 'easeInOutQuart': return time < 0.5 ? 8 * time * time * time * time : 1 - 8 * (--time) * time * time * time; // acceleration until halfway, then deceleration
                case 'easeInQuint': return time * time * time * time * time; // accelerating from zero velocity
                case 'easeOutQuint': return 1 + (--time) * time * time * time * time; // decelerating to zero velocity
                case 'easeInOutQuint': return time < 0.5 ? 16 * time * time * time * time * time : 1 + 16 * (--time) * time * time * time * time; // acceleration until halfway, then deceleration
                default: return time;
            }
        };
        /**
         * Calcola la distanza dello scrolling
         */
        var getEndLocation = function (element) {
            var location = 0;
            if (element.offsetParent) {
                do {
                    location += element.offsetTop;
                    element = element.offsetParent;
                } while (element);
            }
            location = Math.max(location - offset, 0);
            return location;
        };
        // Initializzazione
        setTimeout(function () {
            var currentLocation = null, startLocation = getScrollLocation(), endLocation = getEndLocation(element), timeLapsed = 0, distance = endLocation - startLocation, percentage, position, scrollHeight, internalHeight;
            /**
             * Stop l'animazione dello scrolling animation quando l'ancora è raggiunta (o  il top/bottom della pagina)
             */
            var stopAnimation = function () {
                currentLocation = getScrollLocation();
                if (containerPresent) {
                    scrollHeight = container.scrollHeight;
                    internalHeight = container.clientHeight + currentLocation;
                }
                else {
                    scrollHeight = document.body.scrollHeight;
                    internalHeight = window.innerHeight + currentLocation;
                }
                if ((position == endLocation) ||
                    (currentLocation == endLocation) ||
                    (internalHeight >= scrollHeight)) {
                    clearInterval(runAnimation);
                    callbackAfter(element);
                }
            };
            /**
             * Scroll la pagina di un incremento e controlla se è il caso di fermarsi
             */
            var animateScroll = function () {
                timeLapsed += 16;
                percentage = (timeLapsed / duration);
                percentage = (percentage > 1) ? 1 : percentage;
                position = startLocation + (distance * getEasingPattern(easing, percentage));
                if (containerPresent) {
                    container.scrollTop = position;
                }
                else {
                    window.scrollTo(0, position);
                }
                stopAnimation();
            };
            callbackBefore(element);
            var runAnimation = setInterval(animateScroll, 16);
        }, 0);
    }
}

var __decorate$130 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$110 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$25 = 0;
let NbpFilterComponent = class NbpFilterComponent {
    constructor() {
        /**
        * colore componente selettore
        * Valori possibili: check, default, outline, primary, profile, secondary
        */
        this.backgroundgray = NbpStyle.BACKGROUNDGRAY;
        this.backgroundgreen = NbpStyle.BACKGROUNDGREEN;
        this.check = NbpStyle.CHECK;
        this.default = NbpStyle.DEFAULT;
        this.outline = NbpStyle.OUTLINE;
        this.primary = NbpStyle.PRIMARY;
        this.profile = NbpStyle.PROFILE;
        this.secondary = NbpStyle.SECONDARY;
        this.opened = false;
        /**
        * id univoco che identifica il selettore
        * Se nessun id è fornito e' auto-generato: select-1,select-2,select-3,.....
        */
        this.id = `select-${++nextId$25}`;
        this.message = "Eventuale sezione";
        /**
         * Evento generato dal tasto conferma
         */
        this.searchEvent = new EventEmitter();
        /**
         * Evento generato dal tasto annulla
         */
        this.deleteEvent = new EventEmitter();
        this.labelVirgola = "";
        this.valoriFiltriSettati = "";
    }
    ngOnInit() {
        this.clearFields();
    }
    toggle() {
        this.opened = !this.opened;
    }
    searchFields() {
        this.opened = false;
        this.valoriFiltriSettati = "";
        this.results = [];
        this.selectedItems.forEach((element) => {
            if (element.value)
                if (this.valoriFiltriSettati) {
                    if (this.labelVirgola)
                        this.valoriFiltriSettati = this.valoriFiltriSettati + ", " + this.labelVirgola;
                    this.labelVirgola = element.label;
                }
                else
                    this.valoriFiltriSettati = element.label;
            if (element.type == "combo")
                this.results.push({
                    type: "combo",
                    value: element.value
                });
            if (element.type == "input")
                this.results.push({
                    type: "input",
                    value: element.value
                });
        });
        this.searchEvent.emit(this.results);
    }
    clearFields() {
        this.valoriFiltriSettati = "";
        this.searchEvent.emit([]);
        this.itemsDataSource = new Array();
        this.selectedItems = new Array();
        this.itemsView.forEach((element) => {
            this.itemsDataSource.push(new NbpDataSource(element.data));
            if (element.type == "combo")
                this.selectedItems.push({
                    type: "combo",
                    label: element.label,
                    value: null
                });
            if (element.type == "input")
                this.selectedItems.push({
                    type: "input",
                    label: element.label,
                    value: null
                });
        });
    }
    annulla() {
        this.valoriFiltriSettati = "";
        this.searchEvent.emit([]);
        this.deleteEvent.emit();
    }
};
__decorate$130([
    Input(),
    __metadata$110("design:type", String)
], NbpFilterComponent.prototype, "id", void 0);
__decorate$130([
    Input(),
    __metadata$110("design:type", Array)
], NbpFilterComponent.prototype, "itemsView", void 0);
__decorate$130([
    Input(),
    __metadata$110("design:type", String)
], NbpFilterComponent.prototype, "message", void 0);
__decorate$130([
    Output(),
    __metadata$110("design:type", Object)
], NbpFilterComponent.prototype, "searchEvent", void 0);
__decorate$130([
    Output(),
    __metadata$110("design:type", Object)
], NbpFilterComponent.prototype, "deleteEvent", void 0);
NbpFilterComponent = __decorate$130([
    Component({
        selector: 'nbp-filter',
        template: "<div class=\"pull-right hover\" style=\"margin-right:40px\"><div style=\"display:inline-block\" [ngClass]=\"opened ? 'success-container-open' : 'success-container-close'\"><span (click)=\"toggle()\" class=\"success-icon\" [ngClass]=\"{'icomoon-FiltroInLista2': !opened, 'icomoon-FiltroInLista22': opened}\"></span> <span (click)=\"toggle()\" class=\"success-icon on-hover icomoon-FiltroInLista22\" *ngIf=\"!opened\"></span></div><div style=\"display:inline-block;\" class=\"centraCercaFiltra\"><div (click)=\"toggle()\" class=\"cercaFiltra1\">CERCA</div><div (click)=\"toggle()\" class=\"cercaFiltra2\">E FILTRA</div></div></div><div class=\"row\" *ngIf=\"valoriFiltriSettati\" style=\"margin-top:20px\"><div class=\"hoverCancellaFiltri\" style=\"display:table; margin-left:9px\"><div style=\"display:table-cell;  vertical-align: middle;\">Ricerca effettuata per <span style=\"font-weight: bold;\">{{valoriFiltriSettati}}</span> <span *ngIf=\"labelVirgola\">e </span><span style=\"font-weight: bold;\">{{labelVirgola}}</span></div><div style=\"display:table-cell;width:35px\"></div><div style=\"display:table-cell; vertical-align: middle;\" class=\"icon-valori-filtri-settati\"><span (click)=\"clearFields()\" class=\"icomoon-Modifica_gomma success-icon-gomma\"></span></div><div style=\"display:table-cell;width:12px\"></div><div style=\"display:table-cell; vertical-align: middle;\" (click)=\"clearFields()\" class=\"cancella-filtri hoverCancellaFiltri\">CANCELLA FILTRI</div></div></div><div class=\"col-md-24 col-sm-24 col-xs-24\" style=\"margin-top:-4px\"><div *ngIf=\"opened\" style=\"text-align:right\"><div class=\"row arrow-filter\" style=\"margin-bottom:-7px; z-index: 1;\"></div><div class=\"row filter-panel\" style=\"z-index: 0;\"><div class=\"row text-center mrg-t-20 info-filter mrg-b--10\"><span>Eventuale <strong>guida</strong> o su come utilizzare i <strong>filtri e la ricerca</strong></span><br><span>o introduzione all'argomento trattato.</span></div><nbp-dividing-line class=\"row\" nbpTitle=\"{{message}}\"></nbp-dividing-line><div class=\"row\" style=\"color:rgb(50, 50, 50); text-align:center;\"><ng-container *ngFor=\"let item of itemsView; index as idx;\"><div *ngIf=\"idx % 3 == 0\" class=\"col col-md-1 col-sm-1 col-xs-1\"></div><div *ngIf=\"item.type=='combo'\" class=\"col col-md-6 col-sm-6 col-xs-6\"><nbp-input-container [nbpLabel]=\"item.label\"><nbp-combo [name]=\"item.id\" [nbpDataSource]=\"itemsDataSource[idx]\" [placeholder]=\"item.placeholder\" [nbpViewField]=\"item.viewField\" [required]=\"item.required\" [(ngModel)]=\"selectedItems[idx].value\"></nbp-combo></nbp-input-container></div><div *ngIf=\"item.type=='input'\" class=\"col col-md-6 col-sm-6 col-xs-6\"><nbp-input-container [nbpLabel]=\"item.label\" style=\"font-family:Arial\"><nbp-input-text [name]=\"item.id\" [placeholder]=\"item.placeholder\" [required]=\"required\" [(ngModel)]=\"selectedItems[idx].value\"></nbp-input-text></nbp-input-container></div><div class=\"col col-md-2 col-sm-2 col-xs-2\"></div></ng-container></div><div class=\"row button-group-filter\"><div class=\"col-md-1 col-sm-1 col-xs-1\"></div><div class=\"col-md-3 col-sm-3 col-xs-3\" style=\"text-align:left\"><nbp-button [nbpLabel]=\"'Annulla'\" [nbpStyle]=\"backgroundgreen\" (nbpClick)=\"annulla()\"></nbp-button></div><div class=\"col-md-4 col-sm-4 col-xs-4\" style=\"cursor: pointer; text-align:left\" (click)=\"clearFields()\"><div style=\"min-width: 150px;\"><span (click)=\"clearFields()\" class=\"gomma icomoon-Modifica_gomma\" style=\"margin-left:.3em;\"></span><div (click)=\"clearFields()\" style=\"display:inline-block;color:black;margin-left:.65em;\"><div class=\"gomma_txt\">CANCELLA</div><div class=\"gomma_txt\" style=\"margin-top: -5px;\">TUTTI I CAMPI</div></div></div></div><div class=\"col-md-12 col-sm-11 col-xs-11\"></div><div class=\"col-md-3 col-sm-3 col-xs-3\"><nbp-button [nbpLabel]=\"'Cerca'\" [nbpStyle]=\"primary\" (nbpClick)=\"searchFields()\"></nbp-button></div></div></div></div></div>",
        styles: [".navbar-default{background:0 0;border:none}#main-header{margin:0;position:relative}.main-header-container{padding:0;width:100%!important}.main-content{min-height:100%;animation:fadein 1s;padding-top:1.25em}.footer{background-color:#323232;padding-top:.625em;padding-bottom:.625em;margin-top:1.875em;color:#fff;border-bottom:.375em solid #000;position:relative;width:100%;z-index:2}@media (min-width:768px){.main-page{padding-bottom:6.625em}.footer{min-height:.625em;margin-bottom:0;margin-right:2.5em}}@media (min-width:992px){.footer{margin-top:1.25em;margin-right:12.5em}}:host-context(.contrasto-on) .footer{background-color:#000}.success-container-open{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.hover:hover .success-container-close .success-icon.on-hover{display:inline}.hover:hover .success-container-close .success-icon{display:none}.mrg-t-20{margin-top:20px}.mrg-b--10{margin-bottom:-10px}.info-filter{color:#323232}.success-container-close{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.success-container-close:hover .success-icon.on-hover{display:inline}.success-container-close:hover .success-icon{display:none}.success-container-close .success-icon.on-hover{display:none}.icon-valori-filtri-settati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:relative;background-color:#fff;color:#258900;border:1px solid #258900}.icon-valori-filtri-settati:hover{background-color:#258900;color:#fff}.container-filtrisettati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:absolute;background-color:#fff;color:#258900;border:1px solid #258900}.container-filtrisettati:hover{background-color:#258900;color:#fff}.arrow-filter{display:inline-block;position:relative;width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:12px solid #ccc;margin-right:122px}.arrow-filter::before{content:'';position:absolute;top:2px;width:0;height:0;border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #f2f2f2;left:-10.5px}.success-icon{width:35px;height:35px;font-size:35px;cursor:pointer;position:absolute;top:-15%;left:-1%}.success-icon-gomma{width:20px;height:20px;font-size:20px;cursor:pointer;position:absolute;top:12%;left:20%}.cancella-filtri{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.centraCercaFiltra{margin-top:-1px}.cercaFiltra1{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-left:6px}.cercaFiltra2{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-top:-2px;margin-left:6px}.ricercaEffettuata{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:800px;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#258900;color:#fff}.filter-panel{background-color:#f2f2f2;color:#fff;width:100%;border:.5px solid #ccc}.button-group-filter{margin-top:20px;margin-bottom:20px}.gomma{font-size:2.5em;vertical-align:middle;color:green;background-color:transparent}.gomma_txt{margin-top:.75em;margin:0;padding:0;text-align:left;vertical-align:middle;color:#258900;font-size:.75em;font-weight:700;text-transform:uppercase}:host-context(.contrasto-on) .success-container-open{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close:hover{background-color:#fff;color:#000}:host-context(.contrasto-on) .icon-valori-filtri-settati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .icon-valori-filtri-settati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .container-filtrisettati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .container-filtrisettati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .arrow-filter{border-bottom:12px solid #000}:host-context(.contrasto-on) .arrow-filter::before{border-bottom:11px solid #fff}:host-context(.contrasto-on) .cancella-filtri{color:#000}:host-context(.contrasto-on) .cercaFiltra1{color:#000}:host-context(.contrasto-on) .cercaFiltra2{color:#000}:host-context(.contrasto-on) .ricercaEffettuata{color:#000}:host-context(.contrasto-on) .hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#000;color:#fff}:host-context(.contrasto-on) .filter-panel{background-color:#fff;color:#000;border:.5px solid #000}:host-context(.contrasto-on) .gomma{color:#000;background-color:transparent}:host-context(.contrasto-on) .gomma_txt{color:#000} /*# sourceMappingURL=nbp-filter.component.css.map */ "]
    }),
    __metadata$110("design:paramtypes", [])
], NbpFilterComponent);

var __decorate$131 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$111 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// import { TooltipComponent } from '../tooltip/tooltip.component';
let NbpSpinnerGenericComponent = class NbpSpinnerGenericComponent {
    constructor() {
        this.minValue = 0;
        this.maxValue = 0;
        this.spinnerValue = 0;
        this.stepValue = 0;
        /**
       * Booleano che indica se mostrare icona e tooltip nell'intestazione del componente
       */
        this.showHelpTooltip = false;
        /**
         * (Opzionale) Enum che definisce il la posizione del tooltip rispetto all’oggetto al quale è ancorato:
         * “Top” | “Right” | “Bottom” | “Left” | “Top-Left” | “Top-Right” | “Bottom-Left” | “Bottom-Right”
         * Default: “Top”
         */
        this.tooltipHelpPosition = 'Top';
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.tooltipHelpSize = NbpSize.MD;
        /**
         * Stringa che definisce la classe dell'icona da mostrare
         */
        this.tooltipHelpIcon = 'icomoon-Simboli_Risorsa-1';
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.tooltipLeftSize = NbpSize.MD;
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.tooltipRightSize = NbpSize.MD;
        this.toggleValidationMessage = false;
        this.errorMessage = 'Testo custom di errore';
        this.required = true;
        this.disabled = false;
    }
    _onSubtractClick(num) {
        if (this.spinnerValue == null || this.spinnerValue == undefined || String(this.spinnerValue).trim() == "") {
            this.spinnerValue = 0;
        }
        if (Number(this.spinnerValue) == NaN)
            return;
        this.spinnerValue = Number(this.spinnerValue);
        this.spinnerValue = this.spinnerValue - this.stepValue;
        if (this.spinnerValue <= this.minValue) {
            this.spinnerValue = this.minValue;
            this.tooltipLeft._open();
        }
    }
    _onAddClick(num) {
        if (this.spinnerValue == null || this.spinnerValue == undefined || String(this.spinnerValue).trim() == "") {
            this.spinnerValue = 0;
        }
        if (Number(this.spinnerValue) == NaN)
            return;
        this.spinnerValue = Number(this.spinnerValue);
        this.spinnerValue = this.spinnerValue + this.stepValue;
        if (this.spinnerValue >= this.maxValue) {
            this.spinnerValue = this.maxValue;
            this.tooltipRight._open();
        }
    }
    checkSpinnerValue() {
        setTimeout(() => {
            if (this.spinnerValue > this.maxValue) {
                this.spinnerValue = this.maxValue;
                this.tooltipRight._open();
            }
            else if (this.spinnerValue < this.minValue) {
                this.spinnerValue = this.minValue;
                this.tooltipLeft._open();
            }
        }, 0);
    }
    ngOnInit() {
        this.runIE = this.detectIE();
        //this.tooltipHelpPosition = "Bottom-Left"
    }
    detectIE() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        if (msie > 0) {
            return true;
        }
        var trident = ua.indexOf('Trident/');
        if (trident > 0) {
            return true;
        }
        return false;
    }
};
__decorate$131([
    ViewChild('tooltipLeft'),
    __metadata$111("design:type", NbpTooltipComponent)
], NbpSpinnerGenericComponent.prototype, "tooltipLeft", void 0);
__decorate$131([
    ViewChild('tooltipRight'),
    __metadata$111("design:type", NbpTooltipComponent)
], NbpSpinnerGenericComponent.prototype, "tooltipRight", void 0);
__decorate$131([
    Input('label'),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "labelSpinner", void 0);
__decorate$131([
    Input('min'),
    __metadata$111("design:type", Number)
], NbpSpinnerGenericComponent.prototype, "minValue", void 0);
__decorate$131([
    Input('max'),
    __metadata$111("design:type", Number)
], NbpSpinnerGenericComponent.prototype, "maxValue", void 0);
__decorate$131([
    Input('value'),
    __metadata$111("design:type", Object)
], NbpSpinnerGenericComponent.prototype, "spinnerValue", void 0);
__decorate$131([
    Input('step'),
    __metadata$111("design:type", Number)
], NbpSpinnerGenericComponent.prototype, "stepValue", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", Boolean)
], NbpSpinnerGenericComponent.prototype, "showHelpTooltip", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipHelpPosition", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipHelpVisibility", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipHelpText", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", Object)
], NbpSpinnerGenericComponent.prototype, "tooltipHelpSize", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipHelpIcon", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipLeftText", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", Object)
], NbpSpinnerGenericComponent.prototype, "tooltipLeftSize", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", String)
], NbpSpinnerGenericComponent.prototype, "tooltipRightText", void 0);
__decorate$131([
    Input(),
    __metadata$111("design:type", Object)
], NbpSpinnerGenericComponent.prototype, "tooltipRightSize", void 0);
NbpSpinnerGenericComponent = __decorate$131([
    Component({
        selector: 'nbp-spinner-generic',
        template: "<nbp-input-container nbpLabel=\"{{labelSpinner}}\"><div style=\"display: inline-flex;\"><div class=\"spinner-container\" [ngStyle]=\"{'width': showHelpTooltip ? '80%' : '100%' }\"><button class=\"spinner-button left\" (click)=\"_onSubtractClick($event)\" [disabled]=\"spinnerValue <= minValue || disabled\"><span class=\"icomoon-Simboli_Risorsa-27 icon-spinner\"></span></button> <span class=\"spinner-tooltip-left\"><nbp-tooltip #tooltipLeft [nbpVisibilityStrategy]=\"'click'\" [nbpSize]=\"tooltipLeftSize\" [nbpText]=\"tooltipLeftText\"></nbp-tooltip></span><input (ngModelChange)=\"checkSpinnerValue()\" name=\"spinnerValue\" class=\"spinner-input\" [(ngModel)]=\"spinnerValue\" [min]=\"minValue\" [max]=\"maxValue\" autocomplete=\"off\"> <span class=\"spinner-tooltip-right\"><nbp-tooltip #tooltipRight [nbpVisibilityStrategy]=\"'click'\" [nbpSize]=\"tooltipRightSize\" [nbpText]=\"tooltipRightText\"></nbp-tooltip></span><button class=\"spinner-button right\" (click)=\"_onAddClick($event)\" [disabled]=\"spinnerValue >= maxValue || disabled\"><span class=\"icomoon-Simboli_Risorsa-23 icon-spinner\"></span></button></div><div><nbp-tooltip style=\"display:inline-block; margin-top: 0.4em\" *ngIf=\"showHelpTooltip\" [nbpSize]=\"tooltipHelpSize\" [nbpPosition]=\"tooltipHelpPosition\" [nbpVisibilityStrategy]=\"tooltipHelpVisibility\" [nbpText]=\"tooltipHelpText\"><span class=\"{{tooltipHelpIcon}}\" style=\"font-size:30px; margin-left:10px;\" [ngStyle]=\"{'vertical-align': !runIE ? 'middle' : '' }\"></span></nbp-tooltip></div></div></nbp-input-container>",
        styles: [":host(.ng-dirty.ng-invalid.nbp-show-validation) .spinner-container{background-color:#fff;border:2px solid #c63200;border-radius:2px}.spinner-tooltip-left{position:relative;left:-12px;top:-30px}.spinner-tooltip-right{position:relative;right:-12px;top:-30px}.spinner-container{display:inline-flex;background-color:#fff;border:1px solid #323232;border-radius:2px;padding:4px;height:50px}.spinner-container:disabled{background-color:#ccc}.spinner-container .spinner-button{width:30px;height:40px;background-color:#258900;color:#fff;border:none;border-radius:2px;padding:0;padding-bottom:2px}.spinner-container .spinner-button:disabled{opacity:.5}.spinner-container .spinner-button.left{float:left}.spinner-container .spinner-button.right{float:right}.spinner-container .spinner-input{width:calc(100% - 60px);border:none;height:40px;text-align:center;font-size:1em;color:#323232}.spinner-container .spinner-input ::-ms-clear{display:none}.spinner-container .spinner-input ::-webkit-inner-spin-button,.spinner-container .spinner-input ::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.icon-spinner{vertical-align:middle}:host-context(.contrasto-on) :host(.ng-dirty.ng-invalid.nbp-show-validation) .spinner-container{background-color:#fff;border-color:#000}:host-context(.contrasto-on) .spinner-container{background-color:#fff;border-color:#000}:host-context(.contrasto-on) .spinner-container:disabled{background-color:#000;color:#fff}:host-context(.contrasto-on) .spinner-container .spinner-button{background-color:#000;color:#fff;padding-bottom:2px}:host-context(.contrasto-on) .spinner-container .spinner-button:disabled{background-color:#fff;color:#000}:host-context(.contrasto-on) .spinner-container .spinner-input{color:#000} /*# sourceMappingURL=nbp-spinner-generic.component.css.map */ "],
    }),
    __metadata$111("design:paramtypes", [])
], NbpSpinnerGenericComponent);

var __decorate$132 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$112 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpStickyTabGenericComponent = class NbpStickyTabGenericComponent {
    constructor() {
        // items: ITabItem<any>[];
        //index: number;
        /**
         * headerTab: array degli elementi da visualizzare nei Tab.
         */
        this.items = [];
        /**
         * headerTab: Tab selezionato.
         */
        this.selectedTab = 1;
        /**
         * posStickyOn: number. Valore di offset dello scrolling a partire dal quale viene attivato la modalità Sticky
         */
        this.posStickyOn = 70;
        /**
         * tabChange: Evento generato al cambio tab.
         */
        this.tabChange = new EventEmitter();
        // variable locale uso interno 
        this.sticky = false;
    }
    selectTab(num) {
        this.selectedTab = num;
    }
    onTabChange(idx) {
        this.tabChange.emit(idx);
    }
    onWindowScroll() {
        let number = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        // console.log(number)
        if (number > this.posStickyOn) {
            this.sticky = true;
        }
        else {
            this.sticky = false;
        }
        //we'll do some stuff here when the window is scrolled
    }
};
__decorate$132([
    Input(),
    __metadata$112("design:type", Array)
], NbpStickyTabGenericComponent.prototype, "items", void 0);
__decorate$132([
    Input(),
    __metadata$112("design:type", Number)
], NbpStickyTabGenericComponent.prototype, "selectedTab", void 0);
__decorate$132([
    Input(),
    __metadata$112("design:type", Number)
], NbpStickyTabGenericComponent.prototype, "posStickyOn", void 0);
__decorate$132([
    Output(),
    __metadata$112("design:type", Object)
], NbpStickyTabGenericComponent.prototype, "tabChange", void 0);
__decorate$132([
    HostListener("window:scroll", []),
    __metadata$112("design:type", Function),
    __metadata$112("design:paramtypes", []),
    __metadata$112("design:returntype", void 0)
], NbpStickyTabGenericComponent.prototype, "onWindowScroll", null);
NbpStickyTabGenericComponent = __decorate$132([
    Component({
        selector: 'nbp-sticky-tab-generic',
        template: "<div style=\"min-height: 100%; overflow-x: hidden;\"><div class=\"row\"><nbp-tab-bar [ngClass]=\"{'sticky':sticky}\" [nbpItems]=\"items\" [nbpSelectedIndex]=\"selectedTab\" (nbpSelectedIndexChange)=\"onTabChange($event)\"></nbp-tab-bar></div></div>",
        styles: [":host /deep/ .tabs-container .tab-title{font-family:Arial;font-weight:Bold;font-size:.75em!important}:host /deep/ .tabs-container i{font-size:32px!important}:host /deep/ .tabs-container .tab-container{min-width:184px!important;min-height:5.375em!important;max-height:5.375em!important;background-color:#eee!important}:host /deep/ .tabs-container .tab-container.selected.enabledTab{background-color:#fff!important;border:.0625em solid transparent!important}:host /deep/ .tabs-container .tab-container.enabledTab{border:.0625em solid #eee!important}:host /deep/ .tabs-container .tab-container.disabledTab{border:.0625em solid #eee!important}.sticky{top:55px;z-index:1030} /*# sourceMappingURL=nbp-sticky-tab-generic.component.css.map */ "]
    }),
    __metadata$112("design:paramtypes", [])
], NbpStickyTabGenericComponent);

var __decorate$133 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$113 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpHeaderGenericNoTranslateComponent = class NbpHeaderGenericNoTranslateComponent extends NbpHeaderGenericComponent {
    constructor(http, router) {
        super(http, router);
    }
};
NbpHeaderGenericNoTranslateComponent = __decorate$133([
    Component({
        selector: 'nbp-header-generic-no-translate',template: "<div class=\"header\"><div class=\"navbar\" id=\"header-navbar\"><div class=\"container\" style=\"display: table;\"><div *ngIf=\"logoJson; then logoAlternativo else logoTradizionale\"></div><ng-template #logoTradizionale><div class=\"navbar-logo pull-left col-md-14 col-sm-4 col-xs-4\" style=\"top: 8px; left:-14px\"><label class=\"nome-applicativo\">{{name}}</label> <a class=\"navbar-logo-brand-small\" (click)=\"iconClick()\"><span class=\"sr-only\">Intesa San Paolo</span></a></div></ng-template><ng-template #logoAlternativo><div class=\"navbar-logo pull-left col-md-14 col-sm-4 col-xs-4\" style=\"top: 8px; left:-14px\"><img src=\"{{logoJson.urlImage}}\" [ngStyle]=\"{ 'height': logoJson.height, 'width': logoJson.width}\"> <a class=\"navbar-logo-brand-small\" (click)=\"iconClick()\"><span class=\"sr-only\">Intesa San Paolo</span></a></div></ng-template><div class=\"navbar-toggle pull-right col-md-4 col-sm-8 col-xs-8\" (click)=\"openTab()\" [ngClass]=\"{'navbar-toggle-open': isMenuOpen()}\"><button type=\"button\"><span class=\"icon {{isMenuOpen() ? 'ico-comuni-chiudi' : 'ico-navbar-menu'}}\"></span><div [ngClass]=\"{'menuMargin': !isMenuOpen()}\"><label style=\"color: #f8f8f8 !important; margin: 0 0 0 0.0em !important; cursor: pointer; font-size: 0.750em !important;\">Menu</label></div></button></div><div class=\"navbar-info-cliente col-md-6 col-sm-10 col-xs-10 pull-right\"><div><nbp-customer-info-generic [showArrow]=\"showClientArrow\" [alignRight]=\"alignClientRight\" [burger]=\"ChildBM\" [clientsInfo]=\"clients\" [clientTitle]=\"clientTitle\"></nbp-customer-info-generic></div></div><ng-content></ng-content></div><nbp-burger-menu-generic-no-translate #ChildBM [nbpMenu]=\"burger\"><nbp-logged-user-generic [nbpUser]=\"user\" (nbpLogout)=\"onLogout()\" (click)=\"userClick()\" disableLogout></nbp-logged-user-generic><div *ngIf=\"showExit\" class=\"exit-button-container\"><span class=\"exit-button\"><a (click)=\"exitClick()\"><table><tr><th class=\"exit-image-container\"><div class=\"icon icomoon-Sicurezza_Risorsa-19\"></div></th><th class=\"exit-info\"><span>Esci</span></th></tr></table></a></span></div></nbp-burger-menu-generic-no-translate></div></div>",
        styles: [".header{width:100%;background-color:#f2f2f2;box-shadow:0 0 1.25em -.625em rgba(0,0,0,.8)}.header .navbar{position:relative;border:0!important;border-radius:0!important;margin:0!important;left:0;right:0;width:100%;background-color:#258900}.header .navbar .container{display:table;position:relative;padding-right:0;background-color:#258900;height:3em}.header .navbar .container-slim{height:3.125em!important}.header .row{margin:0}.header-overlay{position:relative;top:0;left:0;width:100%;height:100%;background:#f2f2f2}.navbar .container .navbar-logo{display:table-cell;vertical-align:middle;width:17em}.navbar .container .navbar-toggle{display:table-cell;vertical-align:middle;width:5em;height:4.375em;background-color:transparent;border:0;border-radius:0;margin:0;padding:0;text-align:center;cursor:pointer}.navbar .container .navbar-toggle:hover{background:#323232}.navbar .container .navbar-toggle:focus{background:#323232}.navbar .container .navbar-toggle:active{background:#323232}.navbar .container .navbar-info-cliente{display:table-cell;vertical-align:middle;width:22.25em;height:4.375em;background-color:transparent;border-left:1px solid #fff;border-right:1px solid #fff;text-align:left;color:#fff;line-height:1em}.navbar .container .navbar-info-cliente .container-arrow{float:right;padding-top:1.25em;padding-right:1.5625em}.navbar .container .navbar-info-cliente .accordion-arrow{cursor:pointer;font-size:1.6em}.navbar .container .navbar-info-cliente .info-cliente-open{position:absolute;background-color:#323232;z-index:1000;width:22.25em;height:9.8125em;border:0;border-radius:0;text-align:center;margin-top:.5625em;display:table;margin-left:-6px}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-title{vertical-align:middle;height:2.3125em;display:table-cell}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select{vertical-align:middle;height:3.75em;border-top:1px solid #6f6f6f;display:table-cell;cursor:pointer;text-align:left;background-color:#3f3f3f;font-weight:700}.navbar .container .navbar-info-cliente .info-cliente-open .container-nsg-cliente-select .icon{float:right;color:#258900;padding-right:10px}.navbar .container .navbar-info-cliente .info-cliente-open .title-nsg-label{color:#ccc;text-transform:uppercase}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente{margin-left:1em;color:#ccc}.navbar .container .navbar-info-cliente .info-cliente-open .nsg-cliente-selected{margin-left:1em;color:#fff}.navbar .container .navbar-hole{display:table-cell;vertical-align:middle;margin-top:5px;margin-bottom:5px}.navbar-logo-brand{display:block;width:8.9375em;height:1.563em;background-image:url(/cjlib/assets/images/sprite2.png);background-repeat:no-repeat}.navbar-logo-brand-small{cursor:pointer;display:block;background-image:url(/cjlib/assets/images/sprite.png);background-repeat:no-repeat;width:8.9375em;height:1.563em;background-size:8.9375em;margin-top:3px}.navbar-toggle button{position:relative;top:50%;transform:translateY(-50%);border:none;background:0 0;outline:0}.navbar-toggle .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle .ico-navbar-menu{color:#fff;width:32px;height:21px;font-size:1.65em!important}.navbar-toggle .ico-navbar-menu:before{font-size:28px}.navbar-toggle .ico-comuni-chiudi{color:#fff;font-size:1.65em!important}.navbar-toggle .menuMargin{margin-top:-.2em}.navbar-toggle-operation button{position:relative;top:50%;transform:translateY(-50%);border:none;background:0 0;outline:0}.navbar-toggle-operation .icon-bar{width:1.875em;height:.125em;margin:.313em auto;background-color:#fff!important}.navbar-toggle-operation .icomoon-Modifica_matita{color:#fff;font-size:1.5em;margin:.313em auto}.navbar-toggle-operation span.labelOperazioni{color:#fff;font-size:.75em}.navbar-toggle-open{background:#323232!important}.nome-applicativo{position:relative;font-size:1.5em;margin-bottom:-.417em;color:#fff;font-weight:400}.header-paging-container,.header-progress-container{border-bottom:1px solid #ccc}@media (max-width:768px){.navbar .container{width:100%}}@media (-webkit-min-device-pixel-ratio:2){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite.png)}}@media (min-resolution:192dpi){.navbar-logo-brand{background-image:url(/cjlib/assets/images/sprite.png)}}.triangolo{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid #323232;float:right;margin-right:1.75em}.triangolo-hide{width:0;height:0;z-index:100;border-left:.625em solid transparent;border-right:.625em solid transparent;border-bottom:.625em solid transparent;float:right}.container-row{display:table-row}.container-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:78%;padding-left:.625em;font-weight:400;float:left}.voce-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.testo-ident-cliente{margin-top:0;margin-bottom:0;font-size:.875em;color:inherit;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}@media (max-width:970px){.nome-applicativo{font-size:1.2em}}.exit-button-container{padding:0}[class*=\" ico-\"]:before{vertical-align:middle}.exit-button{margin:0}.exit-button a{color:#fa9600;display:table;padding:0 1.25em 0 1.25em;margin:.5em 0 .5em 0;text-decoration:none;cursor:pointer;width:100%;height:2.813em;width:19.375em}.exit-button a:active,.exit-button a:focus,.exit-button a:hover{background-color:#fa9600;color:#323232}.exit-button a table{width:100%;display:table-cell;vertical-align:middle}.exit-image-container div{vertical-align:middle;font-size:1.563em!important;margin:0!important}.exit-image-container img{position:relative;border-radius:50%;width:100%}.exit-info{padding-left:.625em;vertical-align:middle;line-height:1;font-weight:400}:host-context(.contrasto-on) .header{background-color:#fff}:host-context(.contrasto-on) .header .navbar{background-color:#000}:host-context(.contrasto-on) .header .navbar .container{background-color:#000}:host-context(.contrasto-on) .header .navbar-tape{background-color:#000}:host-context(.contrasto-on) .header-overlay{background:#fff}:host-context(.contrasto-on) .navbar .container .navbar-toggle{background-color:transparent}:host-context(.contrasto-on) .navbar .container .navbar-toggle:hover{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle:focus{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle:active{background:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation{background-color:transparent}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:hover span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:focus span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active{background:#fff;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation:active span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open{background:#fff!important;color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open .icomoon-Modifica_matita{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-toggle-operation.navbar-toggle-open span{color:#000}:host-context(.contrasto-on) .navbar .container .navbar-info-cliente{background-color:transparent;border-color:#fff;color:#fff}:host-context(.contrasto-on) .navbar-toggle .icon-bar{background-color:#fff!important}:host-context(.contrasto-on) .navbar-toggle .ico-comuni-chiudi,:host-context(.contrasto-on) .navbar-toggle .ico-navbar-menu,:host-context(.contrasto-on) .navbar-toggle .icomoon-Modifica_matita{color:#fff}:host-context(.contrasto-on) .navbar-toggle-open{background:#000!important}:host-context(.contrasto-on) .prev-page-btn-container .prev-page-btn{color:#000}:host-context(.contrasto-on) .page-title-container{border-color:#fff}:host-context(.contrasto-on) .nome-applicativo{color:#fff}:host-context(.contrasto-on) .header-paging-container,:host-context(.contrasto-on) .header-progress-container{border-color:#fff}:host-context(.contrasto-on) .triangolo{border-color:#fff;background:#000}:host-context(.contrasto-on) .container-ident-cliente{color:inherit}:host-context(.contrasto-on) .voce-ident-cliente{color:inherit}:host-context(.contrasto-on) .testo-ident-cliente{color:inherit}:host-context(.contrasto-on) .exit-button a{color:#fff}:host-context(.contrasto-on) .exit-button a:active,:host-context(.contrasto-on) .exit-button a:focus,:host-context(.contrasto-on) .exit-button a:hover{background-color:#fff;color:#000} /*# sourceMappingURL=nbp-header-generic-no-translate.component.css.map */ "]
    }),
    __metadata$113("design:paramtypes", [Http, Router])
], NbpHeaderGenericNoTranslateComponent);

var __decorate$134 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$114 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpBurgerMenuGenericNoTranslateComponent = class NbpBurgerMenuGenericNoTranslateComponent {
    constructor(router, activatedRoute) {
        this.router = router;
        this.activatedRoute = activatedRoute;
        /**
         * (Opzionale) booleano per disabilitare la possibilità di fare logout.
         * Valore default false
         */
        this.nbpDisableLogout = false;
        /**
         * Evento emesso sulla pressione del logout.
         * @param {EventEmitter<INbpUser>}  nbpOnLogout
         */
        this.nbpOnLogout = new EventEmitter();
        /**
         * Evento emesso sulla pressione di ogni voce di menu'.
         * @param {EventEmitter<INbpItemMenu>}  nbpOnItemClick
         */
        this.nbpOnItemClick = new EventEmitter();
        /**
         * Evento emesso all'apertura del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnOpen = new EventEmitter();
        /**
         * Evento emesso alla chiusure del burgerMenu.
         * @param {EventEmitter<any>}  nbpOnOpen
         */
        this.nbpOnClose = new EventEmitter();
        this._isOpen = false; // true in test phase
        this._showSecondLevelMenu = false; // false in test phase
    }
    _translate(label) {
        return label;
    }
    _changeRoute(routeValue) {
        if (routeValue.external) {
            if (routeValue.link.search('http://') > -1) {
                window.location.href = routeValue.link;
            }
            else {
                window.location.href = 'http://' + routeValue.link;
            }
        }
        else {
            this.router.navigate([routeValue.link]);
        }
    }
    _onClick(item) {
        // console.log('click item menu: ' + JSON.stringify(item));
        this.nbpOnItemClick.emit(item);
        if (!item.secondLevelMenu) {
            this.toggle();
        }
        if (item.secondLevelMenu && item.secondLevelMenu.sections && item.secondLevelMenu.sections.length > 0) {
            this._selectedItem = item;
            this._showSecondLevelMenu = true;
            setTimeout(() => {
                var height = document.getElementsByClassName('second-level-menu')[0].clientHeight + 20;
                this.height = height;
            }, 100);
        }
    }
    _goBack() {
        this._showSecondLevelMenu = false;
        this._selectedItem = null;
        setTimeout(() => {
            var height = document.getElementsByClassName('first-level-menu')[0].clientHeight + 20;
            this.height = height;
        }, 100);
    }
    // Metodi Pubblici del componente
    /**
     * Permette apertura programmatica del BurgerMenu
     */
    open() {
        this._isOpen = true;
        this.nbpOnOpen.emit();
        setTimeout(() => {
            if (!this._showSecondLevelMenu) {
                var height = document.getElementsByClassName('first-level-menu')[0].clientHeight + 20;
            }
            else {
                var height = document.getElementsByClassName('second-level-menu')[0].clientHeight + 20;
            }
            this.height = height;
        }, 100);
    }
    /**
     * Permette la chiusura programmatica del BurgerMenu
     */
    close() {
        this._isOpen = false;
        this.nbpOnClose.emit();
        setTimeout(() => {
            this.height = 0;
        }, 100);
    }
    /**
     * Permette di eseguire il toggle del BurgerMenu
     */
    toggle() {
        this._isOpen ? this.close() : this.open();
    }
    onLogout() {
        alert('logOut');
    }
    ngOnInit() {
    }
};
__decorate$134([
    Input(),
    __metadata$114("design:type", Object)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpMenu", void 0);
__decorate$134([
    Input(),
    __metadata$114("design:type", Object)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpUser", void 0);
__decorate$134([
    Input(),
    __metadata$114("design:type", Boolean)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpDisableLogout", void 0);
__decorate$134([
    Output(),
    __metadata$114("design:type", EventEmitter)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpOnLogout", void 0);
__decorate$134([
    Output(),
    __metadata$114("design:type", EventEmitter)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpOnItemClick", void 0);
__decorate$134([
    Output(),
    __metadata$114("design:type", EventEmitter)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpOnOpen", void 0);
__decorate$134([
    Output(),
    __metadata$114("design:type", EventEmitter)
], NbpBurgerMenuGenericNoTranslateComponent.prototype, "nbpOnClose", void 0);
NbpBurgerMenuGenericNoTranslateComponent = __decorate$134([
    Component({
        selector: 'nbp-burger-menu-generic-no-translate',template: "<div class=\"menu\" [ngClass]=\"{'closed': !_isOpen, 'open': _isOpen}\" [style.height.px]=\"height\"><div class=\"container first-level-menu\" [ngClass]=\"{'open': !_showSecondLevelMenu}\"><div class=\"row\"><div class=\"col-sm-16\"><div><div class=\"col-sm-12 section-menu\" *ngFor=\"let section of nbpMenu.sections; let i = index\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item);_changeRoute(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\" style=\"padding-top:0.25em\"></span> <span>{{_translate(item.label)}}</span></a></li></ul></div></div></div><div class=\"col-sm-8\"><ng-content selector=\"app-logged-user\"></ng-content></div></div></div><div class=\"container second-level-menu\" [ngClass]=\"{'open': _showSecondLevelMenu}\" *ngIf=\"_showSecondLevelMenu\"><div class=\"row upper-bar\"><div class=\"menu-principale pull-left\"><span class=\"glyphicon icon icon-arrow-left\"></span> <span class=\"menu-principale-title\" (click)=\"_goBack();\">Menu principale</span></div></div><div class=\"row second-level-buttons\"><div class=\"selected-first-level-menu\"><span class=\"icon {{_selectedItem.icon}}\"></span> <span class=\"selected-first-level-label\">{{_translate(_selectedItem.label)}}</span></div><div class=\"col-sm-8\" *ngFor=\"let section of _selectedItem.secondLevelMenu.sections; let i = index\" [ngClass]=\"{'main-menu-container-pad-l': i > 0, 'main-menu-container-pad-r': i !== _selectedItem.secondLevelMenu.sections.length - 1}\"><ul class=\"main-menu\"><li><a *ngFor=\"let item of section.items\" (click)=\"_onClick(item);_changeRoute(item)\"><span *ngIf=\"item.icon\" class=\"icon {{item.icon}}\"></span> <span>{{_translate(item.label)}}</span></a></li></ul></div></div></div></div>",
        styles: [".menu{position:relative;width:100%;height:0;overflow-x:hidden;overflow-y:hidden;background-color:#323232;-moz-transition:height,opacity .7s ease-out;-o-transition:height,opacity .7s ease-out;transition:height,opacity .7s ease-out}.menu .icon{margin-right:.313em;font-size:1.563em;vertical-align:middle}.menu.closed{height:0}.main-menu-container{padding:0}.section-menu:nth-child(2n+3){clear:left}.main-menu{list-style:none;padding:0 .313em 0 .313em;margin:0}.main-menu a{color:#ccc;display:table;width:19.375em;padding:0 1.25em 0 1.25em;margin:.5em 0 .5em 0;text-decoration:none;cursor:pointer;height:2.813em}.main-menu a:active,.main-menu a:focus,.main-menu a:hover{background-color:#258900;color:#fff}.main-menu a span{display:table-cell;vertical-align:middle;text-align:left}.main-menu a span:nth-child(1){width:1.563em}.main-menu .select{background-color:#258900;color:#fff;border:.0625em solid #258900}.upper-bar{border-bottom:.0625em solid #6f6f6f}.menu-principale{color:#ccc;font-size:1em;padding:1em .625em .625em .625em;cursor:pointer}.menu-principale .icon{font-size:.875em}.menu-principale-title{vertical-align:top;-moz-animation:fadein 3.7s ease-out;animation:fadein 3.7s ease-out}@-moz-keyframes fadein{0%{opacity:0}100%{opacity:1}}@keyframes fadein{0%{opacity:0}100%{opacity:1}}.selected-first-level-menu{color:#ccc;padding:1.625em .625em 1.62em .625em}.selected-first-level-menu .selected-first-level-label{font-size:1.125em}.first-level-menu{position:absolute;left:0;visibility:hidden;right:0;opacity:0;left:-6.25em;padding:0 .625em 0 .625em;-moz-transition:all .7s ease-out;-o-transition:all .7s ease-out;transition:all .7s ease-out}.first-level-menu.open{opacity:1;left:0;visibility:visible;margin-top:.625em}.second-level-menu{position:absolute;left:0;visibility:hidden;right:0;opacity:0;left:6.25em;-moz-transition:all .7s ease-out;-o-transition:all .7s ease-out;transition:all .7s ease-out}.second-level-menu.open{opacity:1;left:0;visibility:visible}@media (max-width:992px){.main-menu a{width:14.375em}}:host-context(.contrasto-on) .menu{background-color:#000}:host-context(.contrasto-on) .menu.open{border-color:#fff}:host-context(.contrasto-on) .main-menu a{color:#fff;border-color:#fff}:host-context(.contrasto-on) .main-menu a:active,:host-context(.contrasto-on) .main-menu a:focus,:host-context(.contrasto-on) .main-menu a:hover{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .main-menu .select{background-color:#fff;color:#000;border-color:#fff}:host-context(.contrasto-on) .upper-bar{border-color:#fff}:host-context(.contrasto-on) .menu-principale{color:#fff}:host-context(.contrasto-on) .selected-first-level-menu{color:#fff}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){[class*=' icon-']::before{font-size:1.375em!important}} /*# sourceMappingURL=nbp-burger-menu-generic-no-translate.component.css.map */ "]
    }),
    __metadata$114("design:paramtypes", [Router,
        ActivatedRoute])
], NbpBurgerMenuGenericNoTranslateComponent);

var __decorate$135 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$115 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// DA IMPLEMENTARE TOTALMENTE PER NON FAR FALLIRE I TEST
let NbpLoggedUserGenericComponent = class NbpLoggedUserGenericComponent {
    constructor() {
        /**
         * Evento emesso alla pressione del pulsante, se
         * nbpDisableLogout non è true
         */
        this.nbpLogout = new EventEmitter();
    }
    /**
     * Flag che abilita/disabilita la possibilità di eseguire il logout
     */
    get disableLogout() { return this._nbpDisableLogout; }
    set disableLogout(value) { this._nbpDisableLogout = coerceBooleanProperty(value); }
    ngOnInit() { }
    _onLogoutClick() {
        this.nbpLogout.emit();
    }
};
__decorate$135([
    Input(),
    __metadata$115("design:type", Object)
], NbpLoggedUserGenericComponent.prototype, "nbpUser", void 0);
__decorate$135([
    Input(),
    __metadata$115("design:type", Boolean),
    __metadata$115("design:paramtypes", [Object])
], NbpLoggedUserGenericComponent.prototype, "disableLogout", null);
__decorate$135([
    Input(),
    __metadata$115("design:type", Boolean)
], NbpLoggedUserGenericComponent.prototype, "nbpDisableLogout", void 0);
__decorate$135([
    Output(),
    __metadata$115("design:type", EventEmitter)
], NbpLoggedUserGenericComponent.prototype, "nbpLogout", void 0);
NbpLoggedUserGenericComponent = __decorate$135([
    Component({
        selector: 'nbp-logged-user-generic',template: "<div class=\"user-button-container\"><span class=\"user-button\"><a (click)=\"_onLogoutClick()\"><table *ngIf=\"!largeUserImage\"><tr><th class=\"user-image-container\"><div class=\"icon ico-navbar-gestore-01\" [hidden]=\"imageLoaded\"></div></th><th class=\"user-info\"><span [innerText]=\"nbpUser.name + ' ' + nbpUser.surname\"></span><br><span class=\"user-info-subtitle\">Utente: <span class=\"user-info-subtitle--content\">{{nbpUser.id}}</span> &#124; </span><span class=\"user-info-subtitle\">Ruolo: <span class=\"user-info-subtitle--content\">{{nbpUser.role}}</span></span></th></tr></table></a></span></div>",
        styles: [".user-button-container{padding:0}[class*=\" ico-\"]:before{vertical-align:middle}.user-button{margin:0}.user-button a{color:#fa9600;display:table;padding:0 1.25em 0 1.25em;margin:.5em 0 .5em 0;text-decoration:none;cursor:pointer;width:100%!important;height:2.813em;width:19.375em}.user-button a:active,.user-button a:focus,.user-button a:hover{background-color:#fa9600;color:#323232}.user-button a table{width:100%;display:table-cell;vertical-align:middle}.user-image-container div{vertical-align:middle;font-size:1.563em!important;margin:0!important}.user-image-container img{position:relative;border-radius:50%;width:100%}.user-info{padding-left:.625em;vertical-align:middle;line-height:1;font-weight:400}.user-info-subtitle{display:inline-block;font-size:.75em}.user-info-subtitle .user-info-subtitle--content{text-transform:uppercase;font-weight:700}:host-context(.contrasto-on) .user-button a{color:#fff}:host-context(.contrasto-on) .user-button a:active,:host-context(.contrasto-on) .user-button a:focus,:host-context(.contrasto-on) .user-button a:hover{background-color:#fff;color:#000} /*# sourceMappingURL=nbp-logged-user-generic.component.css.map */ "]
    }),
    __metadata$115("design:paramtypes", [])
], NbpLoggedUserGenericComponent);

var __decorate$136 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$116 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSwitchGenericComponent = class NbpSwitchGenericComponent {
    constructor() {
        /**
         * Funzione da invocare al click sullo switch
         */
        this.clickFn = new EventEmitter();
        /**
         * Parametro usato per attivare e disattivare il focus al tab.
         */
        this.focusOn = [false, false];
        /**
         * (Opzionale) Paramentro che indica l'ordine di spostamento da un campo all'altro attraverso il tab.
         */
        this.tabindex = 0;
        this.onSelect = function (choice, target) {
            this.focusOn = [false, false];
            this.selected = choice;
            if (this.clickFn) {
                this.clickFn.emit();
            }
        };
        this.onSelectBinary = function () {
            if (this.selected != true) {
                this.selected = true;
            }
            else {
                this.selected = false;
            }
            if (this.clickFn) {
                this.clickFn.emit();
            }
            
        };
    }
    _tabFocusOn(choice) {
        this.focusOn[choice] = true;
    }
    _tabFocusOff(choice) {
        this.focusOn[choice] = false;
    }
    _shiftTabFocusOn(choice) {
        this.focusOn[choice] = true;
    }
    _shiftTabFocusOff(choice) {
        this.focusOn[choice] = false;
    }
    _focusOn(choice) {
        return this.focusOn[choice];
    }
    _focusOnFn(choice) {
        this.focusOn[choice] = true;
    }
    ngOnInit() {
        if (!this.selected) {
            this.selected = 0;
        }
    }
    ngAfterViewInit() {
        if (this.firstFocus) {
            this.focusOn[0] = true;
            this.elementRef._results[0].nativeElement.focus();
        }
    }
};
__decorate$136([
    Input(),
    __metadata$116("design:type", Array)
], NbpSwitchGenericComponent.prototype, "choices", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "type", void 0);
__decorate$136([
    Output(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "clickFn", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "disabled", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "selected", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "textUp", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Boolean)
], NbpSwitchGenericComponent.prototype, "firstFocus", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "focusOn", void 0);
__decorate$136([
    Input(),
    __metadata$116("design:type", Number)
], NbpSwitchGenericComponent.prototype, "tabindex", void 0);
__decorate$136([
    ViewChildren('autoFocusSwitch'),
    __metadata$116("design:type", Object)
], NbpSwitchGenericComponent.prototype, "elementRef", void 0);
NbpSwitchGenericComponent = __decorate$136([
    Component({
        selector: 'nbp-switch-generic',
        template: "<div class=\"btn-group\" [ngClass]=\"{'switch-container': type != 'binary'}\"><label *ngIf=\"type == 'binary'\" class=\"switch-binary\" [ngClass]=\"{'switch-binary-true': selected}\" (click)=\"onSelectBinary()\" style=\"font-size: 1em !important\"><div class=\"slider-box\"></div><span class=\"switch-label-icon-on\"><span class=\"binary-label\">ON</span> </span><span class=\"switch-label-icon-off\"><span class=\"binary-label\">OFF</span></span></label><div *ngIf=\"type == 'iconTextSmall'\"><button *ngFor=\"let choice of choices; let i=index;\" [ngClass]=\"{'primary': selected === i, 'default': selected != i, 'right': i==1, 'focusTabSwitchOn': _focusOn(i)}\" class=\"btn switch-button-icontext-small\" [disabled]=\"disabled\" (click)=\"onSelect(i)\" (focusout)=\"_tabFocusOff(i)\" (keydown.tab)=\"_tabFocusOff(i)\" (keyup.tab)=\"_tabFocusOn(i)\" (keydown.shift.tab)=\"_shiftTabFocusOff(i)\" (keyup.shift.tab)=\"_shiftTabFocusOn(i)\" [tabindex]=\"tabindex\" #autoFocusSwitch><span class=\"switch-label-icon\">{{choice.label}}</span> <span></span> <span class=\"icon switch-icon {{choice.icon}}\"></span></button></div><div *ngIf=\"type == 'iconText'\"><button *ngFor=\"let choice of choices; let i=index;\" [ngClass]=\"{'primary': selected === i, 'default': selected != i, 'focusTabSwitchOn': _focusOn(i)}\" class=\"btn switch-button-icontext\" [disabled]=\"disabled\" (click)=\"onSelect(i)\" [ngStyle]=\"{'padding-top': (textUp ? '5px' : '1em')}\" (focusout)=\"_tabFocusOff(i)\" (keydown.tab)=\"_tabFocusOff(i)\" (keyup.tab)=\"_tabFocusOn(i)\" (keydown.shift.tab)=\"_shiftTabFocusOff(i)\" (keyup.shift.tab)=\"_shiftTabFocusOn(i)\" [tabindex]=\"tabindex\" #autoFocusSwitch><span class=\"switch-label-icon\" [ngStyle]=\"{'padding-right': (!textUp ? '0.625em' : 0)}\">{{choice.label}}</span> <span *ngIf=\"textUp\"></span> <span class=\"icon switch-icon {{choice.icon}}\" [ngClass]=\"{'switch-icon-text-up': textUp}\"></span></button></div><div *ngIf=\"type == 'text' || type == 'textSmall'\"><button *ngFor=\"let choice of choices; let i=index;\" [ngClass]=\"{'small' : type === 'textSmall', 'primary': selected === i, 'default': selected != i, 'right': i==1, 'focusTabSwitchOn': _focusOn(i)}\" class=\"btn switch-button-text\" [disabled]=\"disabled\" (click)=\"onSelect(i)\" (focusout)=\"_tabFocusOff(i)\" (keydown.tab)=\"_tabFocusOff(i)\" (keyup.tab)=\"_tabFocusOn(i)\" (keydown.shift.tab)=\"_shiftTabFocusOff(i)\" (keyup.shift.tab)=\"_shiftTabFocusOn(i)\" [tabindex]=\"tabindex\" #autoFocusSwitch><span class=\"switch-label-icon\">{{choice.label}}</span></button></div><div *ngIf=\"type === 'icon'\"><button *ngFor=\"let choice of choices; let i=index;\" [ngClass]=\"{'primary': selected === i, 'default': selected != i, 'right': i==1, 'focusTabSwitchOn': focusOn[i]}\" class=\"btn switch-button-icon\" [disabled]=\"disabled\" (click)=\"onSelect(i)\" (focusout)=\"_tabFocusOff(i)\" (focus)=\"_focusOnFn(i)\" (keydown.tab)=\"_tabFocusOff(i)\" (keyup.tab)=\"_tabFocusOn(i)\" (keydown.shift.tab)=\"_shiftTabFocusOff(i)\" (keyup.shift.tab)=\"_shiftTabFocusOn(i)\" [tabindex]=\"tabindex\" #autoFocusSwitch><span class=\"icon switch-icon {{choice.icon}}\"></span></button></div></div>",styles: [".switch-container{background-color:#258900;border-radius:0;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.focusTabSwitchOn{box-shadow:0 0 .05em .23em rgba(37,137,0,.6)!important}.switch-button-icontext{position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:6.875em;height:4.167em;z-index:0}.switch-button-icontext:active{box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-icontext .switch-label{margin-right:.625em}.switch-button-icontext .switch-label-icon{padding-bottom:.313em;display:table-cell!important;vertical-align:middle}.switch-button-icontext .switch-icon{font-size:2.084em!important;display:table-cell!important}.switch-button-icontext .switch-icon-text-up{display:block!important}.switch-button-icontext.btn{border-radius:0!important}.switch-button-icontext .btn[disabled]:hover{cursor:default}.primary{border:none}.primary.right{box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)!important}.switch-button-icontext.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-icontext.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button[disabled]{box-shadow:none}.switch-button-icontext.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-icontext.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-button-icontext-small{padding-top:.313em;position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-bottom:1em;line-height:1;outline:0!important;min-width:6.25em;height:4.167em;z-index:0}.switch-button-icontext-small:active{box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-icontext-small .switch-label{margin-right:.625em}.switch-button-icontext-small .switch-label-icon{padding-bottom:.313em;display:inline-block!important;vertical-align:middle}.switch-button-icontext-small .switch-icon{font-size:2.084em!important;display:block!important}.switch-button-icontext-small.btn{border-radius:0!important}.switch-button-icontext-small .btn[disabled]:hover{cursor:default}.switch-button-icontext-small.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset 0 .125em .188em rgba(0,0,0,.2)}.switch-button-icontext-small.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button[disabled]{box-shadow:none}.switch-button-icontext-small.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-icontext-small.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-button-text{text-align:center;position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:9.584em;height:4.167em;z-index:0}.switch-button-text:active{box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-text.btn{border-radius:0!important}.switch-button-text .btn[disabled]:hover{cursor:default}.switch-button-text.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-text.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button-text[disabled]{box-shadow:none}.switch-button-text.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-text.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-button-text.small{min-width:6.25em}.switch-button-icon{position:relative;font-weight:700;font-size:.75em;margin:0!important;padding-top:1em;padding-bottom:1em;line-height:1;outline:0!important;min-width:6.25em;height:4.167em;z-index:0}.switch-button-icon:active{box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-icon .switch-icon{font-size:2.084em!important}.switch-button-icon.btn{border-radius:0!important}.switch-button-icon .btn[disabled]:hover{cursor:default}.switch-button-icon.primary{color:#fff;background-color:#258900;border-color:#258900;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-button-icon.default{color:#6f6f6f;background-color:#fff;border-color:#ccc}.switch-button[disabled]{box-shadow:none}.switch-button-icon.default[disabled]:hover{background-color:#fff!important;border-color:#ccc!important}.switch-button-icon.primary[disabled]:hover{background-color:#258900!important;border-color:#258900!important}.switch-binary{position:relative;display:inline-block;width:6.25em;height:3.125em;cursor:pointer;background-color:#ccc;-webkit-transition:0s;transition:0s}.switch-binary .switch-label-icon-on{font-weight:700;color:#fff;width:3.125em;display:table-cell;line-height:3em;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-binary .switch-label-icon-off{font-weight:700;color:#6f6f6f;width:3.125em;display:table-cell;line-height:3em;box-shadow:inset 0 .125em .188em 0 rgba(0,0,0,.2)}.switch-binary .binary-label{font-size:.75em}.slider-box{position:absolute;content:\"\";cursor:pointer;height:3.125em;width:3.125em;left:0;bottom:0;background-color:#fff;-webkit-transition:0s;transition:0s;border:.063em solid #ccc}.switch-binary-true{background-color:#258900}.switch-binary-true .slider-box{-webkit-transform:translateX(3.125em);-ms-transform:translateX(3.125em);transform:translateX(3.125em)}:host-context(.contrasto-on) .switch-button-icon.default,:host-context(.contrasto-on) .switch-button-icontext-small.default,:host-context(.contrasto-on) .switch-button-icontext.default,:host-context(.contrasto-on) .switch-button-text.default{color:#000;background-color:#fff;border-color:#000}:host-context(.contrasto-on) .switch-binary,:host-context(.contrasto-on) .switch-button-icon.primary,:host-context(.contrasto-on) .switch-button-icontext-small.primary,:host-context(.contrasto-on) .switch-button-icontext.primary,:host-context(.contrasto-on) .switch-button-text.primary{color:#fff;background-color:#000;border-color:#fff}:host-context(.contrasto-on) .slider-box{background-color:#fff;border-color:#000}:host-context(.contrasto-on) .switch-binary .switch-label-icon-on{color:#fff}:host-context(.contrasto-on) .switch-binary .switch-label-icon-off{color:#fff}:host-context(.contrasto-on) .switch-binary-true{background-color:#000} /*# sourceMappingURL=nbp-switch-generic.component.css.map */ "]
    }),
    __metadata$116("design:paramtypes", [])
], NbpSwitchGenericComponent);

var __decorate$137 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$117 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpCustomValidationService = class NbpCustomValidationService {
    // non possiamo usare la struttura dati MAP perchè non supportata da IE10 
    // quindi occhio ai duplicati 
    // validationErrorKeys = Object.keys(this.validationErrors) --> 'key1', 'key2'
    // {
    //   'key1': 'Errore validazione campo 1',
    //   'key2': 'Errore validazione campo 2',
    // }
    constructor() {
        this.validationErrors = {};
    }
    // In caso la chiave esista già, dobbiamo sostituire il placeholder? concatenarlo? controllare che sia lo stesso
    /**
     * [registerError description]
     * Aggiunge la coppia key/placeholder alla struttura dati
     * @param {string} key         [description]
     * @param {string} placeholder [description]
     */
    registerError(key, placeholder) {
        this.validationErrors[key] = placeholder;
    }
    /**
     * Eliminazione di una coppia key/placeholder
     * @param  {string}  key [description]
     * @return {boolean}     [description]
     */
    clearError(key) {
        return delete this.validationErrors[key];
    }
    /**
     * Pulizia della struttura dati
     */
    clearErrors() {
        this.validationErrors = {};
    }
    /**
     * Restituisce una stringa che rappresenta il placeholder oppure undefined se non c'è la key cercata
     * @param  {string} key [description]
     * @return {string}     [description]
     */
    getValidationPlaceholder(key) {
        return this.validationErrors[key];
    }
};
NbpCustomValidationService = __decorate$137([
    Injectable(),
    __metadata$117("design:paramtypes", [])
], NbpCustomValidationService);

var __decorate$138 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$118 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpBoxWithEllipsisComponent = class NbpBoxWithEllipsisComponent {
    constructor() {
        this.isTooltipEllipsisVisible = false;
    }
    onWindowsResize() {
        this.setTooltipEllipsisVisibility();
    }
    ngOnChanges() {
        this.setTooltipEllipsisVisibility();
    }
    ngAfterViewInit() {
        this.setTooltipEllipsisVisibility();
    }
    setTooltipEllipsisVisibility() {
        setTimeout(() => {
            this.isTooltipEllipsisVisible = this.boxHtmlContainer.nativeElement.scrollHeight > this.boxHtmlContainer.nativeElement.offsetHeight;
        });
    }
};
__decorate$138([
    Input(),
    __metadata$118("design:type", String)
], NbpBoxWithEllipsisComponent.prototype, "nbpInnerHtml", void 0);
__decorate$138([
    ViewChild('boxHtmlContainer'),
    __metadata$118("design:type", ElementRef)
], NbpBoxWithEllipsisComponent.prototype, "boxHtmlContainer", void 0);
__decorate$138([
    HostListener('window:resize'),
    __metadata$118("design:type", Function),
    __metadata$118("design:paramtypes", []),
    __metadata$118("design:returntype", void 0)
], NbpBoxWithEllipsisComponent.prototype, "onWindowsResize", null);
NbpBoxWithEllipsisComponent = __decorate$138([
    Component({selector: 'nbp-box-with-ellipsis',
        template: "<div class=\"box-html-container\" #boxHtmlContainer [innerHTML]=\"nbpInnerHtml\"></div><div class=\"tooltip-ellipsis\" *ngIf=\"isTooltipEllipsisVisible\"><nbp-tooltip [nbpTemplate]=\"tooltipTemplate\" [nbpTemplateData]=\"{tooltipData:{text:nbpInnerHtml}}\" [nbpPosition]=\"'Top-Right'\" nbpVisibilityStrategy=\"click\"><span class=\"ellipsis\">...</span></nbp-tooltip><ng-template #tooltipTemplate let-tooltipData=\"tooltipData\"><style>.tooltiptext { padding:20px 5px 0 5px; margin:auto; color:white; background-color:transparent; }   /* p{ color:white; background-color:transparent; } */</style><div class=\"tooltiptext\" [innerHTML]=\"tooltipData.text\"></div></ng-template></div>",
        styles: [":host ::ng-deep p{margin:0!important}.box-html-container{position:relative;width:100%;height:100%;overflow:hidden;display:block}.tooltip-ellipsis{position:absolute;right:0;bottom:0}.tooltip-ellipsis .ellipsis{display:block;color:green;font-size:1em;font-weight:700;padding:0 10px 0 0;background-color:#fff} /*# sourceMappingURL=nbp-box-with-ellipsis.component.css.map */ "]
    }),
    __metadata$118("design:paramtypes", [])
], NbpBoxWithEllipsisComponent);

var __decorate$139 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$119 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const PADDING = '000000';
let NbpCurrencyPipe = 
// export class NbpCurrencyPipe extends CurrencyPipe {
//   transform(value: any, args?: any): any {
//     return super.transform(value, '', false, '1.2-2');
//   }
// }
class NbpCurrencyPipe {
    constructor() {
        this.DECIMAL_REGEX = /^\d*\.?\d*$/; // previous /^\d*,?\d*$/;
        // private DECIMAL_VIEW_REGEX = /^(?!0+\,00)(?=.{1,9}(\.|$))(?!0(?!\.))\d{1,3}(\.\d{3})*(,\d+)?$/;
        this.DECIMAL_VIEW_REGEX = /^(?!0+\.00)(?=.{1,9}( |$))(?!0(?! ))\d{1,3}( \d{3})*(\.\d+)?$/;
        // TODO comes from configuration settings
        this.DECIMAL_SEPARATOR = '.'; // previous ',';
        this.THOUSANDS_SEPARATOR = ' '; // previous '.';
        this.THOUSANDS_SEPARATOR_REGEX = ' '; // previous '\.';
    }
    inputIsValid(input) {
        return this.DECIMAL_REGEX.test(input);
    }
    viewInputIsValid(input) {
        return this.DECIMAL_VIEW_REGEX.test(input);
    }
    transform(value, fractionSize = 2) {
        let elemValue = (value || '').toString();
        if (!this.inputIsValid(elemValue)) {
            return elemValue;
        }
        let [integer, fraction = ''] = (value || '').toString()
            .split(this.DECIMAL_SEPARATOR);
        fraction = fractionSize > 0
            ? this.DECIMAL_SEPARATOR + (fraction + PADDING).substring(0, fractionSize)
            : '';
        integer = integer.replace(/\B(?=(\d{3})+(?!\d))/g, this.THOUSANDS_SEPARATOR);
        return (integer) ? integer + fraction : integer;
    }
    parse(value, fractionSize = 2) {
        if (!this.viewInputIsValid(value)) {
            return value;
        }
        let [integer, fraction = ''] = (value || '').split(this.DECIMAL_SEPARATOR);
        // TODO non riesco ad usare la regExp con la variabile this.THOUSANDS_SEPARATOR
        integer = integer.replace(new RegExp(this.THOUSANDS_SEPARATOR_REGEX, 'g'), '');
        // integer = integer.replace(/\./g, '');
        fraction = parseInt(fraction, 10) > 0 && fractionSize > 0
            ? this.DECIMAL_SEPARATOR + (fraction + PADDING).substring(0, fractionSize)
            : '';
        return integer + fraction;
    }
};
NbpCurrencyPipe = __decorate$139([
    Pipe({ name: 'nbpCurrency' })
    // export class NbpCurrencyPipe extends CurrencyPipe {
    //   transform(value: any, args?: any): any {
    //     return super.transform(value, '', false, '1.2-2');
    //   }
    // }
    ,
    __metadata$119("design:paramtypes", [])
], NbpCurrencyPipe);

var __decorate$140 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$120 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpFormatterDirective = NbpFormatterDirective_1 = class NbpFormatterDirective {
    constructor(elementRef, currencyPipe) {
        this.elementRef = elementRef;
        this.currencyPipe = currencyPipe;
        this.initialization = true;
        this.isFormatterSupported = false;
    }
    validate(control) {
        if (this.initialization && control.value && this.isFormatterSupported) {
            this.initialization = false;
            this.el.value = this.currencyPipe.transform(control.value);
        }
        return null;
    }
    ngOnInit() {
        this.el = this.elementRef.nativeElement;
        if (this.nbpFormatter === NbpPipe.CURRENCY) {
            this.isFormatterSupported = true;
        }
    }
    onFocus(value) {
        if (this.isFormatterSupported) {
            this.el.value = this.currencyPipe.parse(value); // opposite of transform
        }
    }
    onBlur(value) {
        if (this.isFormatterSupported) {
            this.el.value = this.currencyPipe.transform(value);
        }
    }
};
__decorate$140([
    Input(),
    __metadata$120("design:type", Number)
], NbpFormatterDirective.prototype, "nbpFormatter", void 0);
__decorate$140([
    HostListener('focus', ['$event.target.value']),
    __metadata$120("design:type", Function),
    __metadata$120("design:paramtypes", [String]),
    __metadata$120("design:returntype", void 0)
], NbpFormatterDirective.prototype, "onFocus", null);
__decorate$140([
    HostListener('blur', ['$event.target.value']),
    __metadata$120("design:type", Function),
    __metadata$120("design:paramtypes", [String]),
    __metadata$120("design:returntype", void 0)
], NbpFormatterDirective.prototype, "onBlur", null);
NbpFormatterDirective = NbpFormatterDirective_1 = __decorate$140([
    Directive({
        selector: '[nbpFormatter][ngModel]',
        providers: [
            {
                provide: NG_VALIDATORS, useExisting: forwardRef(() => NbpFormatterDirective_1), multi: true
            }
        ]
    }),
    __metadata$120("design:paramtypes", [ElementRef,
        NbpCurrencyPipe])
], NbpFormatterDirective);
var NbpFormatterDirective_1;

var __decorate$141 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$121 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let EqualValidator = EqualValidator_1 = class EqualValidator {
    validate(control) {
        if (this.validateEqual && control.value !== this.validateEqual) {
            return {
                validateEqual: 'Dati non coerenti'
            };
        }
        else {
            return null;
        }
    }
};
__decorate$141([
    Input(),
    __metadata$121("design:type", String)
], EqualValidator.prototype, "validateEqual", void 0);
EqualValidator = EqualValidator_1 = __decorate$141([
    Directive({
        selector: '[validateEqual][ngModel]',
        providers: [
            { provide: NG_VALIDATORS, useExisting: forwardRef(() => EqualValidator_1), multi: true }
        ]
    })
], EqualValidator);
var EqualValidator_1;

var __decorate$142 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let ArrayRequiredValidator = ArrayRequiredValidator_1 = class ArrayRequiredValidator extends RequiredValidator {
    validate(c) {
        return this.required ? Validators.required(c) : null;
    }
};
ArrayRequiredValidator = ArrayRequiredValidator_1 = __decorate$142([
    Directive({
        selector: 'nbp-combo-multi[required][formControlName],nbp-combo-multi[required][formControl],nbp-combo-multi[required][ngModel]',
        providers: [{
                provide: NG_VALIDATORS,
                useExisting: forwardRef(() => ArrayRequiredValidator_1),
                multi: true
            }],
        host: { '[attr.required]': 'required ? "" : null' }
    })
], ArrayRequiredValidator);
var ArrayRequiredValidator_1;

var __decorate$143 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$122 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let MaxSelectionValidator = MaxSelectionValidator_1 = class MaxSelectionValidator {
    validate(control) {
        if (this.maxSelection && control.value && control.value.length > this.maxSelection) {
            return {
                maxSelection: `E' possibile selezionare al massimo ${this.maxSelection} elementi`
            };
        }
        else {
            return null;
        }
    }
};
__decorate$143([
    Input(),
    __metadata$122("design:type", String)
], MaxSelectionValidator.prototype, "maxSelection", void 0);
MaxSelectionValidator = MaxSelectionValidator_1 = __decorate$143([
    Directive({
        selector: 'nbp-combo-multi[maxSelection][ngModel], nbp-combo-multi[maxSelection][formControlName], nbp-combo-multi[maxSelection][formControl]',
        providers: [
            { provide: NG_VALIDATORS, useExisting: forwardRef(() => MaxSelectionValidator_1), multi: true }
        ]
    })
], MaxSelectionValidator);
var MaxSelectionValidator_1;

var __decorate$144 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$123 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let ContainsValidator = ContainsValidator_1 = class ContainsValidator {
    constructor() {
        this.customValidationMessage = 'Valore non ammesso';
    }
    validate(control) {
        let containedValues;
        containedValues = this.validateContains.filter(element => element == control.value);
        if (containedValues.length > 0) {
            return null;
        }
        return { validateContains: this.customValidationMessage };
    }
};
__decorate$144([
    Input(),
    __metadata$123("design:type", Array)
], ContainsValidator.prototype, "validateContains", void 0);
__decorate$144([
    Input(),
    __metadata$123("design:type", Object)
], ContainsValidator.prototype, "customValidationMessage", void 0);
ContainsValidator = ContainsValidator_1 = __decorate$144([
    Directive({
        selector: 'nbp-input-text[validateContains][ngModel]',
        providers: [
            { provide: NG_VALIDATORS, useExisting: forwardRef(() => ContainsValidator_1), multi: true }
        ]
    })
], ContainsValidator);
var ContainsValidator_1;

var __decorate$145 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$124 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CustomValidator = CustomValidator_1 = class CustomValidator {
    constructor(validationService) {
        this.validationService = validationService;
    }
    validate(control) {
        let validationPlaceholders = {};
        if (!this.validationKeys || this.validationKeys.length === 0) {
            return null;
        }
        this.validationKeys.forEach((key) => {
            let validationPlaceholder = this.validationService.getValidationPlaceholder(key);
            if (validationPlaceholder) {
                validationPlaceholders[key] = validationPlaceholder;
            }
        });
        if (!validationPlaceholders) {
            return null;
        }
        return validationPlaceholders;
    }
};
__decorate$145([
    Input(),
    __metadata$124("design:type", Array)
], CustomValidator.prototype, "validationKeys", void 0);
CustomValidator = CustomValidator_1 = __decorate$145([
    Directive({
        selector: 'nbp-input-text[validationKeys][ngModel]',
        providers: [
            { provide: NG_VALIDATORS, useExisting: forwardRef(() => CustomValidator_1), multi: true }
        ]
    }),
    __metadata$124("design:paramtypes", [NbpCustomValidationService])
], CustomValidator);
var CustomValidator_1;

var __decorate$147 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$126 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpModalDialogService = class NbpModalDialogService {
    constructor() {
        this.modalDialogDataSettings = new Subject();
        this.modalDialogVisibilityActions = new Subject();
        this.modalDialogSettingData = this.modalDialogDataSettings.asObservable();
        this.modalDialogVisibility = this.modalDialogVisibilityActions.asObservable();
    }
    notifyDataSetting(data) {
        // console.log("ModalDialogService - notifyDataSetting");
        console.dir(data);
        this.modalDialogDataSettings.next(data);
    }
    notifyVisibilityAction(show) {
        // console.log("ModalDialogService - notifyVisibilityAction");
        console.dir(show);
        this.modalDialogVisibilityActions.next(show);
    }
    getDataSettingtream() {
        return this.modalDialogSettingData;
    }
    getVisibilityActionStream() {
        return this.modalDialogVisibility;
    }
};
NbpModalDialogService = __decorate$147([
    Injectable(),
    __metadata$126("design:paramtypes", [])
], NbpModalDialogService);

var __decorate$146 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$125 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpModalDialogComponent = class NbpModalDialogComponent {
    constructor(modalService) {
        this.modalService = modalService;
        this._show = false;
        this._sizes = NbpSize;
        this.dataSettingSubscription = modalService.getDataSettingtream().subscribe((data) => {
            this._title = data.title;
            this._text = data.text;
            this._buttons = data.buttons ? data.buttons : null;
            this._onClick = data.onClickFn;
        });
        this.actionSubscription = modalService.getVisibilityActionStream().subscribe((show) => {
            console.log("DemoModalDialogComponent getVisibilityActionStream: " + show);
            this._show = show;
        });
    }
    ngOnInit() {
    }
    ngOnDestroy() {
        if (this.dataSettingSubscription) {
            this.dataSettingSubscription.unsubscribe();
        }
        if (this.actionSubscription) {
            this.actionSubscription.unsubscribe();
        }
    }
};
NbpModalDialogComponent = __decorate$146([
    Component({
        selector: 'nbp-modal-dialog',
        template: "<nbp-modal *ngIf=\"modalService.getDataSettingtream() | async\" [nbpTitle]=\"_title\" [nbpButtons]=\"_buttons\" (nbpOnButtonClicked)=\"_onClick($event)\" [nbpOpened]=\"_show\" [nbpSize]=\"_sizes.SM\"><span class=\"contenitore-test\">{{_text}}</span></nbp-modal>",
    }),
    __metadata$125("design:paramtypes", [NbpModalDialogService])
], NbpModalDialogComponent);

var __decorate$148 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$127 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$22 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let NbpWrapperComponent = class NbpWrapperComponent {
    constructor(nbpViewSettingsService, document) {
        this.nbpViewSettingsService = nbpViewSettingsService;
        this.document = document;
    }
    ngOnInit() {
        this.receiveContrastoEvent();
        this.receiveFontSizeEvent();
    }
    receiveContrastoEvent() {
        this.nbpViewSettingsService.getContrastoEventStream()
            .subscribe(isContrastoOn => this._isContrastoOn = isContrastoOn);
    }
    receiveFontSizeEvent() {
        this.nbpViewSettingsService.getFontSizeEventStream()
            .subscribe((fontSize) => this.document.body.style.fontSize = fontSize);
    }
};
NbpWrapperComponent = __decorate$148([
    Component({
        selector: 'nbp-wrapper',template: '<div id="nbp-wrapper-container" class="container-fluid"><ng-content></ng-content></div>',
        styles: [],
        host: { '[class.contrasto-on]': '_isContrastoOn' }
    }),
    __param$22(1, Inject(DOCUMENT$1)),
    __metadata$127("design:paramtypes", [NbpViewSettingsService, Object])
], NbpWrapperComponent);

var __decorate$149 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$128 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici */
let nextId$27 = 0;
/**
 * Provider Expression che permette la registrazione come ControlValueAccessor.
 * Permette di gestire [(ngModel)].
 * @docs-private
 */
const NBP_SLIDER_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpSliderComponent),
    multi: true
};
let NbpSliderComponent = class NbpSliderComponent {
    constructor() {
        this.propagateChange = (_) => { };
        /**
         * Identificativo univoco per il name dello slider. Se non viene passato un valore, name viene autogenerato.
         */
        this.id = `nbp-slider-${++nextId$27}`;
        /**
         * Identificativo univoco per l'Id dello slider. Se non viene passato un valore, name viene autogenerato.
         */
        this.name = `nbp-slider-${++nextId$27}`;
        /**
        * Tipo di slider desiderato. Al momento è disponibile solo quello semplice.
        * Di default è il tipo 0.
        */
        this.type = 0;
        /**
         * Valore corrente dello slider.
         * Di default il valore è 0.
         */
        this.value = 0;
        /**
         * Valore boolean che definisce la disabilitazione del componente.
         * Di default il valore è false.
         */
        this.disabled = false;
        /**
       * Evento al cambio di valore dello slider.
       */
        this.nbpChangeValue = new EventEmitter();
        this.range = null;
        this.config = {};
        this.keyboard = null;
        this.min = -10;
        this.max = 10;
        this.step = 1;
        this.limit = 10;
        this.connect = false;
        this.behavior = null;
        this._sliderValue = 5;
    }
    /**
     * Implementazione interfaccia ControlValueAccessor.
     */
    // https://blog.thoughtram.io/angular/2016/07/27/custom-form-controls-in-angular-2.html#understanding-controlvalueaccessor
    writeValue(value) {
        if (value !== undefined) {
            this.sliderValue = value;
            this.nbpChangeValue.emit(value);
        }
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched() { }
    get sliderValue() {
        return this._sliderValue;
    }
    set sliderValue(val) {
        this._sliderValue = val;
        this.propagateChange(this._sliderValue);
    }
};
__decorate$149([
    Input(),
    __metadata$128("design:type", String)
], NbpSliderComponent.prototype, "id", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", String)
], NbpSliderComponent.prototype, "name", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "type", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "value", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Boolean)
], NbpSliderComponent.prototype, "disabled", void 0);
__decorate$149([
    Output(),
    __metadata$128("design:type", EventEmitter)
], NbpSliderComponent.prototype, "nbpChangeValue", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Array)
], NbpSliderComponent.prototype, "range", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Object)
], NbpSliderComponent.prototype, "config", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Array)
], NbpSliderComponent.prototype, "keyboard", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "min", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "max", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "step", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "limit", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Boolean)
], NbpSliderComponent.prototype, "connect", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Object)
], NbpSliderComponent.prototype, "behavior", void 0);
__decorate$149([
    Input(),
    __metadata$128("design:type", Number)
], NbpSliderComponent.prototype, "_sliderValue", void 0);
NbpSliderComponent = __decorate$149([
    Component({
        selector: 'nbp-slider',
        template: "<div class=\"row\" style=\"width:27.562em; padding-top: 4.375em;\"><nouislider *ngIf=\"type==0\" [name]=\"name\" [config]=\"config\" [(ngModel)]=\"value\"></nouislider><div class=\"icomoon-noUi-startIcon\"></div><div class=\"icomoon-noUi-endIcon\"></div></div>",
        styles: [".noUi-target *,:host /deep/ .noUi-target{-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-ms-touch-action:none;touch-action:none;-ms-user-select:none;-moz-user-select:none;user-select:none;-moz-box-sizing:border-box;box-sizing:border-box}:host /deep/ .noUi-target{position:relative;direction:ltr}.noUi-connects,:host /deep/ .noUi-base{width:100%;height:100%;position:relative;z-index:1}:host /deep/ .noUi-connects{overflow:hidden;z-index:0}.noUi-origin,:host /deep/ .noUi-connect{will-change:transform;position:absolute;z-index:1;top:0;left:0;height:100%;width:100%;-ms-transform-origin:0 0;-webkit-transform-origin:0 0;transform-origin:0 0}:host /deep/ html:not([dir=rtl]) .noUi-horizontal .noUi-origin{left:auto;right:0}:host /deep/ .noUi-vertical .noUi-origin{width:0}:host /deep/ .noUi-horizontal .noUi-origin{height:0}:host /deep/ .noUi-handle{position:absolute}.noUi-state-tap .noUi-origin,:host /deep/ .noUi-state-tap .noUi-connect{-webkit-transition:transform .3s;transition:transform .3s}:host /deep/ .noUi-state-drag *{cursor:inherit!important}:host /deep/ .noUi-horizontal{height:.25em}:host /deep/ .noUi-horizontal .noUi-handle{width:1.75em;height:1.75em;left:0;top:0;margin-left:98%}:host /deep/ .noUi-vertical{width:.25em}:host /deep/ .noUi-vertical .noUi-handle{width:1.75em;height:34px;left:-6px;top:-17px}:host /deep/ html:not([dir=rtl]) .noUi-horizontal .noUi-handle{right:-17px;left:auto}:host /deep/ .noUi-target{background:#258900}:host /deep/ .noUi-connects{border-radius:3px}:host /deep/ .noUi-connect{background:#3fb8af}:host /deep/ .noUi-draggable{cursor:ew-resize}:host /deep/ .noUi-vertical .noUi-draggable{cursor:ns-resize}:host /deep/ .noUi-handle{cursor:pointer}.icomoon-noUi-startIcon:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:1.5625em;background-color:#fff;color:green;border-radius:1.5625em;margin-left:-100%;position:relative;top:-.665em}.icomoon-noUi-endIcon:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:1.5625em;background-color:#fff;color:green;border-radius:1.5625em;margin-left:97.5%;position:relative;top:-1.5em}:host /deep/ .noUi-handle:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:2.187em;background-color:#fff;border-radius:2.187em;margin-left:-.5em;cursor:pointer;color:#258900}:host /deep/ .noUi-handle:after{left:17px}.noUi-vertical .noUi-handle:after,:host /deep/ .noUi-vertical .noUi-handle:before{width:14px;height:1px;left:6px;top:14px}:host /deep/ .noUi-vertical .noUi-handle:after{top:17px}:host /deep/ [disabled] .noUi-connect{background:#b8b8b8}:host /deep/ [disabled].noUi-target,[disabled] .noUi-handle,[disabled].noUi-handle{cursor:not-allowed}.noUi-pips *,:host /deep/ .noUi-pips{-moz-box-sizing:border-box;box-sizing:border-box}:host /deep/ .noUi-pips{position:absolute;color:#999}:host /deep/ .noUi-value{position:absolute;white-space:nowrap;text-align:center;color:#000}:host /deep/ .noUi-value-sub{color:#ccc;font-size:10px;color:transparent}:host /deep/ .noUi-marker{position:absolute;background:#ccc}:host /deep/ .noUi-marker-sub{background:#aaa}:host /deep/ .noUi-marker-large{background:#aaa}:host /deep/ .noUi-pips-horizontal{padding:10px 0;height:80px;top:100%;left:0;width:100%}:host /deep/ .noUi-value-horizontal{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}:host /deep/ .noUi-rtl .noUi-value-horizontal{-webkit-transform:translate(50%,50%);transform:translate(50%,50%)}:host /deep/ .noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:2px;height:5px;width:0}:host /deep/ .noUi-marker-horizontal.noUi-marker-sub{height:10px}:host /deep/ .noUi-marker-horizontal.noUi-marker-large{height:15px}:host /deep/ .noUi-pips-vertical{padding:0 10px;height:100%;top:0;left:100%}:host /deep/ .noUi-value-vertical{-webkit-transform:translate(0,-50%);transform:translate(0,-50%,0);padding-left:1.5625em}:host /deep/ .noUi-rtl .noUi-value-vertical{-webkit-transform:translate(0,50%);transform:translate(0,50%)}:host /deep/ .noUi-marker-vertical.noUi-marker{width:5px;height:2px;margin-top:-1px}:host /deep/ .noUi-marker-vertical.noUi-marker-sub{width:10px}:host /deep/ .noUi-marker-vertical.noUi-marker-large{width:15px}:host /deep/ .noUi-tooltip{display:block;padding:.312em;white-space:nowrap;border-width:0;position:absolute;left:0;width:4.375em;height:2.75em;background:inherit;background-color:#6f6f6f;border:none;border-radius:0;box-shadow:none;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:1em;color:#fff;text-align:center;line-height:1.25em;padding-top:.75em;margin-left:-.7em}:host /deep/ .noUi-horizontal .noUi-tooltip{-webkit-transform:translate(-50%,0);transform:translate(-50%,0);left:63%;bottom:190%}:host /deep/ .noUi-vertical .noUi-tooltip{-webkit-transform:translate(0,-50%);transform:translate(0,-50%);top:50%;right:120%}.contrasto-on .noUi-target *,.contrasto-on :host /deep/ .noUi-target{-webkit-tap-highlight-color:#000!important}.contrasto-on :host /deep/ .noUi-target{background:#000!important}.contrasto-on :host /deep/ .noUi-connect{background:#000!important}.contrasto-on :host /deep/ .icomoon-noUi-startIcon:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ .icomoon-noUi-endIcon:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ .noUi-handle:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ [disabled] .noUi-connect{background:#000}.contrasto-on :host /deep/ .noUi-pips{color:#000}.contrasto-on :host /deep/ .noUi-value{color:#000}.contrasto-on :host /deep/ .noUi-value-sub{color:transparent}.contrasto-on :host /deep/ .noUi-marker{background:#000}.contrasto-on :host /deep/ .noUi-marker-sub{background:#000}.contrasto-on :host /deep/ .noUi-marker-large{background:#000}.contrasto-on :host /deep/ .noUi-tooltip{background-color:#000;color:#fff} /*# sourceMappingURL=nbp-slider.component.css.map */ "],
        // encapsulation: ViewEncapsulation.None,
        providers: [NBP_SLIDER_CONTROL_VALUE_ACCESSOR]
    }),
    __metadata$128("design:paramtypes", [])
], NbpSliderComponent);

var __decorate$150 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$129 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici */
let nextId$28 = 0;
/**
 * Provider Expression che permette la registrazione come ControlValueAccessor.
 * Permette di gestire [(ngModel)].
 * @docs-private
 */
const NBP_SLIDER_CONTROL_VALUE_ACCESSOR$1 = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => NbpSliderKeyPointsComponent),
    multi: true
};
let NbpSliderKeyPointsComponent = class NbpSliderKeyPointsComponent {
    constructor() {
        this.propagateChange = (_) => { };
        /**
         * Identificativo univoco per l'id dello slider. Se non viene passato un valore, name viene autogenerato.
         */
        this.id = `nbp-slider-${++nextId$28}`;
        /**
         * Identificativo univoco per il name dello slider. Se non viene passato un valore, name viene autogenerato.
         */
        this.name = `nbp-slider-${++nextId$28}`;
        /**
        * Tipo di slider desiderato. Al momento è disponibile solo quello semplice.
        * Di default è il tipo 0.
        */
        this.type = 0;
        /**
         * Valore boolean che definisce la disabilitazione del componente.
         * Di default il valore è false.
         */
        this.disabled = false;
        this.range = null;
        this.config = {};
        this.keyboard = null;
        this.min = -10;
        this.max = 10;
        this.step = 1;
        this.limit = 10;
        this.connect = false;
        this.behavior = null;
        /**
         * Valore iniziale dello slider.
         * Di default il valore è 0.
         */
        this._sliderValue = 5;
        /**
         * Evento al cambio di valore dello slider.
         */
        this.nbpChangeValue = new EventEmitter();
    }
    /**
     * Implementazione interfaccia ControlValueAccessor.
     */
    writeValue(value) {
        if (value !== undefined) {
            this.sliderValue = value;
            this.nbpChangeValue.emit(value);
        }
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched() { }
    get sliderValue() {
        return this._sliderValue;
    }
    set sliderValue(val) {
        this._sliderValue = val;
        this.propagateChange(this._sliderValue);
    }
    ngAfterViewInit() {
        this.noUiValues = this.sliderRef.nativeElement.querySelectorAll('.noUi-value-large');
        // this.sliderRef.nativeElement.querySelectorAll('.noUi-tooltip')[0].insertAdjacentHTML('afterend', '<div class="two">two</div>')
        let buffer;
        for (var i = 0; i < this.noUiValues.length; i++) {
            buffer = this.noUiValues[i].getAttribute("data-value");
            this.noUiValues[i].addEventListener('click', this.clickOnPip.bind(this, buffer), false);
        }
    }
    clickOnPip(currentValueTip, mouseEvent) {
        this.sliderValue = currentValueTip;
    }
};
__decorate$150([
    Input(),
    __metadata$129("design:type", String)
], NbpSliderKeyPointsComponent.prototype, "id", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", String)
], NbpSliderKeyPointsComponent.prototype, "name", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "type", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Boolean)
], NbpSliderKeyPointsComponent.prototype, "disabled", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Array)
], NbpSliderKeyPointsComponent.prototype, "range", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Object)
], NbpSliderKeyPointsComponent.prototype, "config", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Array)
], NbpSliderKeyPointsComponent.prototype, "keyboard", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "min", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "max", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "step", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "limit", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Boolean)
], NbpSliderKeyPointsComponent.prototype, "connect", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Object)
], NbpSliderKeyPointsComponent.prototype, "behavior", void 0);
__decorate$150([
    Input(),
    __metadata$129("design:type", Number)
], NbpSliderKeyPointsComponent.prototype, "_sliderValue", void 0);
__decorate$150([
    Output(),
    __metadata$129("design:type", EventEmitter)
], NbpSliderKeyPointsComponent.prototype, "nbpChangeValue", void 0);
__decorate$150([
    ViewChild('sliderRef', { read: ElementRef }),
    __metadata$129("design:type", ElementRef)
], NbpSliderKeyPointsComponent.prototype, "sliderRef", void 0);
NbpSliderKeyPointsComponent = __decorate$150([
    Component({
        selector: 'nbp-slider-keypoints',
        template: "<div class=\"row\" style=\"width:27.562em; padding-top: 4.375em;\"><nouislider id=\"\" #sliderRef *ngIf=\"type==0\" [name]=\"name\" [config]=\"config\" [(ngModel)]=\"sliderValue\"></nouislider></div><div class=\"row\" style=\"width:27.562em;margin-top:13px; margin-left:-9px;\"><div style=\"width:20px; float:left; margin-left:-5px;\">{{config.range.min}}</div><div style=\"width:20px; float: right; margin-right:-10px;\">{{config.range.max}}</div></div>",
        styles: [":host /deep/ :focus{outline:0!important;border:0}:host /deep/ .noUi-handle:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:2.187em;background-color:#fff;border-radius:2.187em;margin-left:-8px;cursor:pointer;color:#258900}:host /deep/ .noUi-handle:after{left:17px}.noUi-target *,:host /deep/ .noUi-target{-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-ms-touch-action:none;touch-action:none;-ms-user-select:none;-moz-user-select:none;user-select:none;-moz-box-sizing:border-box;box-sizing:border-box}:host /deep/ .noUi-target{position:relative;direction:ltr}.noUi-connects,:host /deep/ .noUi-base{width:100%;height:100%;position:relative;z-index:1}:host /deep/ .noUi-connects{overflow:hidden;z-index:0}.noUi-origin,:host /deep/ .noUi-connect{will-change:transform;position:absolute;z-index:1;top:0;left:0;height:100%;width:100%;-ms-transform-origin:0 0;-webkit-transform-origin:0 0;transform-origin:0 0}:host /deep/ html:not([dir=rtl]) .noUi-horizontal .noUi-origin{left:auto;right:0}:host /deep/ .noUi-vertical .noUi-origin{width:0}:host /deep/ .noUi-horizontal .noUi-origin{height:0}:host /deep/ .noUi-handle{position:absolute}.noUi-state-tap .noUi-origin,:host /deep/ .noUi-state-tap .noUi-connect{-webkit-transition:transform .3s;transition:transform .3s}:host /deep/ .noUi-state-drag *{cursor:inherit!important}:host /deep/ .noUi-horizontal{height:18px}:host /deep/ .noUi-horizontal .noUi-handle{width:0;height:0;left:-.625em;top:0;margin-left:100%}:host /deep/ .noUi-vertical{width:18px}:host /deep/ .noUi-vertical .noUi-handle{width:0;height:0;left:-6px;top:-17px}:host /deep/ html:not([dir=rtl]) .noUi-horizontal .noUi-handle{right:-.625em;left:auto}:host /deep/ .noUi-target{background:#fafafa}:host /deep/ .noUi-connects{border-radius:3px}:host /deep/ .noUi-connect{background:#3fb8af}:host /deep/ .noUi-draggable{cursor:ew-resize}:host /deep/ .noUi-vertical .noUi-draggable{cursor:ns-resize}:host /deep/ .noUi-handle{width:0;height:0;left:0;top:3px;margin-left:98%;cursor:pointer}.noUi-vertical .noUi-handle:after,:host /deep/ .noUi-vertical .noUi-handle:before{width:14px;height:1px;left:6px;top:14px}:host /deep/ .noUi-vertical .noUi-handle:after{top:17px}:host /deep/ [disabled] .noUi-connect{background:#b8b8b8}:host /deep/ [disabled].noUi-target,[disabled] .noUi-handle,[disabled].noUi-handle{cursor:not-allowed}.noUi-pips *,:host /deep/ .noUi-pips{-moz-box-sizing:border-box;box-sizing:border-box}:host /deep/ .noUi-pips{position:absolute;color:#999}:host /deep/ .noUi-value{position:absolute;white-space:nowrap;text-align:center}:host /deep/ .noUi-value-sub{color:#ccc;font-size:10px}:host /deep/ .noUi-marker{position:absolute;background:#ccc}:host /deep/ .noUi-marker-sub{background:#aaa}:host /deep/ .noUi-marker-large{background:#aaa}:host /deep/ .noUi-pips-horizontal{padding:.625em 0;height:5em;top:100%;left:0;width:100%;margin-top:-1.687em}:host /deep/ .noUi-value-horizontal{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}:host /deep/ .noUi-rtl .noUi-value-horizontal{-webkit-transform:translate(50%,50%);transform:translate(50%,50%)}:host /deep/ .noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:.125em;height:5px}:host /deep/ .noUi-marker-horizontal.noUi-marker-sub{height:10px}:host /deep/ .noUi-marker-horizontal.noUi-marker-large{height:15px}:host /deep/ .noUi-pips-vertical{padding:0 10px;height:100%;top:0;left:100%}:host /deep/ .noUi-value-vertical{-webkit-transform:translate(0,-50%);transform:translate(0,-50%,0);padding-left:25px}:host /deep/ .noUi-rtl .noUi-value-vertical{-webkit-transform:translate(0,50%);transform:translate(0,50%)}:host /deep/ .noUi-marker-vertical.noUi-marker{width:5px;height:.125em;margin-top:-1px}:host /deep/ .noUi-marker-vertical.noUi-marker-sub{width:10px}:host /deep/ .noUi-marker-vertical.noUi-marker-large{width:15px}:host /deep/ .noUi-horizontal .noUi-tooltip{-webkit-transform:translate(-50%,0);transform:translate(-50%,0);left:50%;bottom:120%}:host /deep/ .noUi-vertical .noUi-tooltip{-webkit-transform:translate(0,-50%);transform:translate(0,-50%);top:50%;right:120%}:host /deep/ .noUi-value-horizontal.noUi-value-large{background-color:#6f6f6f;color:transparent;height:1em;width:1em;border-radius:50%;cursor:pointer}:host /deep/ .noUi-value-horizontal.noUi-value-large:hover{background-color:#258900;color:transparent;height:1em;width:1em;border-radius:50%;cursor:pointer}:host /deep/ .noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:.125em;height:0}:host /deep/ .noUi-marker-horizontal.noUi-marker-sub{height:0}:host /deep/ .noUi-marker-horizontal.noUi-marker-large{height:0}:host /deep/ .noUi-horizontal{height:.125em;padding:0!important;top:0!important;width:100%!important;background-color:#6f6f6f!important}:host /deep/ .noUi-tooltip{display:block;padding:.375em .812em .375em .812em;white-space:nowrap;border-width:0;position:absolute;left:0;width:4.375em;height:2em;background:inherit;background-color:#6f6f6f;border:none;border-radius:0;box-shadow:none;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:1em;color:#fff;text-align:center;line-height:1.25em;margin-left:.5em;margin-bottom:1.875em}:host /deep/ .noUi-tooltip::after{content:\"\";position:absolute;top:100%;right:37%;border-top-width:.375em;border-right-width:.5em;border-bottom-width:.375em;border-left-width:.5em;border-style:solid;border-color:#6f6f6f transparent transparent transparent}:host /deep/ .noUi-horizontal .noUi-tooltip{-webkit-transform:translate(-50%,0);transform:translate(-50%,0);left:63%;bottom:190%}:host /deep/ .noUi-vertical .noUi-tooltip{-webkit-transform:translate(0,-50%);transform:translate(0,-50%);top:50%;right:120%}.contrasto-on .noUi-target *,.contrasto-on :host /deep/ .noUi-target{-webkit-tap-highlight-color:#000!important}.contrasto-on :host /deep/ .noUi-target{background:#000!important}.contrasto-on :host /deep/ .noUi-connect{background:#000!important}.contrasto-on :host /deep/ .icomoon-noUi-startIcon:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ .icomoon-noUi-endIcon:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ .noUi-handle:before{background-color:#fff!important;color:#000}.contrasto-on :host /deep/ [disabled] .noUi-connect{background:#000}.contrasto-on :host /deep/ .noUi-pips{color:#000}.contrasto-on :host /deep/ .noUi-value{color:transparent}.contrasto-on :host /deep/ .noUi-value-sub{color:transparent}.contrasto-on :host /deep/ .noUi-marker{background:#000}.contrasto-on :host /deep/ .noUi-marker-sub{background:#000}.contrasto-on :host /deep/ .noUi-marker-large{background:#000}.contrasto-on :host /deep/ .noUi-tooltip{background-color:#000;color:#fff}.contrasto-on :host /deep/ .noUi-tooltip::after{border-color:#000 transparent transparent transparent}.contrasto-on :host /deep/ .noUi-value-horizontal.noUi-value-large{background-color:#000}.contrasto-on :host /deep/ .noUi-value-horizontal.noUi-value-large:hover{background-color:#fff;border:1px solid #000} /*# sourceMappingURL=nbp-slider-keypoints.component.css.map */ "],
        // encapsulation: ViewEncapsulation.Native,
        providers: [NBP_SLIDER_CONTROL_VALUE_ACCESSOR$1]
    }),
    __metadata$129("design:paramtypes", [])
], NbpSliderKeyPointsComponent);

var __decorate$151 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$130 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
class DefaultFormatter {
    to(value) {
        return String(parseFloat(parseFloat(String(value)).toFixed(2)));
    }
    ;
    from(value) {
        return parseFloat(value);
    }
}
let NouisliderComponent = NouisliderComponent_1 = class NouisliderComponent {
    constructor(el, renderer) {
        this.el = el;
        this.renderer = renderer;
        this.config = {};
        this.change = new EventEmitter(true);
        this.update = new EventEmitter(true);
        this.slide = new EventEmitter(true);
        this.set = new EventEmitter(true);
        this.start = new EventEmitter(true);
        this.end = new EventEmitter(true);
        this.onChange = Function.prototype;
        this.onTouched = Function.prototype;
        this.eventHandler = (emitter, values, handle, unencoded) => {
            let v = this.toValues(values);
            let emitEvents = false;
            if (this.value === undefined) {
                this.value = v;
                return;
            }
            if (Array.isArray(v) && this.value[handle] != v[handle]) {
                emitEvents = true;
            }
            if (!Array.isArray(v) && this.value != v) {
                emitEvents = true;
            }
            if (emitEvents) {
                emitter.emit(v);
                this.onChange(v);
            }
            if (Array.isArray(v)) {
                this.value[handle] = v[handle];
            }
            else {
                this.value = v;
            }
        };
        this.defaultKeyHandler = (e) => {
            let stepSize = this.slider.steps();
            let index = parseInt(e.target.getAttribute('data-handle'));
            let sign = 1;
            let multiplier = 1;
            let step = 0;
            let delta = 0;
            switch (e.which) {
                case 34:
                    multiplier = this.config.pageSteps;
                case 40: // ArrowDown
                case 37:
                    sign = -1;
                    step = stepSize[index][0];
                    e.preventDefault();
                    break;
                case 33:
                    multiplier = this.config.pageSteps;
                case 38: // ArrowUp
                case 39:
                    step = stepSize[index][1];
                    e.preventDefault();
                    break;
                default:
                    break;
            }
            delta = sign * multiplier * step;
            let newValue;
            if (Array.isArray(this.value)) {
                newValue = [].concat(this.value);
                newValue[index] = newValue[index] + delta;
            }
            else {
                newValue = this.value + delta;
            }
            this.slider.set(newValue);
        };
    }
    ngOnInit() {
        let inputsConfig = JSON.parse(JSON.stringify({
            behaviour: this.behaviour,
            connect: this.connect,
            limit: this.limit,
            start: this.formControl !== undefined ? this.formControl.value : this.ngModel,
            step: this.step,
            pageSteps: this.pageSteps,
            keyboard: this.keyboard,
            onKeydown: this.onKeydown,
            range: this.config.range || { min: this.min, max: this.max },
            tooltips: this.tooltips,
        }));
        inputsConfig.format = this.format || this.config.format || new DefaultFormatter();
        this.slider = create(this.el.nativeElement.querySelector('div'), Object.assign(this.config, inputsConfig));
        this.handles = [].slice.call(this.el.nativeElement.querySelectorAll('.noUi-handle'));
        this.el.nativeElement.querySelectorAll('.noUi-handle')[0].classList.add("icomoon-Simboli_Risorsa-30");
        if (this.config.keyboard) {
            if (this.config.pageSteps === undefined) {
                this.config.pageSteps = 10;
            }
            for (let handle of this.handles) {
                handle.setAttribute('tabindex', 0);
                handle.addEventListener('click', () => {
                    handle.focus();
                });
                if (this.config.onKeydown === undefined) {
                    handle.addEventListener('keydown', this.defaultKeyHandler);
                }
                else {
                    handle.addEventListener('keydown', this.config.onKeydown);
                }
            }
        }
        this.slider.on('set', (values, handle, unencoded) => {
            this.eventHandler(this.set, values, handle, unencoded);
        });
        this.slider.on('update', (values, handle, unencoded) => {
            this.update.emit(this.toValues(values));
        });
        this.slider.on('change', (values, handle, unencoded) => {
            this.change.emit(this.toValues(values));
        });
        this.slider.on('slide', (values, handle, unencoded) => {
            this.eventHandler(this.slide, values, handle, unencoded);
        });
        this.slider.on('start', (values, handle, unencoded) => {
            this.start.emit(this.toValues(values));
        });
        this.slider.on('end', (values, handle, unencoded) => {
            this.end.emit(this.toValues(values));
        });
    }
    ngOnChanges(changes) {
        if (this.slider && (changes.min || changes.max || changes.step)) {
            setTimeout(() => {
                this.slider.updateOptions({
                    range: {
                        min: this.min,
                        max: this.max
                    },
                    step: this.step
                });
            });
        }
    }
    toValues(values) {
        let v = values.map(this.config.format.from);
        return (v.length == 1 ? v[0] : v);
    }
    writeValue(value) {
        if (this.slider) {
            this.slider.set(value);
        }
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        isDisabled
            ? this.renderer.setAttribute(this.el.nativeElement.childNodes[0], 'disabled', 'true')
            : this.renderer.removeAttribute(this.el.nativeElement.childNodes[0], 'disabled');
    }
};
__decorate$151([
    Input(),
    __metadata$130("design:type", Boolean)
], NouisliderComponent.prototype, "disabled", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", String)
], NouisliderComponent.prototype, "behaviour", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Array)
], NouisliderComponent.prototype, "connect", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Number)
], NouisliderComponent.prototype, "limit", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Number)
], NouisliderComponent.prototype, "min", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Number)
], NouisliderComponent.prototype, "max", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Number)
], NouisliderComponent.prototype, "step", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Object)
], NouisliderComponent.prototype, "format", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Number)
], NouisliderComponent.prototype, "pageSteps", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Object)
], NouisliderComponent.prototype, "config", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Object)
], NouisliderComponent.prototype, "ngModel", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Boolean)
], NouisliderComponent.prototype, "keyboard", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Object)
], NouisliderComponent.prototype, "onKeydown", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", FormControl)
], NouisliderComponent.prototype, "formControl", void 0);
__decorate$151([
    Input(),
    __metadata$130("design:type", Array)
], NouisliderComponent.prototype, "tooltips", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "change", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "update", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "slide", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "set", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "start", void 0);
__decorate$151([
    Output(),
    __metadata$130("design:type", EventEmitter)
], NouisliderComponent.prototype, "end", void 0);
NouisliderComponent = NouisliderComponent_1 = __decorate$151([
    Component({
        selector: 'nouislider',
        host: {
            '[class.ng2-nouislider]': 'true'
        },
        template: '<div [attr.disabled]="disabled ? true : undefined"></div>',
        styles: [`
    :host {
      display: block;
      margin-top: 1rem;
      margin-bottom: 1rem;
    }
  `],
        providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => NouisliderComponent_1),
                multi: true
            }
        ]
    }),
    __metadata$130("design:paramtypes", [ElementRef, Renderer2])
], NouisliderComponent);
let NouisliderModule = class NouisliderModule {
};
NouisliderModule = __decorate$151([
    NgModule({
        imports: [],
        exports: [NouisliderComponent],
        declarations: [NouisliderComponent],
    })
], NouisliderModule);
var NouisliderComponent_1;

var __decorate$152 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$131 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpPaginationLettersComponent = class NbpPaginationLettersComponent {
    constructor() {
        /**
         * Evento di notifica per passaggio ad una pagina qualsiasi
         */
        this.nbpSelectChar = new EventEmitter();
    }
    ngOnInit() {
    }
    onNbpSelectChar(char) {
        this.chars.forEach((item) => { item.selected = (item.label === char); });
        this.nbpSelectChar.emit(char);
    }
};
__decorate$152([
    Input(),
    __metadata$131("design:type", Array)
], NbpPaginationLettersComponent.prototype, "chars", void 0);
__decorate$152([
    Output(),
    __metadata$131("design:type", EventEmitter)
], NbpPaginationLettersComponent.prototype, "nbpSelectChar", void 0);
NbpPaginationLettersComponent = __decorate$152([
    Component({
        selector: 'nbp-pagination-letters',
        template: "<div class=\"contenitor\"><ng-container *ngFor=\"let char of chars; index as i;\"><div class=\"letter\" (click)=\"onNbpSelectChar(char.label)\" [ngClass]=\"{ 'enabled': !char.disabled, 'disabled': char.disabled, 'selected': char.selected }\">{{char.label}}</div></ng-container></div>",
        styles: [".contenitor{display:table;border-collapse:separate;border-spacing:.312em;margin:0 auto}.letter{text-align:center}.enabled{background-color:transparent;font-size:.937em;font-family:Arial,Regular;margin:1px;height:2em;width:2em;color:#258900;border:1px solid #258900;border-radius:1.562em;display:table-cell;vertical-align:middle;cursor:pointer}.enabled:hover{color:#fff;background-color:#258900}.selected{background-color:transparent;font-size:.937em;font-family:Arial,Regular;margin:1px;height:2em;width:2em;color:#fff;background-color:#258900;border-radius:1.562em;display:table-cell;vertical-align:middle;cursor:pointer}.disabled{background-color:transparent;font-size:.937em;font-family:Arial,Regular;margin:1px;height:2em;width:2em;border-radius:1.562em;display:table-cell;vertical-align:middle;pointer-events:none;opacity:.5;color:#ccc;border:1px solid #ccc;cursor:none}:host-context(.contrasto-on) .enabled{background-color:transparent;color:#000;border:1px solid #000}:host-context(.contrasto-on) .enabled:hover{color:#fff;background-color:#000}:host-context(.contrasto-on) .selected{color:#fff;background-color:#000}:host-context(.contrasto-on) .disabled{opacity:.5;color:#000;border:1px solid #000} /*# sourceMappingURL=nbp-pagination-letters.component.css.map */ "]
    }),
    __metadata$131("design:paramtypes", [])
], NbpPaginationLettersComponent);

var __decorate$153 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$132 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpUploadFileComponent = class NbpUploadFileComponent {
    constructor() {
        /**
         * Evento per passare all'esterno la lista dei file.
         */
        this.nbpUploadFile = new EventEmitter();
        /**
         * Evento per associare una funziona esterna all'icona della lista dei file. Ritorna l'oggetto del file selezionato.
         */
        this.nbpEventIcon = new EventEmitter();
        /**
         * Tipo di caricamento dei file. Può assumere due valori:
         * 'single': permette di selezionare un solo file;
         * 'multiple': permette di selezionare più file;
         */
        this.typeUpload = 'multiple';
        this.uploader = new FileUploader({});
        this.hasBaseDropZoneOver = false;
        this.hasAnotherDropZoneOver = false;
        this.files = [];
        this.fileOverBox = false;
    }
    fileOverBase(e) {
        this.hasBaseDropZoneOver = e;
    }
    fileOverAnother(e) {
        this.hasAnotherDropZoneOver = e;
    }
    changeListener($event) {
        if (this.uploader.queue.length > 0 && this.files.length < this.uploader.options.queueLimit) {
            this.files = [];
            for (let i = 0; i < this.uploader.queue.length; i++) {
                this.readThisDrop(this.uploader.queue[i]);
            }
            this.nbpUploadFile.emit(this.files);
        }
    }
    // readThis(inputValue: any): void {
    //     var file: File = inputValue.files[0];
    //     var myReader: FileReader = new FileReader();
    //     myReader.onload = (e) => {
    //         this.propagateChange(myReader.result);
    //     }
    //     myReader.readAsDataURL(file);
    //     this.files.push(file);
    // }
    readThisDrop(inputDrop) {
        var file = inputDrop.some;
        this.files.push(file);
    }
    iconFn(index) {
        this.nbpEventIcon.emit(this.files[index]);
    }
    ngOnInit() {
        if (this.typeUpload && this.typeUpload === 'multiple') {
            let arrayAllowedType = this.setAllowedFile();
            if (arrayAllowedType.length > 0) {
                this.uploader.setOptions({ allowedMimeType: arrayAllowedType, queueLimit: 10000000000 });
            }
        }
        else if (this.typeUpload && this.typeUpload === 'single') {
            let arrayAllowedType = this.setAllowedFile();
            if (arrayAllowedType.length > 0) {
                this.uploader.setOptions({ allowedMimeType: arrayAllowedType, queueLimit: 1 });
            }
        }
    }
    setAllowedFile() {
        let arrayResult = [];
        if (!!this.typeFile) {
            let arrayType = this.typeFile.split(',');
            if (arrayType.length > 0) {
                for (let i = 0; i < arrayType.length; i++) {
                    arrayResult.push(arrayType[i]);
                }
            }
        }
        return arrayResult;
    }
    fileDropFn(e) {
        this.fileOverBox = false;
        if (!this.uploader.options.queueLimit) {
            this.uploader.options.queueLimit = 100000000000;
        }
        if (this.uploader.queue.length > 0 && this.files.length < this.uploader.options.queueLimit) {
            this.files = [];
            for (let i = 0; i < this.uploader.queue.length; i++) {
                this.readThisDrop(this.uploader.queue[i]);
            }
            this.nbpUploadFile.emit(this.files);
        }
    }
    removeFile(indice) {
        this.files.splice(indice, 1);
        this.nbpUploadFile.emit(this.files);
    }
};
__decorate$153([
    Output(),
    __metadata$132("design:type", EventEmitter)
], NbpUploadFileComponent.prototype, "nbpUploadFile", void 0);
__decorate$153([
    Output(),
    __metadata$132("design:type", EventEmitter)
], NbpUploadFileComponent.prototype, "nbpEventIcon", void 0);
__decorate$153([
    Input(),
    __metadata$132("design:type", String)
], NbpUploadFileComponent.prototype, "typeUpload", void 0);
__decorate$153([
    Input(),
    __metadata$132("design:type", String)
], NbpUploadFileComponent.prototype, "typeFile", void 0);
__decorate$153([
    Input(),
    __metadata$132("design:type", String)
], NbpUploadFileComponent.prototype, "labelTitleDoc", void 0);
NbpUploadFileComponent = __decorate$153([
    Component({
        selector: 'nbp-upload-file',template: "<div class=\"container-upload-file\"><label style=\"font-size:1.125em !important; font-weight: normal;\">{{labelTitleDoc}}</label><br><li class=\"panel-box\"><div ng2FileDrop class=\"upload-file\" (fileOver)=\"fileOverBase($event)\" (dragover)=\"fileOverBox = true;\" *ngIf=\"uploader.queue.length == 0\"><div class=\"container-label-trascina\"><span class=\"label-trascina\">Trascina qui<br>oppure</span></div><div class=\"container-icon-aggiungi\" *ngIf=\"typeUpload === 'multiple'\"><div class=\"icomoon-Documenti_37 icon-aggiungi\" (click)=\"fileInputMultiple.click()\"></div></div><div class=\"container-icon-aggiungi\" *ngIf=\"typeUpload === 'single'\"><div class=\"icomoon-Documenti_37 icon-aggiungi\" (click)=\"fileInput.click()\"></div></div><div><span *ngIf=\"typeUpload === 'multiple'\" class=\"label-allega\" (click)=\"fileInputMultiple.click()\">ALLEGA I TUOI FILE</span> <span *ngIf=\"typeUpload === 'single'\" class=\"label-allega\" (click)=\"fileInput.click()\">ALLEGA I TUOI FILE</span></div></div><div class=\"upload-box-list\" ng2FileDrop class=\"upload-file\" (fileOver)=\"fileOverBase($event)\" (dragover)=\"fileOverBox = true;\" *ngIf=\"uploader.queue.length > 0\"><div class=\"container-table\"><table class=\"table-file\"><tr *ngFor=\"let item of uploader.queue, let i = index\"><td nowrap=\"nowrap\" class=\"ico-comuni-search view-file\" (click)=\"iconFn(i)\"></td><td class=\"label-file\">{{ item?.file?.name }}</td><td nowrap=\"nowrap\" class=\"ico-comuni-chiudi remove-file\" (click)=\"item.remove(removeFile(i))\"></td></tr></table></div><div class=\"container-allega\"><table class=\"table-file\"><tr><td *ngIf=\"typeUpload === 'multiple'\" nowrap=\"nowrap\" class=\"icomoon-Simboli_Risorsa-25 plus-icon\" (click)=\"fileInputMultiple.click()\"></td><td *ngIf=\"typeUpload === 'single'\" nowrap=\"nowrap\" class=\"icomoon-Simboli_Risorsa-25 plus-icon\" (click)=\"fileInput.click()\"></td><td *ngIf=\"typeUpload === 'multiple'\" class=\"label-allega\" (click)=\"fileInputMultiple.click()\">ALLEGA I TUOI FILE</td><td *ngIf=\"typeUpload === 'single'\" class=\"label-allega\" (click)=\"fileInput.click()\">ALLEGA I TUOI FILE</td><td nowrap=\"nowrap\" class=\"label-trascina\">Oppure trascina qui</td></tr></table></div></div><div class=\"drag-upload-file\" [ngClass]=\"{'dragover-upload-file': fileOverBox}\" (dragleave)=\"fileOverBox = false;\" (onFileDrop)=\"fileDropFn($event)\" ng2FileDrop [uploader]=\"uploader\">Rilascia qui il tuo documento.</div><div class=\"drag-upload-file-second second-label\" [ngClass]=\"{'dragover-upload-file': fileOverBox}\" (dragleave)=\"fileOverBox = false;\" (onFileDrop)=\"fileDropFn($event)\" ng2FileDrop [uploader]=\"uploader\">La vedrai comparire nel box<br>se l'operazione andrà a buon fine.</div></li><input style=\"visibility: hidden; height: 0px;\" type=\"file\" #fileInput ng2FileSelect [uploader]=\"uploader\" (change)=\"changeListener($event)\" accept=\"{{typeFile}}\"> <input style=\"visibility: hidden; height: 0px;\" type=\"file\" ng2FileSelect #fileInputMultiple [uploader]=\"uploader\" (change)=\"changeListener($event)\" accept=\"{{typeFile}}\" multiple=\"multiple\"></div>",
        styles: [".container-upload-file{width:69%;margin:auto}.upload-file{width:100%;height:11.563em;background-color:#fff;border:1px dashed #6f6f6f;padding:1.25em;z-index:5;opacity:1;display:block;position:absolute;top:0;left:0}.upload-file-over{background-color:#258900}.container-label-trascina{line-height:1}.label-trascina{font-family:Arial,Helvetica,sans-serif;font-weight:400;font-size:.75em;color:#6f6f6f}.label-allega{font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:.75em;color:#258900;cursor:pointer}.container-icon-aggiungi{padding-top:1.05em;padding-bottom:1.25em;display:inline-block}.icon-aggiungi{font-size:2.875em;color:#258900;border-radius:100%;box-shadow:0 0 1.25em 3px #323232;width:.899em;height:.899em;cursor:pointer}.icomoon-Documenti_37:before{position:relative;top:-.295em;left:-.06em}.drag-upload-file{width:100%;height:11.563em;background-color:#fff;border:1px solid #258900;padding:3.95em;background:#258900;color:#fff;position:absolute;top:0;left:0;z-index:0;opacity:0}.drag-upload-file-second{color:#fff;position:absolute;padding:5.95em;top:0;left:0;z-index:0;opacity:0}.dragover-upload-file{z-index:100;opacity:.9}.second-label{font-size:.875em}.panel-box{margin:.312em;padding:0;display:inline-block;clear:none;width:100%;height:11.563em;position:relative}.table-file{width:100%}.view-file{color:#258900;font-size:1.25em;top:.187em;position:relative;float:left}.remove-file{color:#258900;font-size:.938em;top:-.1em;position:relative;cursor:pointer;float:right}.label-file{font-size:.875em;font-family:Arial,Helvetica,sans-serif;color:#323232}.container-table{height:7.22em;overflow:auto}.container-allega{height:3.125em;border-top:1px solid #ccc;padding-top:.625em}.container-allega .label-allega{font-size:1em}.container-allega .label-trascina{font-size:1em}.plus-icon{font-size:1.563em;color:#258900;cursor:pointer} /*# sourceMappingURL=nbp-upload-file.component.css.map */ "]
    }),
    __metadata$132("design:paramtypes", [])
], NbpUploadFileComponent);

var __decorate$154 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$133 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * componente per la visualizzazione di una fascia di bottoni a fondo pagina
 */
let NbpBottomPageButtonComponent = class NbpBottomPageButtonComponent {
    constructor(translate) {
        this.translate = translate;
        /**
         * Permette di disabilitare la traduzzione delle voci di menu
         */
        this.nbpTranslate = true;
        this.rowNumber = [];
        this._buildStyle = (type, elem) => {
            return (elem && elem.css && elem.css[type]) ? elem.css[type] : {};
        };
    }
    _translate(label) {
        if (!this.nbpTranslate) {
            return label;
        }
        return this.translate.instant(label);
    }
    countRow(items) {
        let res = 0;
        if (items && items > 0) {
            let intVal = Math.floor(items / 3);
            ((items % 3) > 0) ? res = intVal + 1 : res = intVal;
        }
        return Array(res).fill(0).map((x, i) => i);
    }
    // }
    ngOnInit() {
        if (this.nbpFixedWidht === undefined) {
            this.nbpFixedWidht = '960px';
        }
        let rowCount = 0;
        this.rowNumber = [];
        if (this.nbpButtonActionList && this.nbpButtonActionList.length > 0) {
            this.rowNumber = this.countRow(this.nbpButtonActionList.length);
        }
    }
    ngOnChanges(changes) {
        const buttonActionList = changes.nbpButtonActionList;
        if (buttonActionList.currentValue && buttonActionList.currentValue.length > 0) {
            this.rowNumber = this.countRow(buttonActionList.currentValue.length);
        }
    }
};
__decorate$154([
    Input(),
    __metadata$133("design:type", Array)
], NbpBottomPageButtonComponent.prototype, "nbpButtonActionList", void 0);
__decorate$154([
    Input(),
    __metadata$133("design:type", String)
], NbpBottomPageButtonComponent.prototype, "nbpTitleBottom", void 0);
__decorate$154([
    Input(),
    __metadata$133("design:type", String)
], NbpBottomPageButtonComponent.prototype, "nbpFixedWidht", void 0);
__decorate$154([
    Input(),
    __metadata$133("design:type", Boolean)
], NbpBottomPageButtonComponent.prototype, "nbpTranslate", void 0);
NbpBottomPageButtonComponent = __decorate$154([
    Component({
        selector: 'nbp-bottom-page-button',
        template: "<div class=\"sfondo-div\"><div class=\"u2056_div container\"><div class=\"row no-margin\"><div class=\"text-center title-button\">{{_translate(nbpTitleBottom)}}</div></div><div class=\"row no-margin row-button-line text-center\" *ngFor=\"let row of rowNumber; let rowIndex = index\"><ng-container *ngFor=\"let item of [0,1,2]; let indexButton = index\"><div class=\"col-width\" *ngIf=\"!!nbpButtonActionList[((rowIndex * 3) + indexButton)]\"><button class=\"btn-bottom\" (click)=\"nbpButtonActionList[((rowIndex * 3) + indexButton)].action($event)\"><div class=\"btn-boottom-container\"><div class=\"btn-boottom-icon\" [ngStyle]=\"_buildStyle('icon',nbpButtonActionList[((rowIndex * 3) + indexButton)])\"><span class=\"{{nbpButtonActionList[((rowIndex * 3) + indexButton)].icon}}\"></span></div><div class=\"btn-boottom-label\" [ngStyle]=\"_buildStyle('text',nbpButtonActionList[((rowIndex * 3) + indexButton)])\"><span>{{_translate(nbpButtonActionList[((rowIndex * 3) + indexButton)].name)}}</span></div></div></button></div></ng-container></div></div></div>",
        styles: [".sfondo-div{width:100%;background-color:#258900}.u2056_div{border-width:0;margin-left:auto;margin-right:auto;left:0;right:0;bottom:0;min-width:960px;background:inherit;background-color:#258900;border:none;border-radius:0;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;font-size:1.5em;color:#fff}.title-button{padding-top:20px;padding-bottom:25px}.col-width{padding-left:4.64%;padding-right:4.64%;width:33.33333333%;float:left}.no-margin{margin-left:0;margin-right:0}.row-button-line{padding-bottom:20px}.btn-bottom{border-radius:2px!important;border-style:solid;border-width:1px;width:250px;height:50px;text-align:center;background-color:#258900;font:'Arial Bold';font-size:.75em;color:#fff}.btn-bottom:hover{background-color:#323232;color:#fff;border-color:#323232}.btn-boottom-container{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:100%}.btn-boottom-icon{-webkit-box-flex:0 0 42px;-moz-box-flex:0 0 42px;-webkit-flex:0 0 42px;-ms-flex:0 0 42px;flex:0 0 42px;font-size:32px;margin-top:4px}.btn-boottom-label{padding-left:10px;font:'Arial Bold';font-size:.75em;color:#fff;max-width:12.33em;overflow:hidden;text-overflow:clip} /*# sourceMappingURL=nbp-bottom-page-button.component.css.map */ "]
    }),
    __metadata$133("design:paramtypes", [TranslateService])
], NbpBottomPageButtonComponent);

var __decorate$155 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$134 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderRangeComponent = class NbpSliderRangeComponent {
    constructor() {
        /**
         * Default Options
         */
        this.defaultOpts = {
            min: 0,
            max: 100,
            label: {
                range: 10,
                format: '$9'
            },
        };
        this.openedFilter = false;
        this.sliderModel = new FormControl();
        this.options = {};
        this.options = Object.assign({}, this.defaultOpts);
    }
    ngOnInit() {
        this.min = (new Date(this.startDate.year, this.startDate.month, this.startDate.day)).getTime();
        this.max = (new Date(this.endDate.year, this.endDate.month, this.endDate.day)).getTime();
        this.sliderModel.setValue(this.model.value);
        this.changeSelectDate1(new Date(this.model.value[0]));
        this.changeSelectDate2(new Date(this.model.value[1]));
    }
    ngOnChanges() {
        /* Detect Input() Changes */
        /* Initial Slider */
    }
    changeSelectDate1(data) {
        this.modelDate1 = data;
    }
    changeSelectDate2(data) {
        this.modelDate2 = data;
    }
    setPoints() {
        if (this.modelDate1 && this.modelDate2) {
            this.model = new FormControl([
                (new Date(this.modelDate1.year, this.modelDate1.month - 1, this.modelDate1.day)).getTime(),
                (new Date(this.modelDate2.year, this.modelDate2.month - 1, this.modelDate2.day)).getTime(),
            ]);
            this.sliderModel.setValue(this.model.value);
        }
    }
    convertDateFormat(date) {
        let newDate = {};
        if (!date) {
            return undefined;
        }
        if (date && date.day && date.month && date.year) {
            newDate.day = date.day;
            newDate.month = String(Number(date.month) + 1);
            newDate.year = date.year;
            return newDate;
        }
        else {
            newDate.day = date.getDate();
            newDate.month = date.getMonth();
            newDate.year = date.getFullYear();
        }
    }
    wrongDateOrder(valueSelectDate1, valueSelectDate2) {
        if (!valueSelectDate1 || !valueSelectDate2) {
            return true;
        }
        const date1 = new Date(valueSelectDate1.year, valueSelectDate1.month, valueSelectDate1.day);
        const date2 = new Date(valueSelectDate2.year, valueSelectDate2.month, valueSelectDate2.day);
        return date2 < date1;
    }
};
__decorate$155([
    Input(),
    __metadata$134("design:type", Object)
], NbpSliderRangeComponent.prototype, "model", void 0);
__decorate$155([
    Input(),
    __metadata$134("design:type", Object)
], NbpSliderRangeComponent.prototype, "startDate", void 0);
__decorate$155([
    Input(),
    __metadata$134("design:type", Object)
], NbpSliderRangeComponent.prototype, "endDate", void 0);
NbpSliderRangeComponent = __decorate$155([
    Component({
        selector: 'nbp-slider-range',
        template: "<div style=\"width:100%\"><div class=\"nbp-slider-range-component\"><nbp-slider-range-bar [min]=\"min\" [max]=\"max\" [opts]=\"options\" [model]=\"sliderModel\"></nbp-slider-range-bar><nbp-slider-range-picker [min]=\"min\" [max]=\"max\" [opts]=\"options\" [model]=\"sliderModel\" [sModel]=\"model\"></nbp-slider-range-picker></div><div class=\"icona icona-pointer icomoon-Tempo_orologio2\" (click)=\"openedFilter = !openedFilter\"></div><div style=\"clear: both;\"></div><div class=\"row\"><div *ngIf=\"openedFilter\" class=\"col-md-24 col-sm-24 col-xs-24\" style=\"position: absolute; margin-top:14px; z-index:100\"><div style=\"text-align:right\"><div class=\"row arrow-filter\" style=\"margin-bottom:-7px; z-index: 1; margin-right:4%\"></div><div class=\"row filter-panel\" style=\"z-index: 0;\"><div class=\"text-center\" style=\"padding-left:30px; padding-right:30px; margin-bottom:20px\"><div class=\"row info-filter mrg-b-20\"><div class=\"row mrg-t-20 mrg-b-10\" style=\"font-weight: 600\"><div style=\"width:96%; float: left;\">SELEZIONA IL PERIODO</div><div style=\"width:4%; color:green;float: right; text-align: right\"><span class=\"glyphicon icon icona-pointer icomoon-Simboli_Risorsa-20\" (click)=\"openedFilter=!openedFilter\"></span></div></div><div style=\"text-align:left\">La data inizio e la data fine possono coprire un periodo temporale di al massimo 18 mesi</div><div style=\"text-align:left\">La data massima non può superare la data odierna. Il periodo minimo selezionabile è di 15 giorni</div></div><div class=\"row\" style=\"color:rgb(50, 50, 50);\"><form #dataInputForm=\"ngForm\"><div class=\"col col-md-9 col-sm-9\"><nbp-input-container [nbpLabel]=\"'Data inizio periodo*'\"><nbp-calendar-generic name=\"inputData1\" [(ngModel)]=\"valueSelectDate1\" (ngModelChange)=\"changeSelectDate1($event)\" validateDate nbpShowValidation=\"true\" [startDateEnabled]=\"convertDateFormat(startDate)\" [endDateEnabled]=\"convertDateFormat(endDate)\"></nbp-calendar-generic></nbp-input-container></div><div class=\"col col-md-2 col-sm-1 col-xs-1\"></div><div class=\"col col-md-9 col-sm-9\"><nbp-input-container [nbpLabel]=\"'Data fine periodo*'\"><nbp-calendar-generic name=\"inputData2\" [(ngModel)]=\"valueSelectDate2\" (ngModelChange)=\"changeSelectDate2($event)\" validateDate nbpShowValidation=\"true\" [startDateEnabled]=\"convertDateFormat(startDate)\" [endDateEnabled]=\"convertDateFormat(endDate)\"></nbp-calendar-generic></nbp-input-container></div></form></div><div class=\"centerButton\"><nbp-button [nbpLabel]=\"'Applica'\" [nbpStyle]=\"0\" [disabled]=\"this.dataInputForm.invalid || !valueSelectDate1 || !valueSelectDate2 || wrongDateOrder(valueSelectDate1, valueSelectDate2)\" (nbpClick)=\"setPoints()\"></nbp-button></div></div></div></div></div></div></div>",
        styles: [":host /deep/ *{box-sizing:border-box}.nbp-slider-range-component{position:relative;padding:0;font-family:Arial Regular,Sans-Serif;font-size:12px;float:left;width:93%}.centerButton{display:inline-block}.icona{float:right;width:5%;position:relative}.icona:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:35px;background-color:#fff;border-radius:35px;margin-left:-8px;margin-top:30px;cursor:pointer;color:#258900}.icona-pointer{cursor:pointer}.success-container-open{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.hover:hover .success-container-close .success-icon.on-hover{display:inline}.hover:hover .success-container-close .success-icon{display:none}.mrg-t-20{margin-top:20px}.mrg-b--10{margin-bottom:-10px}.info-filter{color:#323232}.success-container-close{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.success-container-close:hover .success-icon.on-hover{display:inline}.success-container-close:hover .success-icon{display:none}.success-container-close .success-icon.on-hover{display:none}.icon-valori-filtri-settati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:relative;background-color:#fff;color:#258900;border:1px solid #258900}.icon-valori-filtri-settati:hover{background-color:#258900;color:#fff}.container-filtrisettati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:absolute;background-color:#fff;color:#258900;border:1px solid #258900}.container-filtrisettati:hover{background-color:#258900;color:#fff}.arrow-filter{display:inline-block;position:relative;width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:12px solid #ccc;margin-right:122px}.arrow-filter::before{content:'';position:absolute;top:2px;width:0;height:0;border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #f2f2f2;left:-10.5px}.success-icon{width:35px;height:35px;font-size:35px;cursor:pointer;position:absolute;top:-15%;left:-1%}.success-icon-gomma{width:20px;height:20px;font-size:20px;cursor:pointer;position:absolute;top:12%;left:20%}.cancella-filtri{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.centraCercaFiltra{margin-top:-1px}.cercaFiltra1{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-left:6px}.cercaFiltra2{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-top:-2px;margin-left:6px}.ricercaEffettuata{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:800px;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#258900;color:#fff}.filter-panel{background-color:#f2f2f2;color:#fff;width:100%;border:.5px solid #ccc}.button-group-filter{margin-top:20px;margin-bottom:20px}.gomma{font-size:2.5em;vertical-align:middle;color:green;background-color:transparent}.gomma_txt{margin-top:.75em;margin:0;padding:0;text-align:left;vertical-align:middle;color:#258900;font-size:.75em;font-weight:700;text-transform:uppercase}:host-context(.contrasto-on) .success-container-open{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close:hover{background-color:#fff;color:#000}:host-context(.contrasto-on) .icon-valori-filtri-settati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .icon-valori-filtri-settati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .container-filtrisettati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .container-filtrisettati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .arrow-filter{border-bottom:12px solid #000}:host-context(.contrasto-on) .arrow-filter::before{border-bottom:11px solid #fff}:host-context(.contrasto-on) .cancella-filtri{color:#000}:host-context(.contrasto-on) .cercaFiltra1{color:#000}:host-context(.contrasto-on) .cercaFiltra2{color:#000}:host-context(.contrasto-on) .ricercaEffettuata{color:#000}:host-context(.contrasto-on) .hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#000;color:#fff}:host-context(.contrasto-on) .filter-panel{background-color:#fff;color:#000;border:.5px solid #000}:host-context(.contrasto-on) .gomma{color:#000;background-color:transparent}:host-context(.contrasto-on) .gomma_txt{color:#000} /*# sourceMappingURL=nbp-slider-range.component.css.map */ "]
    }),
    __metadata$134("design:paramtypes", [])
], NbpSliderRangeComponent);

var __decorate$157 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$136 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderRangeBarDirective = class NbpSliderRangeBarDirective {
    // parent: any;
    constructor(el) {
        this.el = el;
        this.range = 100;
    }
    ngOnInit() {
        this.range = this.max - this.min;
        this.setBarPosition();
        /* Rileva Model Changes */
        this
            .model
            .valueChanges
            .subscribe((value) => {
            /* Ridisegna Bar */
            this.setBarPosition();
        });
    }
    // public reRenderBar() {
    //   this.range = this.max - this.min;
    //   this.setBarPosition();
    // }
    setBarPosition() {
        const value = this.model.value;
        const min = value[0];
        const max = value[1];
        const leftPos = this.calculateNextPosFromValue(min);
        const rightPos = this.calculateNextPosFromValue(max);
        const leftPosPerc = leftPos / this.getParent().width * 100;
        const widthPerc = (rightPos - leftPos) / this.getParent().width * 100;
        this.el.nativeElement.style.left = leftPosPerc + "%";
        this.el.nativeElement.style.width = widthPerc + "%";
    }
    calculateNextPosFromValue(value) {
        return ((value - this.min) / this.range) * this.getParent().width;
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$157([
    Input(),
    __metadata$136("design:type", Object)
], NbpSliderRangeBarDirective.prototype, "model", void 0);
__decorate$157([
    Input(),
    __metadata$136("design:type", Object)
], NbpSliderRangeBarDirective.prototype, "opts", void 0);
__decorate$157([
    Input(),
    __metadata$136("design:type", Object)
], NbpSliderRangeBarDirective.prototype, "min", void 0);
__decorate$157([
    Input(),
    __metadata$136("design:type", Object)
], NbpSliderRangeBarDirective.prototype, "max", void 0);
NbpSliderRangeBarDirective = __decorate$157([
    Directive({
        selector: '[nbpSliderRangeBar]'
    }),
    __metadata$136("design:paramtypes", [ElementRef])
], NbpSliderRangeBarDirective);

var __decorate$156 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$135 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente slider che permette di settare un range di tempo tra due date
 */
let NbpSliderRangeBarComponent = class NbpSliderRangeBarComponent {
    constructor() {
        this.min = 0;
        this.max = 100;
        this.labels = [];
        //range slider
        this.rangeDateDays = 100;
        this.isInit = false;
    }
    ngOnChanges() {
        this.rangeDateDays = this.daysDifference(this.min, this.max);
        this.labels = this.getLabels();
    }
    setPallinoClass(value) {
        return (this.model.value[0] < value && value < this.model.value[1]) ? "pallino-verde" : "pallino-nero";
    }
    getLabels() {
        let list = [];
        let mesi = ["GEN", "FEB", "MAR", "APR", "MAG", "GIU", "LUG", "AGO", "SET", "OTT", "NOV", "DIC"];
        let tmpWidth, buffer1, buffer2;
        let oldDate, buffer, buffer3, dayTmp, monthTmp, yearTmp, tmpDate;
        let diffDays;
        tmpDate = this.min;
        while (tmpDate <= this.max) {
            //calcolo label
            buffer = new Date(tmpDate);
            dayTmp = buffer.getDate();
            monthTmp = buffer.getMonth();
            yearTmp = buffer.getFullYear();
            //la label va messa solo se siamo ad inizio mese
            buffer1 = dayTmp == 1 ? mesi[monthTmp] : "";
            buffer2 = dayTmp == 1 ? yearTmp + "" : "";
            buffer3 = tmpDate;
            //calcolo data successiva
            if (monthTmp == 11) {
                monthTmp = 0;
                yearTmp++;
            }
            else {
                monthTmp++;
            }
            //calcolo width
            oldDate = tmpDate;
            tmpDate = (new Date(yearTmp, monthTmp, 1)).getTime();
            diffDays = this.daysDifference(oldDate, tmpDate);
            tmpWidth = (diffDays / this.rangeDateDays) * 100 + "%";
            list.push({
                label1: buffer1,
                label2: buffer2,
                value: buffer3,
                width: tmpWidth
            });
        }
        //sistema i valori sbagliati del loop. Il loop li setta in maniera errata
        diffDays = this.daysDifference(oldDate, this.max);
        list[list.length - 1].width = (diffDays / this.rangeDateDays) * 100 + "%";
        return list;
    }
    daysDifference(d0, d1) {
        var diff = new Date(+d1).setHours(12) - new Date(+d0).setHours(12);
        return Math.round(diff / 8.64e7);
    }
};
__decorate$156([
    ViewChild(NbpSliderRangeBarDirective),
    __metadata$135("design:type", NbpSliderRangeBarDirective)
], NbpSliderRangeBarComponent.prototype, "bar", void 0);
__decorate$156([
    Input(),
    __metadata$135("design:type", Number)
], NbpSliderRangeBarComponent.prototype, "min", void 0);
__decorate$156([
    Input(),
    __metadata$135("design:type", Number)
], NbpSliderRangeBarComponent.prototype, "max", void 0);
__decorate$156([
    Input(),
    __metadata$135("design:type", Object)
], NbpSliderRangeBarComponent.prototype, "model", void 0);
__decorate$156([
    Input(),
    __metadata$135("design:type", Object)
], NbpSliderRangeBarComponent.prototype, "opts", void 0);
NbpSliderRangeBarComponent = __decorate$156([
    Component({
        selector: 'nbp-slider-range-bar',
        template: "<div class=\"slider-bar-container\"><div class=\"slider-bar\"><div nbpSliderRangeBar class=\"slider-bar-highlight\" [min]=\"min\" [max]=\"max\" [opts]=\"opts\" [model]=\"model\"></div></div><div class=\"slider-points\"><ng-container *ngFor=\"let item of labels; let first = first\"><div class=\"slider-label-item margin-color\" [ngStyle]=\"{'min-width': item.width }\"><div *ngIf=\"item.label1+item.label2\" [ngClass]=\"setPallinoClass(item.value)\"><span>X</span></div></div></ng-container></div><div class=\"slider-labels\"><ng-container *ngFor=\"let item of labels; let first = first\"><div class=\"slider-label-item margin-color\" [ngStyle]=\"{'min-width': item.width }\"><div><span>{{item.label1}}</span></div><div><span>{{item.label2}}</span></div></div></ng-container></div></div>",
        styles: [".margin-color{color:#6f6f6f;font-weight:700}.pallino-nero{background-color:#6f6f6f;color:transparent;font-size:0;height:16px;width:16px;border-radius:50%}.pallino-verde{background-color:#39ba2a;color:transparent;font-size:0;height:16px;width:16px;border-radius:50%}.slider-bar-container{position:relative}.slider-bar-container .slider-bar{height:4px;width:100%;background-color:#6f6f6f;position:relative;border-radius:2px}.slider-bar-container .slider-bar .slider-bar-highlight{position:absolute;left:0;width:50%;height:100%;background-color:#39ba2a;border-radius:2px}.slider-bar-container .slider-labels{margin-top:19px;margin-left:0;width:99.3%;display:flex}.slider-bar-container .slider-labels::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px;right:0}.slider-bar-container .slider-labels .slider-label-item{text-align:left}.slider-bar-container .slider-labels .slider-label-item span{transform:translate(-20%,0);position:relative;display:inline-block}.slider-bar-container .slider-labels .slider-label-item:first-child span{transform:translate(-20%,0)}.slider-bar-container .slider-labels .slider-label-item:last-child span{transform:translate(-20%,0)}.slider-bar-container .slider-labels .slider-label-item::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px}.slider-bar-container .slider-points{margin-top:-10px;width:99.3%;display:flex}.slider-bar-container .slider-points::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px;right:0}.slider-bar-container .slider-points .slider-label-item{text-align:left}.slider-bar-container .slider-points .slider-label-item span{transform:translate(-90%,0);position:relative;display:inline-block}.slider-bar-container .slider-points .slider-label-item:first-child span{transform:translate(-20%,0)}.slider-bar-container .slider-points .slider-label-item:last-child span{transform:translate(20%,0)}.slider-bar-container .slider-points .slider-label-item::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px} /*# sourceMappingURL=nbp-slider-range-bar.component.css.map */ "]
    }),
    __metadata$135("design:paramtypes", [])
], NbpSliderRangeBarComponent);

class Utils {
    static calculateDayFRomDate(startDate, endDate) {
        var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
        var firstDate = new Date(startDate.year, startDate.month, startDate.day);
        var secondDate = new Date(endDate.year, endDate.month, endDate.day);
        var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime()) / (oneDay)));
    }
    static calculateTriggerValue(value, opts) {
        const trigger$$1 = opts.trigger || false;
        /* Have Trigger */
        if (trigger$$1) {
            const mod = value % trigger$$1;
            if (mod > trigger$$1 / 2) {
                return value - mod + trigger$$1;
            }
            else {
                return value - mod;
            }
        }
        return value;
    }
    static getDecimalFormatter(format) {
        const hasDecimal = format.match(/\d+\.\d+/g);
        if (hasDecimal) {
            const fixed = (hasDecimal[0].split(".")[1] || "").length;
            return {
                str: format.replace(hasDecimal[0], "{{number}}"),
                fixed: fixed
            };
        }
        const hasNumber = format.match(/\d+/g);
        return {
            str: format.replace(hasNumber, "{{number}}"),
            fixed: 0
        };
    }
    static formatValue(value, format) {
        let mesi = ["GEN", "FEB", "MAR", "APR", "MAG", "GIU", "LUG", "AGO", "SET", "OTT", "NOV", "DIC"];
        let date = new Date(value);
        let month = mesi[date.getMonth()];
        let day = date.getDate();
        let year = date.getFullYear();
        return day + " " + month;
        // const formatValue = value.toFixed(format.fixed)
        // return format.str.replace("{{number}}", formatValue)
        // return value;
    }
}

var __decorate$159 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$138 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderRangePickerDirective = class NbpSliderRangePickerDirective {
    constructor(el) {
        this.el = el;
        this.min = 0;
        this.max = 100;
        this.opts = {};
        this.pos = 0;
        this.onChange = new EventEmitter();
        this.onFinish = new EventEmitter();
        this.lastX = 0;
        this.currentValue = 0;
        this.isInit = false;
        this.range = 100;
        this.onTouchDragHanlder = this.onTouchDragHanlder.bind(this);
        this.setTriggerValue = this.setTriggerValue.bind(this);
    }
    ngOnInit() {
        this.touch = new Hammer(this.el.nativeElement);
        /* Init Data */
        this.currentPos = this.el.nativeElement.getBoundingClientRect();
        this.range = this.max - this.min;
        /* Set Default Value */
        this.setDefaultValue();
        this.isInit = true;
    }
    ngOnChanges() {
        if (this.isInit) {
            /* Re-Render new Value */
            this.setDefaultValue();
        }
    }
    setDefaultValue() {
        const nextPos = this.calculateNextPosFromValue(this.defaultValue);
        const newxtPosPerc = nextPos / this.getParent().width * 100;
        this.el.nativeElement.style.left = newxtPosPerc + "%";
    }
    slideStart(event) {
        document.ondragstart = function () { return false; };
        document.body.onselectstart = function () { return false; };
        this.touch.off("panleft panright panend");
        /* Touch */
        this.touch.on("panleft panright", this.onTouchDragHanlder);
        this.touch.on("panend", this.setTriggerValue);
    }
    onTouchDragHanlder(event) {
        /* Calculate Next X Position */
        const xPos = event.center.x - this.getParent().left;
        this.render(xPos);
    }
    calculateNextValue(nextPos) {
        let percentage = (nextPos / this.getParent().width) * 100;
        if (percentage > 100) {
            percentage = 100;
        }
        if (percentage < 0) {
            percentage = 0;
        }
        const range = this.max - this.min;
        const nextValue = ((percentage / 100) * range) + this.min;
        if (nextValue < this.min) {
            return Math.max(this.min, this.minValue);
        }
        else if (nextValue > this.max) {
            return Math.min(this.max, this.maxValue);
        }
        else {
            if (this.maxValue !== undefined) {
                if (nextValue < this.maxValue) {
                    return nextValue;
                }
                else {
                    return this.maxValue;
                }
            }
            if (this.minValue !== undefined) {
                if (nextValue > this.minValue) {
                    return nextValue;
                }
                else {
                    return this.minValue;
                }
            }
            return nextValue;
        }
    }
    calculateTriggerValue(value) {
        return Utils.calculateTriggerValue(value, this.opts);
    }
    setTriggerValue(e) {
        /* Move Picker */
        setTimeout(() => {
            const value = this.calculateTriggerValue(this.defaultValue);
            this.onFinish.emit({ pos: this.pos, value: value, index: this.index });
        }, 2);
    }
    calculateNextPosFromValue(value) {
        return ((value - this.min) / this.range) * this.getParent().width;
    }
    render(nextPos) {
        /* Update Value */
        const value = this.calculateNextValue(nextPos);
        /* Move Picker */
        this.onChange.emit({ pos: this.pos, value: value, index: this.index });
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "min", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "max", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "minValue", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "maxValue", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Object)
], NbpSliderRangePickerDirective.prototype, "opts", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "pos", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Object)
], NbpSliderRangePickerDirective.prototype, "defaultValue", void 0);
__decorate$159([
    Input(),
    __metadata$138("design:type", Number)
], NbpSliderRangePickerDirective.prototype, "index", void 0);
__decorate$159([
    Output(),
    __metadata$138("design:type", EventEmitter)
], NbpSliderRangePickerDirective.prototype, "onChange", void 0);
__decorate$159([
    Output(),
    __metadata$138("design:type", EventEmitter)
], NbpSliderRangePickerDirective.prototype, "onFinish", void 0);
NbpSliderRangePickerDirective = __decorate$159([
    Directive({
        selector: '[nbpSliderRangePicker]',
        host: {
            '(mousedown)': 'slideStart($event)',
            '(touchstart)': 'slideStart($event)'
        }
    }),
    __metadata$138("design:paramtypes", [ElementRef])
], NbpSliderRangePickerDirective);

var __decorate$158 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$137 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderRangePickerComponent = class NbpSliderRangePickerComponent {
    // parent: any;
    constructor(el) {
        this.el = el;
        this.min = 0;
        this.max = 100;
        this.type = 'range';
        // this.parent = this.el.nativeElement.parentElement.getBoundingClientRect()
    }
    ngOnInit() {
    }
    onChange({ pos, value, index }) {
        if (index == undefined) {
            this.model.setValue(value);
        }
        else {
            let existValue = this.model.value;
            existValue[index] = value;
            this.model.setValue(existValue);
        }
    }
    onFinish({ pos, value, index }) {
        if (index == undefined) {
            this.model.setValue(value);
            this.sModel.setValue(value);
        }
        else {
            let existValue = this.model.value;
            existValue[index] = value;
            this.model.setValue(existValue);
            this.sModel.setValue(existValue);
        }
    }
    clickOnBar($event) {
        let nextVal = this.calculateClickPos($event.clientX);
        const trigger$$1 = this.opts.trigger || false;
        /* Trigger Mode */
        if (trigger$$1) {
            // nextVal = this.calculateTriggerValue(nextVal)
        }
        this.model.setValue([this.model.value[0], this.model.value[1]]);
        this.sModel.setValue([this.model.value[0], this.model.value[1]]);
    }
    calculateTriggerValue(value) {
        return Utils.calculateTriggerValue(value, this.opts);
    }
    calculateClickPos(xPos) {
        const percentage = ((xPos - this.getParent().left) / this.getParent().width) * 100;
        const range = this.max - this.min;
        const nextValue = ((percentage / 100) * range) + this.min;
        if (nextValue < this.min) {
            return this.min;
        }
        else if (nextValue > this.max) {
            return this.max;
        }
        else {
            const range = this.max - this.min;
            return nextValue;
        }
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$158([
    ViewChild(NbpSliderRangePickerDirective),
    __metadata$137("design:type", Object)
], NbpSliderRangePickerComponent.prototype, "picker", void 0);
__decorate$158([
    Input(),
    __metadata$137("design:type", Number)
], NbpSliderRangePickerComponent.prototype, "min", void 0);
__decorate$158([
    Input(),
    __metadata$137("design:type", Number)
], NbpSliderRangePickerComponent.prototype, "max", void 0);
__decorate$158([
    Input(),
    __metadata$137("design:type", Object)
], NbpSliderRangePickerComponent.prototype, "opts", void 0);
__decorate$158([
    Input(),
    __metadata$137("design:type", Object)
], NbpSliderRangePickerComponent.prototype, "model", void 0);
__decorate$158([
    Input(),
    __metadata$137("design:type", Object)
], NbpSliderRangePickerComponent.prototype, "sModel", void 0);
NbpSliderRangePickerComponent = __decorate$158([
    Component({
        selector: 'nbp-slider-range-picker',
        host: {
            '(click)': 'clickOnBar($event)'
        },
        template: "<div class=\"slider-pickers-container\"><div class=\"slider-picker-inner\"><div nbpSliderRangePicker class=\"slider-picker-left rotate icomoon-Simboli_Risorsa-35\" [defaultValue]=\"model.value[0]\" [max]=\"max\" [min]=\"min\" [index]=\"0\" [opts]=\"opts\" [maxValue]=\"model.value[1]\" (onChange)=\"onChange($event)\" (onFinish)=\"onFinish($event)\"><nbp-slider-range-popover [value]=\"model.value[0]\" [opts]=\"opts\"></nbp-slider-range-popover></div><div nbpSliderRangePicker class=\"slider-picker-right icomoon-Simboli_Risorsa-33\" [defaultValue]=\"model.value[1]\" [max]=\"max\" [min]=\"min\" [opts]=\"opts\" [minValue]=\"model.value[0]\" [index]=\"1\" (onChange)=\"onChange($event)\" (onFinish)=\"onFinish($event)\"><nbp-slider-range-popover [value]=\"model.value[1]\" [opts]=\"opts\"></nbp-slider-range-popover></div></div></div>",
        styles: [".slider-pickers-container{position:absolute;padding:0 0;display:block;top:2px;left:0;width:99%}.slider-pickers-container .slider-picker-inner{position:relative;display:block;width:100%}.slider-pickers-container .slider-picker-inner .slider-picker-left{position:absolute;width:0;height:0;background-color:#39ba2a;border:1px solid #fff;box-shadow:0 2px 1px #ccc;transform:translate(-50%,-50%);border-radius:50%;top:0;z-index:10;cursor:pointer}.slider-pickers-container .slider-picker-inner .slider-picker-left:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:35px;background-color:#fff;border-radius:35px;margin-left:-8px;margin-top:30px;cursor:pointer;color:#258900}.slider-pickers-container .slider-picker-inner .slider-picker-right{position:absolute;width:0;height:0;background-color:#39ba2a;border:1px solid #fff;box-shadow:0 2px 1px #ccc;transform:translate(-50%,-50%);border-radius:50%;top:0;z-index:10;cursor:pointer}.slider-pickers-container .slider-picker-inner .slider-picker-right:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:35px;background-color:#fff;border-radius:35px;margin-left:-8px;margin-top:30px;cursor:pointer;color:#258900} /*# sourceMappingURL=nbp-slider-range-picker.component.css.map */ "]
    }),
    __metadata$137("design:paramtypes", [ElementRef])
], NbpSliderRangePickerComponent);

var __decorate$160 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$139 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderRangePopoverComponent = class NbpSliderRangePopoverComponent {
    constructor() {
        this.value = 0;
        this.formatted = "";
    }
    ngOnInit() {
        this.getValue();
    }
    ngOnChanges() {
        this.getValue();
    }
    getValue() {
        const format = Utils.getDecimalFormatter(this.opts.label.format);
        this.formatted = Utils.formatValue(this.value, format);
    }
};
__decorate$160([
    Input(),
    __metadata$139("design:type", Object)
], NbpSliderRangePopoverComponent.prototype, "value", void 0);
__decorate$160([
    Input(),
    __metadata$139("design:type", Object)
], NbpSliderRangePopoverComponent.prototype, "opts", void 0);
NbpSliderRangePopoverComponent = __decorate$160([
    Component({
        selector: 'nbp-slider-range-popover',
        template: "<div class=\"nbp-slider-range-popover\"><div class=\"nbp-slider-range-popover-content\">{{formatted}}</div></div>",
        styles: [".nbp-slider-range-popover{width:80px;position:absolute;bottom:100%;margin-bottom:27px;margin-left:9px;left:50%;transform:translate(-50%,0)} /*# sourceMappingURL=nbp-slider-range-popover.component.css.map */ "]
    }),
    __metadata$139("design:paramtypes", [])
], NbpSliderRangePopoverComponent);

var __decorate$161 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$140 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente slider che permette di selezionare un singolo punto nel tempo
 */
let NbpSliderStoricoComponent = class NbpSliderStoricoComponent {
    constructor() {
        /**
         * Default Options
         */
        this.defaultOpts = {
            min: 0,
            max: 100,
            label: {
                range: 10,
                format: '$9'
            },
        };
        this.openedFilter = false;
        this.sliderModel = new FormControl();
        this.options = {};
        /**
         * Evento al cambio di valore dello slider. Viene lanciato un evento contenente una data in formato NgbDateStruct.
         */
        this.nbpChangeValue = new EventEmitter();
        this.options = Object.assign({}, this.defaultOpts);
    }
    ngOnInit() {
        this.min = (new Date(this.startDate.year, this.startDate.month, this.startDate.day)).getTime();
        this.max = (new Date(this.endDate.year, this.endDate.month, this.endDate.day)).getTime();
        this.sliderModel.setValue(this.model.value);
    }
    ngOnChanges() {
        /* Detect Input() Changes */
        /* Initial Slider */
    }
    changeSelectDate1(data) {
        this.modelDate1 = data;
    }
    setPoint() {
        if (this.modelDate1) {
            this.model = new FormControl((new Date(this.modelDate1.year, this.modelDate1.month - 1, this.modelDate1.day)).getTime());
            this.sliderModel.setValue(this.model.value);
        }
    }
    convertDateFormat(date) {
        let newDate = {};
        newDate.day = date.day;
        newDate.month = String(Number(date.month) + 1);
        newDate.year = date.year;
        return newDate;
    }
};
__decorate$161([
    Input(),
    __metadata$140("design:type", Object)
], NbpSliderStoricoComponent.prototype, "model", void 0);
__decorate$161([
    Input(),
    __metadata$140("design:type", Object)
], NbpSliderStoricoComponent.prototype, "startDate", void 0);
__decorate$161([
    Input(),
    __metadata$140("design:type", Object)
], NbpSliderStoricoComponent.prototype, "endDate", void 0);
__decorate$161([
    Output(),
    __metadata$140("design:type", EventEmitter)
], NbpSliderStoricoComponent.prototype, "nbpChangeValue", void 0);
NbpSliderStoricoComponent = __decorate$161([
    Component({
        selector: 'nbp-slider-storico',
        template: "<div style=\"width:100%;\"><div class=\"nbp-slider-storico-component\"><nbp-slider-storico-bar [min]=\"min\" [max]=\"max\" [model]=\"sliderModel\"></nbp-slider-storico-bar><nbp-slider-storico-picker [min]=\"min\" [max]=\"max\" [opts]=\"options\" [model]=\"sliderModel\" [sModel]=\"model\"></nbp-slider-storico-picker></div><div class=\"icona icona-pointer icomoon-Tempo_orologio2\" (click)=\"openedFilter = !openedFilter\"></div><div style=\"clear: both;\"></div><div class=\"row\"><div *ngIf=\"openedFilter\" class=\"col-md-24 col-sm-24 col-xs-24\" style=\"position: absolute; margin-top:14px; z-index:100\"><div style=\"text-align:right\"><div class=\"row arrow-filter\" style=\"margin-bottom:-7px; z-index: 1; margin-right:4%\"></div><div class=\"row filter-panel\" style=\"z-index: 0;\"><div class=\"text-center\" style=\"padding-left:30px; padding-right:30px; margin-bottom:20px\"><div class=\"row info-filter mrg-b-20\"><div class=\"row mrg-t-20 mrg-b-10\" style=\"font-weight: 600\"><div style=\"width:96%; float: left;\">SELEZIONA DATA</div><div style=\"width:4%; color:green;float: right; text-align: right\"><span class=\"glyphicon icon icona-pointer icomoon-Simboli_Risorsa-20\" (click)=\"openedFilter=!openedFilter\"></span></div></div></div><div class=\"row\" style=\"color:rgb(50, 50, 50);\"><form #inputForm=\"ngForm\"><div class=\"col col-md-9 col-sm-9\"><nbp-input-container [nbpLabel]=\"'Data*'\"><nbp-calendar-generic name=\"inputData1\" [(ngModel)]=\"valueSelectDate1\" (ngModelChange)=\"changeSelectDate1($event)\" [startDateEnabled]=\"convertDateFormat(startDate)\" [endDateEnabled]=\"convertDateFormat(endDate)\" validateDate nbpShowValidation=\"true\"></nbp-calendar-generic></nbp-input-container></div></form></div><div class=\"centerButton\"><nbp-button [nbpLabel]=\"'Applica'\" [nbpStyle]=\"0\" [disabled]=\"inputForm.invalid || !valueSelectDate1\" (nbpClick)=\"setPoint()\"></nbp-button></div></div></div></div></div></div></div>",
        styles: [":host /deep/ *{box-sizing:border-box}.nbp-slider-storico-component{position:relative;padding:0;font-family:Arial Regular,Sans-Serif;font-size:12px;float:left;width:93%}.centerButton{display:inline-block}.icona{float:right;width:5%;position:relative}.icona:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:35px;background-color:#fff;border-radius:35px;margin-left:-8px;margin-top:30px;cursor:pointer;color:#258900}.icona-pointer{cursor:pointer}.success-container-open{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.hover:hover .success-container-close .success-icon.on-hover{display:inline}.hover:hover .success-container-close .success-icon{display:none}.mrg-t-20{margin-top:20px}.mrg-b--10{margin-bottom:-10px}.info-filter{color:#323232}.success-container-close{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.success-container-close:hover .success-icon.on-hover{display:inline}.success-container-close:hover .success-icon{display:none}.success-container-close .success-icon.on-hover{display:none}.icon-valori-filtri-settati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:relative;background-color:#fff;color:#258900;border:1px solid #258900}.icon-valori-filtri-settati:hover{background-color:#258900;color:#fff}.container-filtrisettati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:absolute;background-color:#fff;color:#258900;border:1px solid #258900}.container-filtrisettati:hover{background-color:#258900;color:#fff}.arrow-filter{display:inline-block;position:relative;width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:12px solid #ccc;margin-right:122px}.arrow-filter::before{content:'';position:absolute;top:2px;width:0;height:0;border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #f2f2f2;left:-10.5px}.success-icon{width:35px;height:35px;font-size:35px;cursor:pointer;position:absolute;top:-15%;left:-1%}.success-icon-gomma{width:20px;height:20px;font-size:20px;cursor:pointer;position:absolute;top:12%;left:20%}.cancella-filtri{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.centraCercaFiltra{margin-top:-1px}.cercaFiltra1{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-left:6px}.cercaFiltra2{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-top:-2px;margin-left:6px}.ricercaEffettuata{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:800px;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#258900;color:#fff}.filter-panel{background-color:#f2f2f2;color:#fff;width:100%;border:.5px solid #ccc}.button-group-filter{margin-top:20px;margin-bottom:20px}.gomma{font-size:2.5em;vertical-align:middle;color:green;background-color:transparent}.gomma_txt{margin-top:.75em;margin:0;padding:0;text-align:left;vertical-align:middle;color:#258900;font-size:.75em;font-weight:700;text-transform:uppercase}:host-context(.contrasto-on) .success-container-open{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close:hover{background-color:#fff;color:#000}:host-context(.contrasto-on) .icon-valori-filtri-settati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .icon-valori-filtri-settati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .container-filtrisettati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .container-filtrisettati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .arrow-filter{border-bottom:12px solid #000}:host-context(.contrasto-on) .arrow-filter::before{border-bottom:11px solid #fff}:host-context(.contrasto-on) .cancella-filtri{color:#000}:host-context(.contrasto-on) .cercaFiltra1{color:#000}:host-context(.contrasto-on) .cercaFiltra2{color:#000}:host-context(.contrasto-on) .ricercaEffettuata{color:#000}:host-context(.contrasto-on) .hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#000;color:#fff}:host-context(.contrasto-on) .filter-panel{background-color:#fff;color:#000;border:.5px solid #000}:host-context(.contrasto-on) .gomma{color:#000;background-color:transparent}:host-context(.contrasto-on) .gomma_txt{color:#000} /*# sourceMappingURL=nbp-slider-storico.component.css.map */ "]
    }),
    __metadata$140("design:paramtypes", [])
], NbpSliderStoricoComponent);

var __decorate$163 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$142 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderStoricoBarDirective = class NbpSliderStoricoBarDirective {
    // parent: any;
    constructor(el) {
        this.el = el;
        this.range = 100;
    }
    ngOnInit() {
        // this.parent = this.el.nativeElement.parentElement.getBoundingClientRect();
        this.range = this.max - this.min;
        this.setBarPosition();
        /* Rileva Model Changes */
        this
            .model
            .valueChanges
            .subscribe((value) => {
            /* Re-render Bar */
            this.setBarPosition();
        });
    }
    // public reRenderBar() {
    //   this.range = this.max - this.min;
    //   this.setBarPosition();
    // }
    setBarPosition() {
        const value = this.model.value;
        const rightPos = this.calculateNextPosFromValue(value);
        const rightPosPerc = rightPos / this.getParent().width * 100;
        this.el.nativeElement.style.left = 0 + "px";
        this.el.nativeElement.style.width = rightPosPerc + "%";
    }
    calculateNextPosFromValue(value) {
        return ((value - this.min) / this.range) * this.getParent().width;
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$163([
    Input(),
    __metadata$142("design:type", Object)
], NbpSliderStoricoBarDirective.prototype, "model", void 0);
__decorate$163([
    Input(),
    __metadata$142("design:type", Object)
], NbpSliderStoricoBarDirective.prototype, "opts", void 0);
__decorate$163([
    Input(),
    __metadata$142("design:type", Object)
], NbpSliderStoricoBarDirective.prototype, "min", void 0);
__decorate$163([
    Input(),
    __metadata$142("design:type", Object)
], NbpSliderStoricoBarDirective.prototype, "max", void 0);
NbpSliderStoricoBarDirective = __decorate$163([
    Directive({
        selector: '[nbpSliderStoricoBar]'
    }),
    __metadata$142("design:paramtypes", [ElementRef])
], NbpSliderStoricoBarDirective);

var __decorate$162 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$141 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderStoricoBarComponent = class NbpSliderStoricoBarComponent {
    constructor() {
        this.min = 0;
        this.max = 100;
        //range slider
        this.rangeDateDays = 100;
        this.labels = [];
        this.style = {
            label: {
                "width": "100%"
            }
        };
        this.range = 0;
        this.isInit = false;
    }
    ngOnChanges() {
        this.rangeDateDays = this.daysDifference(this.min, this.max);
        this.labels = this.getLabels();
    }
    setWidthLblPre() {
        let diffDays = this.daysDifference(this.min, this.model.value);
        let tmpWidth = (diffDays / this.rangeDateDays) * 100;
        tmpWidth = 100 - tmpWidth;
        if (tmpWidth < 10)
            tmpWidth = 10;
        return tmpWidth + "%";
    }
    setWidthLblSto() {
        let diffDays = this.daysDifference(this.min, this.model.value);
        let tmpWidth = (diffDays / this.rangeDateDays) * 100;
        if (tmpWidth > 87.4751)
            tmpWidth = 87.4751;
        return tmpWidth + "%";
    }
    setOpacityLblPre() {
        let diffDays = this.daysDifference(this.min, this.model.value);
        let tmpWidth = (diffDays / this.rangeDateDays) * 100;
        tmpWidth = 100 - tmpWidth;
        let tmpOpacity;
        if (tmpWidth < 10)
            tmpOpacity = tmpWidth / 10;
        else
            tmpOpacity = 1;
        return tmpOpacity;
    }
    setOpacityLblSto() {
        let diffDays = this.daysDifference(this.min, this.model.value);
        let tmpWidth = (diffDays / this.rangeDateDays) * 100;
        let tmpOpacity;
        if (tmpWidth < 10)
            tmpOpacity = tmpWidth / 10;
        else
            tmpOpacity = 1;
        return tmpOpacity;
    }
    setPallinoClass(value) {
        return !(value < this.model.value) ? "pallino-verde" : "pallino-nero";
    }
    getLabels() {
        let list = [];
        let mesi = ["GEN", "FEB", "MAR", "APR", "MAG", "GIU", "LUG", "AGO", "SET", "OTT", "NOV", "DIC"];
        let tmpWidth, buffer1, buffer2;
        let oldDate, buffer, buffer3, monthTmp, yearTmp, tmpDate;
        let diffDays;
        tmpDate = this.min;
        while (tmpDate < this.max) {
            //calcolo label
            buffer = new Date(tmpDate);
            monthTmp = buffer.getMonth();
            yearTmp = buffer.getFullYear();
            buffer1 = mesi[monthTmp];
            buffer2 = yearTmp + "";
            buffer3 = tmpDate;
            //calcolo data successiva
            if (monthTmp == 11) {
                monthTmp = 0;
                yearTmp++;
            }
            else {
                monthTmp++;
            }
            //calcolo width
            oldDate = tmpDate;
            tmpDate = (new Date(yearTmp, monthTmp, 1)).getTime();
            diffDays = this.daysDifference(oldDate, tmpDate);
            tmpWidth = (diffDays / this.rangeDateDays) * 100 + "%";
            list.push({
                label1: buffer1,
                label2: buffer2,
                value: buffer3,
                width: tmpWidth
            });
        }
        //sistema i valori sbagliati del loop. Il loop li setta in maniera errata
        diffDays = this.daysDifference(oldDate, this.max);
        list[list.length - 1].width = (diffDays / this.rangeDateDays) * 100 + "%";
        // list[list.length - 1].value = this.max;
        return list;
    }
    daysDifference(d0, d1) {
        var diff = new Date(+d1).setHours(12) - new Date(+d0).setHours(12);
        return Math.round(diff / 8.64e7);
    }
};
__decorate$162([
    ViewChild(NbpSliderStoricoBarDirective),
    __metadata$141("design:type", NbpSliderStoricoBarDirective)
], NbpSliderStoricoBarComponent.prototype, "bar", void 0);
__decorate$162([
    Input(),
    __metadata$141("design:type", Number)
], NbpSliderStoricoBarComponent.prototype, "min", void 0);
__decorate$162([
    Input(),
    __metadata$141("design:type", Number)
], NbpSliderStoricoBarComponent.prototype, "max", void 0);
__decorate$162([
    Input(),
    __metadata$141("design:type", Object)
], NbpSliderStoricoBarComponent.prototype, "model", void 0);
__decorate$162([
    Input(),
    __metadata$141("design:type", Object)
], NbpSliderStoricoBarComponent.prototype, "opts", void 0);
NbpSliderStoricoBarComponent = __decorate$162([
    Component({
        selector: 'nbp-slider-storico-bar',
        template: "<div class=\"slider-bar-container\"><div class=\"slider-bar\"><div nbpSliderStoricoBar class=\"slider-bar-highlight\" [min]=\"min\" [max]=\"max\" [opts]=\"opts\" [model]=\"model\"></div></div><div class=\"slider-labels\" [ngStyle]=\"style.label\"><ng-container *ngFor=\"let item of labels; let first = first\"><div class=\"slider-label-item margin-color\" [ngStyle]=\"{'min-width': item.width }\"><div *ngIf=\"!first\"><span>{{item.label1}}</span></div><div *ngIf=\"!first\"><span>{{item.label2}}</span></div></div></ng-container></div><div class=\"slider-points\"><ng-container *ngFor=\"let item of labels; let first = first\"><div class=\"slider-label-item margin-color\" [ngStyle]=\"{'min-width': item.width }\"><div *ngIf=\"!first\" [ngClass]=\"setPallinoClass(item.value)\"><span>X</span></div></div></ng-container></div><div class=\"slider-labels-principal\"><div class=\"storico\" [ngStyle]=\"{'width': setWidthLblSto(), 'opacity': setOpacityLblSto() }\"><div class=\"label\">STORICO</div></div><div class=\"previsionale\" [ngStyle]=\"{'width': setWidthLblPre(), 'opacity': setOpacityLblPre() }\"><div class=\"label\">PREVISIONALE</div></div></div></div>",
        styles: [".margin-color{margin-top:-70px;color:#6f6f6f;font-weight:700}.pallino-nero{background-color:#6f6f6f;color:transparent;font-size:0;height:16px;width:16px;border-radius:50%}.pallino-verde{background-color:#39ba2a;color:transparent;font-size:0;height:16px;width:16px;border-radius:50%}.slider-bar-container{position:relative}.slider-bar-container .slider-bar{height:4px;width:100%;background-color:#39ba2a;position:relative;border-radius:2px}.slider-bar-container .slider-bar .slider-bar-highlight{position:absolute;left:0;width:50%;height:100%;background-color:#6f6f6f;border-radius:2px}.slider-bar-container .slider-labels-principal{overflow:hidden;margin-top:-34px;width:100%;display:flex;font-size:18px;font-weight:900}.slider-bar-container .slider-labels-principal .storico{text-align:center;width:50%}.slider-bar-container .slider-labels-principal .storico .label{border:1px solid #6f6f6f;padding-left:18px;padding-right:18px;background-color:#6f6f6f;color:#fff;border-radius:0}.slider-bar-container .slider-labels-principal .previsionale{text-align:center;width:50%;min-width:140px}.slider-bar-container .slider-labels-principal .previsionale .label{border:1px solid #6f6f6f;padding-left:18px;padding-right:18px;background-color:green;color:#fff;border-radius:0}.slider-bar-container .slider-labels{margin-top:0;width:100%;display:flex}.slider-bar-container .slider-labels::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px;right:0}.slider-bar-container .slider-labels .slider-label-item{text-align:left}.slider-bar-container .slider-labels .slider-label-item span{transform:translate(-25%,0);position:relative;display:inline-block}.slider-bar-container .slider-labels .slider-label-item::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px}.slider-bar-container .slider-points{margin-top:60px;width:100%;display:flex}.slider-bar-container .slider-points::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px;right:0}.slider-bar-container .slider-points .slider-label-item{flex:1;text-align:left}.slider-bar-container .slider-points .slider-label-item span{transform:translate(-50%,0);position:relative;display:inline-block}.slider-bar-container .slider-points .slider-label-item:first-child span{transform:translate(-20%,0)}.slider-bar-container .slider-points .slider-label-item:last-child span{transform:translate(20%,0)}.slider-bar-container .slider-points .slider-label-item::after{display:block;position:absolute;content:'';height:1px;width:1px;background-color:#bbb;top:6px} /*# sourceMappingURL=nbp-slider-storico-bar.component.css.map */ "]
    }),
    __metadata$141("design:paramtypes", [])
], NbpSliderStoricoBarComponent);

class Utils$1 {
    static calculateTriggerValue(value, opts) {
        const trigger$$1 = opts.trigger || false;
        /* Have Trigger */
        if (trigger$$1) {
            const mod = value % trigger$$1;
            if (mod > trigger$$1 / 2) {
                return value - mod + trigger$$1;
            }
            else {
                return value - mod;
            }
        }
        return value;
    }
    static getDecimalFormatter(format) {
        const hasDecimal = format.match(/\d+\.\d+/g);
        if (hasDecimal) {
            const fixed = (hasDecimal[0].split(".")[1] || "").length;
            return {
                str: format.replace(hasDecimal[0], "{{number}}"),
                fixed: fixed
            };
        }
        const hasNumber = format.match(/\d+/g);
        return {
            str: format.replace(hasNumber, "{{number}}"),
            fixed: 0
        };
    }
    static formatValue(value, format) {
        let mesi = ["GEN", "FEB", "MAR", "APR", "MAG", "GIU", "LUG", "AGO", "SET", "OTT", "NOV", "DIC"];
        let date = new Date(value);
        let month = mesi[date.getMonth()];
        let day = date.getDate();
        let year = date.getFullYear();
        return day + " " + month;
        // return value
        // const formatValue = value.toFixed(format.fixed)
        // return format.str.replace("{{number}}", formatValue)
    }
}

var __decorate$165 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$144 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderStoricoPickerDirective = class NbpSliderStoricoPickerDirective {
    constructor(el) {
        this.el = el;
        this.min = 0;
        this.max = 100;
        this.opts = {};
        this.pos = 0;
        this.onChange = new EventEmitter();
        this.onFinish = new EventEmitter();
        this.lastX = 0;
        this.currentValue = 0;
        this.isInit = false;
        this.range = 100;
        this.onTouchDragHanlder = this.onTouchDragHanlder.bind(this);
        this.setTriggerValue = this.setTriggerValue.bind(this);
    }
    ngOnInit() {
        this.touch = new Hammer(this.el.nativeElement);
        /* Init Data */
        this.currentPos = this.el.nativeElement.getBoundingClientRect();
        this.range = this.max - this.min;
        /* Set Default Value */
        this.setDefaultValue();
        this.isInit = true;
    }
    ngOnChanges() {
        if (this.isInit) {
            /* Re-Render new Value */
            this.setDefaultValue();
        }
    }
    setDefaultValue() {
        const nextPos = this.calculateNextPosFromValue(this.defaultValue);
        const newxtPosPerc = nextPos / this.getParent().width * 100;
        this.el.nativeElement.style.left = newxtPosPerc + "%";
    }
    slideStart(event) {
        document.ondragstart = function () { return false; };
        document.body.onselectstart = function () { return false; };
        this.touch.off("panleft panright panend");
        /* Touch */
        this.touch.on("panleft panright", this.onTouchDragHanlder);
        this.touch.on("panend", this.setTriggerValue);
    }
    onTouchDragHanlder(event) {
        /* Calculate Next X Position */
        const xPos = event.center.x - this.getParent().left;
        this.render(xPos);
    }
    calculateNextValue(nextPos) {
        const percentage = (nextPos / this.getParent().width) * 100;
        const range = this.max - this.min;
        const nextValue = ((percentage / 100) * range) + this.min;
        if (nextValue < this.min) {
            return this.min;
        }
        else if (nextValue > this.max) {
            return this.max;
        }
        else {
            if (this.maxValue !== undefined) {
                if (nextValue < this.maxValue) {
                    return nextValue;
                }
                else {
                    return this.maxValue;
                }
            }
            if (this.minValue !== undefined) {
                if (nextValue > this.minValue) {
                    return nextValue;
                }
                else {
                    return this.minValue;
                }
            }
            return nextValue;
        }
    }
    calculateTriggerValue(value) {
        return Utils$1.calculateTriggerValue(value, this.opts);
    }
    setTriggerValue(e) {
        /* Move Picker */
        setTimeout(() => {
            const value = this.calculateTriggerValue(this.defaultValue);
            this.onFinish.emit({ pos: this.pos, value: value, index: this.index });
        }, 2);
    }
    calculateNextPosFromValue(value) {
        // return ((value - this.min)/ this.range) * 100;
        return ((value - this.min) / this.range) * this.getParent().width;
    }
    render(nextPos) {
        /* Update Value */
        const value = this.calculateNextValue(nextPos);
        /* Move Picker */
        this.onChange.emit({ pos: this.pos, value: value, index: this.index });
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "min", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "max", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "minValue", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "maxValue", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Object)
], NbpSliderStoricoPickerDirective.prototype, "opts", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "pos", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Object)
], NbpSliderStoricoPickerDirective.prototype, "defaultValue", void 0);
__decorate$165([
    Input(),
    __metadata$144("design:type", Number)
], NbpSliderStoricoPickerDirective.prototype, "index", void 0);
__decorate$165([
    Output(),
    __metadata$144("design:type", EventEmitter)
], NbpSliderStoricoPickerDirective.prototype, "onChange", void 0);
__decorate$165([
    Output(),
    __metadata$144("design:type", EventEmitter)
], NbpSliderStoricoPickerDirective.prototype, "onFinish", void 0);
NbpSliderStoricoPickerDirective = __decorate$165([
    Directive({
        selector: '[nbpSliderStoricoPicker]',
        host: {
            '(mousedown)': 'slideStart($event)',
            '(touchstart)': 'slideStart($event)'
        }
    }),
    __metadata$144("design:paramtypes", [ElementRef])
], NbpSliderStoricoPickerDirective);

var __decorate$164 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$143 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderStoricoPickerComponent = class NbpSliderStoricoPickerComponent {
    // parent: any;
    constructor(el) {
        this.el = el;
        this.min = 0;
        this.max = 100;
        this.type = 'single';
        // this.parent = this.el.nativeElement.parentElement.getBoundingClientRect()
    }
    onChange({ pos, value, index }) {
        if (index == undefined) {
            this.model.setValue(value);
        }
        else {
            let existValue = this.model.value;
            existValue[index] = value;
            this.model.setValue(existValue);
        }
    }
    onFinish({ pos, value, index }) {
        if (index == undefined) {
            this.model.setValue(value);
            this.sModel.setValue(value);
        }
        else {
            let existValue = this.model.value;
            existValue[index] = value;
            this.model.setValue(existValue);
            this.sModel.setValue(existValue);
        }
    }
    clickOnBar($event) {
        // camilloelvira
        let nextVal = this.calculateClickPos($event.clientX);
        const trigger$$1 = this.opts.trigger || false;
        /* Trigger Mode */
        if (trigger$$1) {
            // nextVal = this.calculateTriggerValue(nextVal)
        }
        nextVal = this.model.value;
        this.model.setValue(nextVal);
        this.sModel.setValue(nextVal);
    }
    calculateTriggerValue(value) {
        return Utils$1.calculateTriggerValue(value, this.opts);
    }
    calculateClickPos(xPos) {
        //refresh dei dati del parent in caso la pagina sia stata ridimensionata.
        const percentage = ((xPos - this.getParent().left) / this.getParent().width) * 100;
        const range = this.max - this.min;
        const nextValue = ((percentage / 100) * range) + this.min;
        if (nextValue < this.min) {
            return this.min;
        }
        else if (nextValue > this.max) {
            return this.max;
        }
        else {
            const range = this.max - this.min;
            return nextValue;
        }
    }
    getParent() {
        return this.el.nativeElement.parentElement.getBoundingClientRect();
    }
};
__decorate$164([
    ViewChild(NbpSliderStoricoPickerDirective),
    __metadata$143("design:type", Object)
], NbpSliderStoricoPickerComponent.prototype, "picker", void 0);
__decorate$164([
    Input(),
    __metadata$143("design:type", Number)
], NbpSliderStoricoPickerComponent.prototype, "min", void 0);
__decorate$164([
    Input(),
    __metadata$143("design:type", Number)
], NbpSliderStoricoPickerComponent.prototype, "max", void 0);
__decorate$164([
    Input(),
    __metadata$143("design:type", Object)
], NbpSliderStoricoPickerComponent.prototype, "opts", void 0);
__decorate$164([
    Input(),
    __metadata$143("design:type", Object)
], NbpSliderStoricoPickerComponent.prototype, "model", void 0);
__decorate$164([
    Input(),
    __metadata$143("design:type", Object)
], NbpSliderStoricoPickerComponent.prototype, "sModel", void 0);
NbpSliderStoricoPickerComponent = __decorate$164([
    Component({
        selector: 'nbp-slider-storico-picker',
        host: {
            '(click)': 'clickOnBar($event)'
        },
        template: "<div class=\"slider-pickers-container\"><div class=\"slider-picker-inner\"><div nbpSliderStoricoPicker class=\"slider-picker icomoon-Simboli_Risorsa-39\" [defaultValue]=\"model.value\" [max]=\"max\" [min]=\"min\" [opts]=\"opts\" (onChange)=\"onChange($event)\" (onFinish)=\"onFinish($event)\"><nbp-slider-storico-popover [value]=\"model.value\" [opts]=\"opts\"></nbp-slider-storico-popover></div></div></div>",
        styles: [".slider-pickers-container{position:absolute;padding:0 0;display:block;top:2px;left:0;width:99%}.slider-pickers-container .slider-picker-inner{position:relative;display:block;width:100%}.slider-pickers-container .slider-picker-inner .slider-picker{position:absolute;width:0;height:0;background-color:#6f6f6f;border:1px solid #fff;box-shadow:0 2px 1px #ccc;transform:translate(-50%,-50%);border-radius:50%;top:0;z-index:10;cursor:pointer}.slider-pickers-container .slider-picker-inner .slider-picker:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:35px;background-color:#fff;border-radius:35px;margin-left:-8px;margin-top:30px;cursor:pointer;color:#258900} /*# sourceMappingURL=nbp-slider-storico-picker.component.css.map */ "]
    }),
    __metadata$143("design:paramtypes", [ElementRef])
], NbpSliderStoricoPickerComponent);

var __decorate$166 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$145 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpSliderStoricoPopoverComponent = class NbpSliderStoricoPopoverComponent {
    constructor() {
        this.value = 0;
        this.formatted = 0;
    }
    ngOnInit() {
        this.getValue();
    }
    ngOnChanges() {
        this.getValue();
    }
    getValue() {
        const format = Utils$1.getDecimalFormatter(this.opts.label.format);
        this.formatted = Utils$1.formatValue(this.value, format);
    }
};
__decorate$166([
    Input(),
    __metadata$145("design:type", Object)
], NbpSliderStoricoPopoverComponent.prototype, "value", void 0);
__decorate$166([
    Input(),
    __metadata$145("design:type", Object)
], NbpSliderStoricoPopoverComponent.prototype, "opts", void 0);
NbpSliderStoricoPopoverComponent = __decorate$166([
    Component({
        selector: 'nbp-slider-storico-popover',
        template: "<div class=\"nbp-slider-storico-popover\"><div class=\"nbp-slider-storico-popover-content\">{{formatted}}</div></div>",
        styles: [".nbp-slider-storico-popover{width:80px;position:absolute;bottom:100%;margin-bottom:31px;left:50%;margin-left:10px;transform:translate(-50%,0)}.nbp-slider-storico-popover .nbp-slider-storico-popover-content{background-color:#f9f9f9;border:1px solid #fff;padding:8px 12px;border-radius:3px;box-shadow:0 1px 1px #ccc}.nbp-slider-storico-popover .nbp-slider-storico-popover-content:after,.nbp-slider-storico-popover .nbp-slider-storico-popover-content:before{top:100%;left:50%;border:solid transparent;content:\" \";height:0;width:0;position:absolute;pointer-events:none}.nbp-slider-storico-popover .nbp-slider-storico-popover-content:after{border-color:rgba(136,183,213,0);border-top-color:#fff;border-width:6px;margin-left:-6px}.nbp-slider-storico-popover .nbp-slider-storico-popover-content:before{border-color:rgba(194,225,245,0);border-top-color:#ddd;border-width:7px;margin-left:-7px} /*# sourceMappingURL=nbp-slider-storico-popover.component.css.map */ "]
    }),
    __metadata$145("design:paramtypes", [])
], NbpSliderStoricoPopoverComponent);

var __decorate$167 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$146 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente che espone un elenco di lettere cliccabili. Utilizzo tipico: filtro o indice.
 */
let NbpIndexAlphabeticComponent = class NbpIndexAlphabeticComponent {
    constructor() {
        /**
         * Evento di notifica per passaggio ad una pagina qualsiasi
         */
        this.nbpSelectChar = new EventEmitter();
    }
    ngOnInit() {
    }
    onNbpSelectChar(char) {
        this.nbpChars.forEach((item) => { item.selected = (item.label === char); });
        this.nbpSelectChar.emit(char);
    }
};
__decorate$167([
    Input(),
    __metadata$146("design:type", Array)
], NbpIndexAlphabeticComponent.prototype, "nbpChars", void 0);
__decorate$167([
    Output(),
    __metadata$146("design:type", EventEmitter)
], NbpIndexAlphabeticComponent.prototype, "nbpSelectChar", void 0);
NbpIndexAlphabeticComponent = __decorate$167([
    Component({
        selector: 'nbp-index-alphabetic',template: "<div class=\"contenitor\"><ng-container *ngFor=\"let char of nbpChars; index as i;\"><div class=\"letter\" (click)=\"onNbpSelectChar(char.label)\" [ngClass]=\"{ 'enabled': !char.disabled, 'disabled': char.disabled, 'searched': char.searched, 'selected': char.selected }\">{{char.label}}</div></ng-container></div>",
        styles: [".contenitor{display:table;border-collapse:separate;border-spacing:.875em 0;margin:0 auto}.letter{text-align:center}.enabled{background-color:transparent;font-size:1.125em;font-family:Arial;font-weight:400;margin:1px;color:#329600;display:table-cell;vertical-align:middle;cursor:pointer;padding-top:20px;padding-bottom:20px}.searched{font-size:1em;font-family:Arial;font-weight:700;margin:1px;color:#329600;background-color:transparent;display:table-cell;vertical-align:middle;cursor:pointer;padding-top:20px;padding-bottom:20px}.selected{font-size:1.125em;font-family:Arial;font-weight:700;margin:1px;color:#329600;background-color:transparent;display:table-cell;vertical-align:middle;cursor:pointer;padding-top:20px;padding-bottom:20px}.disabled{background-color:transparent;font-size:1.125em;font-family:Arial;font-weight:400;margin:1px;display:table-cell;vertical-align:middle;pointer-events:none;opacity:.5;color:#ccc;cursor:none;padding-top:20px;padding-bottom:20px} /*# sourceMappingURL=nbp-index-alphabetic.component.css.map */ "]
    }),
    __metadata$146("design:paramtypes", [])
], NbpIndexAlphabeticComponent);

var __decorate$168 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$147 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente tooltip con funzionalità di navigazione pagine al suo interno
 */
let NbpOnBoardingComponent = class NbpOnBoardingComponent {
    constructor(element) {
        this.element = element;
        this._tooltipSize = NbpSize;
        this._isVisible = false;
        this._stepIndex = 0;
        /**
          * Strategia di apertura tooltip, 'load', 'click' o 'hover':
          * load -> comportamento di apertura al caricamento della pagina.
          * click -> comportamento popover con apertura e chiusura su click (più pulsante x all'interno del tooltip)
          * hover -> comportamento tooltip classico apertura su hover , chiusura sulla perdita dell'hover
          * Valore di default: hover
         */
        this.nbpVisibilityStrategy = 'hover';
        /**
         * (Opzionale) Enum che definisce il la posizione del tooltip rispetto all’oggetto al quale è ancorato:
         * “Top” | “Right” | “Bottom” | “Left” | “Top-Left” | “Top-Right” | “Bottom-Left” | “Bottom-Right”
         * Default: “Top”
         */
        this.nbpPosition = 'Top'; // enum;
        /**
         * (Opzionale) Enum che definisce il tipo di icona da visualizzare nel tooltip:
         * “Warning” | “Help” | ”Info”
         * Default: nessuna icona
         * Funzionante solo se non presente nbpTemplate
         */
        // TODO NON VIENE MAI USATA QUESTA PROPERTY -- COMMENTATA PER EVITARE REFUSI
        /*@Input() nbpType: object; // enum; Non presente nelle nuove StyleGuide: nuovo componente icona (?)/(!)/(i) -> tooltip?*/
        /**
         * Proprietà che definisce la grandezza del tooltip, tramite l'enum NbpSize
         * valore di default: NbpSize.SM
         */
        this.nbpSize = NbpSize.SM;
        this._nbpHidden = false;
        /**
        * Evento lanciato al click rinuncia messaggi
        */
        this.stepGiveUp = new EventEmitter();
    }
    /**
     * Booleano che abilita/disabilita la visualizzazione del tooltip.
    * Attributo "hidden" standard di HTML5 element
     */
    get hidden() { return this._nbpHidden; }
    ;
    set hidden(value) {
        this._isVisible = !value;
        this._nbpHidden = coerceBooleanProperty(value);
    }
    ;
    stepGiveUpAction(event) {
        this.stepGiveUp.emit(event);
    }
    //******************************************************* */
    //---modificaReply
    onClick(target) {
        event.stopPropagation();
        if (this.nbpVisibilityStrategy !== 'load') {
            if (!this.element.nativeElement.contains(target)) {
                this._closePopover(target);
            }
            if (!this._isVisibilityStrategyHover()) {
                this._closePopover(target);
            }
        }
    }
    //---------------------
    _open() {
        setTimeout(() => {
            this._isVisible = true;
        }, 0);
    }
    _close() {
        this._isVisible = false;
    }
    _closePopover(target) {
        let parentFound = false;
        while (target != null && !parentFound) {
            if (target === this.element.nativeElement) {
                parentFound = true;
            }
            target = target.parentElement;
        }
        if (!parentFound) {
            this._isVisible = false;
        }
    }
    _toggleVisibility() {
        if ((this.nbpVisibilityStrategy === 'hover') || (this.nbpVisibilityStrategy === 'load')) {
            return;
        }
        if (this._isVisible) {
            this._close();
        }
        else {
            this._open();
        }
    }
    _isVisibilityStrategyHover() {
        return this.nbpVisibilityStrategy === 'hover';
    }
    ngOnInit() {
        if (this.nbpVisibilityStrategy === 'load') {
            this._isVisible = true;
            this._open();
        }
    }
};
__decorate$168([
    Input(),
    __metadata$147("design:type", String)
], NbpOnBoardingComponent.prototype, "name", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpVisibilityStrategy", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpPosition", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", Number)
], NbpOnBoardingComponent.prototype, "nbpSize", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", String)
], NbpOnBoardingComponent.prototype, "nbpText", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", TemplateRef)
], NbpOnBoardingComponent.prototype, "nbpTemplate", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", Object)
], NbpOnBoardingComponent.prototype, "nbpTemplateData", void 0);
__decorate$168([
    Input(),
    __metadata$147("design:type", Boolean),
    __metadata$147("design:paramtypes", [Object])
], NbpOnBoardingComponent.prototype, "hidden", null);
__decorate$168([
    Input(),
    __metadata$147("design:type", Object)
], NbpOnBoardingComponent.prototype, "nbpTemplateDataStep", void 0);
__decorate$168([
    Output(),
    __metadata$147("design:type", EventEmitter)
], NbpOnBoardingComponent.prototype, "stepGiveUp", void 0);
__decorate$168([
    HostListener('document: click', ['$event.target']),
    __metadata$147("design:type", Function),
    __metadata$147("design:paramtypes", [HTMLElement]),
    __metadata$147("design:returntype", void 0)
], NbpOnBoardingComponent.prototype, "onClick", null);
NbpOnBoardingComponent = __decorate$168([
    Component({
        selector: 'nbp-on-boarding',template: "<span [ngClass]=\"{ 'nbp-on-boarding': _isVisibilityStrategyHover(), 'nbp-popover': !_isVisibilityStrategyHover() }\"><span (click)=\"_toggleVisibility(); $event.stopPropagation()\" [class.clickable]=\"!_isVisibilityStrategyHover()\"><ng-content></ng-content></span><span [hidden]=\"hidden\" [ngClass]=\"{ 'tooltip-content': _isVisibilityStrategyHover(), 'popover-content': !_isVisibilityStrategyHover(), 'top': nbpPosition=='Top', 'bottom': nbpPosition=='Bottom', 'right': nbpPosition=='Right', 'left': nbpPosition=='Left', 'top-left': nbpPosition=='Top-Left', 'top-right': nbpPosition=='Top-Right', 'bottom-left': nbpPosition=='Bottom-Left', 'bottom-right': nbpPosition=='Bottom-Right', 'sm':(nbpSize === _tooltipSize.SM) && !nbpTemplateDataStep, 'md':(nbpSize === _tooltipSize.MD) && !nbpTemplateDataStep, 'lg':(nbpSize === _tooltipSize.LG) && !nbpTemplateDataStep, 'opened': !_isVisibilityStrategyHover() && _isVisible, 'stepSize':!!nbpTemplateDataStep }\"><ng-container *ngIf=\"(!nbpTemplate); else nbpTemplateContainer\"><span *ngIf=\"!nbpTemplateDataStep\" [ngClass]=\"{ 'tooltip-text': _isVisibilityStrategyHover() , 'popover-text': !_isVisibilityStrategyHover() }\"><div class=\"row\"><div class=\"col-md-24\" [ngClass]=\"{'pad-b-12': !_isVisibilityStrategyHover(), 'tooltip-text': 'true' }\">{{nbpText}}</div></div></span><div class=\"step-conteiner\" *ngIf=\"nbpTemplateDataStep && nbpTemplateDataStep.length>0\"><div class=\"row\"><div class=\"col-md-24\"><div class=\"tooltip-text-step\"><span class=\"text-info-step\">{{nbpTemplateDataStep[_stepIndex].text}}</span></div><span class=\"ico-azioni-elimina ico-azioni-elimina-19px pull-right clickable\" (click)=\"_close(); $event.stopPropagation()\"></span></div></div><div class=\"row\" style=\"margin-top: 5px;\"><div class=\"text-give-up clickable\" (click)=\"stepGiveUpAction($event)\">NON MOSTRARMI PIÙ QUESTI MESSAGGI</div></div><div class=\"row\" style=\"margin-top:10px\"><button class=\"button-step pull-left\" *ngIf=\"_stepIndex>0\" (click)=\"(_stepIndex = _stepIndex - 1);$event.stopPropagation()\"><span class=\"span-text-al prev-info icomoon-Simboli_Risorsa-12\"></span> <span class=\"span-text-al text-prec\">PRECEDENTE</span></button> <button class=\"button-step pull-right\" *ngIf=\"_stepIndex<(nbpTemplateDataStep.length-1)\" (click)=\"(_stepIndex = _stepIndex + 1);$event.stopPropagation()\"><span class=\"span-text-al text-prec\">SUCCESSIVO</span> <span class=\"span-text-al next-info icomoon-Simboli_Risorsa-13\"></span></button></div></div></ng-container><ng-template #nbpTemplateContainer [ngTemplateOutlet]=\"nbpTemplate\" [ngTemplateOutletContext]=\"nbpTemplateData\"></ng-template></span></span>",
        styles: [".bottom .icon-position,.bottom-left .icon-position,.bottom-right .icon-position,.right .icon-position,.top .icon-position,.top-left .icon-position,.top-right .icon-position{position:absolute;top:1.3125em;right:1.3125em;color:#fa9600;font-weight:700}.text-padding-click{padding:20px 80px 20px 20px;text-align:left;font-size:14px;font-family:Arial}.text-padding-hover{padding:.5em 1em .5em 1em}.left .icon-position{position:absolute;top:.3125em;left:.3125em;color:#fa9600;font-weight:700}.nbp-on-boarding,.nbp-popover{position:relative;display:inline-block;opacity:.9;z-index:99}.clickable{cursor:pointer}.stepSize{width:470px}.step-conteiner{padding:20px;max-width:470px}.step-conteiner .ico-azioni-elimina-19px:before{width:19px;height:19px;color:#fa9600;font-weight:700}.step-conteiner .ico-azioni-elimina-19px:before{width:19px;height:19px;color:#fa9600;font-weight:700}.step-conteiner .prev-info{font-size:20px;padding-right:5px}.step-conteiner .next-info{font-size:20px;padding-left:5px}.step-conteiner .tooltip-text-step{width:90%;text-align:left;font-weight:400;font-size:12px;font-weight:400;font-family:'Arial Bold',Arial;float:left}.step-conteiner .text-info-step{margin:0;text-rendering:optimizeLegibility;font-feature-settings:\"kern\" 1;-webkit-font-feature-settings:\"kern\";-moz-font-feature-settings:\"kern\";-moz-font-feature-settings:\"kern=1\";font-kerning:normal}.step-conteiner .text-give-up{float:left;text-align:left;margin-left:5px;padding-top:5px;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:12px;color:#fa9600}.step-conteiner .text-prec{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:12px;color:#fa9600}.step-conteiner .button-step{background-color:transparent;border:0;color:#fa9600}.step-conteiner .span-text-al{vertical-align:middle}.nbp-on-boarding .tooltip-content,.nbp-popover .popover-content{visibility:hidden;background-color:#323232;color:#fff;padding:.3125em 0;position:absolute;z-index:1;display:inline-block!important}.nbp-on-boarding .tooltip-content .tooltip-text,.nbp-popover .popover-content .tooltip-text{text-align:center;font-weight:400}.nbp-on-boarding .tooltip-content .popover-text,.nbp-popover .popover-content .popover-text{text-align:center;font-weight:400}.nbp-on-boarding .tooltip-content.md,.nbp-popover .popover-content.md{width:21.875em}.nbp-on-boarding .tooltip-content.sm,.nbp-popover .popover-content.sm{width:14.5em}.nbp-on-boarding .tooltip-content.lg,.nbp-popover .popover-content.lg{width:31.25em}.nbp-on-boarding .tooltip-content.right,.nbp-popover .popover-content.right{top:50%!important;left:100%!important;margin-left:.625em;transform:translateY(-50%)}.nbp-on-boarding .tooltip-content.right::after,.nbp-popover .popover-content.right::after{content:\"\";position:absolute;top:50%;right:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent #323232 transparent transparent}.nbp-on-boarding .tooltip-content.left,.nbp-popover .popover-content.left{top:50%;right:100%;margin-right:.625em;transform:translateY(-50%)}.nbp-on-boarding .tooltip-content.left::after,.nbp-popover .popover-content.left::after{content:\"\";position:absolute;top:50%;left:100%;transform:translateY(-50%);border-top-width:.625em;border-right-width:.5625em;border-bottom-width:.625em;border-left-width:.5625em;border-style:solid;border-color:transparent transparent transparent #323232}.nbp-on-boarding .tooltip-content.top,.nbp-popover .popover-content.top{bottom:100%;left:62%;margin-bottom:.8125em;transform:translateX(-50%)}.nbp-on-boarding .tooltip-content.top::after,.nbp-popover .popover-content.top::after{content:\"\";position:absolute;top:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.bottom,.nbp-popover .popover-content.bottom{top:100%;left:50%;margin-top:.9375em;transform:translateX(-50%)}.nbp-on-boarding .tooltip-content.bottom::after,.nbp-popover .popover-content.bottom::after{content:\"\";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding .tooltip-content.top-left,.nbp-popover .popover-content.top-left{bottom:100%;left:-4px;margin-bottom:.9375em}.nbp-on-boarding .tooltip-content.top-left::after,.nbp-popover .popover-content.top-left::after{content:\"\";position:absolute;top:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.top-right,.nbp-popover .popover-content.top-right{bottom:100%;right:-14px;margin-bottom:.9375em}.nbp-on-boarding .tooltip-content.top-right::after,.nbp-popover .popover-content.top-right::after{content:\"\";position:absolute;top:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:#323232 transparent transparent transparent}.nbp-on-boarding .tooltip-content.bottom-left,.nbp-popover .popover-content.bottom-left{top:100%;left:-4px;margin-top:.9375em}.nbp-on-boarding .tooltip-content.bottom-left::after,.nbp-popover .popover-content.bottom-left::after{content:\"\";position:absolute;bottom:100%;left:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding .tooltip-content.bottom-right,.nbp-popover .popover-content.bottom-right{top:100%;right:-14px;margin-top:.9375em}.nbp-on-boarding .tooltip-content.bottom-right::after,.nbp-popover .popover-content.bottom-right::after{content:\"\";position:absolute;bottom:100%;right:5%;border-top-width:.625em;border-right-width:.75em;border-bottom-width:.625em;border-left-width:.75em;border-style:solid;border-color:transparent transparent #323232 transparent}.nbp-on-boarding:hover .tooltip-content,.nbp-popover .popover-content.opened{visibility:visible}:host-context(.contrasto-on) .bottom .icon-position,:host-context(.contrasto-on) .bottom-left .icon-position,:host-context(.contrasto-on) .bottom-right .icon-position,:host-context(.contrasto-on) .right .icon-position,:host-context(.contrasto-on) .top .icon-position,:host-context(.contrasto-on) .top-left .icon-position,:host-context(.contrasto-on) .top-right .icon-position{color:#fff}:host-context(.contrasto-on) .left .icon-position{color:#fff}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content,:host-context(.contrasto-on) .nbp-popover .popover-content{background-color:#000}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.right::after{border-color:transparent #000 transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.left::after{border-color:transparent transparent transparent #000}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top-left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top-left::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.top-right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.top-right::after{border-color:#000 transparent transparent transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom-left::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-left::after{border-color:transparent transparent #000 transparent}:host-context(.contrasto-on) .nbp-on-boarding .tooltip-content.bottom-right::after,:host-context(.contrasto-on) .nbp-popover .popover-content.bottom-right::after{border-color:transparent transparent #000 transparent} /*# sourceMappingURL=nbp-on-boarding.component.css.map */ "]
    }),
    __metadata$147("design:paramtypes", [ElementRef])
], NbpOnBoardingComponent);

var __decorate$169 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$148 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente etichetta dal funzionamento analogo a quello di una checkbox.
 */
let NbpEtichettaCheckComponent = NbpEtichettaCheckComponent_1 = class NbpEtichettaCheckComponent {
    constructor() {
        /**
         * input che determina il valore quando il bottone è selezionato
         */
        this.trueValue = true;
        /**
        * input che determina il valore quando il bottone non è selezionato
        */
        this.falseValue = false;
        /**
         * evento per la rimozione del bottone
         */
        this.removeButtonEvt = new EventEmitter();
        /**
         * evento lanciato al cambiamento di stato del bottone
         */
        this.change = new EventEmitter();
        this.propagateChange = (_) => { };
        this._overIcon = false;
        /**
         * evento per la rimozione del bottone
         */
        this.removeButton = () => {
            this.removeButtonEvt.emit(this.key);
        };
    }
    writeValue(value) {
        if ((value !== undefined) && (value !== null)) {
            this.checked = value;
        }
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    ;
    /**
     *
     * funzione innescata da un cambiamento esterno del valore del bottone/check
     */
    onChange(event) {
        this.checked = this.checkValRef.nativeElement.checked;
        this.checked = !this.checked;
        let sendVal = (this.checked) ? this.trueValue : this.falseValue;
        this.propagateChange(sendVal);
        this.change.emit(this.checked);
    }
};
__decorate$169([
    Input(),
    __metadata$148("design:type", String)
], NbpEtichettaCheckComponent.prototype, "key", void 0);
__decorate$169([
    Input(),
    __metadata$148("design:type", Object)
], NbpEtichettaCheckComponent.prototype, "trueValue", void 0);
__decorate$169([
    Input(),
    __metadata$148("design:type", Object)
], NbpEtichettaCheckComponent.prototype, "falseValue", void 0);
__decorate$169([
    Output(),
    __metadata$148("design:type", Object)
], NbpEtichettaCheckComponent.prototype, "removeButtonEvt", void 0);
__decorate$169([
    Output(),
    __metadata$148("design:type", Object)
], NbpEtichettaCheckComponent.prototype, "change", void 0);
__decorate$169([
    ViewChild('checkVal'),
    __metadata$148("design:type", ElementRef)
], NbpEtichettaCheckComponent.prototype, "checkValRef", void 0);
NbpEtichettaCheckComponent = NbpEtichettaCheckComponent_1 = __decorate$169([
    Component({
        selector: 'nbp-etichetta-check',
        template: "<div class=\"etic-btn\" (click)=\"onChange($event)\" [ngClass]=\"{'etic-btn-check'   :checked, 'etic-btn-no-over' :(!_overIcon && !checked)}\"><input type=\"checkbox\" #checkVal style=\"display: none;\" [checked]=\"checked\" [hidden]=\"true\" (change)=\"onChange($event)\"> <i *ngIf=\"checked\" class=\"icomoon-Simboli_Risorsa-182 pull-left etic-icon-check\"></i> <span class=\"etic-btn-span\">{{key|uppercase }} </span><button class=\"icomoon-Simboli_Risorsa-22 pull-right etic-icon-rem\" (mouseenter)=\"_overIcon=true\" (mouseleave)=\"_overIcon=false\" (click)=\"removeButton();$event.stopPropagation();\"></button></div>",
        styles: [".etic-btn{border:0;min-width:130px;height:30px;display:inline-block;font-family:'Arial Bold',Arial;font-size:1em;font-weight:700;color:#6f6f6f;text-decoration:none;text-transform:uppercase;text-align:center;line-height:27px;position:relative;cursor:pointer;background:#f8f8f8;-webkit-box-shadow:0 3px 3px 0 rgba(0,0,0,.25);-moz-box-shadow:0 3px 3px 0 rgba(0,0,0,.25);box-shadow:0 3px 3px 0 rgba(0,0,0,.25);text-align:left}.etic-btn-span{margin-left:5px;font-size:.75em;line-height:30px;vertical-align:middle}.etic-btn-check{color:#fff;background:#258900;-webkit-box-shadow:inset 0 0 4px 1px #164602;-moz-box-shadow:inset 0 0 4px 1px #164602;box-shadow:inset 0 0 4px 1px #164602}.etic-icon-rem{font-size:20px;vertical-align:middle;font-weight:700;line-height:30px;background-color:transparent;border:none}.etic-icon-check{font-size:12px;vertical-align:middle;font-weight:700;line-height:30px;padding-left:5px;padding-top:1px}button:active div,button:active i,button:active span,button:focus div,button:focus i,button:focus span{position:relative;top:0;left:0} /*# sourceMappingURL=nbp-etichetta-check.component.css.map */ "],
        providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => NbpEtichettaCheckComponent_1),
                multi: true
            }
        ]
    }),
    __metadata$148("design:paramtypes", [])
], NbpEtichettaCheckComponent);
var NbpEtichettaCheckComponent_1;

var __decorate$170 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$149 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente per la selezione/deselezione del mercato. Funzionamento analogo ad una checkbox
 */
let NbpSelMercatoComponent = NbpSelMercatoComponent_1 = class NbpSelMercatoComponent {
    constructor() {
        /**
         * valore emesso dal componente sull'evento onChange quando il componente è checked
         * @type {boolean}
         */
        this.trueValue = true;
        /**
         * valore emesso dal componente sull'evento onChange quando il componente è unchecked
         * @type {boolean}
         */
        this.falseValue = false;
        /**
         * evento al cambio di stato del componente. Trasporta i valori definiti in trueValue e falseValue (true e false di default)
         * @type {EventEmitter<any>}
         */
        this.change = new EventEmitter();
        this.propagateChange = (_) => { };
    }
    writeValue(value) {
        if ((value !== undefined) && (value !== null)) {
            this.checked = value;
        }
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    ;
    onChange(event) {
        this.checked = this.checkValRef.nativeElement.checked;
        this.checked = !this.checked;
        let sendVal = (this.checked) ? this.trueValue : this.falseValue;
        this.propagateChange(sendVal);
        this.change.emit(this.checked);
    }
    // _objIcon = {};
    ngOnInit() {
        // if(this.iconIn){
        //   this._objIcon[this.iconIn]=true;
        // }
    }
    getIconClass() {
        return this.checked ? this.iconIn + ' circle-check' : this.iconIn;
    }
};
NbpSelMercatoComponent.idCounter = 0;
__decorate$170([
    ViewChild('checkVal'),
    __metadata$149("design:type", ElementRef)
], NbpSelMercatoComponent.prototype, "checkValRef", void 0);
__decorate$170([
    Input(),
    __metadata$149("design:type", String)
], NbpSelMercatoComponent.prototype, "key", void 0);
__decorate$170([
    Input(),
    __metadata$149("design:type", Object)
], NbpSelMercatoComponent.prototype, "trueValue", void 0);
__decorate$170([
    Input(),
    __metadata$149("design:type", Object)
], NbpSelMercatoComponent.prototype, "falseValue", void 0);
__decorate$170([
    Input(),
    __metadata$149("design:type", String)
], NbpSelMercatoComponent.prototype, "iconIn", void 0);
__decorate$170([
    Output(),
    __metadata$149("design:type", Object)
], NbpSelMercatoComponent.prototype, "change", void 0);
NbpSelMercatoComponent = NbpSelMercatoComponent_1 = __decorate$170([
    Component({
        selector: 'nbp-sel-mercato',
        template: "<button class=\"merc-btn\" [ngClass]=\"{'btn-merc-check':checked}\" (click)=\"onChange($event)\"><input type=\"checkbox\" style=\"display: none;\" #checkVal [checked]=\"checked\" [hidden]=\"true\" (change)=\"onChange($event)\"><div class=\"icona circle icon-merc\" [ngClass]=\"getIconClass()\"></div><span class=\"label-key\" [ngClass]=\"{'label-key-check':checked}\">{{key|uppercase }}</span></button>",
        styles: [".merc-btn{border:0;min-width:130px;height:48px;border-radius:24px;display:inline-block;font-family:'Arial Bold',Arial;font-size:1em;font-weight:700;color:#6f6f6f;text-decoration:none;text-transform:uppercase;text-align:center;line-height:27px;position:relative;cursor:pointer;background:#f8f8f8;text-align:left}.circle{height:40px;width:40px;background-color:#fff;border-radius:50%;display:inline-table;vertical-align:middle;margin-top:.5px;margin-bottom:2.5px;margin-left:-2px;color:#ccc}.label-key{vertical-align:middle;line-height:48px;margin-left:10px;text-align:center;width:800%;margin-right:10px}.icon-merc{vertical-align:middle}.btn-merc-check{background:#c4dbbc}.circle-check:before{color:#258900!important}.label-key-check{color:#258900}button:active div,button:active span,button:focus div,button:focus span{position:relative;top:0;left:0}.icona:before{font-family:icomoon!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;font-size:40px} /*# sourceMappingURL=nbp-sel-mercato.component.css.map */ "],
        providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => NbpSelMercatoComponent_1),
                multi: true
            }
        ]
    }),
    __metadata$149("design:paramtypes", [])
], NbpSelMercatoComponent);
var NbpSelMercatoComponent_1;

var __decorate$171 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$150 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente etichetta con possibilità di chiusura. Utile per rappresentare e rimuovere filtri.
 */
let NbpEtichettaFiltroComponent = class NbpEtichettaFiltroComponent {
    constructor() {
        /**
         * evento in output al click sull'icona di rimozione
         */
        this.removeFilterEvt = new EventEmitter();
        this.removeFilter = () => {
            this.removeFilterEvt.emit(this.key);
        };
    }
    ngOnInit() {
    }
};
__decorate$171([
    Input(),
    __metadata$150("design:type", String)
], NbpEtichettaFiltroComponent.prototype, "key", void 0);
__decorate$171([
    Output(),
    __metadata$150("design:type", Object)
], NbpEtichettaFiltroComponent.prototype, "removeFilterEvt", void 0);
NbpEtichettaFiltroComponent = __decorate$171([
    Component({
        selector: 'nbp-etichetta-filtro',
        template: "<div class=\"etic-cont\"><div class=\"cont-text\"><span class=\"over-text\">{{key|uppercase }}</span></div><i class=\"icomoon-Simboli_Risorsa-20 pull-right icon-rem\" (click)=\"removeFilter();$event.stopPropagation();\"></i></div>",
        styles: [".etic-cont{font-family:'Arial Bold',Arial;font-size:1em;font-weight:700;color:#323232;background-color:#ccc;min-width:90px;border-radius:10px;min-height:25px;padding-left:10px;text-decoration:none;text-align:left;margin-left:10px;margin-right:10px;display:table!important;vertical-align:middle;line-height:1.6em}.etic-cont .icon-rem{padding-right:10px;font-size:.625em;outline:0!important;color:#258900;padding-left:.625em;padding-top:calc(.25em);display:table-cell!important;vertical-align:middle;line-height:1.852em;float:left;cursor:pointer}button:active div,button:active i,button:active span,button:focus div,button:focus i,button:focus span{position:relative;top:0;left:0}.cont-text{display:table-cell!important;vertical-align:middle} /*# sourceMappingURL=nbp-etichetta-filtro.component.css.map */ "]
    }),
    __metadata$150("design:paramtypes", [])
], NbpEtichettaFiltroComponent);

var __decorate$172 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$151 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Componente per la ricerca testuale. E' in grado di mostrare suggerimenti per le ricerche
 */
let NbpSearchBoxComponent = class NbpSearchBoxComponent {
    /**
     *
     * @param differs  inizializza l' iteratore che serve controlla l'input in ingresso nbpResults
     */
    constructor(differs) {
        /**
        * nome dei campi personalizzabili dell'oggetto nbpResults. Default: "group"
        */
        this.nbpGroup = "group";
        /**
        * nome dei campi personalizzabili dell'oggetto nbpResults. Default: "label"
        */
        this.nbpLabel = "label";
        /**
        * nome dei campi personalizzabili dell'oggetto nbpResults. Default: "subtitle"
        */
        this.nbpSubtitle = "subtitle";
        /**
         * nome dei campi personalizzabili dell'oggetto nbpResults. Default: "description"
         */
        this.nbpDescription = "description";
        /**
         * nome dei campi personalizzabili dell'oggetto nbpResults. Default: "type"
         */
        this.nbpType = "type";
        /**
         * numero di altri risultati da mostrare. Default: 0 (numero non mostrato).
         * Valore speciale "-1": non mostra la scritta
         */
        this.nbpOtherResultsNumber = 0;
        /**
         * testo bottone ricerca
         */
        this.nbpSearchButtonText = "cerca";
        /**
         * testo placeholder casella ricerca
         * @type {string}
         */
        this.nbpPlaceholder = '';
        /**
         * evento che innesca la ricerca dei suggerimenti
         */
        this.change = new EventEmitter();
        /**
        * evento che innesca la ricerca dei risultati
        */
        this.search = new EventEmitter();
        /**
         * evento sollevato al click sul testo "mostra altri risultati"
         */
        this.showMoreResults = new EventEmitter();
        /**
         * Object che conterrà i raggruppamenti dei risultato
         */
        this.groups = {};
        /**
         * lista dei raggruppamenti
         */
        this.groupsList = [];
        /**
         * variabile che gestisce la visulizzazione dei risultati
         */
        this.showResults = false;
        /**
         * variabile per vedere se l'imput della ricerca dei risultati è cambiato
         */
        this.eventPass = '';
        /**
         * variabile in output per la ricerca
         */
        this.searchText = '';
        this.primary = NbpStyle.PRIMARY;
        /**
         * funzione che raggruppa i suggerimenti
         */
        this.formatResults = () => {
            this.groups = [];
            this.groupsList = [];
            let self = this;
            this.nbpResults.forEach(function (elem) {
                if (self.groups[elem[self.nbpGroup]]) {
                    self.groups[elem[self.nbpGroup]].push(elem);
                }
                else {
                    self.groups[elem[self.nbpGroup]] = [elem];
                    self.groupsList.push(elem[self.nbpGroup]);
                }
            });
            if (this.nbpResults.length > 0) {
                this.showResults = true;
            }
        };
        this.differ = differs.find([]).create(null);
    }
    ngOnInit() { }
    /**
     * funzione che determina se vi è stato un cambiamento in ingresso
     */
    ngDoCheck() {
        const change = this.differ.diff(this.nbpResults);
        if (change && change.length > 0) {
            if (this.searchText !== this.eventPass) {
                this.formatResults();
                this.eventPass = this.searchText;
            }
        }
    }
    /**
     *
     * @param elem input selezionato dai risultati
     * funzione che imposta la varibile searchText in base al risultato in cui ho cliccato
     */
    selectSearch(elem) {
        this.searchText = elem.label;
        this.showResults = false;
    }
    /**
     * Funzione che rimuove i suggerimenti
     */
    clearResults() {
        this.searchText = '';
        this.nbpResults = [];
        this.showResults = false;
    }
    /**
     *
     * funzione che lancia l'evento per la ricerca dei suggerimenti
     */
    changeStr($event) {
        if (this.searchText !== this.eventPass) {
            this.change.emit(this.searchText);
        }
    }
    /**
     * funzione che lancia l'evento di ricerca
     */
    sendSearch() {
        this.search.emit(this.searchText);
    }
    /**
     * funzione che lancia evento di click su "mostra più risultati
     */
    showMoreClick() {
        this.showMoreResults.emit();
    }
};
__decorate$172([
    Input(),
    __metadata$151("design:type", Array)
], NbpSearchBoxComponent.prototype, "nbpResults", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpGroup", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpLabel", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpSubtitle", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpDescription", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpType", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", Number)
], NbpSearchBoxComponent.prototype, "nbpOtherResultsNumber", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpSearchButtonText", void 0);
__decorate$172([
    Input(),
    __metadata$151("design:type", String)
], NbpSearchBoxComponent.prototype, "nbpPlaceholder", void 0);
__decorate$172([
    Output(),
    __metadata$151("design:type", EventEmitter)
], NbpSearchBoxComponent.prototype, "change", void 0);
__decorate$172([
    Output(),
    __metadata$151("design:type", EventEmitter)
], NbpSearchBoxComponent.prototype, "search", void 0);
__decorate$172([
    Output(),
    __metadata$151("design:type", EventEmitter)
], NbpSearchBoxComponent.prototype, "showMoreResults", void 0);
NbpSearchBoxComponent = __decorate$172([
    Component({
        selector: 'nbp-search-box',
        template: "<div class=\"col-sm-20 search-rettangolo\"><div class=\"input-container\"><input tabindex=\"0\" class=\"col-sm-22 input-text-search\" [(ngModel)]=\"searchText\" (keyup)=\"changeStr($event)\" [placeholder]=\"nbpPlaceholder\"><div class=\"span-close\"><img *ngIf=\"searchText\" style=\"cursor: pointer;\" (click)=\"clearResults();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZ cwAADsMAAA7DAcdvqGQAAAAHdElNRQfiBRkGDi40cdu/AAAByklEQVQ4y42UsWsTURzHP7+7B0Zs tw4ZbsxgIWOiLSik0JAMHrSQQcE1f0BHcbCbQ4cOujk4umSoNINiIBUsHCSFDgEzdBB0yJDNE1Ry 9xxyvdzl3tV8p/d+9/u8e7/v770nLMlz7KY0tCNFYKonch52743SOZKcXJTCI9kjI+3JQcUzQoND eY4iT69/HuzMUlBfrb/lKTerV9gv+wDWfL4CAru/T/sqhgaHKyAAtfXjaHsXJf31uhZ9JSVD8jec OGOnemZBeBSXf6mq+kvGu/HsoY69kxcgnqO+JzI6dnt2Kg+SSFBXx7QWkaCq7GZq2VaAchdYFgHr kZLG0m4SmAkBGko7ghljw4ggjpKiwa1WgHL/rJkQwLHMDdHlv4Vbvi6av1pMDcg4qNuvgjfKzTYA 9FRloUX5aSfjmiYWn/MQoGX6m/SssJuL5GDhe4HhgEp+K4GO3Q4+xTlX/qbAoCb9KOCLx67Brp7e krVovF85EYDhOx6zknS36kb3qdDmciVmdPvJvE9A2Z+5jP6PBPXUdd/6UdjWJzcincL2/UlkejI+ 3NMv5a6hkrE8qySWXDrifXWnZjd0UxdlA5gwlQ/Bx19n14/XXP8Ai1y4DKW+PFcAAAAldEVYdGRh dGU6Y3JlYXRlADIwMTgtMDUtMjVUMDY6MTQ6NDYtMDc6MDCXQfmnAAAAJXRFWHRkYXRlOm1vZGlm eQAyMDE4LTA1LTI1VDA2OjE0OjQ2LTA3OjAw5hxBGwAAAABJRU5ErkJggg==\"><div *ngIf=\"!searchText\" class=\"icomoon-Ricerca_zoom1\" style=\"margin-top: 2px;\"></div></div><div class=\"container-result\" *ngIf=\"showResults\" (clickOutside)=\"showResults=false\"><div class=\"title-results\"><p><span>RICERCHE SUGGERITE</span></p></div><div *ngFor=\"let item of groupsList\" class=\"group\"><div class=\"group-title\">{{item}}</div><table><ng-container *ngFor=\"let info of groups[item]\"><tr class=\"row-line\" (click)=\"selectSearch(info)\"><td><div class=\"info\"><div class=\"info-label-data\"><span>{{info[nbpLabel] | uppercase}}</span></div><div class=\"info-label-desc\"><span>{{info[nbpSubtitle]}}</span>&nbsp;/&nbsp; <span>{{info[nbpDescription] }}</span></div></div><div class=\"label-acc\"><div><span>{{info[nbpType]|uppercase}}</span></div></div></td></tr></ng-container></table></div><div *ngIf=\"nbpOtherResultsNumber !== -1\" class=\"bottom-result text-center\" (click)=\"showMoreClick()\"><p><span style=\"cursor: pointer\">VEDI ALTRI {{nbpOtherResultsNumber == 0 ? '' : nbpOtherResultsNumber}} RISULTATI DI RICERCA</span></p></div></div></div></div><nbp-button class=\"col-sm-4\" [nbpLabel]=\"nbpSearchButtonText\" [nbpStyle]=\"primary\" (nbpClick)=\"sendSearch()\"></nbp-button>",
        styles: [".search-rettangolo{border-width:0;position:relative;height:3.125em;background:inherit;background-color:#fff;box-sizing:border-box;border-width:.0625em;border-style:solid;border-color:#258900;border-radius:2.5em;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;z-index:1}.input-text-search{margin-left:12px;margin-top:1px;width:90%;height:2.88em;font-family:Arial;font-weight:400;font-style:normal;font-size:1em;text-decoration:none;color:#323232;text-align:left;border:0;outline-style:none}.input-text-search::-ms-clear{display:none;width:0;height:0}.span-close{float:right;vertical-align:middle;line-height:1.77em;padding-right:.75em;font-size:1.63em;color:#258900}.search-icon{font-size:1.63em;color:#258900}.title-cont{border-width:0;position:absolute;left:1.25em;padding-top:.625em;word-wrap:break-word}.btn-margin{margin-left:6.25em}.container-result{margin-top:3.125em;border-width:0;position:absolute;left:1.6em;width:93%;padding-top:.625em;min-height:6.25em;background:inherit;background-color:#fff;box-sizing:border-box;border-width:.06em;border-style:solid;border-color:#258900;border-top:0;border-radius:0;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;font-size:1em;color:#323232;z-index:10000}.title-results{font-size:.75em;color:#323232;height:.875em}.bottom-result{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:.688em;color:#258900;text-align:center;bottom:.625em;margin-bottom:1.4375em}.bottom-result p{margin-top:.562em}.group{padding:0 1.25em .875em 1.25em}.group .group-title{padding:.313em .938em .562em .938em;vertical-align:middle;text-align:left;line-height:.938em;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:.75em;color:#323232}.group .row-line{height:2.625em;background-color:#f8f8f8;cursor:pointer}.group table{width:100%}.group tr{border-top:.063em solid #ccc}.group tr:last-child{border-bottom:.063em solid #ccc}.group .info{float:left;width:80%;padding-left:.938em;padding-top:.313em;text-align:left}.group .info-label-data{font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:.75em;color:#323232}.group .info-label-desc{font-family:'Arial Bold',Arial;font-weight:400;font-style:normal;font-size:.688em;color:#323232}.group .label-acc{float:right;width:20%;text-align:right;line-height:2.625em;vertical-align:middle;padding-right:.625em;font-family:'Arial Bold',Arial;font-weight:700;font-style:normal;font-size:.75em;color:#323232} /*# sourceMappingURL=nbp-search-box.component.css.map */ "]
    }),
    __metadata$151("design:paramtypes", [IterableDiffers])
], NbpSearchBoxComponent);

/**
 * Classe Model per l'inizializzazione del model del componente nbp-calendar-generic
 */
class NbpCalendarDateModel {
    constructor(d) {
        if (d != null) {
            if (d instanceof Date) {
                this.year = d.getFullYear();
                this.month = d.getMonth() + 1;
                this.day = d.getDate();
            }
            else if (this.instanceOfNgbDateStruct(d)) {
                this.year = d.year;
                this.month = d.month;
                this.day = d.day;
            }
        }
    }
    /**
     * per verificare che implementi l'interface NgbDateStruct non posso usare instanceof,
     * quindi controllo esistano i campi al nuo interno e non siano nulli
     * @param d
     */
    instanceOfNgbDateStruct(d) {
        return !this.isNill(d.day)
            && !this.isNill(d.month)
            && !this.isNill(d.year);
    }
    isNill(value) {
        return value === null || value === undefined;
    }
}

var __decorate$1 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
// MULTISELECT
//
// COMPONENTI POS
// ----- validatori
// import { DateValidator } from './nbp-validators/date-validator.directive';
// export { DateValidator } from './nbp-validators/date-validator.directive';
const importList = [
    //BrowserAnimationsModule, dipendenza importata separatamente per problema relativo
    CommonModule,
    FlexLayoutModule,
    FormsModule,
    NouisliderModule,
    NgbDatepickerModule.forRoot(),
    RplDatepickerModule.forRoot(),
    RplCalendarModule.forRoot(),
    FileUploadModule,
    ClickOutsideModule,
];
const declarationList = [
    NbpButtonComponent,
    NbpButtonGenerationComponent,
    NbpLabelComponent,
    NbpInputContainerComponent,
    NbpInputTextComponent,
    NbpCheckboxComponent,
    NbpFooterComponent,
    NbpHeaderComponent,
    NbpHeaderLightComponent,
    NbpNavigationHeaderComponent,
    NbpComboComponent,
    NbpComboMultiComponent,
    NbpDatepickerHtml5Component,
    NbpTableComponent,
    NbpModalComponent,
    NbpSwitchComponent,
    NbpCustomerInfoComponent,
    NbpAccordionComponent,
    NbpAccordionButtonComponent,
    NbpAccordionShowmoreComponent,
    NbpAccordionShowmoreCircleComponent,
    NbpRadioComponent,
    NbpProgressComponent,
    NbpProgressStickyContentComponent,
    NbpFormContainerComponent,
    NbpPagingComponent,
    NbpPaginationComponent,
    NbpLoadingComponent,
    NbpBreadcrumbComponent,
    NbpTooltipComponent,
    NbpBurgerMenuComponent,
    NbpIconComponent,
    NbpLoggedUserComponent,
    NbpPanelComponent,
    NbpCustomerNameComponent,
    NbpTableColumnComponent,
    NbpFeedbackComponent,
    NbpDataContainerComponent,
    NbpDatepickerComponent,
    NbpDatepickerGenericComponent,
    NbpCalendarGenericComponent,
    NbpSequenzialeGenericComponent,
    NbpSequenzialeSottostepGenericComponent,
    NbpDividingLineComponent,
    NbpSelectionPanelComponent,
    NbpTitledPanelComponent,
    NbpShadowedPanelComponent,
    NbpSpinnerComponent,
    NbpTabBarComponent,
    NbpDebugInfoComponent,
    NbpErrorAdviceComponent,
    NbpSignInfoHeaderComponent,
    NbpSignTypeSelectComponent,
    NbpRadioSelectionComponent,
    NbpSignSpilayerComponent,
    NbpPaperlessSignComponent,
    NbpSignComponent,
    NbpStepNavigabiliComponent,
    NbpComboFilterComponent,
    NbpToggleTabsetComponent,
    NbpToggleTabComponent,
    NbpSwitchBinaryComponent,
    NbpAccordionLightComponent,
    NbpAlertBoxComponent,
    NbpPaperSignComponent,
    NbpSliceAndEllipsisPipe,
    NbpEllipsisDirective,
    ContoPipe,
    NbpImportoPipe,
    NbpFormAutoScrollDirective,
    NbpHeaderGenericComponent,
    NbpFloaterComponent,
    NbpFilterComponent,
    NbpSpinnerGenericComponent,
    NbpSliderComponent,
    NbpSliderKeyPointsComponent,
    NbpPaginationLettersComponent,
    NbpStickyTabGenericComponent,
    NbpHeaderGenericNoTranslateComponent,
    SmoothScrollToDirective,
    NbpBurgerMenuGenericNoTranslateComponent,
    NbpBurgerMenuGenericComponent,
    NbpMenuOperationComponent,
    NbpCustomerInfoGenericComponent,
    NbpLoggedUserGenericComponent,
    NbpSwitchGenericComponent,
    NbpUploadFileComponent,
    NbpSliderRangeComponent,
    NbpSliderRangeBarComponent,
    NbpSliderRangePickerComponent,
    NbpSliderRangePopoverComponent,
    NbpSliderRangeBarDirective,
    NbpSliderRangePickerDirective,
    NbpSliderStoricoComponent,
    NbpSliderStoricoBarComponent,
    NbpSliderStoricoPickerComponent,
    NbpSliderStoricoPopoverComponent,
    NbpSliderStoricoBarDirective,
    NbpSliderStoricoPickerDirective,
    NbpIndexAlphabeticComponent,
    NbpEtichettaCheckComponent,
    NbpSelMercatoComponent,
    NbpEtichettaFiltroComponent,
    NbpSearchBoxComponent,
    // ----- validatori
    EqualValidator,
    ArrayRequiredValidator,
    ContainsValidator,
    CustomValidator,
    NbpCheckboxRequiredValidator,
    MaxSelectionValidator,
    NbpModalDialogComponent,
    NbpWrapperComponent,
    NbpBoxWithEllipsisComponent,
    NbpCurrencyPipe,
    NbpFormatterDirective,
    NbpBottomPageButtonComponent,
    NbpOnBoardingComponent,
    NbpAutoFocusInModalDirective,
];
const providersList = [
    CurrencyPipe,
    NbpImportoPipe,
    DatePipe,
    DecimalPipe,
    LowerCasePipe,
    PercentPipe,
    UpperCasePipe,
    ContoPipe,
    NbpCurrencyPipe,
    NbpLoadingService,
    GlobalLoadingIdentificationService,
    NbpLoadingInterceptor,
    NbpSpilayerUtilityService,
    SpilayerMockUtilityService,
    NbpSignService,
    NbpSpilayerService,
    NbpPendingLoadingStatusService,
    NbpCustomValidationService,
    DownloadService,
    NbpModalDialogService,
    NbpViewSettingsService
];
const exportList = [
    NbpButtonComponent,
    NbpButtonGenerationComponent,
    NbpLabelComponent,
    NbpInputTextComponent,
    NbpInputContainerComponent,
    NbpCheckboxComponent,
    NbpFooterComponent,
    NbpHeaderComponent,
    NbpHeaderLightComponent,
    NbpNavigationHeaderComponent,
    NbpComboComponent,
    NbpComboMultiComponent,
    NbpDatepickerHtml5Component,
    NbpTableComponent,
    NbpModalComponent,
    NbpSwitchComponent,
    NbpCustomerInfoComponent,
    NbpAccordionComponent,
    NbpAccordionButtonComponent,
    NbpAccordionShowmoreComponent,
    NbpAccordionShowmoreCircleComponent,
    NbpRadioComponent,
    NbpProgressComponent,
    NbpProgressStickyContentComponent,
    NbpFormContainerComponent,
    NbpPagingComponent,
    NbpPaginationComponent,
    NbpLoadingComponent,
    NbpBreadcrumbComponent,
    NbpTooltipComponent,
    NbpBurgerMenuComponent,
    NbpIconComponent,
    NbpLoggedUserComponent,
    NbpPanelComponent,
    NbpCustomerNameComponent,
    NbpTableColumnComponent,
    NbpFeedbackComponent,
    NbpDataContainerComponent,
    NbpDatepickerComponent,
    NbpDatepickerGenericComponent,
    NbpCalendarGenericComponent,
    NbpSequenzialeGenericComponent,
    NbpSequenzialeSottostepGenericComponent,
    NbpDividingLineComponent,
    NbpSelectionPanelComponent,
    NbpTitledPanelComponent,
    NbpShadowedPanelComponent,
    NbpSpinnerComponent,
    NbpTabBarComponent,
    NbpDebugInfoComponent,
    NbpErrorAdviceComponent,
    NbpSignInfoHeaderComponent,
    NbpSignTypeSelectComponent,
    NbpRadioSelectionComponent,
    NbpSignSpilayerComponent,
    NbpPaperlessSignComponent,
    NbpSignComponent,
    NbpStepNavigabiliComponent,
    NbpComboFilterComponent,
    NbpToggleTabsetComponent,
    NbpToggleTabComponent,
    NbpSwitchBinaryComponent,
    NbpAccordionLightComponent,
    NbpAlertBoxComponent,
    NbpPaperSignComponent,
    NbpSliceAndEllipsisPipe,
    NbpEllipsisDirective,
    ContoPipe,
    NbpImportoPipe,
    NbpFormAutoScrollDirective,
    NbpHeaderGenericComponent,
    NbpFloaterComponent,
    NbpFilterComponent,
    NbpSpinnerGenericComponent,
    NbpSliderComponent,
    NbpSliderKeyPointsComponent,
    NbpPaginationLettersComponent,
    NbpStickyTabGenericComponent,
    NbpHeaderGenericNoTranslateComponent,
    SmoothScrollToDirective,
    NbpBurgerMenuGenericNoTranslateComponent,
    NbpBurgerMenuGenericComponent,
    NbpMenuOperationComponent,
    NbpCustomerInfoGenericComponent,
    NbpLoggedUserGenericComponent,
    NbpSwitchGenericComponent,
    NbpUploadFileComponent,
    NbpSliderRangeComponent,
    NbpSliderStoricoComponent,
    NbpIndexAlphabeticComponent,
    NbpEtichettaCheckComponent,
    NbpSelMercatoComponent,
    NbpEtichettaFiltroComponent,
    NbpSearchBoxComponent,
    // ----- validatori
    EqualValidator,
    // DateValidator,
    ArrayRequiredValidator,
    ContainsValidator,
    CustomValidator,
    NbpCheckboxRequiredValidator,
    MaxSelectionValidator,
    NbpModalDialogComponent,
    NbpWrapperComponent,
    NbpBoxWithEllipsisComponent,
    NbpCurrencyPipe,
    NbpFormatterDirective,
    NbpBottomPageButtonComponent,
    NbpOnBoardingComponent,
    NbpAutoFocusInModalDirective,
];
/**
 * Modulo da importare direttamente in caso di problemi relativi a doppi import di BrowserAnimationModule
 * (il modulo espone gli stessi componenti di NbpModule ma non importa BrowserAnimationModule).
 * La problematica è stata riscontrata solo in caso di lazy loading e import del modulo a livello dei children.
 * La libreria ha comunque l'esigenza, per alcuni componenti, che BrowserAnimationModule sia importato a livello
 * del root dell'applicazione.
 */
let NbpModule_noBrowserAnimation = class NbpModule_noBrowserAnimation {
};
NbpModule_noBrowserAnimation = __decorate$1([
    NgModule({
        imports: importList,
        declarations: declarationList,
        providers: providersList,
        exports: exportList,
    })
], NbpModule_noBrowserAnimation);
let NbpModule = class NbpModule {
};
NbpModule = __decorate$1([
    NgModule({
        imports: [BrowserAnimationsModule, NbpModule_noBrowserAnimation],
        exports: [NbpModule_noBrowserAnimation],
    })
], NbpModule);

var __decorate$175 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$153 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjWizardHelper = class CjWizardHelper {
    constructor() {
    }
    /**
     * funzione di utility return true se l'array contiene duplicati
     * @param {Array<any>} items set in oggetti in input
     * @return {boolean}         input contains duplicate
     */
    containsDuplicate(items) {
        return items.some((item, index) => {
            return items.indexOf(item) !== index;
        });
    }
    stepContainsPage(step, page) {
        return step.pages.indexOf(page) !== -1;
    }
    /**
    * controlla che (cjCurrentState.currentStepId, cjCurrentState.currentPageId) esista nella cjConfiguration
    */
    currentStatusValid(statusIndexes) {
        return (statusIndexes.stepIndex !== -1 && statusIndexes.pageIndex !== -1);
    }
    /**
     * controlla univocita' coppia (StepId, pageId) all'interno della configurazione dello wizard
     * @return boolean configuration valid
     */
    configurationValid(wizardConfiguration) {
        let stepIds = wizardConfiguration.steps.map((step) => { return step.id; });
        if (this.containsDuplicate(stepIds)) {
            return false;
        }
        let stepsDuplicateStatus = wizardConfiguration.steps.map((step) => {
            return this.containsDuplicate(step.pages.map((page) => {
                return page.id;
            }));
        });
        let result = (stepsDuplicateStatus.reduce((acc, curr) => {
            return acc || curr;
        }, false));
        return !result;
    }
    /**
     * Recupera l'indice corrente di Page|Step nell'array a partire dall'id dell'elemento
     * @param  {Array<ICjWizardPage|ICjWizardStep>} elems insieme di step o page
     * @param  string                             id    identificativo di Page|Step
     * @return number                                   array index
     */
    getCurrentStateIndexById(elems, id) {
        let currentIndex = -1;
        for (let elemIndex = 0; elemIndex < elems.length; elemIndex++) {
            if (elems[elemIndex].id === id) {
                currentIndex = elemIndex;
                break;
            }
        }
        return currentIndex;
    }
    /**
     * Recupera l'elemento corrente di Page|Step nell'array a partire dall'id dell'elemento
     * @param  {Array<ICjWizardPage|ICjWizardStep>} elems insieme di step o page
     * @param  string                             id    identificativo di Page|Step
     * @return ICjWizardPage|ICjWizardStep        elemento
     */
    getCurrentStateById(elems, id) {
        for (let elemIndex = 0; elemIndex < elems.length; elemIndex++) {
            if (elems[elemIndex].id === id) {
                return elems[elemIndex];
            }
        }
        return null;
    }
};
CjWizardHelper = __decorate$175([
    Injectable(),
    __metadata$153("design:paramtypes", [])
], CjWizardHelper);

const stickyElementToggleTrigger = trigger('stickyElementToggleTrigger', [
    state('disappear', style({
        opacity: 0,
        visibility: 'hidden'
    })),
    state('appear', style({
        opacity: 1,
        visibility: 'visible'
    })),
    transition('* => appear', animate('200ms ease-in')),
    transition('* => disappear', animate('200ms ease-out')),
]);
const growShrinkElementHorizontallyTrigger = trigger('growShrinkElementHorizontallyTrigger', [
    state('grow', style({
        width: '*'
    })),
    state('shrink', style({
        width: '*'
    })),
    transition('shrink => grow', animate('200ms 100ms ease-in')),
    transition('grow => shrink', animate('200ms 100ms ease-out')),
]);

var __decorate$174 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$152 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$23 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/** intero autogenerato usato per id unici per cjWizard component */
let nextId$30 = 0;
let CjWizardComponent = class CjWizardComponent {
    constructor(helper, nbploading, configurator, embeddingService, cjBody) {
        this.helper = helper;
        this.nbploading = nbploading;
        this.configurator = configurator;
        this.embeddingService = embeddingService;
        this.cjBody = cjBody;
        /**
         * Identificativo univoco per il cjWizard.
         * Se nessun id e' fornito e' auto-generato.
         */
        this.id = `cj-wizard-${++nextId$30}`;
        // --------------------------------------------- //
        // ------     ICjWizardLifecycleEvent     ------ //
        // --------------------------------------------- //
        /**
         * Evento che notifica quando si inizia un nuovo wizard da zero
         */
        this.cjOnWizardStart = new EventEmitter();
        /**
         * Evento che notifica quando si ripristina un wizard con stato
         */
        this.cjOnWizardRestore = new EventEmitter();
        /**
        * Evento che notifica l’abbandono del wizard
        */
        this.cjOnWizardCancel = new EventEmitter();
        /**
        * Evento che notifica il completamento dell’intero wizard
        * Es pressione del tasto continua (tasto finale del wiard)
        */
        this.cjOnWizardComplete = new EventEmitter();
        // ----------------------------------------------//
        // ------    ICjWizardNavigationEvent     ------ //
        // --------------------------------------------- //
        /**
         * Evento che notifica l’aggiornamento della struttura dati che il wizard sta componendo
         */
        this.cjOnDataChange = new EventEmitter();
        /**
         * Evento che notifica l’aggiornamento dello step corrente
         */
        this.cjOnWizardPageChange = new EventEmitter(); // TODO refine type
        /**
        * Evento che notifica l’aggiornamento del modello di avanzamento del wizard
        */
        this.cjOnWizardStateChange = new EventEmitter();
        /**
         * Evento che notifica il toggle della visualizzazione della sidebar del wizard
         * parametro eventEmitter:
         *   TRUE -> wizardSideBar visualizzata,
         *   FALSE -> wizardSideBar non visualizzata
         *
         */
        this.cjOnToggleSideBarView = new EventEmitter();
        this._currentStateIndexes = { stepIndex: -1, pageIndex: -1 };
        this._showSideBar = false;
        this._isWizardInsideBody = false;
        this._isProgressInsideBody = false;
        this._buttonsStyles = NbpStyle;
        this._showLoading = false;
        this.wizardReady = false;
        this._hideBorder = false;
        this.cjConfiguration = {
            id: this.id,
            name: this.name,
            steps: new Array()
        };
    }
    /**
     * (Opzionale) Proprieta' che consente di non visualizzare la seziona relativa ai sotto-step/pagine degli step.
     * Valore di default false.
    */
    get cjShowPaging() { return this._cjShowPaging; }
    ;
    set cjShowPaging(value) { this._cjShowPaging = coerceBooleanProperty(value); }
    get _cjShowSideBar() { return this._showSideBar; }
    ;
    set _cjShowSideBar(value) { this._showSideBar = coerceBooleanProperty(value); this.cjOnToggleSideBarView.emit(this._showSideBar); }
    ;
    /**
     * funzione privata che calcola la percentuale di riempimento dello step nel componente
     * nbpProgress
     * @param number currentStepIndex indice dello step corrente
     * @param ICjWizardStep    currentStep      struttura dati dello step corrente
     */
    _getFillPercentByIndex(currentStepIndex, currentStep) {
        let fillPercent;
        if (currentStepIndex < this._currentStateIndexes.stepIndex) {
            fillPercent = 100;
        }
        else if (currentStepIndex > this._currentStateIndexes.stepIndex) {
            fillPercent = 0;
        }
        else {
            let increment = 100 / currentStep.pages.length;
            fillPercent = (this.helper.getCurrentStateIndexById(currentStep.pages, this._pages[this._currentStateIndexes.pageIndex].id) + 1) * increment;
        }
        return fillPercent;
    }
    /**
     * Popola la struttura dati necessaria al componente nbpPaging
     * nbpPaging è visualizzato come secondo elemento del cjWizard sotto al componente
     * nbpProgress
     */
    _fillPagingStructure() {
        this._pagingStructure = {
            currentParentLabel: this.cjConfiguration.steps[this._currentStateIndexes.stepIndex].label,
            pages: []
        };
        for (let pageIndex = 0; pageIndex < this._pages.length; pageIndex++) {
            let status = (pageIndex === this._currentStateIndexes.pageIndex
                ? 'active'
                : (pageIndex < this._currentStateIndexes.pageIndex ? 'done' : 'todo'));
            let pagingElem = {
                label: this._pages[pageIndex].label,
                status: status
            };
            this._pagingStructure.pages.push(pagingElem);
        }
    }
    /**
     * Aggiorna la struttura dati che contiene lo stato corrente del wizard
     * - step corrente
     * - pagina corrente
     */
    _updateCurrentState() {
        this.cjCurrentState.currentStepId = this.cjConfiguration.steps[this._currentStateIndexes.stepIndex].id;
        this.cjCurrentState.currentPageId = this._pages[this._currentStateIndexes.pageIndex].id;
        this._emitCjOnWizardStateChange(this.cjCurrentState);
        this._updateCurrentPageConfig();
    }
    /**
     * Aggiorna la struttura dati che contiene lo stato precedente del wizard
     * - step corrente
     * - pagina corrente
     */
    _updatePreviousState() {
        this.cjCurrentState.previousStepId = this.cjConfiguration.steps[this._currentStateIndexes.stepIndex].id;
        this.cjCurrentState.previousPageId = this._pages[this._currentStateIndexes.pageIndex].id;
        console.log('_updatePreviousState Debug Info');
        console.log('state index - step: ' + this._currentStateIndexes.stepIndex);
        console.log('stepId: ' + this.cjCurrentState.previousStepId);
        console.log('state index - page: ' + this._currentStateIndexes.pageIndex);
        console.log('pageId: ' + this.cjCurrentState.previousPageId);
    }
    _updateCurrentPageConfig() {
        this._currentPageConfig = this._pages[this._currentStateIndexes.pageIndex].configuration;
        // console.log(JSON.stringify(this._currentPageConfig));
    }
    /**
     * metodo privato utilizzato per:
     * - aggiornare lo stato del wizard (state & data)
     * - emettere gli eventi di lifecycle
     * @param {ICjWizardContext<T>} context
     */
    _resotreWizardStateAndData(context) {
        console.log('Wizard ' + context.id + ' restore state and data');
        console.dir(context);
        this.cjCurrentState = context.state;
        this._emitCjOnWizardStateChange(this.cjCurrentState);
        this._emitCjOnWizardRestore(context.data);
    }
    /**
     * Aggiorna il contesto utilizzando la funzione messa a disposizione da
     * ICjWizardContextSource
     */
    _updateWizardContext() {
        if (this.cjWizardContextSource && this._currentPageConfig.cjContextUpdate) {
            let updatedContext = {
                id: this.cjConfiguration.id,
                state: this.cjCurrentState,
                data: this.cjWizardDataContainer.getWizardData()
            };
            this.cjWizardContextSource.updateWizardContext(updatedContext).subscribe((context) => {
                this._handleLoadingSpinner(false);
            }, (error) => {
                console.log('Update wizard context error!!');
                this._handleLoadingSpinner(false);
            });
        }
    }
    /**
     * Eseguita alla pressione del pulsante AVANTI del wizard
     * @param {Event} event AVANTI button click
     */
    _onAction(event) {
        if (this._currentPageConfig.cjActionButtonType === 'next') {
            this._updateProgressStructureOnDirection('next');
        }
        else if (this._currentPageConfig.cjActionButtonType === 'submit') {
            this._handleLoadingSpinner(true);
            this.cjOnWizardComplete.emit();
        }
    }
    /**
     * Disabilita il pulsante AVANTI quando non ci sono più pagine da visualizzare
     * successive a quella corrente
     */
    _isActionDisabled() {
        return this._currentStateIndexes.pageIndex === this._pages.length - 1
            || (this._currentPageConfig && this._currentPageConfig.cjDisableActionButton);
    }
    /**
     * Eseguita alla pressione del pulsante INDIETRO del wizard
     * Aggiorna la struttura degli indici del currentState, il currentState, la struttura dati per la
     * progress bar la struttura dati per il paging
     * @param {Event} event INDIETRO/PREV button click
     */
    _onPrev(event) {
        this._updateProgressStructureOnDirection('prev');
    }
    /**
     * Disabilita il pulsante INDIETRO quando non ci sono pagine da visualizzare
     * precedenti a quella corrente
     */
    _isPrevDisabled() {
        return this._currentStateIndexes.pageIndex === 0
            || (this._currentPageConfig && this._currentPageConfig.cjDisablePrevButton);
    }
    /**
     * Popola la struttura dati necessaria al componente nbpProgress
     * nbpProgress è visualizzato come primo elemento del cjWizard
     */
    _fillProgressStructure() {
        if (!this._progressStructure) {
            this._createProgressStructure();
        }
        for (let progressIndex = 0; progressIndex < this._progressStructure.length; progressIndex++) {
            this._progressStructure[progressIndex].active = (this._currentStateIndexes.stepIndex === progressIndex);
            this._progressStructure[progressIndex].fillPercent =
                this._getFillPercentByIndex(progressIndex, this.cjConfiguration.steps[progressIndex]);
        }
        // if (this.cjBody && this.cjBody._isProgressInsideStickyHeader) {
        //   this.cjBody.onProgressStepChange.next(this._progressStructure);
        // }
        this.configurator.sendProgressConfigurationEvent(this._progressStructure);
    }
    /**
     * Popola la struttura dati necessaria al componente nbpProgress
     * nbpProgress è visualizzato come primo elemento del cjWizard
     */
    _createProgressStructure() {
        this._progressStructure = this.cjConfiguration.steps.map((step, index) => {
            let isActive = this._currentStateIndexes.stepIndex === index;
            let fillPercent = this._getFillPercentByIndex(index, step);
            return { label: step.label, fillPercent: fillPercent, active: isActive };
        });
    }
    /**
     * Aggiorna la struttura dati necessaria al componente nbpProgress quando
     * si naviga il wizard usando il metodo navigateToPage
     * @param {string} stepId id dello step
     * @param {string} pageId id della page
     */
    _updateProgressStructure(stepId, pageId) {
        this._handleLoadingSpinner(true);
        // check se stepId e pageId sono validi
        let step = this.helper.getCurrentStateById(this.cjConfiguration.steps, stepId);
        let page = this.helper.getCurrentStateById(this._pages, pageId);
        if (this.helper.stepContainsPage(step, page)) {
            console.log('Wizard navigate to page');
            if (this._currentStateIndexes.pageIndex !== this._pages.length) {
                this._updatePreviousState();
                this._emitEventsForPageLeave();
                this._currentStateIndexes.stepIndex = this.helper.getCurrentStateIndexById(this.cjConfiguration.steps, stepId);
                this._currentStateIndexes.pageIndex = this.helper.getCurrentStateIndexById(this._pages, pageId);
                this._updateWizardStructures();
                this._handleLoadingSpinner(false);
            }
        }
        else {
            this._handleLoadingSpinner(false);
            console.log('Lo step con id ' + stepId + ' non contiene una page con id ' + pageId);
        }
    }
    _goToDirection(direction) {
        console.log('Wizard navigate to ' + direction + ' page');
        this._updatePreviousState();
        this._emitEventsForPageLeave();
        this._currentStateIndexes.pageIndex = (direction === 'next')
            ? ++this._currentStateIndexes.pageIndex
            : --this._currentStateIndexes.pageIndex;
        if (!this.helper.stepContainsPage(this.cjConfiguration.steps[this._currentStateIndexes.stepIndex], this._pages[this._currentStateIndexes.pageIndex])) {
            this._currentStateIndexes.stepIndex = (direction === 'next')
                ? ++this._currentStateIndexes.stepIndex
                : --this._currentStateIndexes.stepIndex;
        }
        this._updateWizardStructures();
        this._handleLoadingSpinner(false);
    }
    /**
     * Aggiorna la struttura dati necessaria al componente nbpProgress quando
     * si naviga il wizard usando i pulsanti ACTION (next o submit) e INDIETRO (prev)
     * @param {'next' | 'prev'} direction indica quale pulsante è stato premuto
     */
    _updateProgressStructureOnDirection(direction) {
        this._handleLoadingSpinner(true);
        switch (direction) {
            case 'next':
                if (this._currentStateIndexes.pageIndex !== this._pages.length) {
                    this._goToDirection(direction);
                }
                break;
            case 'prev':
                if (this._currentStateIndexes.pageIndex !== 0) {
                    this._goToDirection(direction);
                }
                break;
            default:
                this._handleLoadingSpinner(false);
                break;
        }
    }
    ngOnInit() {
        if (!this.cjExternalLoading) {
            this.cjExternalLoading = this.id;
        }
        if (this.cjBody) {
            this.cjBody._isProgressInsideStickyHeader = true;
        }
        this.stateChangeSubscription = this.cjOnWizardStateChange
            .subscribe((state$$1) => {
            this.embeddingService.notifyOutgoingEvent({
                type: NbpEmbeddingMessageType.CJ_STEP,
                body: state$$1.currentPageId
            });
        });
    }
    /**
     * metodo pubblico con cui gli step si registrano sul wizard
     * @param ICjWizardStep step step dello wizard
     */
    addStep(step) {
        this.cjConfiguration.steps.push(step);
    }
    ngOnDestroy() {
        console.log('wizard OnDestroy');
        if (this.cjBody) {
            this.cjBody.setNavigationHeaderSlim(false);
            this.cjBody._isProgressInsideStickyHeader = false;
            // Serve Ancora? : sovrascritta dal AfterViewChecked?
            setTimeout(() => {
                this.cjBody._setBodyContainerHeight();
            });
            // this.cjBody.onburgerMenuToggle.unsubscribe();
        }
        if (this._wizardContextStreamSubscribe) {
            this._wizardContextStreamSubscribe.unsubscribe();
        }
        if (this.stateChangeSubscription) {
            this.stateChangeSubscription.unsubscribe();
        }
    }
    ngAfterViewInit() {
        if (this.cjBody) {
            this.cjBody._setBodyContainerHeight();
        }
    }
    ngAfterContentInit() {
        if (this.cjBody) {
            this.cjBody.setNavigationHeaderSlim(true);
            this._isWizardInsideBody = true;
            this._isProgressInsideBody = this.cjBody._isProgressInsideStickyHeader;
            this.cjBody.onburgerMenuToggle.subscribe((value) => { this._burgerMenuOpened = value; });
            this.cjBody._setBodyContainerHeight();
            /*sottoscrizione per il passaggio della configurazione per nbpProgress*/
            /*if (this.cjBody._isProgressInsideStickyHeader) {
              this.cjBody.onProgressStepChange.subscribe((progressStructure) => this.cjBody._progressStructure = progressStructure);
            }*/
        }
        if (!this.cjHeaderIcon) {
            this.cjHeaderIcon = {
                icon: 'icomoon-Acquisto_carrello4',
                hide: true
            };
        }
        else if (this.cjHeaderIcon.hide === null || this.cjHeaderIcon.hide === undefined) {
            this.cjHeaderIcon.hide = true;
        }
        this._handleLoadingSpinner(true);
        this.cjConfiguration.id = this.id;
        // creates a flatten array containing all pages of all steps
        this._pages = this.cjConfiguration.steps.reduce((prev, curr) => { return (prev).concat(curr.pages); }, []);
        if (this.cjWizardContextSource) {
            this._initWizardWithContextSource();
        }
        else {
            this._initWizardWithoutContextSource();
        }
    }
    _handleLoadingSpinner(show) {
        if (show !== this._showLoading) {
            this._showLoading = show;
            this.nbploading.notifyLoadingSpinnerRequest(show, this.cjExternalLoading);
            console.log('Show loading (' + this.cjExternalLoading + ')? ' + show + ' timestamp: ' + new Date().getTime());
        }
    }
    _initWizardWithContextSource() {
        // Recupero contesto dal wizardContextSource
        this._wizardContextStream = this.cjWizardContextSource.getWizardContext();
        this._wizardContextStream.subscribe((context) => {
            console.log('Ricevo context del Wizard ');
            console.dir(context);
            if (context && context.data) {
                this._resotreWizardStateAndData(context);
            }
            else {
                console.log('Ricevo context null del Wizard ');
                this._setDefaultState();
            }
            this.initializeWizardViewModel();
            this._handleLoadingSpinner(false);
        }, (error) => {
            // TODO gestire anche eventuali errori
            console.log(JSON.stringify(error));
            this._handleLoadingSpinner(false);
        });
    }
    _initWizardWithoutContextSource() {
        console.log('Wizard without contextSource ');
        if (!this.cjCurrentState) {
            console.log('Wizard without cjCurrentState.');
            this._setDefaultState();
        }
        else {
            console.log('Wizard with cjCurrentState.');
            console.dir(this.cjCurrentState);
            this._emitCjOnWizardRestore(this.cjWizardDataContainer.getWizardData());
            // this._emitCjOnPageEnter();
        }
        this.initializeWizardViewModel();
        this._handleLoadingSpinner(false);
    }
    _setDefaultState() {
        console.log('Wizard si posiziona sul primo step e la prima pagina.');
        this.cjCurrentState = {
            id: this.cjConfiguration.id,
            currentStepId: this.cjConfiguration.steps[0].id,
            currentPageId: this._pages[0].id,
            previousStepId: null,
            previousPageId: null
        };
        this._currentStateIndexes = {
            stepIndex: 0,
            pageIndex: 0
        };
        this._emitCjOnWizardStart(this.cjWizardDataContainer.getWizardData());
        this._emitCjOnWizardStateChange(this.cjCurrentState);
    }
    _emitCjOnWizardStart(cjData) {
        this.cjOnWizardStart.emit(cjData);
        console.log('Emit event: cjOnWizardStart');
        console.dir(cjData);
    }
    _emitCjOnWizardRestore(cjData) {
        this.cjWizardDataContainer.setWizardData(cjData);
        this.cjOnWizardRestore.emit(cjData);
        console.log('Emit event: cjOnWizardRestore');
        console.dir(cjData);
    }
    _emitCjOnWizardStateChange(state$$1) {
        this.cjOnWizardStateChange.emit(state$$1);
        console.log('Emit event: cjOnWizardStateChange');
        console.dir(state$$1);
    }
    _emitCjOnWizardPageChange() {
        let page = this._pages[this._currentStateIndexes.pageIndex];
        this.cjOnWizardPageChange.emit(page);
        console.log('Emit event: _emitCjOnWizardPageChange');
        console.dir(page);
    }
    _emitCjOnPageEnter() {
        this._emitPageEvent('ENTER');
    }
    _emitEventsForPageLeave() {
        this._emitPageEvent('LEAVE');
    }
    _emitPageEvent(type) {
        if (!type || (type !== 'ENTER' && type !== 'LEAVE')) {
            return;
        }
        const event = type === 'ENTER' ? 'cjOnPageEnter' : 'cjOnPageLeave';
        const currentPageIndex = this._currentStateIndexes.pageIndex;
        if (type === 'ENTER') {
            setTimeout(() => {
                console.log('Emit event: ' + event);
                console.dir(this._pages[currentPageIndex]);
                this._pages[currentPageIndex].events.cjOnPageEnter.emit(this._pages[currentPageIndex]);
            });
        }
        else {
            this._emitCjOnWizardPageChange();
            setTimeout(() => {
                console.log('Emit event: ' + event);
                console.dir(this._pages[currentPageIndex]);
                this._pages[currentPageIndex].events.cjOnPageLeave.emit(this._pages[currentPageIndex]);
                scrollToTopPage();
            });
        }
    }
    obtainStateIndexesFromConfiguration() {
        this._currentStateIndexes.stepIndex = this.helper.getCurrentStateIndexById(this.cjConfiguration.steps, this.cjCurrentState.currentStepId);
        this._currentStateIndexes.pageIndex = this.helper.getCurrentStateIndexById(this._pages, this.cjCurrentState.currentPageId);
    }
    /**
     * Aggiorna le strutture dati utilizzate nella View per il layout del componente wizard
     */
    initializeWizardViewModel() {
        this.wizardReady = false;
        this.obtainStateIndexesFromConfiguration();
        if (this.helper.currentStatusValid(this._currentStateIndexes) && this.helper.configurationValid(this.cjConfiguration)) {
            this._fillProgressStructure();
            this._fillPagingStructure();
            this._updateCurrentPageConfig();
            this._emitCjOnPageEnter();
        }
        else {
            console.warn('Error configuration Valid: currentStatus invalido o (stepId, pageId) non univoche per wizard');
        }
        this.wizardReady = true;
    }
    _updateWizardStructures() {
        this.wizardReady = false;
        this._updateCurrentState();
        this._updateWizardContext();
        this._fillProgressStructure();
        this._fillPagingStructure();
        this._emitCjOnPageEnter();
        this.wizardReady = true;
    }
    _toggleSideBar() {
        this._cjShowSideBar = !this._cjShowSideBar;
    }
    /**
     * Funzione pubblica invocabile dall'esterno per andare sulla pagina successiva
     * Aggiorna la struttura degli indici del currentState, il currentState, la struttura dati per la
     * progress bar la struttura dati per il paging
     */
    navigateToNext() {
        this._updateProgressStructureOnDirection('next');
    }
    /**
     * Funzione pubblica invocabile dall'esterno per andare sulla pagina precedente
     * Aggiorna la struttura degli indici del currentState, il currentState, la struttura dati per la
     * progress bar la struttura dati per il paging
     *
     */
    navigateToPrev() {
        this._updateProgressStructureOnDirection('prev');
    }
    navigateToPage(stepId, pageId) {
        this._updateProgressStructure(stepId, pageId);
    }
    showHeaderIcon() {
        this.cjHeaderIcon.hide = false;
    }
    hideHeaderIcon() {
        this.cjHeaderIcon.hide = true;
    }
    showWizardSideBar() {
        this._showSideBar = true;
    }
    hideWizardSideBar() {
        this._showSideBar = false;
    }
    toggleWizardSideBar() {
        this._showSideBar = !this._showSideBar;
    }
    metodoForDebug(data) {
        console.log('metodo for debug wizard...');
        console.dir(data);
    }
};
__decorate$174([
    Input(),
    __metadata$152("design:type", Object)
], CjWizardComponent.prototype, "id", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", String)
], CjWizardComponent.prototype, "name", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", Object)
], CjWizardComponent.prototype, "cjCurrentState", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", Object)
], CjWizardComponent.prototype, "cjWizardDataContainer", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", Object)
], CjWizardComponent.prototype, "cjHeaderIcon", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", Boolean),
    __metadata$152("design:paramtypes", [Object])
], CjWizardComponent.prototype, "cjShowPaging", null);
__decorate$174([
    Input(),
    __metadata$152("design:type", Object)
], CjWizardComponent.prototype, "cjWizardContextSource", void 0);
__decorate$174([
    Input(),
    __metadata$152("design:type", String)
], CjWizardComponent.prototype, "cjExternalLoading", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardStart", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardRestore", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardCancel", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardComplete", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnDataChange", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardPageChange", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnWizardStateChange", void 0);
__decorate$174([
    Output(),
    __metadata$152("design:type", EventEmitter)
], CjWizardComponent.prototype, "cjOnToggleSideBarView", void 0);
CjWizardComponent = __decorate$174([
    Component({
        selector: 'cj-wizard',template: "<div><nbp-loading [id]=\"cjExternalLoading\" nbpAnimationModeAuto></nbp-loading><section *ngIf=\"!_showLoading\"><nbp-progress [nbpConfiguration]=\"_progressStructure\" [ngClass]=\"{'sticky': _isProgressInsideBody,'menu-opened':_burgerMenuOpened}\"><div class=\"container\"><ng-content select=\"nbp-progress-sticky-content\"></ng-content></div></nbp-progress><div class=\"container sidebar-button__layout\" [ngClass]=\"{'menu-opened':_burgerMenuOpened}\"><div class=\"sidebar-button-container\"><a *ngIf=\"!cjHeaderIcon.hide\" class=\"sidebar-button__structure\" [ngClass]=\"{'transfrom-slim': (!_isWizardInsideBody || !_isProgressInsideBody)}\"><i [class]=\"cjHeaderIcon.icon\" (click)=\"_toggleSideBar()\"></i></a><div class=\"sidebar__layout\" [style.visibility]=\"!_cjShowSideBar ? 'hidden' : 'visible'\" [@stickyElementToggleTrigger]=\"!_cjShowSideBar ? 'disappear' : 'appear'\"><ng-content select=\"cj-shopping-cart\"></ng-content></div></div></div><div class=\"row paging-container\" *ngIf=\"cjShowPaging\"><nbp-paging [nbpConfiguration]=\"_pagingStructure\"></nbp-paging></div><div id=\"wizard-content\" class=\"row\"><div id=\"component-container\" class=\"col-md-24 col-xs-24 col-sm-24\"><ng-content select=\"cj-wizard-step\"></ng-content></div></div><div class=\"row\"><div class=\"col-md-offset-1 col-md-4\"><nbp-button *ngIf=\"_currentPageConfig?.cjShowPrevButton\" class=\"pull-left\" [nbpLabel]=\"'Indietro'\" (nbpClick)=\"_onPrev($event)\" [disabled]=\"_isPrevDisabled()\"></nbp-button></div><div class=\"col-md-offset-14 col-md-4\"><nbp-button *ngIf=\"_currentPageConfig?.cjShowActionButton\" class=\"pull-right\" [nbpLabel]=\"_currentPageConfig?.cjActionButtonLabel\" [nbpStyle]=\"_buttonsStyles.PRIMARY\" (nbpClick)=\"_onAction($event)\" [disabled]=\"_isActionDisabled()\"></nbp-button></div></div></section></div>",
        styles: [".paging-container{border-bottom:2px solid #f2f2f2;margin-left:-25px;margin-right:-25px}.sidebar-button__structure{font-size:50px;color:#337a79;text-decoration:none!important;cursor:pointer}.sidebar-button-container{display:inline-block;width:80px;text-align:center;pointer-events:auto}.sidebar-button__layout{pointer-events:none;position:fixed;top:60px;z-index:1040;left:0;right:0;text-align:right;-moz-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out}.sidebar-button__layout.transfrom-slim{top:25px!important;font-size:35px!important}.sidebar-button__layout>i{vertical-align:middle}.sidebar__layout{position:absolute;right:27px;z-index:1029}.sidebar__layout:before{display:block;content:\"\";width:0;height:0;border-bottom:10px solid #005958;border-right:10px solid transparent;border-left:10px solid transparent;position:absolute;right:6px;top:-10px;z-index:1}::ng-deep .shopping-cart--content{max-height:50vh!important;overflow:hidden!important}::ng-deep cj-shopping-cart cj-shopping-cart-element:not([cjItemStyle]) nbp-tooltip .nbp-popover .popover-content.left{position:fixed!important;top:inherit!important;right:450px!important;margin-top:-40px!important;margin-right:0!important;transform:inherit!important}::ng-deep cj-shopping-cart cj-shopping-cart-element[cjItemStyle] nbp-tooltip .nbp-popover .popover-content.left{position:fixed!important;top:inherit!important;right:450px!important;margin-top:-40px!important;margin-right:-7px!important;transform:inherit!important} /*# sourceMappingURL=cj-wizard.component.css.map */ "],
        animations: [stickyElementToggleTrigger]
    }),
    __param$23(4, Optional()),
    __metadata$152("design:paramtypes", [CjWizardHelper, NbpLoadingService,
        CjProgressConfigurationService,
        NbpEmbeddingService,
        CjBodyComponent])
], CjWizardComponent);

var __decorate$177 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$155 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let nextId$32 = 0;
let CjWizardStepComponent = class CjWizardStepComponent {
    constructor(cjWizard) {
        this.cjWizard = cjWizard;
        /**
         * Proprietà di tipo stringa che rappresentante l'Id dello step
         */
        this.id = `cj-step-wizard ${++nextId$32}`;
        /**
         * Evento che viene lanciato quando si entra nello step
         */
        this.onStepEnter = new EventEmitter();
        /**
         * Evento che viene lanciato quando si abbandona lo step
         */
        this.onStepLeave = new EventEmitter();
        this._pages = new Array();
    }
    ngAfterContentInit() {
        this._stepInfo = {
            id: this.id,
            label: this.cjLabel,
            pages: this._pages,
        };
        this.cjWizard.addStep(this._stepInfo);
    }
    /**
     * Registra una nuoava Page sullo Step
     * @param {ICjWizardPage} page
     */
    addPage(page) {
        this._pages.push(page);
    }
    /**
     * [getStepId description]
     * @return {string} [description]
     */
    getStepId() {
        return this._stepInfo.id;
    }
    /**
     * [getWizardCurrentState description]
     * @return {ICjWizardState} [description]
     */
    getWizardCurrentState() {
        return this.cjWizard.cjCurrentState;
    }
};
__decorate$177([
    Input(),
    __metadata$155("design:type", Object)
], CjWizardStepComponent.prototype, "id", void 0);
__decorate$177([
    Input(),
    __metadata$155("design:type", String)
], CjWizardStepComponent.prototype, "name", void 0);
__decorate$177([
    Input(),
    __metadata$155("design:type", String)
], CjWizardStepComponent.prototype, "cjLabel", void 0);
__decorate$177([
    Output(),
    __metadata$155("design:type", EventEmitter)
], CjWizardStepComponent.prototype, "onStepEnter", void 0);
__decorate$177([
    Output(),
    __metadata$155("design:type", EventEmitter)
], CjWizardStepComponent.prototype, "onStepLeave", void 0);
CjWizardStepComponent = __decorate$177([
    Component({selector: 'cj-wizard-step',
        template: `<ng-content></ng-content>`,
        styles: [" /*# sourceMappingURL=cj-wizard-step.component.css.map */ "]
    }),
    __metadata$155("design:paramtypes", [CjWizardComponent])
], CjWizardStepComponent);

var __decorate$176 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$154 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici per cjWizardPage component */
let nextId$31 = 0;
let CjWizardPageComponent = class CjWizardPageComponent {
    constructor(wizardStep) {
        this.wizardStep = wizardStep;
        /**
         * Identificativo univoco per il cjWizardPage.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `cj-wizard-page-${++nextId$31}`;
        /**
         * Abilita/disabilita l'invocazione dell'aggiornamento
         * del context all'uscita dalla pagina.
         */
        this.cjContextUpdate = true;
        /**
         * Tipoligia del pulsante Action, posizionato in basso a destra del wizard:
         * 'next':(Default) definisce un pulsante standard per spostarsi avanti nelle pagine
         * 'submit': definisce il pulsante di completamento del wizard
         */
        this.cjActionButtonType = 'next';
        /**
         * Label da visualizzare all'interno del pulsante Action
         */
        this.cjActionButtonLabel = 'Avanti';
        this._cjDisableActionButton = false;
        this._cjDisablePrevButton = false;
        this._cjShowActionButton = false;
        this._cjShowPrevButton = false;
        /**
         * Evento sollevato nel momento in cui il componente cjWizard entra nella pagina
         */
        this.cjOnPageEnter = new EventEmitter();
        /**
         * Evento sollevato nel momento il cjWizard esce dalla pagina
         */
        this.cjOnPageLeave = new EventEmitter();
    }
    /**
     * Permette di disabilitare il pulsante di Action
     */
    get cjDisableActionButton() { return this._cjDisableActionButton; }
    set cjDisableActionButton(value) { this._cjDisableActionButton = coerceBooleanProperty(value); }
    /**
     * Permette di disabilitare il pulsante Prev
     */
    get cjDisablePrevButton() { return this._cjDisablePrevButton; }
    ;
    set cjDisablePrevButton(value) { this._cjDisablePrevButton = coerceBooleanProperty(value); }
    /**
     * Permette di nascondere il pulsante di Action
     */
    get cjShowActionButton() { return this._cjShowActionButton; }
    ;
    set cjShowActionButton(value) { this._cjShowActionButton = coerceBooleanProperty(value); }
    /**
     * Permette di nascondere il pulsante Prev
     */
    get cjShowPrevButton() { return this._cjShowPrevButton; }
    ;
    set cjShowPrevButton(value) { this._cjShowPrevButton = coerceBooleanProperty(value); }
    _iAmActive() {
        let wizardCurrentState = this.wizardStep.getWizardCurrentState();
        if (!wizardCurrentState) {
            return false;
        }
        let parentStepId = this.wizardStep.getStepId();
        let iAmActive = (parentStepId === wizardCurrentState.currentStepId && this.id === wizardCurrentState.currentPageId);
        return iAmActive;
    }
    ngOnInit() {
        this._pageInfo = {
            id: this.id,
            label: this.cjLabel,
            configuration: this,
            events: {
                cjOnPageEnter: this.cjOnPageEnter,
                cjOnPageLeave: this.cjOnPageLeave
            }
        };
    }
    ngAfterContentInit() {
        this.wizardStep.addPage(this._pageInfo);
    }
    /**
     * Consente di eseguire il toggle sulla visibilità del pulsante di tipo Action
     */
    toggleActionButtonVisibility() {
        this.cjShowActionButton = !this.cjShowActionButton;
    }
    /**
     * Consente di impostare la visibilità del pulsante Action
     * - true --> pulsante visibile
     * - false --> pulsante nascosto
     * @param {boolean} value valore della visibilità del pulsante
     */
    setActionButtonVisibility(value) {
        this.cjShowActionButton = value;
    }
    /**
     * Consente di eseguire il toggle sulla visibilità del pulsante di tipo PREV
     */
    togglePrevButtonVisibility() {
        this.cjShowPrevButton = !this.cjShowPrevButton;
    }
    /**
     * Consente di impostare la visibilità del pulsante PREV
     * - true --> pulsante visibile
     * - false --> pulsante nascosto
     * @param {boolean} value valore della visibilità del pulsante
     */
    setPrevButtonVisibility(value) {
        this.cjShowPrevButton = value;
    }
    _emitOnPageEnterEvent() {
        console.log('Emessa onPageEnter per la page' + this._pageInfo);
        this.cjOnPageEnter.emit();
    }
};
__decorate$176([
    Input(),
    __metadata$154("design:type", Object)
], CjWizardPageComponent.prototype, "id", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", String)
], CjWizardPageComponent.prototype, "name", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", String)
], CjWizardPageComponent.prototype, "cjLabel", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", Boolean)
], CjWizardPageComponent.prototype, "cjContextUpdate", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", String)
], CjWizardPageComponent.prototype, "cjActionButtonType", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", String)
], CjWizardPageComponent.prototype, "cjActionButtonLabel", void 0);
__decorate$176([
    Input(),
    __metadata$154("design:type", Boolean),
    __metadata$154("design:paramtypes", [Object])
], CjWizardPageComponent.prototype, "cjDisableActionButton", null);
__decorate$176([
    Input(),
    __metadata$154("design:type", Boolean),
    __metadata$154("design:paramtypes", [Object])
], CjWizardPageComponent.prototype, "cjDisablePrevButton", null);
__decorate$176([
    Input(),
    __metadata$154("design:type", Boolean),
    __metadata$154("design:paramtypes", [Object])
], CjWizardPageComponent.prototype, "cjShowActionButton", null);
__decorate$176([
    Input(),
    __metadata$154("design:type", Boolean),
    __metadata$154("design:paramtypes", [Object])
], CjWizardPageComponent.prototype, "cjShowPrevButton", null);
__decorate$176([
    Output(),
    __metadata$154("design:type", EventEmitter)
], CjWizardPageComponent.prototype, "cjOnPageEnter", void 0);
__decorate$176([
    Output(),
    __metadata$154("design:type", EventEmitter)
], CjWizardPageComponent.prototype, "cjOnPageLeave", void 0);
CjWizardPageComponent = __decorate$176([
    Component({
        selector: 'cj-wizard-page',template: "<div [@changePageTrigger]=\"_iAmActive() ? 'enter' : 'leave'\"><ng-content *ngIf=\"_iAmActive()\"></ng-content></div>",
        styles: [" /*# sourceMappingURL=cj-wizard-page.component.css.map */ "],
        animations: [
            trigger('changePageTrigger', [
                state('enter', style({ opacity: 1 })),
                state('leave', style({ opacity: .5 })),
                transition('enter => leave', animate('1s ease-in')),
                transition('leave => enter', animate('1s ease-out'))
            ])
        ]
    }),
    __metadata$154("design:paramtypes", [CjWizardStepComponent])
], CjWizardPageComponent);

const translateElementsTrigger = trigger('translateElementTrigger', [
    transition('void => no-animate', []),
    transition(':leave', [
        style({ transform: 'translateX(0)', opacity: '*' }),
        animate(200, style({ transform: 'translateX(100%)', opacity: '0' }))
    ]),
    transition(':enter', [
        style({ transform: 'translateX(100%)', opacity: '0' }),
        animate(200, style({ transform: 'translateX(0)', opacity: '*' }))
    ])
]);
const highlightOnAddProduct = trigger('highlightOnAddProduct', [
    transition(':enter', [
        query('.shopping-cart--product', animate('400ms', style({ backgroundColor: '#89BC72 ' }))),
        query('.shopping-cart--product', animate('200ms 4800ms', style({ backgroundColor: '*' })))
    ])
]);
const accordionGrowShrinkTrigger = trigger('accordionGrowShrinkTrigger', [
    state('closed', style({ opacity: 0, display: 'none', height: '0px', marginTop: '0px', marginBottom: '0px', paddingTop: '0px', paddingBottom: '0px' })),
    state('opened', style({ opacity: 1, display: '*', height: '*', marginTop: '*', marginBottom: '*', paddingTop: '*', paddingBottom: '*' })),
    transition('opened => closed', animate('200ms')),
    transition('closed => opened', animate('200ms'))
]);

var __decorate$179 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$157 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjShoppingCartElementComponent = class CjShoppingCartElementComponent {
    constructor() {
        // Lanciare Warning se cjItemStyle non combacia con la classe IShoppingCartItem del model
        this._cjItemStyle = false;
        this.cjOnOpenElement = new EventEmitter();
        this.cjOnCloseElement = new EventEmitter();
        this.cjAnimationPhaseDone = new EventEmitter();
        /**
         * Propaga l'evento di click icona destra (default 'cestino') proveniente dagli elementi cjShoppingCartProduct figli
         * @param EventEmitter<IShoppingCartEvent> cjOnClickProductRightIcon
         */
        this.cjOnClickProductRightIcon = new EventEmitter();
        /**
         * Propaga l'evento di click all'interno del popover dell'icona a sinistra del product
         *  @param EventEmitter<IShoppingCartEvent> cjOnClickProductLeftIconLink
         */
        this.cjOnClickProductLeftIconLink = new EventEmitter();
        /**
         * Propaga l'evento di click del link promozione (default 'promo>') del product
         *  @param EventEmitter<IShoppingCartEvent> cjOnClickProductPromo
         */
        this.cjOnClickProductPromo = new EventEmitter();
        this.animationState = 'no-animation';
        this._collapsed = true;
    }
    /**
     * Booleano che abilita/disabilita la modifica del carrello.
     */
    get cjReadOnly() {
        return this._cjReadOnly;
    }
    set cjReadOnly(value) {
        this._cjReadOnly = coerceBooleanProperty(value);
    }
    get cjIsPanel() {
        return this._cjIsPanel;
    }
    set cjIsPanel(value) {
        this._cjIsPanel = coerceBooleanProperty(value);
    }
    get cjItemStyle() {
        return this._cjItemStyle;
    }
    set cjItemStyle(value) {
        this._cjItemStyle = coerceBooleanProperty(value);
    }
    get collapsed() { return this._collapsed; }
    ;
    set collapsed(value) {
        this._collapsed = value;
        if (this._collapsed) {
            console.log('CjShoppingCartElementComponent - Emitting: cjOnCloseElement');
            console.dir(this._myEventInfo);
            this.cjOnCloseElement.emit(this._myEventInfo);
        }
        else {
            console.log('CjShoppingCartElementComponent - Emitting: cjOnOpenElement');
            console.dir(this._myEventInfo);
            this.cjOnOpenElement.emit(this._myEventInfo);
        }
    }
    ngAfterViewInit() {
        setTimeout(() => {
            this.updateAnimationState();
        }, 300);
    }
    _toggleCollapse() {
        this.collapsed = !this.collapsed;
    }
    _getCollapsedAnimationState() {
        return this._collapsed ? 'closed' : 'opened';
    }
    _onAnimationPhaseDone() {
        this.cjAnimationPhaseDone.emit();
    }
    _isCellStroke(titleInfoLine) {
        return titleInfoLine ? titleInfoLine.style === 'stroke' : false;
    }
    _onOpenItem(item) {
        let currentEventInfo = Object.assign({}, this._myEventInfo);
        currentEventInfo['itemId'] = item.id;
        console.log('Nested CjShoppingCartElementComponent (Item) - Emitting: cjOnOpenElement');
        console.dir(currentEventInfo);
        this.cjOnOpenElement.emit(currentEventInfo);
    }
    _onCloseItem(item) {
        let currentEventInfo = Object.assign({}, this._myEventInfo);
        currentEventInfo['itemId'] = item.id;
        console.log('Nested CjShoppingCartElementComponent (Item) - Emitting: cjOnCloseElement');
        console.dir(currentEventInfo);
        this.cjOnCloseElement.emit(currentEventInfo);
    }
    _onClickRightIcon(event) {
        let currentEventInfo = Object.assign({}, event);
        if (this._cjItemStyle) {
            currentEventInfo['itemId'] = this._myEventInfo.itemId;
        }
        else {
            currentEventInfo['sectionId'] = this._myEventInfo.sectionId;
        }
        console.log('CjShoppingCartElementComponent - Emit Event: cjOnClickProductRightIcon');
        console.dir(currentEventInfo);
        this.cjOnClickProductRightIcon.emit(currentEventInfo);
    }
    _onClickLeftIconLink(event) {
        let currentEventInfo = Object.assign({}, event);
        if (this._cjItemStyle) {
            currentEventInfo['itemId'] = this._myEventInfo.itemId;
        }
        else {
            currentEventInfo['sectionId'] = this._myEventInfo.sectionId;
        }
        console.log('CjShoppingCartElementComponent - Emit Event: cjOnClickProductLeftIconLink');
        console.dir(currentEventInfo);
        this.cjOnClickProductLeftIconLink.emit(currentEventInfo);
    }
    _onClickPromo(event) {
        let currentEventInfo = Object.assign({}, event);
        if (this._cjItemStyle) {
            currentEventInfo['itemId'] = this._myEventInfo.itemId;
        }
        else {
            currentEventInfo['sectionId'] = this._myEventInfo.sectionId;
        }
        console.log('CjShoppingCartElementComponent - Emit Event: cjOnClickProductPromo');
        console.dir(currentEventInfo);
        this.cjOnClickProductPromo.emit(currentEventInfo);
    }
    ngOnInit() {
        if (this._cjItemStyle) {
            this._myEventInfo = {
                itemId: this.cjData.id,
                current: this
            };
        }
        else {
            this._myEventInfo = {
                sectionId: this.cjData.id,
                current: this
            };
        }
        if (this.cjIsPanel) {
            this.cjOnOpenElement.emit(this._myEventInfo);
        }
    }
    updateAnimationState() {
        if (this.animationState === 'animation') {
            return;
        }
        this.animationState = 'animation';
    }
    trackByItem(index, item) { return item.id; }
    trackByProduct(index, product) { return product.id; }
    trackByProductQuantity(index, product) { return product.id + product.quantity; }
};
__decorate$179([
    Input(),
    __metadata$157("design:type", Object)
], CjShoppingCartElementComponent.prototype, "cjData", void 0);
__decorate$179([
    Input(),
    __metadata$157("design:type", Object),
    __metadata$157("design:paramtypes", [Boolean])
], CjShoppingCartElementComponent.prototype, "cjReadOnly", null);
__decorate$179([
    Input(),
    __metadata$157("design:type", Object),
    __metadata$157("design:paramtypes", [Boolean])
], CjShoppingCartElementComponent.prototype, "cjIsPanel", null);
__decorate$179([
    Input(),
    __metadata$157("design:type", Boolean),
    __metadata$157("design:paramtypes", [Boolean])
], CjShoppingCartElementComponent.prototype, "cjItemStyle", null);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjOnOpenElement", void 0);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjOnCloseElement", void 0);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjAnimationPhaseDone", void 0);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjOnClickProductRightIcon", void 0);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjOnClickProductLeftIconLink", void 0);
__decorate$179([
    Output(),
    __metadata$157("design:type", EventEmitter)
], CjShoppingCartElementComponent.prototype, "cjOnClickProductPromo", void 0);
CjShoppingCartElementComponent = __decorate$179([
    Component({selector: 'cj-shopping-cart-element',
        template: "<ng-template #emptyRow><div class=\"row\"><div [ngClass]=\"{'cell-section': !cjItemStyle , 'cell-item': cjItemStyle}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__empty\"></div></div></ng-template><div [ngClass]=\"{'shopping-cart-section': !cjItemStyle , 'shopping-cart-item': cjItemStyle}\"><div class=\"row\" [ngClass]=\"{'shopping-cart-section-header': !cjItemStyle , 'shopping-cart-item-header': cjItemStyle , 'shopping-cart-item-header-border': _collapsed }\"><div [ngClass]=\"{ 'col-md-24 col-sm-24 col-xs-24' : cjIsPanel , 'col-md-22 col-sm-22 col-xs-22' : !cjIsPanel }\"><div class=\"row\"><div name=\"sx-col\" [ngClass]=\"{'col-md-14 col-sm-14 col-xs-14':cjData.titleInfoRight , 'col-md-24 col-sm-24 col-xs-24': !cjData.titleInfoRight}\"><div class=\"row\" *ngIf=\"cjData.titleInfoLeft.firstLine && !!(cjData.titleInfoLeft.firstLine.text?.trim()); else emptyRow\"><div id=\"firstLine\" [ngClass]=\"{'cell-section': !cjItemStyle , 'cell-item': cjItemStyle , 'cell__stroke':  _isCellStroke(cjData.titleInfoLeft.firstLine)}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__primary cell__uppercase\">{{cjData.titleInfoLeft.firstLine.text}}</div></div><div class=\"row\" *ngIf=\"cjData.titleInfoLeft.secondLine && !!(cjData.titleInfoLeft.secondLine.text?.trim()); else emptyRow\"><div id=\"secondLine\" [ngClass]=\"{'cell-section': !cjItemStyle , 'cell-item': cjItemStyle ,'cell__stroke':  _isCellStroke(cjData.titleInfoLeft.secondLine) , 'cell__primary': !cjItemStyle}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__font-sm\">{{cjData.titleInfoLeft.secondLine.text}}</div></div><span *ngIf=\" !cjItemStyle\"><div *ngIf=\"cjData.titleInfoLeft.thirdLine && !!(cjData.titleInfoLeft.thirdLine.text?.trim()); else emptyRow\" class=\"row\"><div id=\"thirdLine\" [ngClass]=\"{'cell__stroke':  _isCellStroke(cjData.titleInfoLeft.thirdLine), 'cell-section': !cjItemStyle , 'cell-item': cjItemStyle}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__primary cell__bold cell__font-sm\">{{cjData.titleInfoLeft.thirdLine.text}}</div></div></span></div><div name=\"dx-col\" *ngIf=\"cjData.titleInfoRight\" class=\"col-md-10 col-sm-10 col-xs-10\"><div class=\"row\" *ngIf=\"cjData.titleInfoRight.firstLine && !!(cjData.titleInfoRight.firstLine.text?.trim()); else emptyRow\"><div id=\"firstLine\" [ngClass]=\"{'cell-section': !cjItemStyle , 'cell-item': cjItemStyle , 'cell__stroke': _isCellStroke(cjData.titleInfoRight.firstLine)}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__text-right cell__primary\">{{cjData.titleInfoRight.firstLine.text}}</div></div><div class=\"row\" *ngIf=\"cjData.titleInfoRight.secondLine && !!(cjData.titleInfoRight.secondLine.text?.trim()); else emptyRow\"><div id=\"secondLine\" [ngClass]=\"{'cell-section': !cjItemStyle , 'cell-item': cjItemStyle ,'cell__stroke': _isCellStroke(cjData.titleInfoRight.secondLine)}\" class=\"col-md-24 col-sm-24 col-xs-24 cell__text-right cell__font-sm\">{{cjData.titleInfoRight.secondLine.text}}</div></div><span *ngIf=\" !cjItemStyle\"><div *ngIf=\"cjData.titleInfoRight.thirdLine && !!(cjData.titleInfoRight.thirdLine.text?.trim()); else emptyRow\" class=\"row\"><div id=\"thirdLine\" [ngClass]=\"{'cell__stroke': _isCellStroke(cjData.titleInfoRight.thirdLine), 'cell-section': !cjItemStyle , 'cell-item': cjItemStyle}\" class=\"col-md-24 col-sm-24 col-xs-24 cell-section cell__text-right cell__primary cell__font-sm\">{{cjData.titleInfoRight.thirdLine.text}}</div></div></span></div></div></div><div *ngIf=\"!cjIsPanel\" (click)=\"_toggleCollapse()\" class=\"col-md-2 col-sm-2 col-xs-2 cell-arrow\" [ngClass]=\"{'inverted section-cell-arrow':  !cjItemStyle}\"><span [ngClass]=\"{'icon-arrow-up': _collapsed , 'icon-arrow-down':!_collapsed}\"></span></div></div><div [@accordionGrowShrinkTrigger]=\"(!cjIsPanel && _collapsed) ? 'closed' : 'opened'\" (@accordionGrowShrinkTrigger.done)=\"_onAnimationPhaseDone()\" [ngClass]=\"{'cj-shopping-cart-section-body': !cjItemStyle , 'cj-shopping-cart-item-body': cjItemStyle }\"><div *ngFor=\"let item of cjData.items; trackBy: trackByItem\" [@translateElementTrigger]=\"animationState\"><cj-shopping-cart-element [cjData]=\"item\" [cjReadOnly]=\"cjReadOnly\" (cjOnOpenElement)=\"_onOpenItem(item)\" (cjOnCloseElement)=\"_onCloseItem(item)\" (cjAnimationPhaseDone)=\"_onAnimationPhaseDone()\" (cjOnClickProductRightIcon)=\"_onClickRightIcon($event)\" (cjOnClickProductLeftIconLink)=\"_onClickLeftIconLink($event)\" (cjOnClickProductPromo)=\"_onClickPromo($event)\" cjItemStyle></cj-shopping-cart-element></div><div class=\"cj-shopping-cart-products-container\" [ngClass]=\"{'inside-section': !cjItemStyle}\" *ngFor=\"let product of cjData.products; trackBy: trackByProductQuantity\" [@highlightOnAddProduct]=\"animationState\" [@translateElementTrigger]=\"animationState\"><cj-shopping-cart-product [cjReadOnly]=\"cjReadOnly\" [cjData]=\"product\" (cjOnClickRightIcon)=\"_onClickRightIcon($event)\" (cjOnClickLeftIconLink)=\"_onClickLeftIconLink($event)\" (cjOnClickPromo)=\"_onClickPromo($event)\" [cjIsParentItem]=\"cjItemStyle\"></cj-shopping-cart-product></div></div></div>",
        styles: ["#secondLine{line-height:1em;padding-bottom:6px}.cell-section.cell__primary{font-weight:700}.cell-section.cell__uppercase{text-transform:uppercase}.cell-section.cell__font-sm{font-size:14px}.cell-section.cell__stroke{text-decoration:line-through}.cell-section.cell__text-right{text-align:right}.cell-section.cell__empty{height:20px}.cell-item{font-size:14px}.cell-item.cell__primary{font-weight:700}.cell-item.cell__uppercase{text-transform:uppercase}.cell-item.cell__font-sm{font-size:12px}.cell-item.cell__stroke{text-decoration:line-through}.cell-item.cell__text-right{text-align:right}.cell-item.cell__empty{height:20px}.shopping-cart-header_base{padding-top:10px;padding-bottom:12px;padding-left:5px;padding-right:5px}.shopping-cart-section{color:#f8f8f8}.shopping-cart-section>.shopping-cart-section-header{padding-top:10px;padding-bottom:12px;padding-left:5px;padding-right:5px;padding-left:10px;padding-right:10px;background-color:#337a79}.shopping-cart-section>.cj-shopping-cart-section-body{background-color:#e3e3e3;padding-left:5px;padding-right:5px}.shopping-cart-item{color:#323232}.shopping-cart-item>.shopping-cart-item-header{padding-top:10px;padding-bottom:12px;padding-left:5px;padding-right:5px;background-color:#e3e3e3}.shopping-cart-item>.shopping-cart-item-header-border{border-bottom:1px solid #6f6f6f}.shopping-cart-item>.shopping-cart-item-header:last-child{border:0 none #fff!important}.shopping-cart-item>.cj-shopping-cart-item-body{background-color:#e3e3e3;margin-left:-5px;margin-right:-5px;padding-left:5px;padding-right:5px;padding-bottom:5px;border-bottom:1px solid #6f6f6f}.cj-shopping-cart-products-container{background-color:#fff}.cj-shopping-cart-products-container cj-shopping-cart-product ::ng-deep .shopping-cart--product{box-sizing:border-box;border-bottom:1px solid #6f6f6f}.cj-shopping-cart-products-container:last-child cj-shopping-cart-product ::ng-deep .shopping-cart--product{box-sizing:border-box;border:0 none transparent!important}.cj-shopping-cart-products-container:first-child cj-shopping-cart-product ::ng-deep .shopping-cart--product{border-top:1px solid #ccc!important}.cj-shopping-cart-products-container.inside-section{margin-left:-5px!important;margin-right:-5px!important}.cell-arrow{position:absolute;top:30%;right:5px;color:#258900;cursor:pointer}.cell-arrow.inverted{color:#f8f8f8}.cell-arrow.section-cell-arrow{right:10px} /*# sourceMappingURL=cj-shopping-cart-element.component.css.map */ "],
        animations: [translateElementsTrigger, accordionGrowShrinkTrigger, highlightOnAddProduct]
    }),
    __metadata$157("design:paramtypes", [])
], CjShoppingCartElementComponent);

var __decorate$178 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$156 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjShoppingCartComponent = class CjShoppingCartComponent {
    constructor(currentElement) {
        this.currentElement = currentElement;
        // model: IShoppingCartProduct;
        this.onResizeEvent = Observable.fromEvent(window, 'resize');
        this.animationState = 'no-animation';
        /**
         * (Opzionale) Titolo della finestra del carrello
         * Valore di default "DETTAGLIO PREZZI"
         */
        this.cjHeaderTitle = 'Dettaglio Prezzi';
        /**
         * (Opzionale) Icona visualizzata nella barra del titolo del carrello
         * Valore di default icomoon-Acquisto_carrello1
         * NOTA: l'icona presente nel ppt di spefica non c'è
         */
        this.cjHeaderIcon = 'icomoon-Acquisto_carrello1';
        /**
         * Array che descrive i pulsanti da visualizzare
         * nella sezione footer del componente (max 2)
         */
        this.cjButtons = [];
        /**
         * evento emesso quando sono modificati i dati di input del componente
         * @param EventEmitter<IShoppingCartProduct> cjOnDataChange dati aggiornati
         */
        this.cjDataChange = new EventEmitter();
        /**
         * evento emesso alla pressione del link presente nel tooltip visualizzato sulla 'lente'
         * @param EventEmitter<IShoppingCartEvent> cjOnGotoCardProduct
         */
        this.cjOnClickProductLeftIconLink = new EventEmitter();
        /**
         * Propaga l'evento di click icona destra (default 'cestino') proveniente dagli elementi cjShoppingCartProduct figli
         * @param EventEmitter<IShoppingCartEvent> cjOnClickProductRightIcon
         */
        this.cjOnClickProductRightIcon = new EventEmitter();
        /**
         * Propaga l'evento di click Promozione (default 'promo >') proveniente dagli elementi cjShoppingCartProduct figli
         * @param EventEmitter<IShoppingCartEvent> cjOnClickProductLink
         */
        this.cjOnClickProduct = new EventEmitter();
        /**
         * evento emesso all'apertura di un element
         * @param EventEmitter<IShoppingCartEvent>  cjOnOpenElement [description]
         */
        this.cjOnOpenElement = new EventEmitter();
        /**
         * Evento lanciato alla pressione di ogni pulsante.
         * Viene passato come parametro il pulsante cliccato.
         */
        this.cjOnClickFooterButton = new EventEmitter();
    }
    /**
     * Permette di impostare la visualizzazione in sola lettura del prodotto, nascondendo i pulsanti di eliminazione e dettaglio
     */
    get cjReadOnly() {
        return this._cjReadOnly;
    }
    set cjReadOnly(value) {
        this._cjReadOnly = coerceBooleanProperty(value);
    }
    ngOnInit() {
        this._fillMyEvent();
        if (this.cjData) {
            this._fillMyEvent();
            this._evaluateButtonsAndLayout();
            this._appearDisappearArrowsWaitForAnimation();
        }
        else {
            // log mancano i dati 
            console.warn("CjShoppingCart istanziato con cjData = null");
        }
        this.onResizeEvent.forEach(evt => this._appearDisappearArrows());
    }
    ngOnChanges(changes) {
        if (changes.cjData) {
            this._appearDisappearArrowsWaitForAnimation();
            this._fillMyEvent();
        }
        if (changes.cjButtons) {
            this._evaluateButtonsAndLayout();
        }
    }
    _fillMyEvent() {
        if (!this._myEventInfo) {
            this._myEventInfo = {
                current: this
            };
        }
        if (this.cjData) {
            this._myEventInfo.shoppingCartId = this.cjData.id;
        }
    }
    _getScrollingElementInfo() {
        let shoppingCartScrollingElement = this.currentElement
            .nativeElement
            .querySelectorAll('.scrolling-wrapper')[0];
        let scrollingComputedStyle = window.getComputedStyle(shoppingCartScrollingElement, null);
        let scrollingHeight = parseInt(scrollingComputedStyle.height.substring(0, scrollingComputedStyle.height.length - 2), null);
        let scrollingBottom = parseInt(scrollingComputedStyle.bottom.substring(0, scrollingComputedStyle.bottom.length - 2), null);
        return {
            element: shoppingCartScrollingElement,
            computedStyle: scrollingComputedStyle,
            height: scrollingHeight,
            bottom: scrollingBottom
        };
    }
    _getContentElementInfo() {
        let shoppingCartContentElement = this.currentElement
            .nativeElement
            .querySelectorAll('.shopping-cart--content')[0];
        let contentComputedStyle = window.getComputedStyle(shoppingCartContentElement, null);
        let contentMaxHeight = parseInt(contentComputedStyle.maxHeight.substring(0, contentComputedStyle.maxHeight.length - 2), null);
        return {
            element: shoppingCartContentElement,
            computedStyle: contentComputedStyle,
            maxHeight: contentMaxHeight
        };
    }
    _getContentScrollingInfo() {
        return {
            content: this._getContentElementInfo(),
            scrolling: this._getScrollingElementInfo()
        };
    }
    ;
    _appearDisappearArrows() {
        let contentScrollingStructure = this._getContentScrollingInfo();
        console.log('height:' + contentScrollingStructure.scrolling.height);
        console.log('maxHeight:' + contentScrollingStructure.content.maxHeight);
        this.isMaxHeightExceded = contentScrollingStructure.scrolling.height > contentScrollingStructure.content.maxHeight;
        this._setScrollingWrapperBottomValue(0);
    }
    _appearDisappearArrowsWaitForAnimation() {
        setTimeout(() => {
            this._appearDisappearArrows();
        }, 350);
    }
    _getScrollingTresholdValue() {
        let contentScrollingInfo = this._getContentScrollingInfo();
        return contentScrollingInfo.scrolling.height - contentScrollingInfo.content.maxHeight;
    }
    _setScrollingWrapperBottomValue(bottomValue) {
        this._getScrollingElementInfo().element.style.bottom = bottomValue + 'px';
    }
    _onScrollContent(direction) {
        let bottomCurrentValue = this._getScrollingElementInfo().bottom;
        let bottomGap = 50;
        if (direction === 'up') {
            let bottomDecrementedValue = bottomCurrentValue - bottomGap;
            this._scrollTop(bottomDecrementedValue);
        }
        else if (direction === 'down') {
            let bottomIncrementedValue = bottomCurrentValue + bottomGap;
            this._scrollBottom(bottomIncrementedValue);
        }
    }
    _scrollTop(bottomDecrementedNextValue) {
        if (bottomDecrementedNextValue >= 0) {
            this._setScrollingWrapperBottomValue(bottomDecrementedNextValue);
        }
        else {
            this._setScrollingWrapperBottomValue(0);
        }
    }
    _scrollBottom(bottomIncrementedValue) {
        let maxScrollingValue = this._getScrollingTresholdValue();
        if (bottomIncrementedValue <= maxScrollingValue) {
            this._setScrollingWrapperBottomValue(bottomIncrementedValue);
        }
        else {
            this._setScrollingWrapperBottomValue(maxScrollingValue);
        }
    }
    setCollapseStatusToSections(event) {
        if (this.cjData.sections.length > 1 && !!event.sectionId && !event.itemId) {
            this.childShoppingCartElements.forEach((element) => {
                if (!element.cjItemStyle) {
                    element._collapsed = event.sectionId !== element.cjData.id;
                }
            });
        }
    }
    _populateFooterButtons() {
        this._footerButtons = this.cjButtons.length > 2 ? this.cjButtons.slice(0, 2) : this.cjButtons.slice();
        // this._footerButtons = this.cjButtons;
        console.log('I pulsanti da disegnare sono ', this._footerButtons.length + ': ', JSON.stringify(this._footerButtons));
        console.log('I pulsanti originali sono ', this.cjButtons.length + ': ', JSON.stringify(this.cjButtons));
    }
    _populateStyles() {
        switch (this._footerButtons.length) {
            case 1:
                this._footerButtons.map((button) => {
                    button.layout = 'col-xs-12 col-xs-offset-6 text-center';
                });
                break;
            case 2:
                this._footerButtons.map((button, index) => {
                    button.layout = index === 0 ? 'col-xs-12 text-center' : 'col-xs-12 text-center';
                });
                break;
        }
    }
    _evaluateButtonsAndLayout() {
        this._populateFooterButtons();
        this._populateStyles();
        //this._appearDisappearArrows();
    }
    _onOpenElement(event) {
        event['shoppingCartId'] = this.cjData.id;
        this.setCollapseStatusToSections(event);
        console.log('CjShoppingCartComponent - Emitting: cjOnOpenElement');
        console.dir(event);
        this.cjOnOpenElement.emit(event);
    }
    _onElementAnimationPhaseDone() {
        this._appearDisappearArrows();
    }
    _onClickProductRightIcon(event) {
        let currentEventInfo = Object.assign({}, event);
        currentEventInfo['shoppingCartId'] = this._myEventInfo.shoppingCartId;
        console.log('CjShoppingCartComponent - Emit: cjOnClickProductRightIcon');
        console.dir(currentEventInfo);
        this.cjOnClickProductRightIcon.emit(currentEventInfo);
    }
    _onClick(button) {
        console.log('CjShoppingCartComponent - Emit: cjOnClickFooterButton');
        console.dir(button);
        this.cjOnClickFooterButton.emit(button);
    }
    _cjOnClickProductLeftIconLink(event) {
        let currentEventInfo = Object.assign({}, event);
        currentEventInfo['shoppingCartId'] = this._myEventInfo.shoppingCartId;
        console.log('CjShoppingCartComponent - Emit: cjOnClickProductLeftIconLink');
        console.dir(currentEventInfo);
        this.cjOnClickProductLeftIconLink.emit(currentEventInfo);
    }
    _cjOnClickProduct(event) {
        let currentEventInfo = Object.assign({}, event);
        currentEventInfo['shoppingCartId'] = this._myEventInfo.shoppingCartId;
        console.log('CjShoppingCartComponent - Emit: cjOnClickProductLink');
        console.dir(currentEventInfo);
        this.cjOnClickProduct.emit(currentEventInfo);
    }
    trackBySection(index, section) { return section.id; }
};
__decorate$178([
    ViewChildren(CjShoppingCartElementComponent),
    __metadata$156("design:type", QueryList)
], CjShoppingCartComponent.prototype, "childShoppingCartElements", void 0);
__decorate$178([
    Input(),
    __metadata$156("design:type", String)
], CjShoppingCartComponent.prototype, "cjHeaderTitle", void 0);
__decorate$178([
    Input(),
    __metadata$156("design:type", String)
], CjShoppingCartComponent.prototype, "cjHeaderIcon", void 0);
__decorate$178([
    Input(),
    __metadata$156("design:type", Object)
], CjShoppingCartComponent.prototype, "cjData", void 0);
__decorate$178([
    Input(),
    __metadata$156("design:type", Array)
], CjShoppingCartComponent.prototype, "cjButtons", void 0);
__decorate$178([
    Input(),
    __metadata$156("design:type", Object),
    __metadata$156("design:paramtypes", [Boolean])
], CjShoppingCartComponent.prototype, "cjReadOnly", null);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjDataChange", void 0);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjOnClickProductLeftIconLink", void 0);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjOnClickProductRightIcon", void 0);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjOnClickProduct", void 0);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjOnOpenElement", void 0);
__decorate$178([
    Output(),
    __metadata$156("design:type", EventEmitter)
], CjShoppingCartComponent.prototype, "cjOnClickFooterButton", void 0);
CjShoppingCartComponent = __decorate$178([
    Component({
        selector: 'cj-shopping-cart',template: "<div class=\"row shopping-cart--container\" style=\"position:relative;\"><div class=\"col-md-24 shopping-cart--header text-center\"><span [ngClass]=\"cjHeaderIcon\"></span><span style=\"padding-left:5px\">{{cjHeaderTitle}}</span></div><div class=\"col-md-24 shopping-cart--content\"><div *ngIf=\"isMaxHeightExceded\" class=\"col-md-24 col-sm-24 col-xs-24 shopping-cart--arrow-up\" (click)=\"_onScrollContent('up')\"><div class=\"arrow-up\"></div></div><div class=\"scrolling-wrapper row\"><div *ngFor=\"let section of cjData?.sections; trackBy: trackBySection; let last = last\" [ngClass]=\"{'shopping-cart-section-separator':!last}\" @translateElementTrigger class=\"shopping-cart-element-wrapper\"><cj-shopping-cart-element [cjReadOnly]=\"cjReadOnly\" [cjData]=\"section\" (cjOnOpenElement)=\"_onOpenElement($event)\" (cjAnimationPhaseDone)=\"_onElementAnimationPhaseDone()\" (cjOnClickProductRightIcon)=\"_onClickProductRightIcon($event)\" (cjOnClickProductLeftIconLink)=\"_cjOnClickProductLeftIconLink($event)\" (cjOnClickProductPromo)=\"_cjOnClickProduct($event)\" [cjIsPanel]=\"cjData.sections.length === 1\"></cj-shopping-cart-element></div></div><div *ngIf=\"isMaxHeightExceded\" class=\"col-md-24 col-sm-24 col-xs-24 shopping-cart--arrow-down\" (click)=\"_onScrollContent('down')\"><div class=\"arrow-down\"></div></div></div><div *ngIf=\"!cjReadOnly && !!_footerButtons.length\" class=\"col-md-24 shopping-cart--footer\"><div class=\"row\"><ng-container *ngFor=\"let button of _footerButtons\"><div *ngIf=\"button.visible\" [class]=\"button.layout\"><nbp-button [ngClass]=\"{'single-button': _footerButtons?.length==1}\" [nbpLabel]=\"button.label\" (nbpClick)=\"_onClick(button)\" [disabled]=\"button.disabled\" [nbpStyle]=\"button.style\"></nbp-button></div></ng-container></div></div></div>",
        styles: [".shopping-cart--container{width:350px;outline:#258900 solid 1px;box-shadow:0 0 30px rgba(0,0,0,.2)}.shopping-cart--header{background-color:#005958;text-transform:uppercase;color:#fff;font-weight:700;padding-top:2px;padding-bottom:2px;letter-spacing:.8px}.shopping-cart--header span:nth-child(1){font-size:18px}.shopping-cart--content{min-height:0!important}.scrolling-wrapper{position:relative}.shopping-cart-element-wrapper.shopping-cart-section-separator ::ng-deep .shopping-cart-item-header-border{border-bottom:1px solid #f8f8f8}.shopping-cart--footer{padding:10px;background-color:#fff;border-top:1px solid #258900}.shopping-cart--footer ::ng-deep nbp-button:not(.single-button) .button{width:100%!important}.arrow-container-base{cursor:pointer;position:absolute!important;z-index:1100;height:20px;text-align:center}.arrow-up-icon{position:absolute;border-bottom:15px solid #258900;border-left:15px solid transparent;border-right:15px solid transparent;border-top:0 solid transparent}.shopping-cart--arrow-up{cursor:pointer;position:absolute!important;z-index:1100;height:20px;text-align:center;background-image:linear-gradient(to bottom,#fff,rgba(255,255,255,.5));top:0;left:0}.shopping-cart--arrow-up div.arrow-up{border-bottom:15px solid #258900;border-left:15px solid transparent;border-right:15px solid transparent;border-top:0 solid transparent;height:0;width:0;top:50%;left:50%;transform:translate(-50%,-50%);position:absolute}.arrow-down-icon{position:absolute;border-top:15px solid #258900;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:0 solid transparent}.shopping-cart--arrow-down{position:absolute!important;z-index:1100;height:20px;text-align:center;background-image:linear-gradient(to top,#fff,rgba(255,255,255,.5));bottom:0;left:0;cursor:pointer}.shopping-cart--arrow-down div.arrow-down{position:absolute;border-top:15px solid #258900;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:0 solid transparent;height:0;width:0;top:50%;left:50%;transform:translate(-50%,-50%)} /*# sourceMappingURL=cj-shopping-cart.component.css.map */ "],
        animations: [translateElementsTrigger]
    }),
    __metadata$156("design:paramtypes", [ElementRef])
], CjShoppingCartComponent);

var __decorate$181 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$159 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$24 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Client Http per recuperare le informazioni di cjCustomContext
 */
let CjCustomContextClientService = class CjCustomContextClientService {
    constructor(config, http) {
        this.config = config;
        this.http = http;
        this.headers = new HttpHeaders().set('Content-Type', 'application/json');
    }
    /**
     * Esegue la chiamata http per recupeare il contesto custom passando come url param il token e la key
     */
    getCustomContext(token, key) {
        return this.config.getSessionManagerBaseUrl()
            .concatMap(url => this.http.get(url + `/npu-sm-v0/api/cjcontext/${token}/payload/${key}`, { headers: this.headers, withCredentials: true }));
    }
    setCustomContext(token, key, data) {
        return this.config.getSessionManagerBaseUrl()
            .concatMap(url => this.http.post(url + `/npu-sm-v0/api/cjcontext/${token}/payload/${key}`, data, {
            headers: this.headers,
            withCredentials: true,
            observe: 'body',
            responseType: 'json'
        }));
    }
    removeCustomContext(token, key) {
        // TODO invoke servizio rest per rimuovere custom context
        return Observable.of({});
    }
};
CjCustomContextClientService = __decorate$181([
    Injectable(),
    __param$24(0, Inject(APP_CONFIG)),
    __metadata$159("design:paramtypes", [Object, HttpClient])
], CjCustomContextClientService);

var __decorate$180 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$158 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// il token è memorizzato dal ContextService e utilizzato per recuperare il custom context
// TODO X CARLO --> cabiamo nome alla funzione ???
class ICjCustomContextService {
    constructor(contextService) {
        this.contextService = contextService;
    }
    _getToken() {
        return this.contextService.getCurrentToken();
    }
}
let CjCustomContextService = class CjCustomContextService extends ICjCustomContextService {
    constructor(cjCustomContextClient, contextService) {
        super(contextService);
        this.cjCustomContextClient = cjCustomContextClient;
    }
    getCustomContextByTokenAndKey(key) {
        return this.cjCustomContextClient.getCustomContext(super._getToken(), key);
    }
    // vs update
    setCustomContextByTokenAndKey(key, value) {
        return this.cjCustomContextClient.setCustomContext(super._getToken(), key, value);
    }
    removeCustomContextByTokenAndKey(key) {
        return this.cjCustomContextClient.removeCustomContext(super._getToken(), key);
    }
};
CjCustomContextService = __decorate$180([
    Injectable(),
    __metadata$158("design:paramtypes", [CjCustomContextClientService,
        CjContextService])
], CjCustomContextService);

class TestCjWizardContextSource {
    constructor(customContextService, wizardId) {
        this.customContextService = customContextService;
        this.wizardId = wizardId;
    }
    getWizardContext() {
        let wizardContext = this.customContextService.getCustomContextByTokenAndKey(this.wizardId)
            .map((customContext) => {
            console.groupCollapsed('Recupero contesto del wizard...');
            if (customContext) {
                console.log('Recuperato contesto custom per il wizard: ' + this.wizardId);
                console.dir(customContext);
            }
            else {
                console.log('Nessun contesto da recuperare per il wizard: ' + this.wizardId);
            }
            console.groupEnd();
            return customContext;
        });
        return wizardContext;
    }
    updateWizardContext(context) {
        if (context) {
            console.groupCollapsed('Aggiorno contesto del wizard...');
            console.log('Aggiornato sul server contesto custom per il Wizard:  ' + context.id);
            console.dir(context);
            console.groupEnd();
            return this.customContextService.setCustomContextByTokenAndKey(context.id, context);
        }
    }
    removeWizardContext(context) {
        console.log('TestCjWizardContextSource:removeWizardContext()');
        return Observable.of(true);
    }
}

var __decorate$182 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$160 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjPrivacyFormComponent = class CjPrivacyFormComponent {
    constructor() {
        /**
         * Evento emesso al click sul pulsante 'Stampa'
         * @param {EventEmitter<ICjDettaglioPrivacy>}  cjOnStampa
         */
        this.cjOnStampa = new EventEmitter();
        /**
         * Evento emesso al click sul pulsante 'Continua'
         * @param {EventEmitter<ICjDettaglioPrivacy>}  cjOnContinua
         */
        this.cjOnContinua = new EventEmitter();
        /**
         * Evento emesso al click sul pulsante 'Annulla'
         * @param {EventEmitter<>}  cjOnAnnulla
         */
        this.cjOnAnnulla = new EventEmitter();
        this._buttonStyle = NbpStyle;
        this._privacyText = `<b>PROTEZIONE DEI DATI PERSONALI: INFORMATIVA NEI CONFRONTI DI PERSONE FISICHE 
  AI SENSI DELL’ART. 13 DEL D.LGS. 30 giugno 2003 N. 196</b>
<p>Intesa Sanpaolo S.p.A, appartenente al Gruppo bancario internazionale Intesa Sanpaolo, in qualità di Titolare del trattamento, 
Le fornisce alcune informazioni circa l’utilizzo dei Suoi dati personali.</p>
<b>Finalità del trattamento dei dati</b>
<p>I dati personali, raccolti direttamente presso l’interessato, ovvero presso terzi, sono trattati dalla Banca nell'ambito della 
sua attività, anche con la direzione e coordinamento della Capogruppo Intesa Sanpaolo, con le seguenti finalità: a) prestare i servizi 
richiesti e gestire i rapporti con la clientela. Il conferimento dei dati personali necessari a tali finalità non è obbligatorio, ma 
il rifiuto a fornirli comporta l’impossibilità di eseguire quanto richiesto: il trattamento di tali dati può essere effettuato senza 
necessità del consenso dell’interessato; b) adempiere a prescrizioni dettate da normative nazionali e comunitarie (ad esempio: 
antiriciclaggio, prevenzione delle frodi sulle carte di pagamento, accertamenti fiscali e tributari, prestazione di servizi di 
investimento) nonché a disposizioni impartite da Organi di Vigilanza e Controllo (ad esempio: Centrale Rischi, Centrale di Allarme 
Interbancaria), anche in relazione agli obblighi di monitoraggio dei rischi operativi e creditizi a livello di Gruppo bancario. 
Il conferimento dei dati personali per tali finalità è obbligatorio e per il trattamento di tali dati non è richiesto il consenso; 
c) svolgere attività funzionali alla promozione e vendita di prodotti e servizi di società del Gruppo Intesa Sanpaolo o di società 
terze attraverso lettere, telefono, Internet, SMS, MMS ed altri sistemi di comunicazione; effettuare indagini di mercato e di customer 
satisfaction; offrire prodotti e servizi specificamente individuati attraverso l’elaborazione dei dati personali relativi a preferenze, 
abitudini, scelte di consumo, ecc.: il conferimento dei dati per tali finalità è facoltativo e per il trattamento di tali dati è 
richiesto il consenso.</p>
<b>Modalità di trattamento dei dati</b>
<p>Il trattamento dei dati personali avviene mediante strumenti manuali, informatici e telematici e in modo da garantire la sicurezza 
e la riservatezza dei dati stessi sia quando ci si avvalga di strumenti tradizionali che di canali distributivi telematici o comunque 
innovativi.</p>
<b>Categorie di soggetti ai quali i dati possono essere comunicati</b>
<p>Per il perseguimento delle finalità di cui sopra, la Banca necessita di comunicare i Suoi dati personali a società appartenenti al 
Gruppo Intesa Sanpaolo quali, ad esempio, la società consortile, che gestisce a livello accentrato il sistema informativo e alcuni 
servizi amministrativi, legali e contabili, o comunque a società controllate o collegate. Nell’ambito del Gruppo Intesa Sanpaolo 
potranno essere altresì comunicati informazioni e dati relativi ad operazioni ritenute sospette, ai sensi della normativa 
antiriciclaggio. Inoltre, direttamente o anche per il tramite della predetta società consortile, la Banca necessita di comunicare 
i Suoi dati personali a soggetti esterni operanti, anche all’estero, nell’ambito di: - servizi bancari, finanziari e assicurativi,
 sistemi di pagamento, emissione di carte di credito, esattorie e tesorerie; - acquisizione, registrazione e trattamento di dati e 
 documenti relativi a pagamenti, effetti, assegni od altri titoli; - rilevazione dei rischi finanziari, a scopo di prevenzione e 
 controllo del rischio di insolvenza; - attività riguardanti la cessione/copertura dei crediti svolte in qualità di controparti 
 contrattuali della Banca; - servizi di recupero crediti ed attività collaterali quali contatti e solleciti telefonici e attività 
 di due diligence; - gestione delle comunicazioni alla clientela, nonché archiviazione di dati e documenti sia in forma cartacea 
 che elettronica; - segnalazioni relative alla normativa antiriciclaggio; - gestione di sistemi nazionali ed internazionali per il 
 controllo delle frodi (ad esempio: MEF-UCAMP; Sistema Pubblico SCIPAFI); - rilevazione della qualità dei servizi, ricerche di mercato, 
 informazione e promozione commerciale di prodotti e/o servizi; - fornitura e gestione di procedure e sistemi informatici, di reti di 
 comunicazione e di sistemi di protezione e sicurezza; - servizi gestione di guardiania, videosorveglianza e videoregistrazione; 
 - attività di perizia, di revisione contabile, di certificazione di bilancio, di consulenza professionale e assistenza alla clientela. 
 Laddove tali soggetti, per le finalità sopra indicate, trasferiscano dati personali verso un paese non appartenente all’UE, 
 le competenti Autorità giudiziarie o governative potrebbero avervi accesso in base alle locali disposizioni di legge. 
 I soggetti ai quali i dati possono essere comunicati, che non siano stati designati “Incaricati” o "Responsabili", utilizzano i dati 
 quali "Titolari", effettuando un trattamento autonomo e/o correlato a quello eseguito dalla Banca. L’elenco aggiornato dei soggetti 
 terzi individuati come “Titolari” o “Responsabili” è disponibile presso tutte le Filiali. Intesa Sanpaolo S.p.A. designa “Incaricati” 
 del trattamento tutti i lavoratori dipendenti e i collaboratori, anche occasionali, che svolgono mansioni che comportano il trattamento 
 di dati personali, anche delimitandone ambiti ed abilitazioni. La Banca informa che i dati personali contenuti nella messaggistica 
 riguardante trasferimenti finanziari potranno essere forniti, per esclusivi fini di prevenzione e di contrasto del terrorismo e del 
 suo finanziamento, alle autorità pubbliche degli Stati membri dell’Unione Europea e degli Stati Uniti d’America (1). La Banca non 
 diffonde i Suoi dati.</p>
<b>Dati sensibili</b>
<p>In relazione al trattamento di dati "sensibili" (idonei a rivelare lo stato di salute, l’appartenenza a associazioni a carattere 
filosofico, politico o sindacale, ecc...) necessario per specifici servizi (mutui assistiti da assicurazione, polizze vita, ecc...) 
è richiesta una specifica manifestazione scritta di consenso, fermo restando che la Banca effettua comunque i servizi richiesti e/o 
le operazioni disposte a Suo favore che comportano solo indirettamente la conoscenza di tali dati.</p>
<b>Diritto di accesso ai dati personali ed altri diritti</b>
<p>La normativa in materia conferisce all’interessato (persona fisica) il diritto di ottenere la conferma dell'esistenza o meno di 
propri dati personali, le indicazioni circa l’origine, le finalità e le modalità del trattamento, la cancellazione, la trasformazione 
in forma anonima o il blocco dei dati trattati in violazione di legge nonché l'aggiornamento, la rettifica o, se vi è interesse, 
l'integrazione dei dati. L’interessato, inoltre, può opporsi al trattamento dei propri dati per finalità di invio di materiale 
pubblicitario, di vendita diretta, di ricerche di mercato o di comunicazione commerciale. Tutte le informazioni inerenti il diritto 
di accesso potranno essere richieste, anche per il tramite della propria Filiale di riferimento, rivolgendosi presso:
<ul><li> Intesa Sanpaolo S.p.A. Tutela Aziendale – Privacy, Piazza San Carlo, 156 – 10121 Torino;</li>
<li>Casella di posta elettronica: <a href="mailto:privacy@intesasanpaolo.com">privacy@intesasanpaolo.com</a>. Per ulteriori 
informazioni sono disponibili il numero verde 800303306 e il sito Internet <a href="http://www.intesasanpaolo.com" target="_blank">
www.intesasanpaolo.com</a></li></ul></p>
<b>INFORMATIVA NEI CONFRONTI DI PERSONE GIURIDICHE, ENTI O ASSOCIAZIONI (D.LGS. 30 giugno 2003 N. 196)</b>
<p>Intesa Sanpaolo S.p.A. informa che, ai sensi dell’art. 130 del D.Lgs. 196/2003, l’uso di sistemi automatizzati di chiamata o di 
comunicazione di chiamata senza l’intervento di un operatore e di comunicazioni elettroniche (posta elettronica, telefax, SMS, MMS o 
di altro tipo) per lo svolgimento di attività promozionale o il compimento di ricerche di mercato, è possibile solo con il consenso 
dei soggetti parte di un contratto di fornitura di servizi di comunicazione elettronica (“contraenti”: definizione che ricomprende 
anche persone giuridiche, enti o associazioni). Lo svolgimento di dette attività nei confronti di tali soggetti è sottoposto a una 
specifica manifestazione di consenso.
1) L’Unione Europea e gli Stati Uniti d’America hanno concluso un Accordo (G.U. Unione Europea L 195/5 del 27.7.2010) sul 
trasferimento di dati di messaggistica finanziaria dall’Unione Europea agli Stati Uniti ai fini di attuazione del programma di 
prevenzione e repressione di fenomeni terroristici. L’Accordo prevede che, in relazione a talune transazioni finanziarie (es. 
bonifici esteri), ad esclusione di quelle effettuate nello spazio unico dei pagamenti in euro (SEPA), il Dipartimento del Tesoro 
statunitense possa avanzare richieste di acquisizione di dati direttamente ai fornitori di messaggistica finanziaria internazionale 
di cui la banca si avvale (attualmente la società SWIFT). A tali trattamenti si applicano le rigorose garanzie previste dall’Accordo
 sia in relazione all’integrità e sicurezza dei dati che ai tempi di conservazione degli stessi. L’Accordo prevede, inoltre, che il 
 diritto di accesso venga esercitato dall’interessato esclusivamente presso l’Autorità di protezione dei dati personali del proprio 
 Paese: in Italia, l’Autorità Garante per la protezione dei dati personali (sito internet : <a href="http://www.garanteprivacy.it" 
 target="_blank">www.garanteprivacy.it</a>)</p>`;
        this._modalPrivacyText = `
      Se il cliente lo desidera può aggiornare i consensi privacy espressi. Puoi cogliere l’occasione per presentargli il vantaggio 
      di essere sempre aggiornato sui prodotti e servizi offerti dalle nostre aziende. Ricorda: l’aggiornamento dei consensi privacy 
      è facoltativo e non impedisce di portare a termine l’operazione.`;
        this._modalPrivacyIsOpened = false;
        this._modalPrivacySize = NbpSize.MD;
        this._buttonAnnullaDisabled = false;
        this._buttonStampaDisabled = true;
        this._buttonConfermaDisabled = false;
    }
    ngOnInit() {
        this._privacy = this.cjPrivacy ? Object.assign({}, this.cjPrivacy) : null;
        this._openModal();
        this._modalPrivacyButton = [
            { id: 'okModal', label: 'Ok', disabled: false, visible: true, style: NbpStyle.PRIMARY }
        ];
    }
    ngOnChanges(changes) {
        if (changes.cjPrivacy.currentValue) {
            this._privacy = Object.assign({}, changes.cjPrivacy.currentValue);
            this._openModal();
        }
    }
    _updateButtonDisable() {
        this._buttonAnnullaDisabled = false;
        this._buttonStampaDisabled = false;
        this._buttonConfermaDisabled = true;
    }
    _onClickAnnulla(privacy) {
        this._buttonAnnullaDisabled = false;
        this._buttonStampaDisabled = true;
        this._buttonConfermaDisabled = false;
        this.cjOnAnnulla.emit(privacy);
    }
    _onClickStampa(privacy) {
        this.cjOnStampa.emit(privacy);
    }
    setButtonConfigurationAfterPrintDone() {
        this._buttonAnnullaDisabled = true;
        this._buttonStampaDisabled = true;
        this._buttonConfermaDisabled = false;
    }
    _onClickContinua(privacy) {
        this._buttonAnnullaDisabled = false;
        this._buttonStampaDisabled = true;
        this._buttonConfermaDisabled = false;
        this.cjOnContinua.emit(privacy);
    }
    _openModal() {
        if (this._privacy && !this._privacy.consenso3) {
            this._modalPrivacyIsOpened = true;
        }
    }
    _onModalButtonClicked(event) {
        this._modalPrivacyIsOpened = false;
    }
};
__decorate$182([
    Input(),
    __metadata$160("design:type", Object)
], CjPrivacyFormComponent.prototype, "cjPrivacy", void 0);
__decorate$182([
    Output(),
    __metadata$160("design:type", EventEmitter)
], CjPrivacyFormComponent.prototype, "cjOnStampa", void 0);
__decorate$182([
    Output(),
    __metadata$160("design:type", EventEmitter)
], CjPrivacyFormComponent.prototype, "cjOnContinua", void 0);
__decorate$182([
    Output(),
    __metadata$160("design:type", EventEmitter)
], CjPrivacyFormComponent.prototype, "cjOnAnnulla", void 0);
CjPrivacyFormComponent = __decorate$182([
    Component({
        selector: 'cj-privacy-form',template: "<div *ngIf=\"_privacy\"><h3 class=\"text-center green-text\">Informativa Privacy</h3><nbp-panel><nbp-dividing-line></nbp-dividing-line><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\">Dati aggiornati al {{_privacy.dataInvInf | date: 'dd/MM/yyyy'}}</div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20 gray-text\"><strong>Per procedere &egrave; necessario prendere visione dell&#180;INFORMATIVA GENERALE AI SENDI DELL&#180;ART. 13 DEL D.LGS. 196&#92;2003 (Codice in materia di protezione dei dati personali)</strong></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20 text-box scrollable\" [innerHtml]=\"_privacyText\"></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\"><div class=\"col-xs-24\"><strong>C1</strong></div><div class=\"col-xs-24 mrg-b-10\">Tenuto conto dell&#180;informativa resami ai sensi dell&#180;art. 13 del D.Lgs. 196/2003 sulla protezione dei dati personali prendo atto del trattamento dei miei dati personali effettuato per le finalit&agrave; descritte in informativa alle lettere a) e b) del paragrafo &#8220;Finalit&agrave; del trattamento dei dati&#8221;</div></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\"><div class=\"col-xs-24 col-sm-24 col-md-24\"><strong>C2</strong></div><div class=\"col-xs-24 col-sm-24 col-md-24 mrg-b-10\">Al trattamento dei dati personali ai fini di informazione commerciale, offerte dirette o indagini di mercato relative ai prodotti e servizi della Banca e di societ&agrave; del Gruppo Intesa SanPaolo.</div><div id=\"c2radioContainer\" class=\"col-xs-offset-8 col-sm-offset-8 col-md-offset-8\"><nbp-tooltip nbpPosition=\"Left\" nbpText=\"I consensi commerciali rispondono ad una libera scelta del cliente, sono facoltativi e non bloccanti per l&#180;operativit&agrave; \"><nbp-radio name=\"c2\" nbpLabel=\"Presta il consenso\" [value]=\"true\" [(ngModel)]=\"_privacy.consenso2\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></nbp-tooltip><nbp-radio name=\"c2\" nbpLabel=\"Non Presta il consenso\" [value]=\"false\" [(ngModel)]=\"_privacy.consenso2\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></div></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\"><div class=\"col-xs-24 col-sm-24 col-md-24\"><strong>C3</strong></div><div class=\"col-xs-24 col-sm-24 col-md-24 mrg-b-10\">Al trattamento dei dati personali ai fini dell&#180;offerta di prodotti e servizi della Banca e di societ&agrave; del Gruppo Intesa SanPaolo specificatamente individuati in base al profilo personale.</div><div id=\"c3radioContainer\" class=\"col-xs-offset-8 col-sm-offset-8 col-md-offset-8\"><nbp-tooltip nbpPosition=\"Left\" nbpText=\"I consensi commerciali rispondono ad una libera scelta del cliente, sono facoltativi e non bloccanti per l&#180;operativit&agrave; \"><nbp-radio name=\"C3\" nbpLabel=\"Presta il consenso\" [value]=\"true\" [(ngModel)]=\"_privacy.consenso3\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></nbp-tooltip><nbp-radio name=\"C3\" nbpLabel=\"Non Presta il consenso\" [value]=\"false\" [(ngModel)]=\"_privacy.consenso3\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></div></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\"><div class=\"col-xs-24 col-sm-24 col-md-24\"><strong>C4</strong></div><div class=\"col-xs-24 col-sm-24 col-md-24 mrg-b-10\">Al trattamento dei dati personali a fini di informazione commerciale, offerte dirette o indagini di mercato relative a prodotti e servizi di altre societ&agrave;.</div><div id=\"c4radioContainer\" class=\"col-xs-offset-8 col-sm-offset-8 col-md-offset-8\"><nbp-tooltip nbpPosition=\"Left\" nbpText=\"I consensi commerciali rispondono ad una libera scelta del cliente, sono facoltativi e non bloccanti per l&#180;operativit&agrave; \"><nbp-radio name=\"c4\" nbpLabel=\"Presta il consenso\" [value]=\"true\" [(ngModel)]=\"_privacy.consenso4\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></nbp-tooltip><nbp-radio name=\"c4\" nbpLabel=\"Non Presta il consenso\" [value]=\"false\" [(ngModel)]=\"_privacy.consenso4\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></div></div><div class=\"row col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20 mrg-b-20\"><div class=\"col-xs-24 col-sm-24 col-md-24 mrg-b-10\">Poich&egrave; pu&#242; accadere che la Banca venga in possesso, in relazione a specifici rapporti e servizi richiesti, di dati che la vigente normativa “privacy” definisce come “sensibili” in quanto da essi possono desumersi l’eventuale appartenenza a movimenti, partiti, sindacati, informazioni sullo stato di salute o convinzioni religiose, ecc…,</div><div class=\"col-xs-24 col-sm-24 col-md-24\"><strong>C6</strong></div><div class=\"col-xs-24 col-sm-24 col-md-24 mrg-b-10\">Al trattamento dei dati sensibili a me riferiti, da parte dei soggetti sopra indicati.</div><div id=\"c6radioContainer\" class=\"col-xs-offset-8 col-sm-offset-8 col-md-offset-8\"><nbp-radio name=\"c6\" nbpLabel=\"Presta il consenso\" [value]=\"true\" [(ngModel)]=\"_privacy.consenso6\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio><nbp-radio name=\"c6\" nbpLabel=\"Non Presta il consenso\" [value]=\"false\" [(ngModel)]=\"_privacy.consenso6\" (change)=\"_updateButtonDisable()\" nbpNullable nbpDisplayInline></nbp-radio></div></div></nbp-panel><div class=\"row col-xs-24 col-sm-24 col-md-24\"><div class=\"col-xs-3 col-sm-3 col-md-3 col-xs-offset-2 col-sm-offset-2 col-md-offset-2\"><nbp-button nbpLabel=\"Annulla\" [disabled]=\"_buttonAnnullaDisabled\" [nbpStyle]=\"_buttonStyle.SECONDARY\" (nbpClick)=\"_onClickAnnulla(_privacy)\"></nbp-button></div><div class=\"col-xs-3 col-sm-3 col-md-3 col-xs-offset-10 col-sm-offset-10 col-md-offset-10\"><nbp-button class=\"pull-right\" *ngIf=\"_privacy\" nbpLabel=\"Stampa\" [disabled]=\"_buttonStampaDisabled\" [nbpStyle]=\"_buttonStyle.PRIMARY\" (nbpClick)=\"_onClickStampa(_privacy)\"></nbp-button></div><div class=\"col-xs-3 col-sm-3 col-md-3 col-xs-offset-1 col-sm-offset-1 col-md-offset-1\"><nbp-button nbpLabel=\"Continua\" *ngIf=\"_privacy\" [disabled]=\"_buttonConfermaDisabled\" [nbpStyle]=\"_buttonStyle.PRIMARY\" (nbpClick)=\"_onClickContinua(_privacy)\"></nbp-button></div></div><nbp-modal id=\"privacyModal\" [(nbpOpened)]=\"_modalPrivacyIsOpened\" [nbpButtons]=\"_modalPrivacyButton\" [nbpSize]=\"_modalPrivacySize\" (nbpOnButtonClicked)=\"_onModalButtonClicked($event)\">{{_modalPrivacyText}}</nbp-modal></div>",
        styles: [".text-box{max-height:200px;background-color:#f8f8f8;padding:5px}.text-box.scrollable{overflow-y:scroll}.gray-text{color:#636060}.green-text{color:#258900} /*# sourceMappingURL=cj-privacy-form.component.css.map */ "]
    }),
    __metadata$160("design:paramtypes", [])
], CjPrivacyFormComponent);

var __decorate$185 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$163 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$26 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
/**
 * Client Http per recuperare le informazioni di privacy
 */
let CjPrivacyClientService = class CjPrivacyClientService {
    constructor(config, http) {
        this.config = config;
        this.http = http;
        // da usare quando avremo gli indirizzi veri dei servizi rest
        // private cjBaseUrl = '';
        this.headers = new HttpHeaders().set('Content-Type', 'application/json');
    }
    // Lettura:     GET   /clienti/{ndg}/{abi}/{codUnitaOperativa}/privacy
    // Dispositiva: POST  /clienti/{ndg}/{abi}/{codUnitaOperativa}/privacy
    // Stampa:      POST  /clienti/{ndg}/{abi}/{codUnitaOperativa}/privacy/stampa
    getPrivacyByNdg(ndg, abi, unitaOperativa) {
        return this.config.getNpuServicesBaseUrl()
            .concatMap(url => {
            const indirizzo = `clienti/${ndg}/${abi}/${unitaOperativa}/privacy`;
            return this.http.get(url + indirizzo, { headers: this.headers, withCredentials: true });
        });
    }
    savePrivacy(data, ndg, abi, unitaOperativa) {
        return this.config.getNpuServicesBaseUrl()
            .concatMap(url => {
            const indirizzo = `clienti/${ndg}/${abi}/${unitaOperativa}/privacy`;
            return this.http.post(url + indirizzo, data, { headers: this.headers, withCredentials: true });
        });
    }
    printPrivacy(ndg, abi, unitaOperativa, tipoOfferta) {
        console.log('Stampa in corso...');
        return this.config.getNpuServicesBaseUrl()
            .concatMap(url => {
            const indirizzo = `clienti/${ndg}/${abi}/${unitaOperativa}/${tipoOfferta}/privacy/stampa`;
            return this.http.post(url + indirizzo, { headers: this.headers, withCredentials: true });
        });
    }
};
CjPrivacyClientService = __decorate$185([
    Injectable(),
    __param$26(0, Inject(APP_CONFIG)),
    __metadata$163("design:paramtypes", [Object, HttpClient])
], CjPrivacyClientService);

var __decorate$184 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$162 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Servizio utilizzato per recuperare le informazioni di contesto
 *
 */
let CjPrivacyService = class CjPrivacyService {
    constructor(cjPrivacyClient) {
        this.cjPrivacyClient = cjPrivacyClient;
    }
    /**
     * Restituisce le informazioni di privacy a partire dall'ndg, chiamando il servizio rest dedicato.
     * @param  string ndg
     * @return ICjPrivacy
     */
    getPrivacy(ndg, abi, unitaOperativa) {
        return this.cjPrivacyClient.getPrivacyByNdg(ndg, abi, unitaOperativa);
    }
    ;
    /**
     * Salva i consensi privacy compilati tramite form.
     * @param  string ndg
     * @return ICjPrivacy
     */
    savePrivacy(data, ndg, abi, unitaOperativa) {
        return this.cjPrivacyClient.savePrivacy(data, ndg, abi, unitaOperativa);
    }
    ;
    /**
     * Stampa i consensi privacy compilati tramite form.
     * @param  string ndg
     * @return any
     */
    printPrivacy(ndg, abi, unitaOperativa, tipoOfferta) {
        console.log('Stampa da service');
        return this.cjPrivacyClient.printPrivacy(ndg, abi, unitaOperativa, tipoOfferta);
    }
    ;
};
CjPrivacyService = __decorate$184([
    Injectable(),
    __metadata$162("design:paramtypes", [CjPrivacyClientService])
], CjPrivacyService);

var __decorate$183 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$161 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$25 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let CjPrivacyComponent = class CjPrivacyComponent {
    constructor(privacyService, route, appStatus) {
        this.privacyService = privacyService;
        this.route = route;
        this.appStatus = appStatus;
        // TODO recuperare dall'url anche gli altri 2 parametri ABI e unitaOperativa
        /**
         * Evento emesso al click dei pulsanti
         * @param {EventEmitter<ICjDettaglioPrivacy>}  cjOnDone
         */
        this.cjOnDone = new EventEmitter();
        /**
         * Evento emesso al click sul pulsante del componente nbp-error-advise
         * @param {EventEmitter<any>}  cjOnError
         */
        this.cjOnError = new EventEmitter();
        /**
         * Evento emesso al termine della chiamata di stampa
         * @param {EventEmitter<any>} cjOnPrint
         */
        this.cjOnPrint = new EventEmitter();
        this._viewErrorAdvise = false;
    }
    ngOnInit() {
        this._getPrivacyParams();
    }
    _getPrivacyParams() {
        if (this.route) {
            if (!this.cjNdg || !this.cjAbi || !this.cjUnitaOperativa) {
                // controllo che esista l'url param
                if (this.cjUrlParamsName) {
                    // recupero dall'url il parametro da passare al servizio
                    this.route.params.subscribe((params) => {
                        this.cjNdg = params[this.cjUrlParamsName.ndgUrlParam];
                        this.cjAbi = params[this.cjUrlParamsName.abiUrlParam];
                        this.cjUnitaOperativa = params[this.cjUrlParamsName.unitaOperativaUrlParam];
                        this.cjTipoOfferta = params[this.cjUrlParamsName.tipoOffertaUrlParam];
                        this._getDettaglioPrivacy();
                    });
                }
                else {
                    this._viewErrorAdvise = true;
                    console.error('CjPrivacy - parametri configurazione componente non corretti');
                }
            }
            else {
                this._getDettaglioPrivacy();
            }
        }
        else {
            if (!this.cjNdg || !this.cjAbi || !this.cjUnitaOperativa) {
                this._viewErrorAdvise = true;
                console.error('CjPrivacy - parametri configurazione componente non corretti');
            }
            else {
                this._getDettaglioPrivacy();
            }
        }
    }
    _getDettaglioPrivacy() {
        if (this.cjNdg && this.cjAbi && this.cjUnitaOperativa) {
            this.privacyService.getPrivacy(this.cjNdg, this.cjAbi, this.cjUnitaOperativa).subscribe(next => {
                this._privacyData = next;
            }, error => {
                this._viewErrorAdvise = true;
                throw error;
            });
        }
    }
    _onPrint(event) {
        // Chiamata al servizio di salvataggio e stampa consensi
        this.privacyService.savePrivacy(event, this.cjNdg, this.cjAbi, this.cjUnitaOperativa)
            .toPromise().then((savedData) => {
            // console.log('CjPrivacy - Risultato del salvataggio: ');
            console.dir(savedData);
            this.privacyService.printPrivacy(this.cjNdg, this.cjAbi, this.cjUnitaOperativa, this.cjTipoOfferta)
                .toPromise().then((printData) => {
                console.log('CjPrivacy - Risultato della stampa: ');
                console.dir(printData);
                if ((printData.esito.toUpperCase() === 'OK') && printData.xmlToPrint) {
                    // Lancio l'evento di stampa che conterrà l'xml da inviare all'activex
                    this._onSendPrintEvent(printData.xmlToPrint);
                    this.privacyFormComponent.setButtonConfigurationAfterPrintDone();
                }
            });
        });
    }
    _onSendPrintEvent(xmlToPrint) {
        // TODO - Qualcosa tipo:
        // this.cjOnPrint.emit(xmlToPrint.xmlDocument);
        // per ora:
        this.cjOnPrint.emit(xmlToPrint);
    }
    _onContinue(event) {
        // Chiusura della pagina
        console.log('CjPrivacy - Click su pulsante Continua');
        this.cjOnDone.emit(event);
    }
    _onCancel(event) {
        // Chiusura della pagina
        console.log('CjPrivacy - Click su pulsante Annulla');
        this.cjOnDone.emit(event);
    }
    _onErrorAdvise() {
        console.log('CjPrivacy - emitting cjOnError');
        this.cjOnError.emit();
    }
};
__decorate$183([
    Input(),
    __metadata$161("design:type", String)
], CjPrivacyComponent.prototype, "cjNdg", void 0);
__decorate$183([
    Input(),
    __metadata$161("design:type", String)
], CjPrivacyComponent.prototype, "cjAbi", void 0);
__decorate$183([
    Input(),
    __metadata$161("design:type", String)
], CjPrivacyComponent.prototype, "cjUnitaOperativa", void 0);
__decorate$183([
    Input(),
    __metadata$161("design:type", String)
], CjPrivacyComponent.prototype, "cjTipoOfferta", void 0);
__decorate$183([
    Input(),
    __metadata$161("design:type", Object)
], CjPrivacyComponent.prototype, "cjUrlParamsName", void 0);
__decorate$183([
    Output(),
    __metadata$161("design:type", EventEmitter)
], CjPrivacyComponent.prototype, "cjOnDone", void 0);
__decorate$183([
    Output(),
    __metadata$161("design:type", EventEmitter)
], CjPrivacyComponent.prototype, "cjOnError", void 0);
__decorate$183([
    Output(),
    __metadata$161("design:type", EventEmitter)
], CjPrivacyComponent.prototype, "cjOnPrint", void 0);
__decorate$183([
    ViewChild(CjPrivacyFormComponent),
    __metadata$161("design:type", CjPrivacyFormComponent)
], CjPrivacyComponent.prototype, "privacyFormComponent", void 0);
CjPrivacyComponent = __decorate$183([
    Component({
        selector: 'cj-privacy',template: "<div class=\"row\"><div class=\"col-md-offset-2 col-md-20\"><nbp-error-advice *ngIf=\"_viewErrorAdvise\" (onError)=\"_onErrorAdvise()\"></nbp-error-advice></div></div><div class=\"row\"><div class=\"col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-xs-20 col-sm-20 col-md-20\"><cj-privacy-form *ngIf=\"!_viewErrorAdvise\" [cjPrivacy]=\"_privacyData\" (cjOnStampa)=\"_onPrint($event)\" (cjOnContinua)=\"_onContinue($event)\" (cjOnAnnulla)=\"_onCancel($event)\"></cj-privacy-form></div></div>"
    }),
    __param$25(1, Optional()),
    __metadata$161("design:paramtypes", [CjPrivacyService, ActivatedRoute,
        ApplicationStatusService])
], CjPrivacyComponent);

var __decorate$186 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$164 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjShoppingCartProductComponent = class CjShoppingCartProductComponent {
    constructor() {
        this._popoverSize = NbpSize;
        /**
         * evento emesso alla pressione del link presente nel tooltip visualizzato sulla 'lente'
         * @param EventEmitter<IShoppingCartProduct>  cjOnGotoCardProduct [description]
         */
        this.cjOnGotoCardProduct = new EventEmitter();
        /**
         * evento emesso alla pressione dell'icona destra (icona di default 'cestino')
         * @param EventEmitter<IShoppingCartEvent> cjOnClickRightIcon
         */
        this.cjOnClickRightIcon = new EventEmitter();
        /**
         * evento emesso al click del link presente nel popover che viene aperto alla pressione del pulsante sinistro
         * (icona di default 'lente ingrandimento zoom').
         * @param EventEmitter<IShoppingCartEvent> cjOnClickLeftIconLink
         */
        this.cjOnClickLeftIconLink = new EventEmitter();
        /**
         * evento emesso alla pressione della link 'promo >' per la visualizzazione delle info dettagliate
         * @param EventEmitter<IShoppingCartEvent> cjOnClickPromo
         */
        this.cjOnClickPromo = new EventEmitter();
        this._iconLeft = this.fillIconStructure('ico-comuni-zoom');
        this._iconRight = this.fillIconStructure('ico-azioni-elimina-cestino');
        this._productStyle = 'standard';
        this._sendEventOnClickPopoverLink = () => {
            console.log('CjShoppingCartProductComponent - Emit evet: cjOnClickLeftIconLink');
            console.dir(this._myEventInfo);
            this.cjOnClickLeftIconLink.emit(this._myEventInfo);
        };
    }
    /**
     * Permette di impostare la visualizzazione in sola lettura del prodotto, nascondendo i pulsanti di eliminazione e dettaglio
     */
    get cjReadOnly() {
        return this._cjReadOnly;
    }
    set cjReadOnly(value) {
        this._cjReadOnly = coerceBooleanProperty(value);
    }
    ngOnInit() {
        if (this.cjData.iconLeft) {
            this._iconLeft = this.fillIconStructure('ico-comuni-zoom', this.cjData.iconLeft);
        }
        if (this.cjData.iconRight) {
            this._iconRight = this.fillIconStructure('ico-azioni-elimina-cestino', this.cjData.iconRight);
        }
        this._myEventInfo = {
            productId: this.cjData.id,
            current: this
        };
        if (this._iconLeft && this._iconLeft.tooltip) {
            this.popoverData = { popoverData: {
                    title: this._iconLeft.tooltip.title,
                    clickableText: this._iconLeft.tooltip.clickableText,
                    text: this._iconLeft.tooltip.text,
                    onClick: this._sendEventOnClickPopoverLink
                }
            };
        }
    }
    fillIconStructure(defaultIcon, iconDataSrc) {
        let iconDataDest = {};
        if (iconDataSrc) {
            iconDataDest['icon'] = iconDataSrc.icon ? iconDataSrc.icon : defaultIcon;
            iconDataDest['hide'] = iconDataSrc.hide ? iconDataSrc.hide : false;
            iconDataDest['tooltip'] = iconDataSrc.tooltip ? iconDataSrc.tooltip : null;
        }
        else {
            iconDataDest['icon'] = defaultIcon;
            iconDataDest['hide'] = false;
            iconDataDest['tooltip'] = null;
        }
        return iconDataDest;
    }
    _getProductStyle() {
        if (!this.cjData) {
            return this._productStyle;
        }
        if (this.cjData.promo) {
            return (this._productStyle = 'promo');
        }
        if (this.cjData.covenant) {
            return (this._productStyle = 'convenant');
        }
        return this._productStyle = 'standard';
    }
    _onClickRightIcon() {
        console.log('CjShoppingCartProductComponent - Emit evet: cjOnClickRightIcon');
        console.dir(this._myEventInfo);
        this.cjOnClickRightIcon.emit(this._myEventInfo);
    }
    _onGotoCardProduct() {
        console.log('CjShoppingCartProductComponent - Emit evet: cjOnGotoCardProduct');
        console.dir(this.cjData);
        this.cjOnGotoCardProduct.emit(this.cjData);
    }
    _onClickPromo() {
        console.log('CjShoppingCartProductComponent - Emitting evet: cjOnClickPromo');
        console.dir(this._myEventInfo);
        this.cjOnClickPromo.emit(this._myEventInfo);
    }
};
__decorate$186([
    Input(),
    __metadata$164("design:type", Object)
], CjShoppingCartProductComponent.prototype, "cjData", void 0);
__decorate$186([
    Input(),
    __metadata$164("design:type", Boolean)
], CjShoppingCartProductComponent.prototype, "cjIsParentItem", void 0);
__decorate$186([
    Input(),
    __metadata$164("design:type", Object),
    __metadata$164("design:paramtypes", [Boolean])
], CjShoppingCartProductComponent.prototype, "cjReadOnly", null);
__decorate$186([
    Output(),
    __metadata$164("design:type", EventEmitter)
], CjShoppingCartProductComponent.prototype, "cjOnGotoCardProduct", void 0);
__decorate$186([
    Output(),
    __metadata$164("design:type", EventEmitter)
], CjShoppingCartProductComponent.prototype, "cjOnClickRightIcon", void 0);
__decorate$186([
    Output(),
    __metadata$164("design:type", EventEmitter)
], CjShoppingCartProductComponent.prototype, "cjOnClickLeftIconLink", void 0);
__decorate$186([
    Output(),
    __metadata$164("design:type", EventEmitter)
], CjShoppingCartProductComponent.prototype, "cjOnClickPromo", void 0);
CjShoppingCartProductComponent = __decorate$186([
    Component({selector: 'cj-shopping-cart-product',
        template: "<ng-template #popoverTemplate let-popoverData=\"popoverData\"><style>.title{ font-weight: bold; text-transform: uppercase; } .link{ color:goldenrod; font-weight: bold; cursor:pointer; user-select: none; }</style><div class=\"container-fluid\"><div class=\"flexible-row\"><div class=\"flexible-col text-center title\">{{popoverData.title}}</div></div><div class=\"flexible-\"><div class=\"flexible-col content\"><p>{{popoverData.text}}</p></div></div><div class=\"flexible-row\"><div class=\"flexible-col text-center\"><div class=\"link\" (click)=\"popoverData.onClick()\">{{popoverData.clickableText}} <span class=\"icon-arrow-right\"></span></div></div></div></div></ng-template><div [id]=\"cjData.id\" class=\"flexible-row shopping-cart--product\"><div class=\"icon-left-container\"><nbp-tooltip *ngIf=\"!cjReadOnly && !_iconLeft?.hide && !!popoverData\" nbpPosition=\"Left\" [nbpTemplate]=\"popoverTemplate\" [nbpTemplateData]=\"popoverData\" [nbpSize]=\"_popoverSize.MD\" nbpVisibilityStrategy=\"click\"><span *ngIf=\"!_iconLeft?.hide\" class=\"cell__icon\" [ngClass]=\"_iconLeft?.icon\"></span></nbp-tooltip></div><div class=\"center-container cell-product\"><div class=\"flexible-row\"><div class=\"flexible-col col-12 cell-product\"><div *ngIf=\"cjData.titleInfoLeft\" class=\"flexible-row firstLine\"><div *ngIf=\"cjData.titleInfoLeft.firstLine\" class=\"flexible-col cell__font-md\" [ngClass]=\"{'cell__stroke':cjData.titleInfoLeft.firstLine.style}\">{{cjData.titleInfoLeft.firstLine.text}}</div></div><div *ngIf=\"cjData.titleInfoLeft\" class=\"flexible-row secondLine\"><div *ngIf=\"cjData.titleInfoLeft.secondLine\" class=\"flexible-col cell__font-sm\" [ngClass]=\"{'cell__stroke':cjData.titleInfoLeft.secondLine.style}\">{{cjData.titleInfoLeft.secondLine.text}}</div></div></div><div *ngIf=\"cjData.quantity > 1\" class=\"flexible-col col-3 quantity\">x{{cjData.quantity}}</div><div class=\"cell-product cell__text-right flexible-col col-9\" [ngClass]=\"{'covenant-colour':!!cjData.covenant}\"><div *ngIf=\"cjData.titleInfoRight\" class=\"flexible-row firstLine\"><div *ngIf=\"cjData.titleInfoRight.firstLine\" class=\"flexible-col col-24 text-right cell__font-md\" [ngClass]=\"{'cell__stroke':cjData.titleInfoRight.firstLine.style}\">{{cjData.titleInfoRight.firstLine.text}}</div></div><div *ngIf=\"cjData.titleInfoRight\" class=\"flexible-row secondLine\"><div *ngIf=\"cjData.titleInfoRight.secondLine\" class=\"flexible-col col-24 text-right cell__font-sm\" [ngClass]=\"{'cell__stroke':cjData.titleInfoRight.secondLine.style}\">{{cjData.titleInfoRight.secondLine.text}}</div></div></div></div><div [ngSwitch]=\"_getProductStyle()\"><ng-template [ngSwitchCase]=\"'promo'\"><div class=\"flexible-row\"><div class=\"flexible-col col-9 promo\" (click)=\"_onClickPromo()\">{{cjData.promo.title || 'promo'}} <span class=\"icon-arrow-right\"></span></div><div class=\"flexible-col col-15 promo-desc cell__text-right\">{{cjData.promo.description}}</div></div></ng-template><ng-template [ngSwitchCase]=\"'convenant'\"><div class=\"flexible-row\"><div class=\"flexible-col col-9 covenant covenant-colour\">{{cjData.covenant.title || 'convenzione '}}</div><div class=\"flexible-col col-15 covenant-desc covenant-colour cell__text-right\">{{cjData.covenant.description}}</div></div></ng-template></div></div><div class=\"icon-right-container\"><span *ngIf=\"!cjReadOnly && !_iconRight?.hide\" class=\"cell__icon\" [ngClass]=\"_iconRight?.icon\" (click)=\"_onClickRightIcon()\"></span></div></div>",
        styles: [".shopping-cart--product{color:#323232;min-height:50px;padding:5px 0}.flexible-row{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;-ms-flex-pack:space-around;justify-content:space-around}.flexible-col{-ms-flex:1 1 auto;flex:1 1 auto;word-wrap:break-word;max-width:100%}.flexible-col.text-right{text-align:right}.flexible-col.col-12{width:calc(4 / 8 * 100%)}.flexible-col.col-9{width:calc(3 / 8 * 100%)}.quantity{-ms-flex:0 0 auto;flex:0 0 auto;min-width:2em;background-color:#337a79;color:#fff;font-size:16px;height:24px;padding-left:0!important;padding-right:0!important;border-radius:12px;line-height:24px;text-align:center}.icon-left-container{-ms-flex:0 1 auto;flex:0 1 auto;max-width:35px;text-align:center}.icon-left-container span.cell__icon{padding-left:5px!important}.icon-right-container{-ms-flex:0 1 auto;flex:0 1 auto;max-width:35px;text-align:center}.icon-right-container>span{padding-right:5px!important}.center-container{-ms-flex:1 1 100%;flex:1 1 100%;max-width:100%;padding:0 5px!important}.cell__primary{font-weight:700}.cell__uppercase{text-transform:uppercase}.cell__font-md{font-size:14px}.cell__font-sm{font-size:12px}.cell__stroke{text-decoration:line-through}.cell__text-right{text-align:right}.cell__icon{font-size:25px;color:#258900;cursor:pointer}.cell__icon::before{vertical-align:middle}.firstLine{overflow:hidden}.secondLine{overflow:hidden}.promo{min-width:37.5%;color:#258900;text-transform:uppercase;font:bold 12px arial;line-height:18px;padding-right:0!important;cursor:pointer}.promo .icon-arrow-right:before{text-align:right;vertical-align:middle;font-size:1em!important;font-weight:900!important}.promo-desc{color:#0094ca;letter-spacing:-.1px;font:bold 12px arial;line-height:16px;text-transform:capitalize}.covenant,.covenant-desc{text-transform:uppercase;font:bold 12px arial;line-height:16px}.covenant-colour{color:#b47dc2} /*# sourceMappingURL=cj-shopping-cart-product.component.css.map */ "]
    }),
    __metadata$164("design:paramtypes", [])
], CjShoppingCartProductComponent);

var __decorate$187 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$165 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let ShoppingCartUtility = class ShoppingCartUtility {
    constructor() { }
    _cloneObject(obj) {
        return JSON.parse(JSON.stringify(obj));
    }
    getCartElementById(data, id) {
        if (!data || !id) {
            return null;
        }
        let objects = data.filter((object) => {
            return object.id === id;
        });
        return objects.length ? objects[0] : null;
    }
    addSection(cart, section, insertOnTop) {
        if (!cart || !section) {
            console.log("cjShoppingCartUtility.addSection: invalid parameters.");
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        if (!cartTemp.sections) {
            cartTemp.sections = new Array();
        }
        if (insertOnTop) {
            cartTemp.sections.unshift(section);
        }
        else {
            cartTemp.sections.push(section);
        }
        return cartTemp;
    }
    removeSection(cart, sectionId) {
        if (!cart || !sectionId) {
            console.log("cjShoppingCartUtility.removeSection: invalid parameters.");
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        const sectionsTemp = cart.sections.filter((section) => {
            return section.id !== sectionId;
        });
        cartTemp.sections = sectionsTemp;
        return cartTemp;
    }
    addItemToSection(cart, sectionId, item, insertOnTop) {
        if (!cart || !sectionId || !item) {
            console.log("cjShoppingCartUtility.addItemToSection: invalid parameters.");
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let sectionTemp = this.getCartElementById(cartTemp.sections, sectionId);
        if (sectionTemp) {
            if (!sectionTemp.items) {
                sectionTemp.items = new Array();
            }
            if (insertOnTop) {
                sectionTemp.items.unshift(item);
            }
            else {
                sectionTemp.items.push(item);
            }
        }
        else {
            console.log('CjShoppingCartUtility.addItemToSection: section ' + sectionId + ' not found.');
        }
        return cartTemp;
    }
    removeItemFormSection(cart, sectionId, itemId) {
        if (!cart || !sectionId || !itemId) {
            console.log("cjShoppingCartUtility.removeItemFormSection: invalid parameters.");
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let selectedSection = this.getCartElementById(cartTemp.sections, sectionId);
        if (selectedSection) {
            selectedSection.items = selectedSection.items.filter((item) => {
                return item.id !== itemId;
            });
        }
        else {
            console.log('CjShoppingCartUtility.removeItemFromSection: section ' + sectionId + ' not found.');
        }
        return cartTemp;
    }
    addProductToSection(cart, sectionId, product) {
        if (!cart || !sectionId || !product) {
            console.log("cjShoppingCartUtility.addProductToSection: invalid parameters.");
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let selectedSection = this.getCartElementById(cartTemp.sections, sectionId);
        if (selectedSection) {
            if (!selectedSection.products) {
                selectedSection.products = [];
            }
            selectedSection.products.push(product);
        }
        else {
            console.log('CjShoppingCartUtility.addProductToSection: section ' + sectionId + ' not found.');
        }
        return cartTemp;
    }
    removeProductFromSection(cart, sectionId, productId) {
        if (!cart || !sectionId || !productId) {
            console.log('cjShoppingCartUtility.removeProductFromSection: invalid parameters.');
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let selectedSection = this.getCartElementById(cartTemp.sections, sectionId);
        if (selectedSection) {
            if (selectedSection.products) {
                const productsLength = selectedSection.products.length;
                selectedSection.products = selectedSection.products.filter((prod) => {
                    return prod.id !== productId;
                });
                if (productsLength === selectedSection.products.length) {
                    console.log('cjShoppingCartUtility.removeProductFromSection: product ' + productId + 'not found.');
                }
            }
            else {
                console.log('cjShoppingCartUtility.removeProductFromSection: section ' + sectionId + ' does\'t contain any products.');
            }
        }
        else {
            console.log('cjShoppingCartUtility.removeProductFromSection: section ' + sectionId + 'not found.');
        }
        return cartTemp;
    }
    addProductToItem(cart, sectionId, itemId, product) {
        if (!cart || !sectionId || !itemId || !product) {
            console.log('cjShoppingCartUtility.addProductToItem: invalid parameters.');
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let selectedSection = this.getCartElementById(cartTemp.sections, sectionId);
        if (selectedSection) {
            let selectedItem = this.getCartElementById(selectedSection.items, itemId);
            if (selectedItem) {
                if (!selectedItem.products) {
                    selectedItem.products = new Array();
                }
                selectedItem.products.push(product);
            }
            else {
                console.log('cjShoppingCartUtility.addProductToItem: item ' + itemId + 'not found.');
            }
        }
        else {
            console.log('cjShoppingCartUtility.addProductToItem: section ' + sectionId + 'not found.');
        }
        return cartTemp;
    }
    removeProductFromItem(cart, sectionId, itemId, productId) {
        if (!cart || !sectionId || !itemId || !productId) {
            console.log('cjShoppingCartUtility.removeProductFromItem: invalid parameters.');
            return cart;
        }
        let cartTemp = this._cloneObject(cart);
        let selectedSection = this.getCartElementById(cartTemp.sections, sectionId);
        if (selectedSection) {
            let selectedItem = this.getCartElementById(selectedSection.items, itemId);
            if (selectedItem) {
                if (selectedItem.products) {
                    const productsLength = selectedItem.products.length;
                    selectedItem.products = selectedItem.products.filter((product) => {
                        return product.id !== productId;
                    });
                    if (productsLength === selectedSection.products.length) {
                        console.log('cjShoppingCartUtility.removeProductFromItem: product ' + productId + 'not found.');
                    }
                }
                else {
                    console.log('cjShoppingCartUtility.removeProductFromItem: section ' + sectionId + ' does\'t contain any products.');
                }
            }
            else {
                console.log('cjShoppingCartUtility.removeProductFromItem: item ' + itemId + 'not found.');
            }
        }
        else {
            console.log('cjShoppingCartUtility.removeProductFromItem: section ' + sectionId + 'not found.');
        }
        return cartTemp;
    }
    getObjectById(data, id) {
        let objects = data.filter((object) => {
            return object.id === id;
        });
        return objects.length ? objects[0] : null;
    }
};
ShoppingCartUtility = __decorate$187([
    Injectable(),
    __metadata$165("design:paramtypes", [])
], ShoppingCartUtility);

var __decorate$189 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$167 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$27 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let GlobalErrorHandlerHelperService = class GlobalErrorHandlerHelperService {
    constructor(appConfig, contextService) {
        this.appConfig = appConfig;
        contextService.getCurrentCjContext().subscribe((context) => {
            this._contextInfo = context;
        });
    }
    /**
     * costruisce l'oggetto di errore client a partire dall'oggetto errore gestito
     * derivante dal server
     * @param  {IServerError} serverError errore http gestito dal BE
     * @return {IClientError}             errore integrato con info provenienti da FE
     */
    createClientErrorFromServerError(serverError) {
        let currentError;
        // popolare la struttura dati con i dati provenienti dall'errore http
        currentError = {
            errorCode: serverError.errorCode ? serverError.errorCode : '',
            errorSubCode: serverError.errorSubCode ? serverError.errorSubCode : null,
            errorMessage: serverError.errorMessage ? serverError.errorMessage : null,
            errorSource: serverError.errorSource ? serverError.errorSource : null,
            stackTrace: serverError.stackTrace ? serverError.stackTrace : null,
            userAgent: ''
        };
        this.addDebugAndAppInfo(currentError);
        return currentError;
    }
    /**
    * costruisce l'oggetto di errore client a partire dall'oggetto errore
    * standard HTTP
    * @param  {IServerError} serverError errore http gestito dal BE
    * @return {IClientError}             errore integrato con info provenienti da FE
    */
    createClientErrorFromHttpError(httpError) {
        let currentError;
        // popolare la struttura dati con i dati provenienti dall'errore http
        currentError = {
            errorCode: '',
            errorMessage: httpError.message,
            errorSource: httpError.url,
            userAgent: ''
        };
        this.addDebugAndAppInfo(currentError);
        return currentError;
    }
    /**
     * Costruisce l'oggetto di errore client a partire dall'oggetto di errore
     * standard di angular
     * @param  {any}          globalError errore sollevato da angular
     * @return {IClientError}             errore integrato con info provenienti da FE
     */
    createClientError(globalError) {
        let currentError;
        // popolare la struttura dati per l'errore
        currentError = {
            errorCode: '',
            errorMessage: globalError.message ? globalError.message : null,
            errorSource: 'angular',
            stackTrace: globalError.stack ? globalError.stack : null,
            userAgent: ''
        };
        this.addDebugAndAppInfo(currentError);
        return currentError;
    }
    /**
     * recupera le informazioni relative alla risoluzione dello schermo
     * @return {IResolutionData} screen resolution
     */
    getScreenResolution() {
        let resolution = {
            width: window.screen.width,
            height: window.screen.height
        };
        return resolution;
    }
    /**
     * recupera le informazioni relative alla risoluzione del monitor
     * @return {IResolutionData} window resolution
     */
    getWindowResolution() {
        let resolution = {
            width: window.innerWidth,
            height: window.innerHeight
        };
        return resolution;
    }
    /**
     * Aggiunge all'oggetto error le informazioni relative a debug info e
     * application info
     * @param {IClientError} currentError struttura dati da inviare al serivzio di logging
     */
    addDebugAndAppInfo(currentError) {
        if (currentError) {
            this.addDebugInfo(currentError);
            this.addApplicationInfo(currentError);
            this.addContextInfo(currentError);
        }
    }
    addContextInfo(error) {
        error.cjContext = this._contextInfo;
    }
    /**
     * recupera le informazioni di debug dal Browser
     * @param {IClientError} error struttura dati da inviare al serivzio di logging
     */
    addDebugInfo(error) {
        if (error) {
            error.userAgent = window.navigator.userAgent;
            error.screenResolution = this.getScreenResolution();
            error.windowResolution = this.getWindowResolution();
        }
    }
    /**
     * recupera le informazioni relative all'applicazione
     * @param {IClientError} error struttura dati da inviare al servizio di logging
     */
    addApplicationInfo(error) {
        if (this.appConfig && this.appConfig.getApplicationInfo) {
            this.appConfig.getApplicationInfo().subscribe((appInfo) => {
                error.application = appInfo.application;
                error.version = appInfo.version;
                error.environment = appInfo.environment;
            });
        }
    }
};
GlobalErrorHandlerHelperService = __decorate$189([
    Injectable(),
    __param$27(0, Inject(APP_CONFIG)),
    __metadata$167("design:paramtypes", [Object, CjContextService])
], GlobalErrorHandlerHelperService);

var __decorate$188 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$166 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let GlobalErrorHandlerService = class GlobalErrorHandlerService extends ErrorHandler {
    // struttura dati dell'errore
    // {
    //   "timestamp": 1506680359665,
    //   "status": 500,
    //   "error": "Internal Server Error",
    //   "exception": "java.lang.RuntimeException",
    //   "message": "com.intesasanpaolo.isparc.errormanager.exception.application.TechnicalException: {Errore servizio getAFRYchclie soapenv:Server.SystemError {Y1001 RICHIESTA NON ESEGUITA-E10    NESSUN CODICE VALORIZZATO}.{Interfaces.WSI_DIAFRYV01C_01.DIAFRYV01C_Impl.CISCS_AFRYCHCLIE.AFRYCHCLIE.ParseEsito}.}.{Interfaces.WSI_NPUELCL00A_01.IMPL_NPUELCL00A.WS_NPUELCL00A.ParseResponse}.",
    //   "path": "/puv/api/clienti"
    // }
    // TODO iniettare nel costrutture un ErrorNotifierService che sarà utilizzato
    // per la gestione della logica di errore (log sul server e show dialog sul fe)
    constructor(helper, appStatusService) {
        super();
        this.helper = helper;
        this.appStatusService = appStatusService;
    }
    handleError(globalError) {
        super.handleError(globalError);
        if (globalError.rejection && globalError.rejection instanceof HttpErrorResponse) {
            globalError = globalError.rejection;
        }
        if ((globalError instanceof HttpErrorResponse && globalError.status >= 300)) {
            if (globalError.error) {
                try {
                    let errorHandled = JSON.parse(globalError.error);
                    if (errorHandled.errorMessage) {
                        // Errore gestito a dal server
                        console.warn('Application HTTP failure from server');
                        console.warn('TODO Gestire l\'errore applicativo globalmente');
                        this.appStatusService.notifyError(this.helper.createClientErrorFromServerError(errorHandled));
                    }
                    else {
                        // Errore non gestito
                        console.warn("Generic HTTP failure from server");
                        console.warn('TODO Gestire l\'errore http globalmente');
                        this.appStatusService.notifyError(this.helper.createClientErrorFromHttpError(globalError));
                    }
                }
                catch (e) {
                    if (e instanceof SyntaxError) {
                        this.appStatusService.notifyError(this.helper.createClientErrorFromHttpError(globalError));
                    }
                }
            }
            else {
                // Errore non gestito
                console.warn("Generic HTTP failure from server");
                console.warn('TODO Gestire l\'errore http globalmente');
                this.appStatusService.notifyError(this.helper.createClientErrorFromHttpError(globalError));
            }
        }
        else {
            // Errore Angular
            console.warn("Application failure from Angular");
            console.warn('TODO Gestire l\'errore di codice globalmente');
            this.appStatusService.notifyError(this.helper.createClientError(globalError));
            // TODO fare la gestione dell'errore generico (eg. nullpointer)
        }
        console.groupEnd();
    }
};
GlobalErrorHandlerService = __decorate$188([
    Injectable(),
    __metadata$166("design:paramtypes", [GlobalErrorHandlerHelperService,
        ApplicationStatusService])
], GlobalErrorHandlerService);

var __decorate$191 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$169 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let ServerEventLoggerService = class ServerEventLoggerService {
    constructor(http) {
        this.http = http;
        this.headers = new HttpHeaders().set('Content-Type', 'application/json');
    }
    logEvent(event) {
        // TODO ancora da implementare
        return Observable.of({});
    }
    logError(error) {
        // TODO l'indirizzo da dove lo prendiamo? 
        // ci serve un base url passato nell app-config?
        return this.http.post(`/npu-sm-v0/api/globalerror`, { 'error': error }, { headers: this.headers });
    }
};
ServerEventLoggerService = __decorate$191([
    Injectable(),
    __metadata$169("design:paramtypes", [HttpClient])
], ServerEventLoggerService);

var __decorate$190 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$168 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Servizio istanziato in fase di inizializzazione tramite APP_INITIALIZER
 */
let EventLoggerService = class EventLoggerService {
    constructor(applicationStatus, serverLogger) {
        this.serverLogger = serverLogger;
        applicationStatus.getErrorRawStream().filter((error) => error !== null).subscribe((error) => {
            this.sendError(error);
        });
    }
    sendEvent(event) {
        // TODO ancora da implementare
        this.serverLogger.logEvent(event);
    }
    sendError(error) {
        this.serverLogger.logError(error);
    }
};
EventLoggerService = __decorate$190([
    Injectable(),
    __metadata$168("design:paramtypes", [ApplicationStatusService,
        ServerEventLoggerService])
], EventLoggerService);
function ApplicationEventLoggerFactory(startupService) {
    return () => true;
}

class ConsoleEventLoggerService {
    constructor() { }
    logEvent(event) {
        console.group("E' arrivato un evento globale");
        console.error(event);
        console.groupEnd();
    }
    logError(error) {
        console.group("E' arrivato un errore globale");
        console.error(error);
        console.groupEnd();
    }
}

var __decorate$192 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$170 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjErrorViewComponent = class CjErrorViewComponent {
    constructor() {
        this._feedbackType = NbpFeedbackType;
    }
    ngOnInit() { }
    ngOnChanges(changes) {
        this._isDebugEnv = this.evaluateDebugEnvironment();
        setTimeout(() => { this._mainMessage = !this._isDebugEnv ? 'Si prega di contattare il servizio di supporto tecnico' : null; });
    }
    evaluateDebugEnvironment() {
        let isDebugEnv = false;
        if (this.cjClientError && this.cjClientError.environment) {
            switch (this.cjClientError.environment) {
                case 'PRODUZIONE':
                    isDebugEnv = false;
                    break;
                default:
                    isDebugEnv = true;
                    break;
            }
        }
        return isDebugEnv;
    }
};
__decorate$192([
    Input(),
    __metadata$170("design:type", Object)
], CjErrorViewComponent.prototype, "cjClientError", void 0);
CjErrorViewComponent = __decorate$192([
    Component({
        selector: 'cj-error-view',template: "<nbp-feedback nbpTitle=\"Si è verificato un errore\" [nbpMainMessage]=\"_mainMessage\" [nbpErrorCode]=\"cjClientError?.errorCode\" [nbpFeedbackType]=\"_feedbackType.ERROR\" [nbpShowDebugInfo]=\"_isDebugEnv\"><nbp-debug-info [nbpError]=\"cjClientError\"></nbp-debug-info></nbp-feedback>",
        styles: [" /*# sourceMappingURL=cj-error-view.component.css.map */ "]
    }),
    __metadata$170("design:paramtypes", [])
], CjErrorViewComponent);

var __decorate$193 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$171 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/** intero autogenerato usato per id unici per cjAutocomplete component */
let nextId$33 = 0;
let CjAutocompleteComponent = class CjAutocompleteComponent {
    constructor(_hostElement) {
        this._hostElement = _hostElement;
        this._primary = NbpStyle.PRIMARY;
        this._inputDataStream = new Subject();
        /**
         * Identificativo univoco per l'autocomplete.
         * Se nessun id è fornito e' auto-generato.
         */
        this.id = `cj-autocomplete-${++nextId$33}`;
        /**
         * Offset del numero di caratteri minimi da digitare per lanciare una ricerca
         * Valore di default: 4
         */
        this.cjMinCharacterOffset = 4;
        /**
         * Tempo di attesa tra l'inserimento dei caratteri e il lancio della ricerca (espresso in ms)
         * Valore di default: 200
         */
        this.cjDelaySearchTime = 200;
        /**
         * Il testo del placeholder.
         */
        this.placeholder = '';
        /**
         * (Opzionale) Titolo del box-tendina dell'autocomplete
         */
        this.cjBoxTitle = 'Risultati della ricerca';
        /**
        * Evento lanciato alla selezione di uno degli elementi dell'autocomplete
        */
        this.cjOnSelectElement = new EventEmitter();
    }
    /**
     * Flag che abilita/disabilita le funzionalità associate all'autocomplete
     */
    get disabled() {
        return this._cjDisabled;
    }
    set disabled(value) { this._cjDisabled = coerceBooleanProperty(value); }
    /**
     * proprietà che determina il fatto che la tendina sia aperta o chiusa
     */
    get cjOpened() { return this._cjOpened; }
    set cjOpened(value) { this._cjOpened = coerceBooleanProperty(value); }
    _isOpened() {
        return this.cjOpened;
    }
    _onFocusEvent() {
        // TODO - NECESSARIO?
    }
    _onInputEvent() {
        this._inputDataStream.next(this.cjModel);
    }
    _navigateBoxElements(event) {
        let firstAutocompleteElement = this._hostElement.nativeElement.querySelector('.first #autocompleteElement');
        firstAutocompleteElement.focus();
    }
    _onSelectElement(item) {
        this.cjOnSelectElement.emit(item);
        this.cjModel = '';
        this._cjOpened = false;
    }
    ngOnInit() {
        this.cjDataSource.getDataStream().subscribe((dataPage) => {
            if (!this._cjOpened) {
                this._cjOpened = true;
            }
            this._isSearchEmpty = (!dataPage.data || dataPage.data.length === 0);
            this._data = dataPage.data.slice();
        });
        this._inputDataStream.asObservable()
            .debounceTime(this.cjDelaySearchTime)
            .subscribe((filterString) => {
            if (filterString.length > this.cjMinCharacterOffset) {
                this.cjDataSource.sendDataEvent(this.cjFilterField, filterString);
            }
            else {
                this._cjOpened = false;
            }
        });
    }
};
__decorate$193([
    Input(),
    __metadata$171("design:type", String)
], CjAutocompleteComponent.prototype, "name", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Object)
], CjAutocompleteComponent.prototype, "id", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", String)
], CjAutocompleteComponent.prototype, "cjModel", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Number)
], CjAutocompleteComponent.prototype, "cjMinCharacterOffset", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Number)
], CjAutocompleteComponent.prototype, "cjDelaySearchTime", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Object)
], CjAutocompleteComponent.prototype, "placeholder", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Boolean),
    __metadata$171("design:paramtypes", [Object])
], CjAutocompleteComponent.prototype, "disabled", null);
__decorate$193([
    Input(),
    __metadata$171("design:type", Object),
    __metadata$171("design:paramtypes", [Object])
], CjAutocompleteComponent.prototype, "cjOpened", null);
__decorate$193([
    Input(),
    __metadata$171("design:type", String)
], CjAutocompleteComponent.prototype, "cjBoxTitle", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", Object)
], CjAutocompleteComponent.prototype, "cjElementMappings", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", String)
], CjAutocompleteComponent.prototype, "cjFilterField", void 0);
__decorate$193([
    Input(),
    __metadata$171("design:type", INbpAutocompleteDataSource)
], CjAutocompleteComponent.prototype, "cjDataSource", void 0);
__decorate$193([
    Output(),
    __metadata$171("design:type", EventEmitter)
], CjAutocompleteComponent.prototype, "cjOnSelectElement", void 0);
CjAutocompleteComponent = __decorate$193([
    Component({selector: 'cj-autocomplete',
        template: "<div class=\"row\"><div class=\"col-md-24 col-xs-24 col-sm-24\"><div class=\"autocomplete-container\"><span class=\"icon-inside icomoon-Simboli_Risorsa-20 cursor\" *ngIf=\"cjOpened\" (click)=\"cjOpened = !cjOpened\"></span> <span class=\"icon-inside icomoon-Ricerca_zoom1\" *ngIf=\"!cjOpened\"></span> <input tabindex=\"1\" #autocompleteInput class=\"textfield-box form-control round-borders\" type=\"text\" [name]=\"name\" [id]=\"id\" [(ngModel)]=\"cjModel\" [disabled]=\"_cjDisabled\" [placeholder]=\"placeholder\" (input)=\"_onInputEvent()\"><ul [style.visibility]=\"cjOpened ? 'visible' : 'hidden'\"><div class=\"row\"><div class=\"col-md-24 text-center mrg-t-10 mrg-b-10\"><strong>{{ cjBoxTitle | uppercase }}</strong></div></div><div class=\"row\" *ngIf=\"_isSearchEmpty\"><div class=\"col-md-24 text-center mrg-t-10 mrg-b-10\">La ricerca non ha prodotto risultati</div></div><ng-container *ngFor=\"let item of _data; let i = index; let first = first; let last = last;\"><cj-autocomplete-element [cjElement]=\"item\" [cjLabelField]=\"cjElementMappings?.cjLabelField\" [cjSubtitleField]=\"cjElementMappings?.cjSubtitleField\" [cjDescriptionField]=\"cjElementMappings?.cjDescriptionField\" [cjOptionalLabelField]=\"cjElementMappings?.cjOptionalLabelField\" (cjOnClickElement)=\"_onSelectElement($event)\" [ngClass]=\"{'first': first , 'last': last} \"></cj-autocomplete-element></ng-container></ul></div></div></div>",
        styles: [".autocomplete-container{position:relative}.autocomplete-container ul{opacity:1;background:#fff;border-top-width:0;border-right-color:#323232;border-right-style:solid;border-right-width:1px;border-bottom-color:#323232;border-bottom-style:solid;border-bottom-width:1px;border-left-color:#323232;border-left-style:solid;border-left-width:1px;border-radius:0 0 2px 2px;list-style:none;margin:0 0 .625em 0;padding:0 1.25em 1.625em 1.25em;position:absolute;width:calc(100% - 100px);z-index:1000;overflow-y:auto;max-height:342px;margin-left:50px;top:50px}.autocomplete-container ul ::ng-deep li{font-size:12px;font-weight:700;text-transform:uppercase;cursor:pointer;min-height:3.125em;padding:17px 12px;border-bottom:1px solid #ccc}.autocomplete-container ul ::ng-deep li:hover{background:#c4dbbc}.autocomplete-container ul ::ng-deep li:focus{background:#c4dbbc}.autocomplete-container ul ::ng-deep li.active{background:#89bc72}.autocomplete-container ul ::ng-deep cj-autocomplete-element.last li{border-bottom:1px solid #ccc}.autocomplete-container ul ::ng-deep cj-autocomplete-element.first li{border-top:1px solid #ccc}.autocomplete-container ul.ng-hide-add{transition:all ease-out .25s}.autocomplete-container ul.ng-hide-remove{transition:all ease-out .25s}.autocomplete-container ul.ng-hide{opacity:0;max-height:0}.centered-button{padding-top:5px}.textfield-box{margin:0 0 .625em 0;padding:.375em 1em .375em 1em;color:#6f6f6f;border:1px solid #323232;border-radius:3px;font-size:1em;height:3.125em;box-shadow:none!important}.textfield-box:focus{border:2px solid #89bc72;outline:0;box-shadow:none!important}.textfield-box[disabled]{opacity:.5;background-color:#fff}.round-borders{border-radius:25px}.icon-inside{position:absolute;top:50%;right:25px;font-size:26px;transform:translateY(-50%)}.icon-inside:before{color:#258900}.icon-inside.cursor{cursor:pointer} /*# sourceMappingURL=cj-autocomplete.component.css.map */ "]
    }),
    __metadata$171("design:paramtypes", [ElementRef])
], CjAutocompleteComponent);

var __decorate$194 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$172 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let tabindex = 1;
let CjAutocompleteElementComponent = class CjAutocompleteElementComponent {
    constructor() {
        /**
         * Evento lanciato al click sull'elemento per la selezione
         */
        this.cjOnClickElement = new EventEmitter();
        this._tabindex = ++tabindex;
    }
    ngOnInit() {
        this._label = getPropertyValueByPath(this.cjElement, this.cjLabelField);
        this._subtitle = getPropertyValueByPath(this.cjElement, this.cjSubtitleField);
        this._description = getPropertyValueByPath(this.cjElement, this.cjDescriptionField);
        this._optionalLabel = getPropertyValueByPath(this.cjElement, this.cjOptionalLabelField);
    }
    _getSencondLine() {
        if (this._subtitle && this._description) {
            return this._subtitle + '/' + this._description;
        }
        else if (this._subtitle) {
            return this._subtitle;
        }
        else {
            return this._description;
        }
    }
    _onSelectEvent(event) {
        this.cjOnClickElement.emit(this.cjElement);
    }
};
__decorate$194([
    Input(),
    __metadata$172("design:type", Object)
], CjAutocompleteElementComponent.prototype, "cjElement", void 0);
__decorate$194([
    Input(),
    __metadata$172("design:type", String)
], CjAutocompleteElementComponent.prototype, "cjLabelField", void 0);
__decorate$194([
    Input(),
    __metadata$172("design:type", String)
], CjAutocompleteElementComponent.prototype, "cjSubtitleField", void 0);
__decorate$194([
    Input(),
    __metadata$172("design:type", String)
], CjAutocompleteElementComponent.prototype, "cjDescriptionField", void 0);
__decorate$194([
    Input(),
    __metadata$172("design:type", String)
], CjAutocompleteElementComponent.prototype, "cjOptionalLabelField", void 0);
__decorate$194([
    Output(),
    __metadata$172("design:type", EventEmitter)
], CjAutocompleteElementComponent.prototype, "cjOnClickElement", void 0);
CjAutocompleteElementComponent = __decorate$194([
    Component({
        selector: 'cj-autocomplete-element',template: "<li id=\"autocompleteElement\" [tabindex]=\"_tabindex\" (click)=\"_onSelectEvent($event)\" (keydown.enter)=\"_onSelectEvent($event)\"><div class=\"row\"><div class=\"col-md-12 col-sm-12 col-xs-12\"><div class=\"row\"><div class=\"col-md-24 col-sm-24 col-xs-24\">{{ _label}}</div></div><div class=\"row\"><div class=\"col-md-24 col-sm-24 col-xs-24\">{{ _getSencondLine() }}</div></div></div><div class=\"col-md-12 col-sm-12 col-xs-12 text-right\"><div class=\"center-vertically\">{{_optionalLabel}}</div></div></div></li>",
        styles: [".center-vertically{padding-top:.625em} /*# sourceMappingURL=cj-autocomplete-element.component.css.map */ "],
    })
], CjAutocompleteElementComponent);

var __decorate$195 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$173 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjSignatureComponent = class CjSignatureComponent {
    constructor() {
        this._secondActivation = false;
        /**
         * Evento emesso al click del pulsante per il riavvio del Tablet
         * @param {EventEmitter<any>} cjOnRiavviaTablet
         */
        this.cjOnRiavviaTablet = new EventEmitter();
        /**
         * Evento emesso in caso di click del pulsante di ErrorAdvice
         * @param {EventEmitter<any>} cjOnErrorAdvise
         */
        this.cjOnErrorAdvise = new EventEmitter();
        /**
         * Evento emesso in caso di firma cartacea e click del pulsante 'Firma Completata'
         * @param {EventEmitter<any>} cjOnPaperSignCompleted
         */
        this.cjOnPaperSignConfirmed = new EventEmitter();
        /**
         * Evento emesso quando la funzione checkSignatureStatus del
         * datasource ritorna TRUE
         * @param {EventEmitter<any>} cjOnSignProcedureEnded
         */
        this.cjOnSignProcedureEnded = new EventEmitter();
    }
    /**
     * Comunica al componente che è la seconda attivazione del processo di firma
     * per l'XMLToSign.
     * NOTA: così non sarà chiamato il metodo PrintContract dello SPILayerMulticanale
     */
    get cjSecondActivation() { return this._secondActivation; }
    ;
    set cjSecondActivation(value) { this._secondActivation = coerceBooleanProperty(value); }
    ;
    ngOnInit() {
        if (!this.cjSignatureDatasource) {
            console.error('CjSignatureComponent - Datasource non presente');
            return;
        }
        switch (this.cjSignType.type) {
            // case SignType.FIRMA_ELETTRONICA_AVANZATA:
            // case SignType.FIRMA_CARTACEA:
            case SignType.FEA:
            case SignType.CARTA:
                this.xmlSubscription = this.cjSignatureDatasource.getFeaXmlToSign().subscribe((xml) => {
                    this._xmlToSign = xml;
                });
                break;
            // case SignType.FIRMA_DIGITALE_REMOTA:
            case SignType.FDR:
                this.xmlSubscription = this.cjSignatureDatasource.getFdrXmlToSign().subscribe((xml) => {
                    this._xmlToSign = xml;
                });
                break;
        }
    }
    ngOnDestroy() {
        this.unsubscribeObservable('all');
    }
    unsubscribeObservable(name) {
        switch (name) {
            case "polling":
                if (this.pollingSubscription) {
                    this.pollingSubscription.unsubscribe();
                }
                break;
            case "xml":
                if (this.xmlSubscription) {
                    this.xmlSubscription.unsubscribe();
                }
                break;
            case "all":
                this.unsubscribeObservable('polling');
                this.unsubscribeObservable('xml');
                break;
        }
    }
    pollingFunction() {
        // console.log('CjSignatureComponent - start polling procedure');
        this.pollingSubscription = Observable.timer(0, 1000)
            .concatMap(() => this.cjSignatureDatasource.checkSignatureStatus())
            .subscribe((status) => {
            if (status) {
                this.cjOnSignProcedureEnded.emit();
                // console.log('CjSignatureComponent - stop polling procedure');
                this.unsubscribeObservable('polling');
            }
        });
    }
    _onPaperSignConfirmed() {
        // console.log('CjSignatureComponent - emitting cjOnPaperSignConfirmed');
        this.cjOnPaperSignConfirmed.emit();
    }
    _onSignStarted(result) {
        if (result && this.cjSignType.type !== SignType.CARTA) {
            this.pollingFunction();
        }
    }
    _onRiavviaTablet() {
        this.cjOnRiavviaTablet.emit();
    }
    _onErrorAdvise() {
        this.cjOnErrorAdvise.emit();
    }
};
__decorate$195([
    Input(),
    __metadata$173("design:type", Object)
], CjSignatureComponent.prototype, "cjSignatureDatasource", void 0);
__decorate$195([
    Input(),
    __metadata$173("design:type", Object)
], CjSignatureComponent.prototype, "cjSignType", void 0);
__decorate$195([
    Input(),
    __metadata$173("design:type", Object)
], CjSignatureComponent.prototype, "cjCustomerInfo", void 0);
__decorate$195([
    Input(),
    __metadata$173("design:type", Boolean),
    __metadata$173("design:paramtypes", [Object])
], CjSignatureComponent.prototype, "cjSecondActivation", null);
__decorate$195([
    Output(),
    __metadata$173("design:type", EventEmitter)
], CjSignatureComponent.prototype, "cjOnRiavviaTablet", void 0);
__decorate$195([
    Output(),
    __metadata$173("design:type", EventEmitter)
], CjSignatureComponent.prototype, "cjOnErrorAdvise", void 0);
__decorate$195([
    Output(),
    __metadata$173("design:type", EventEmitter)
], CjSignatureComponent.prototype, "cjOnPaperSignConfirmed", void 0);
__decorate$195([
    Output(),
    __metadata$173("design:type", EventEmitter)
], CjSignatureComponent.prototype, "cjOnSignProcedureEnded", void 0);
CjSignatureComponent = __decorate$195([
    Component({
        selector: 'cj-signature',template: "<nbp-sign *ngIf=\"!!_xmlToSign\" [nbpSignType]=\"cjSignType\" [nbpCustomerInfo]=\"cjCustomerInfo\" [nbpXmlToSign]=\"_xmlToSign\" [nbpSecondActivation]=\"cjSecondActivation\" (nbpOnSignStarted)=\"_onSignStarted($event)\" (nbpOnRiavviaTablet)=\"_onRiavviaTablet()\" (nbpOnErrorAdvise)=\"_onErrorAdvise()\" (nbpOnPaperSignConfirmed)=\"_onPaperSignConfirmed()\"></nbp-sign>",
    }),
    __metadata$173("design:paramtypes", [])
], CjSignatureComponent);

const xmlToPrint = `<?xml version="1.0" encoding="UTF-8"?>
<Documenti>
  <Documento>
    <NomeDocumento>Modulo VENDITAPOS</NomeDocumento>
    <DocumentoBinario>JVBERi0xLjQNJeLjz9MN...VPRg0K</DocumentoBinario>
    <Paperless>
      <cod_identificativounivoco>AS2609201715151713062250524734331000PP7A1</cod_identificativounivoco>
      <ndg>0524734331000</ndg>
      <flag_adesione>04</flag_adesione>
      <ndgemail1>LUIGINO.BIANCO@CRVENETO.IT</ndgemail1>
      <cod_contrattomulticanale>47168720</cod_contrattomulticanale>
      <intestazione>LUIGINO#BIANCO</intestazione>
      <codice_fiscale>BNCLGN63L17H823C</codice_fiscale>
      <cod_lingua>IT</cod_lingua>
      <partita_iva>BNCLGN63L17H823C</partita_iva>
      <rapporto/>
      <progressivodocumento>1</progressivodocumento>
      <totaledocumenti>5</totaledocumenti>
      <tipo_documento>PP7A1</tipo_documento>
      <SSA>3U</SSA>
      <acronimo>POSA0</acronimo>
      <ncopie>1</ncopie>
      <utenza_gestore>U990621</utenza_gestore>
      <canale>OIS</canale>
      <cod_societa>06</cod_societa>
      <tipocorredo>POS</tipocorredo>
      <datacorredo>26.09.2017</datacorredo>
      <oracorredo>15:15:17</oracorredo>
      <cod_filiale>00516</cod_filiale>
      <nomefiliale>ODERZO - PIAZZA CARDUCCI 6</nomefiliale>
      <nomedeldocumento>PP7A1</nomedeldocumento>
      <nomedelcontratto>vendita POS Family</nomedelcontratto>
      <segnooperazione>VENDITA</segnooperazione>
      <tipologiaoperazione>CON</tipologiaoperazione>
    </Paperless>
    <Archiviazione>
      <id>AS2609201715151713062250524734331000PP7A1</id>
      <Nsg>0524734331000</Nsg>
      <TipoDoc>PP7A1</TipoDoc>
      <SSA>AS</SSA>
      <Utenza>U990621</Utenza>
      <CodRapporto>N</CodRapporto>
      <AreaBusiness>Tutela</AreaBusiness>
      <famiglia>Polizze</famiglia>
      <OwnerModuli>Banca</OwnerModuli>
      <FaseProcesso>Dispositiva</FaseProcesso>
      <Processo>VENDITA</Processo>
      <CodProdotto/>
      <TipoOfferta>OIS</TipoOfferta>
      <Canale>31</Canale>
      <CodSocieta>06</CodSocieta>
      <CodFiliale>00516</CodFiliale>
      <CodSuperPratica>2438402</CodSuperPratica>
      <CodPratica>512268</CodPratica>
      <CodPropostaCanale>TUTELA4025238</CodPropostaCanale>
      <NomeFile>Modulo_VENDITAPOS.pdf</NomeFile>
      <versione>BOZZA</versione>
      <Progressivo>1</Progressivo>
      <TipoConsegna>IB</TipoConsegna>
      <Datacreazione>26/09/2017 15:15:17</Datacreazione>
      <ModalitaProduzione>D</ModalitaProduzione>
      <CFPIVA>BNCLGN63L17H823C</CFPIVA>
      <NumPolizza>51770097457</NumPolizza>
      <NumPolizzaCollettiva/>
      <NumAdesione>51770097457</NumAdesione>
      <TipoOperazione>CON</TipoOperazione>
      <DataOperazione>26/09/2017 15:15:17</DataOperazione>
      <DataEstinzione>26/09/2018 00:00:00</DataEstinzione>
      <Compagnia>ISA</Compagnia>
      <CodProdottoCompagnia>FAMIGLIA</CodProdottoCompagnia>
      <Owners>BANCA</Owners>
      <Readers>ISA</Readers>
      <ScadenzaReaders>ISA$31/12/9999</ScadenzaReaders>
      <CodCompagnia>419</CodCompagnia>
      <CodDisclaimer/>
      <NumPreventivoRE>51720560319</NumPreventivoRE>
      <progressivodocumento>1</progressivodocumento>
      <totaledocumenti>5</totaledocumenti>
      <TipoGenerazione/>
      <copiaPromotore>N</copiaPromotore>
      <CodOperazione>14688905</CodOperazione>
      <DesProdotto>TUTELA FAMIGLIA</DesProdotto>
      <IdTemplate/>
      <NumFinanziamento/>
      <Ncopie>1</Ncopie>
    </Archiviazione>
  </Documento>
  
</Documenti>`;
const maxRequest = 10;
class MockSignatureDatasource {
    constructor() {
        this.requestNumber = 0;
    }
    getFeaXmlToSign() {
        return Observable.of(xmlToPrint);
    }
    getFdrXmlToSign() {
        return Observable.of(xmlToPrint);
    }
    checkSignatureStatus() {
        let result = false;
        if ((++this.requestNumber) > maxRequest) {
            result = true;
        }
        console.log(`MockSignatureDatasource - checkSignatureStatus: ${result}`);
        return Observable.of(result);
    }
}

var __decorate$196 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$174 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjApplicationAlertComponent = class CjApplicationAlertComponent {
    constructor(applicationStatus, zone) {
        this.applicationStatus = applicationStatus;
        this.zone = zone;
        /**
         * (Opzionale) Array di alert applicativi che si pososno passare al componente
         * istanziato in pagina
         */
        this.cjApplicationAlerts = undefined;
    }
    ngOnInit() {
        if (this.cjApplicationAlerts == undefined) {
            this.cjApplicationAlerts = [];
            this._alertSubscription = this.applicationStatus.getApplicationAlertStream().subscribe((alert) => {
                // TODO in seguito anche il tipo di alert potrebbe essere derivato dal contenuto dell'alert
                // errorLevel
                let appAlert = {
                    type: NbpAlertType.WARNING_BLOCCANTE,
                    content: alert.errorMessage,
                    show: true
                };
                this.zone.run(() => {
                    this.cjApplicationAlerts.push(appAlert);
                });
            });
        }
    }
    ngOnDestroy() {
        if (this._alertSubscription) {
            this._alertSubscription.unsubscribe();
        }
    }
    _onCloseAlert(alertIndex) {
        this.cjApplicationAlerts.splice(alertIndex, 1);
        // this.cjApplicationAlerts[alertIndex].show = false;
    }
    // metodi pubblici esposti dal componente
    closeAllAlert() {
        this.cjApplicationAlerts.splice(0, this.cjApplicationAlerts.length);
    }
};
__decorate$196([
    Input(),
    __metadata$174("design:type", Array)
], CjApplicationAlertComponent.prototype, "cjApplicationAlerts", void 0);
__decorate$196([
    Input(),
    __metadata$174("design:type", String)
], CjApplicationAlertComponent.prototype, "id", void 0);
CjApplicationAlertComponent = __decorate$196([
    Component({
        selector: 'cj-application-alert',template: "<div class=\"pad-b-12\" *ngFor=\"let alert of cjApplicationAlerts; let alertIndex = index;\"><nbp-alert-box *ngIf=\"alert.show\" (nbpClose)=\"_onCloseAlert(alertIndex)\" [nbpAlertType]=\"alert.type\">{{alert.content}}</nbp-alert-box></div>",
        styles: [`:host {
    display: inline-block;
  }`]
    }),
    __metadata$174("design:paramtypes", [ApplicationStatusService, NgZone])
], CjApplicationAlertComponent);

var __decorate$199 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$177 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param$28 = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
let CjEmbeddingUtility = class CjEmbeddingUtility {
    constructor(config) {
        this.config = config;
        if (this.config && this.config.getApplicationInfo) {
            this.config.getApplicationInfo().subscribe((appInfo) => {
                this.callerId = 'CJ' + (appInfo.application).toUpperCase();
            });
        }
        else {
            this.callerId = 'CjAPP';
        }
    }
    createReadyMessage() {
        let message = {
            eventId: 'CJ_READY',
            callerId: this.callerId,
            category: 'VIEW',
            body: {}
        };
        return message;
    }
    createModalWindowMessage(cmd) {
        let message = {
            eventId: 'MODAL_WINDOW',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                cmd: cmd
            }
        };
        return message;
    }
    createLoadingWindowMessage(cmd) {
        let message = {
            eventId: 'LOADING_WINDOW',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                cmd: cmd
            }
        };
        return message;
    }
    createPageSizeMessage(height) {
        let message = {
            eventId: 'PAGE_SIZE',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                height: height
            }
        };
        return message;
    }
    createGotoMessage(dest) {
        let message = {
            eventId: 'GOTO',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                dest: dest
            }
        };
        return message;
    }
    createCjStepMessage(body) {
        let message = {
            eventId: 'CJ_STEP',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                step: body
            }
        };
        return message;
    }
    createFontSizeMessage(body) {
        let message = {
            eventId: 'SET_FONT_SIZE',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                fontSize: body
            }
        };
        return message;
    }
    createContrastMessage(body) {
        let message = {
            eventId: 'SET_CONTRAST',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                contrast: body
            }
        };
        return message;
    }
    createPageScrollMessage(scrollY, headerHeight) {
        let message = {
            eventId: 'PAGE_SCROLL',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                deltaScrollY: scrollY,
                headerHeight: headerHeight
            }
        };
        return message;
    }
    createFloatingMenuMessage(body) {
        let message = {
            eventId: 'FLOATING_MENU',
            callerId: this.callerId,
            category: 'VIEW',
            body: {
                cmd: body
            }
        };
        return message;
    }
    createErrorMessage(error) {
        let message = {
            eventId: 'ERROR',
            callerId: this.callerId,
            category: 'VIEW',
            body: Object.assign({}, error)
        };
        return message;
    }
};
CjEmbeddingUtility = __decorate$199([
    Injectable(),
    __param$28(0, Inject(APP_CONFIG)),
    __metadata$177("design:paramtypes", [Object])
], CjEmbeddingUtility);

var __decorate$198 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$176 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjIFrameEmbeddingService = class CjIFrameEmbeddingService {
    constructor(embeddingUtility, embeddingService) {
        this.embeddingUtility = embeddingUtility;
        this.embeddingService = embeddingService;
        this.knownNdceEvents = [
            'MODAL_WINDOW',
            'PAGE_SCROLL',
            'FLOATING_MENU',
            'SET_FONT_SIZE',
            'SET_CONTRAST',
            'ERROR'
        ];
        this._outgoingMessages$ = new ReplaySubject();
        this._incomingMessages$ = new Subject();
    }
    get isEmbeddingEnabled() {
        return this._isEmbeddingEnabled;
    }
    set isEmbeddingEnabled(value) {
        this._isEmbeddingEnabled = value;
        if (value) {
            window.addEventListener('message', (msg) => this.receiveMessage(msg));
            this.registerOnIncomingMessages();
            this.registerOnOutgoingMessages();
            this.registerOnOutgoingEvents();
        }
    }
    registerOnIncomingMessages() {
        this._incomingMessages$.subscribe((message) => {
            let event = this.transformMessageToEvent(message);
            this.embeddingService.notifyIncomingEvent(event);
        });
    }
    registerOnOutgoingMessages() {
        this._outgoingMessages$.subscribe((message) => {
            this.sendMessage(message);
        });
    }
    registerOnOutgoingEvents() {
        this.embeddingService.getOutgoingEventStream().subscribe((event) => {
            let message = this.transformEventToMessage(event);
            this.notifyOutgoingMessage(message);
        });
    }
    receiveMessage(event) {
        const data = event.data;
        if (this.isEmbeddingMessage(data)) {
            this.notifyIncomingMessage(data);
        }
    }
    getOutgoingMessageStream() {
        return this._outgoingMessages$.asObservable();
    }
    /**
     * Permette di aggiungere un embbendingMessage
     * @param message: IEmbeddingMessage
     */
    notifyOutgoingMessage(message) {
        this._outgoingMessages$.next(message);
    }
    /**
     * Permette di ricevere embeddingMessage dall'esterno
     */
    notifyIncomingMessage(message) {
        this._incomingMessages$.next(message);
    }
    /**
     * invia un qualunque messaggio IEmbeddingMessage
     */
    sendMessage(message) {
        // TODO capire meglio cosa indicare nel secondo parametro,
        // "*" è troppo generico
        window.parent.postMessage(message, '*');
    }
    /**
     * crea e invia il messagio di CJ_READY verso l'esterno
     */
    sendReadyMessage() {
        let message = this.embeddingUtility.createReadyMessage();
        window.parent.postMessage(message, '*');
    }
    /**
     * crea e invia il messagio di MODAL_WINDOW verso l'esterno
     */
    sendModalWindowMessage(cmd) {
        let message = this.embeddingUtility.createModalWindowMessage(cmd);
        window.parent.postMessage(message, '*');
    }
    /**
     * crea e invia il messagio di LOADING_WINDOW verso l'esterno
     */
    sendLoadingWindowMessage(cmd) {
        let message = this.embeddingUtility.createLoadingWindowMessage(cmd);
        window.parent.postMessage(message, '*');
    }
    /**
     * crea e invia il messaggio di GOTO verso l'esterno
     */
    sendGotoMessage(cmd) {
        let message = this.embeddingUtility.createGotoMessage(cmd);
        window.parent.postMessage(message, '*');
    }
    isEmbeddingMessage(message) {
        return message
            && message.eventId
            && this.knownNdceEvents.indexOf(message.eventId) !== -1;
    }
    transformEventToMessage(event) {
        let message;
        switch (event.type) {
            case NbpEmbeddingMessageType.CJ_READY:
                message = this.embeddingUtility.createReadyMessage();
                break;
            case NbpEmbeddingMessageType.CJ_STEP:
                message = this.embeddingUtility.createCjStepMessage(event.body);
                break;
            case NbpEmbeddingMessageType.ERROR:
                message = this.embeddingUtility.createErrorMessage(event.body);
                break;
            case NbpEmbeddingMessageType.GOTO:
                message = this.embeddingUtility.createGotoMessage(event.body);
                break;
            case NbpEmbeddingMessageType.LOADING_WINDOW_START:
                message = this.embeddingUtility.createLoadingWindowMessage('START');
                break;
            case NbpEmbeddingMessageType.LOADING_WINDOW_STOP:
                message = this.embeddingUtility.createLoadingWindowMessage('STOP');
                break;
            case NbpEmbeddingMessageType.MODAL_WINDOW_SHOW:
                message = this.embeddingUtility.createModalWindowMessage('SHOW');
                break;
            case NbpEmbeddingMessageType.MODAL_WINDOW_HIDE:
                message = this.embeddingUtility.createModalWindowMessage('HIDE');
                break;
            case NbpEmbeddingMessageType.PAGE_SIZE:
                message = this.embeddingUtility.createPageSizeMessage(event.body);
                break;
        }
        return message;
    }
    transformMessageToEvent(message) {
        let event;
        switch (message.eventId) {
            case 'MODAL_WINDOW':
                return message.body.cmd === 'SHOW'
                    ? { type: NbpEmbeddingMessageType.MODAL_WINDOW_SHOW }
                    : { type: NbpEmbeddingMessageType.MODAL_WINDOW_HIDE };
            case 'PAGE_SCROLL':
                return {
                    type: NbpEmbeddingMessageType.PAGE_SCROLL,
                    body: message.body,
                };
            case 'FLOATING_MENU':
                return message.body.cmd === 'on'
                    ? { type: NbpEmbeddingMessageType.FLOATING_MENU_ON }
                    : { type: NbpEmbeddingMessageType.FLOATING_MENU_OFF };
            case 'SET_FONT_SIZE':
                return {
                    type: NbpEmbeddingMessageType.SET_FONT_SIZE,
                    body: message.body,
                };
            case 'SET_CONTRAST':
                return message.body.contrast === 'on'
                    ? { type: NbpEmbeddingMessageType.SET_CONTRAST_ON }
                    : { type: NbpEmbeddingMessageType.SET_CONTRAST_OFF };
            case 'ERROR':
                return {
                    type: NbpEmbeddingMessageType.ERROR,
                    body: message.body,
                };
        }
    }
};
CjIFrameEmbeddingService = __decorate$198([
    Injectable(),
    __metadata$176("design:paramtypes", [CjEmbeddingUtility, NbpEmbeddingService])
], CjIFrameEmbeddingService);

var __decorate$197 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$175 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
class WizardContainer {
    constructor() {
        this.data = {};
    }
    getWizardData() {
        return this.data;
    }
    ;
    setWizardData(data) {
        this.data = data;
    }
}

let CjEmbeddingTestComponent = class CjEmbeddingTestComponent {
    constructor(cdr, embeddingService, iframeEmbeddingService, loadingService, route) {
        this.cdr = cdr;
        this.embeddingService = embeddingService;
        this.iframeEmbeddingService = iframeEmbeddingService;
        this.loadingService = loadingService;
        this.nbpStyle = NbpStyle;
        this.multiLoadingId = 'embeddingTestLoading';
        this.loadingId = 'demoLoading';
        // Modal tests
        this.isModalOpened = false;
        this.modalButtons = [
            { id: 'chiudiModale', label: 'Chiudi', disabled: false, visible: true, style: NbpStyle.PRIMARY },
        ];
        this.modalSize = NbpSize.SM;
        // Goto tests
        this.gotoDestination = 'home';
        // Wizard tests
        this.dataContainer = new WizardContainer();
        this.steps = [
            { active: false, fillPercent: 100, label: 'step 1', stepDimension: NbpStepDimension.MEDIO },
            { active: true, fillPercent: 50, label: 'step 2', stepDimension: NbpStepDimension.PICCOLO },
            { active: false, fillPercent: 0, label: 'step 3', stepDimension: NbpStepDimension.GRANDE },
            { active: true, fillPercent: 50, label: 'step 4' }
        ];
        this.embeddingUrlParams = route.snapshot.data['urlParams'];
    }
    ngOnInit() {
        this.incomingEvents = this.embeddingService
            .getIncomingEventStream()
            .scan((results, evt) => results.concat(evt).slice(-10), [])
            .map(events => events.map((evt) => JSON.stringify(evt)).join('\n'));
        this.outgoingMessages = this.iframeEmbeddingService
            .getOutgoingMessageStream()
            .scan((results, msg) => results.concat(msg).slice(-10), [])
            .map(messages => messages.map((msg) => JSON.stringify(msg)).join('\n'));
    }
    ngAfterViewInit() {
        this.sendCjReadyMessage();
        this.sendPageSizeMessage();
        this.initializeProgress();
        this.cdr.detectChanges();
    }
    initializeProgress() {
    }
    closeModal() {
        this.isModalOpened = false;
    }
    openModal() {
        this.isModalOpened = true;
    }
    startAnimationByMethod() {
        this.nbpLoadingComponent.startAnimation();
        setTimeout(() => {
            this.nbpLoadingComponent.stopAnimation();
        }, 5000);
    }
    sendCjReadyMessage() {
        this.embeddingService.notifyOutgoingEvent({
            type: NbpEmbeddingMessageType.CJ_READY
        });
    }
    startAnimationByValue() {
        this.nbpshowAnimation = true;
        setTimeout(() => {
            this.nbpshowAnimation = false;
        }, 5000);
    }
    startAnimationWithMessage() {
        this.nbpLoadingComponents.toArray()[1].startAnimation();
        setTimeout(() => {
            this.nbpLoadingComponents.toArray()[1].stopAnimation();
        }, 5000);
    }
    startAnimationByService() {
        this.loadingService.notifyLoadingSpinnerRequest(true, this.loadingId);
        setTimeout(() => {
            this.loadingService.notifyLoadingSpinnerRequest(false, this.loadingId);
        }, 5000);
    }
    sendGotoMessage() {
        this.embeddingService.notifyOutgoingEvent({
            type: NbpEmbeddingMessageType.GOTO,
            body: this.gotoDestination
        });
    }
    sendPageSizeMessage() {
        this.embeddingService.notifyOutgoingEvent({
            type: NbpEmbeddingMessageType.PAGE_SIZE,
            body: this.getDocumentHeight()
        });
    }
    wizardNextStep() {
        this.wizard.navigateToNext();
    }
    wizardPrevStep() {
        this.wizard.navigateToPrev();
    }
    sendErrorMessage() {
        this.embeddingService.notifyOutgoingEvent({
            type: NbpEmbeddingMessageType.ERROR,
            body: {
                errorType: 'USER_TRIGGERED',
                errorCode: '000',
                errorMessage: `Errore creato dall'utente`
            }
        });
    }
    throwError() {
        throw new Error('Messaggio di errore');
    }
    getDocumentHeight() {
        /*return Math.max(
          document.body.scrollHeight, document.documentElement.scrollHeight,
          document.body.offsetHeight, document.documentElement.offsetHeight,
          document.body.clientHeight, document.documentElement.clientHeight
        );*/
        let resize;
        let element = document.getElementById('nbp-wrapper-container') ? document.getElementById('nbp-wrapper-container') : document.getElementById('body-container');
        if (element) {
            resize = element.clientHeight + 100 + 'px';
        }
        return resize;
    }
};
__decorate$197([
    ViewChild(CjWizardComponent),
    __metadata$175("design:type", CjWizardComponent)
], CjEmbeddingTestComponent.prototype, "wizard", void 0);
__decorate$197([
    ViewChild(NbpLoadingComponent),
    __metadata$175("design:type", NbpLoadingComponent)
], CjEmbeddingTestComponent.prototype, "nbpLoadingComponent", void 0);
__decorate$197([
    ViewChildren(NbpLoadingComponent),
    __metadata$175("design:type", QueryList)
], CjEmbeddingTestComponent.prototype, "nbpLoadingComponents", void 0);
__decorate$197([
    HostListener('window:resize'),
    __metadata$175("design:type", Function),
    __metadata$175("design:paramtypes", []),
    __metadata$175("design:returntype", void 0)
], CjEmbeddingTestComponent.prototype, "sendPageSizeMessage", null);
CjEmbeddingTestComponent = __decorate$197([
    Component({
        selector: 'cj-embedding-test',template: "<nbp-wrapper><nbp-progress [nbpConfiguration]=\"steps\" nbpDisableSticky id=\"progressFlottante\"></nbp-progress><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Gestione evento CJ-READY\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-4\"><nbp-button [nbpLabel]=\"'Send CJ_READY'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"sendCjReadyMessage()\"></nbp-button></div></div><h2>Loading Component with manual animation</h2><p>Start Animation by call startAnimation(), a Public nbpLoadingcomponent method (call stopAnimation() after 5s and is stops the Animation): <button class=\"btn btn-default\" (click)=\"startAnimationByMethod()\">Start Animation by Method Call</button></p><p>Start Animation By Change Boolean Value from False to True (set To false after 5s and this stops the Animation): <button class=\"btn btn-default\" (click)=\"startAnimationByValue()\">Start Animation by Value Change</button></p><p>Start Animation with message: <button class=\"btn btn-default\" (click)=\"startAnimationWithMessage()\">Start Animation with custom message</button></p><nbp-loading [nbpShowAnimation]=\"nbpshowAnimation\"></nbp-loading><nbp-loading [nbpMessage]=\"'12321321'\"></nbp-loading><h2>Loading component with auto animation</h2><p>Handle Animation By invoking:</p><ul><li>NbpLoadingService.setLoadingSpinnerStatus(true):</li><li>TIMEOUT 5 secondi - NbpLoadingService.setLoadingSpinnerStatus(false):</li></ul><button class=\"btn btn-default\" (click)=\"startAnimationByService()\">Start Animation by Service</button><nbp-loading [id]=\"loadingId\" nbpAnimationModeAuto></nbp-loading><nbp-loading [id]=\"multiLoadingId\"></nbp-loading><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Parametri inizializzazione\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-24\">Parametri di inizializzazione recuperati dall'URL<pre> {{embeddingUrlParams | json}} </pre></div></div><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Gestione evento MODAL_WINDOW\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-6\"><nbp-button [nbpLabel]=\"'Open modal'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"openModal()\"></nbp-button></div></div><nbp-modal #componente1 nbpTitle=\"Modale di esempio\" nbpSubTitle=\"Sottotitolo Esempio\" [(nbpOpened)]=\"isModalOpened\" [nbpButtons]=\"modalButtons\" (nbpOnButtonClicked)=\"closeModal()\" [nbpSize]=\"modalSize\">Modale</nbp-modal><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line [nbpLineStyle]=\"nbpStyle.PRIMARY\" nbpTitle=\"Gestione Evento GOTO\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-6\"><nbp-input-container [nbpLabel]=\"'Destination'\"><nbp-input-text name=\"gotoDestination\" [(ngModel)]=\"gotoDestination\"></nbp-input-text></nbp-input-container></div><div class=\"col-md-6\" style=\"margin-top:35px;\"><nbp-button [nbpLabel]=\"'Send GOTO'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"sendGotoMessage()\"></nbp-button></div></div><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Gestione Evento CJ_STEP\"></nbp-dividing-line></div></div><cj-wizard #wizard [cjWizardDataContainer]=\"dataContainer\"><cj-wizard-step id=\"Step_1\" name=\"Step_1\" cjLabel=\"Primo step\"><cj-wizard-page id=\"Step_1_Page_1\" name=\"Step_1_Page_1\" cjLabel=\"Pagina 1.1\"><h3>1.1</h3><nbp-button [nbpLabel]=\"'Next'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardNextStep()\"></nbp-button></cj-wizard-page><cj-wizard-page id=\"Step_1_Page_2\" name=\"Step_1_Page_2\" cjLabel=\"Pagina 1.2\"><h3>1.2</h3><nbp-button [nbpLabel]=\"'Previous'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardPrevStep()\"></nbp-button><nbp-button [nbpLabel]=\"'Next'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardNextStep()\"></nbp-button></cj-wizard-page></cj-wizard-step><cj-wizard-step id=\"Step_2\" name=\"Step_2\" cjLabel=\"Secondo step\"><cj-wizard-page id=\"Step_2_Page_1\" name=\"Step_2_Page_1\" cjLabel=\"Pagina 2.1\"><h3>2.1</h3><nbp-button [nbpLabel]=\"'Previous'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardPrevStep()\"></nbp-button><nbp-button [nbpLabel]=\"'Next'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardNextStep()\"></nbp-button></cj-wizard-page><cj-wizard-page id=\"Step_2_Page_2\" name=\"Step_2_Page_2\" cjLabel=\"Pagina 2.2\"><h3>2.2</h3><nbp-button [nbpLabel]=\"'Previous'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"wizardPrevStep()\"></nbp-button></cj-wizard-page></cj-wizard-step></cj-wizard><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Gestione evento PAGE_SIZE\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-6\"><nbp-button [nbpLabel]=\"'Send PAGE_SIZE message'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"sendPageSizeMessage()\"></nbp-button></div></div><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Gestione Evento ERROR\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-6\"><nbp-button [nbpLabel]=\"'Send ERROR message'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"sendErrorMessage()\"></nbp-button></div><div class=\"col-md-6\"><nbp-button [nbpLabel]=\"'Throw Error'\" [nbpStyle]=\"nbpStyle.PRIMARY\" (nbpClick)=\"throwError()\"></nbp-button></div></div><div class=\"row\"><div class=\"col-md-24\"><nbp-dividing-line nbpTitle=\"Riepilogo eventi Inviati & Ricevuti\"></nbp-dividing-line></div></div><div class=\"row\"><div class=\"col-md-12\"><h2>Ultimi 10 messaggi inviati.</h2><pre>{{ outgoingMessages | async }}</pre></div><div class=\"col-md-12\"><h2>Ultimi 10 eventi ricevuti.</h2><pre>{{ incomingEvents | async }}</pre></div></div></nbp-wrapper>",
    }),
    __metadata$175("design:paramtypes", [ChangeDetectorRef,
        NbpEmbeddingService,
        CjIFrameEmbeddingService,
        NbpLoadingService,
        ActivatedRoute])
], CjEmbeddingTestComponent);

var __decorate$200 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$178 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjEmbeddingParametersResolver = class CjEmbeddingParametersResolver {
    constructor(router, cjIframeEmbeddingService, cjEmbeddingUtility) {
        this.router = router;
        this.cjIframeEmbeddingService = cjIframeEmbeddingService;
        this.cjEmbeddingUtility = cjEmbeddingUtility;
    }
    resolve(route, state$$1) {
        let fontSizeParam = route.queryParams['fontSize'] ? route.queryParams['fontSize'] : NbpFontSize.SMALL;
        let fontSize = (NbpFontSize[fontSizeParam]);
        let contrasto = route.queryParams['contrast'] === 'on' ? 'on' : 'off';
        let pageScroll = route.queryParams['pageScroll'] ? route.queryParams['pageScroll'] : 0;
        let headerHeight = route.queryParams['headerHeight'] ? route.queryParams['headerHeight'] : 70;
        let floatingMenu = route.queryParams['floatingMenu'] === 'on' ? 'on' : 'off';
        let messages = new Array();
        messages.push(this.cjEmbeddingUtility.createFontSizeMessage(fontSize));
        messages.push(this.cjEmbeddingUtility.createContrastMessage(contrasto));
        messages.push(this.cjEmbeddingUtility.createPageScrollMessage(pageScroll, headerHeight));
        messages.push(this.cjEmbeddingUtility.createFloatingMenuMessage(floatingMenu));
        messages.forEach((message) => {
            this.cjIframeEmbeddingService.notifyIncomingMessage(message);
        });
        return {
            appFontSize: fontSize,
            contrasto: contrasto,
            pageScroll: pageScroll,
            headerHeight: headerHeight,
            floatingMenu: floatingMenu
        };
    }
    sendMessages(MessageMap) {
    }
};
CjEmbeddingParametersResolver = __decorate$200([
    Injectable(),
    __metadata$178("design:paramtypes", [Router,
        CjIFrameEmbeddingService,
        CjEmbeddingUtility])
], CjEmbeddingParametersResolver);

var __decorate$201 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$179 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let CjEmbeddingEnableGuard = class CjEmbeddingEnableGuard {
    constructor(iframeEmbeddingService) {
        this.iframeEmbeddingService = iframeEmbeddingService;
    }
    canActivate(route, state$$1) {
        this.iframeEmbeddingService.isEmbeddingEnabled = true;
        return true;
    }
};
CjEmbeddingEnableGuard = __decorate$201([
    Injectable(),
    __metadata$179("design:paramtypes", [CjIFrameEmbeddingService])
], CjEmbeddingEnableGuard);

var __decorate$173 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
// ERROR_HANDLER - start
// ERROR_HANDLER: end
let CjModule = class CjModule {
};
CjModule = __decorate$173([
    NgModule({
        imports: [
            CommonModule,
            FormsModule,
            NbpModule,
            RouterModule,
            HttpClientModule
        ],
        declarations: [
            CjBodyComponent,
            CjWizardComponent,
            CjWizardPageComponent,
            CjWizardStepComponent,
            CjPrivacyComponent,
            CjPrivacyFormComponent,
            CjShoppingCartComponent,
            CjShoppingCartElementComponent,
            CjShoppingCartProductComponent,
            CjErrorModalComponent,
            CjErrorViewComponent,
            CjAutocompleteComponent,
            CjAutocompleteElementComponent,
            CjSignatureComponent,
            CjApplicationAlertComponent,
            CjEmbeddingTestComponent
        ],
        entryComponents: [
            CjWizardPageComponent
        ],
        providers: [
            CjContextService,
            CjContextClientService,
            CjCustomContextClientService,
            CjCustomContextService,
            CjWizardHelper,
            CjPrivacyService,
            CjPrivacyClientService,
            ShoppingCartUtility,
            CjProgressConfigurationService,
            // ERROR_HANDLER: start
            {
                provide: ErrorHandler,
                useClass: GlobalErrorHandlerService
            },
            GlobalErrorHandlerHelperService,
            ApplicationStatusService,
            EventLoggerService,
            {
                provide: APP_INITIALIZER,
                useFactory: ApplicationEventLoggerFactory,
                deps: [EventLoggerService],
                multi: true
            },
            ServerEventLoggerService,
            ConsoleEventLoggerService,
            // ERROR_HANDLER: stop
            CjIFrameEmbeddingService,
            CjEmbeddingUtility,
            CjEmbeddingParametersResolver,
            NbpEmbeddingService,
            NbpViewSettingsService,
            CjEmbeddingEnableGuard
        ],
        exports: [
            CjBodyComponent,
            CjWizardComponent,
            CjWizardPageComponent,
            CjWizardStepComponent,
            CjPrivacyComponent,
            CjShoppingCartComponent,
            CjErrorModalComponent,
            CjErrorViewComponent,
            CjAutocompleteComponent,
            CjSignatureComponent,
            CjApplicationAlertComponent,
            CjEmbeddingTestComponent
        ]
    })
], CjModule);

var __decorate$204 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
//TODO refactor splitting View and Model
let NbpChartService = class NbpChartService {
};
NbpChartService = __decorate$204([
    Injectable()
], NbpChartService);

var __decorate$203 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$180 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpBarChartComponent = class NbpBarChartComponent {
    constructor() {
        /** Testo dell' azione custom di selezione (es. Dettagli) */
        this.nbpSelectionLabel = '';
        /** default width */
        this.width = 300;
        /** default height */
        this.height = 100;
        /**
         * Evento emesso al click sul grafico
         * @param {EventEmitter<any>}  nbpOnSelection
         */
        this.nbpOnSelection = new EventEmitter();
        /** larghezza degli anelli */
        this.nbpBarWidth = 15;
        /** spaziatura tra gli anelli */
        this.nbpBarSpacing = 5;
        this._bars = [];
        this._padding = 15;
        this._footerHeight = 10;
    }
    ngOnInit() {
        this.updateSize();
    }
    ngOnChanges(changes) {
        this.updateSize();
        let initialAngle = 0;
        // TODO rewrite in more functional style
        this.nbpData.barGroups.forEach((barGroup, barGroupIndex) => {
            barGroup.bars.forEach((bar, barIndex) => {
                let stackOnValue = 0;
                if (barIndex > 0) {
                    stackOnValue += barGroup.bars[barIndex - 1].value;
                }
                if (stackOnValue > bar.max) {
                    stackOnValue = bar.max;
                }
                let value = bar.value;
                if (stackOnValue + value > bar.max) {
                    value = bar.max - stackOnValue;
                }
                let barView = {
                    id: bar.id,
                    label: bar.label,
                    color: bar.color,
                    value: value,
                    stackOnValue: stackOnValue,
                    path: '',
                    r: 0,
                    lane: barGroupIndex
                };
                this._bars.push(barView);
            });
        });
        this._bars.forEach((bar, index) => {
            bar.r = this._externalRadius - (this.nbpBarWidth * bar.lane) - (this.nbpBarSpacing * bar.lane);
            let angle = this._chartWidth * bar.value / 100;
            let stackOn = this._chartWidth * bar.stackOnValue / 100;
            let angleValue = initialAngle + angle + stackOn;
            bar.endx = angleValue;
            bar.endy = this._chartCenter - bar.r;
            bar.startx = 0 + stackOn;
            bar.starty = this._chartCenter - bar.r;
            bar.path = `M${bar.startx},${bar.starty}  L${bar.endx},${bar.endy}`;
        });
    }
    updateSize() {
        this._chartWidth = this.width - 2 * this._padding;
        this._chartHeight = this.height - 2 * this._padding;
        this._chartEndy = this._chartHeight - this._footerHeight; //TODO refactor naming
        this._chartCenter = Math.min(this._chartWidth / 2, this._chartEndy / 2);
        this._externalRadius = this._chartCenter - this.nbpBarWidth / 2;
    }
    _onAction(value) {
        console.log('nbpChartComponent - Emiting: nbpOnSelection', value);
        this.nbpOnSelection.emit(value);
    }
};
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "nbpSelectionLabel", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "width", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "height", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "nbpData", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Number)
], NbpBarChartComponent.prototype, "testTrigger", void 0);
__decorate$203([
    Output(),
    __metadata$180("design:type", EventEmitter)
], NbpBarChartComponent.prototype, "nbpOnSelection", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "nbpBarWidth", void 0);
__decorate$203([
    Input(),
    __metadata$180("design:type", Object)
], NbpBarChartComponent.prototype, "nbpBarSpacing", void 0);
NbpBarChartComponent = __decorate$203([
    Component({
        selector: 'nbp-bar-chart',template: "<div class=\"nbp-ring-chart\"><h3 class=\"center-title\">{{nbpData.title}}</h3><svg viewBox=\"0 0 300 60\" [attr.width]=\"'300'\" [attr.height]=\"'100%'\"><svg:path *ngFor=\"let bar of _bars\" [attr.d]=\"bar.path\" [style.stroke]=\"bar.color\" [style.stroke-width]=\"nbpBarWidth\" style=\"fill:none;\"/><svg:g [attr.transform]=\"'translate('+_chartCenter+' '+_chartCenter+')'\" (click)=\"_onAction('Default')\"></svg:g><svg:g [attr.transform]=\"'translate(0 '+_chartEndy+')'\"></svg:g></svg><h3 *ngFor=\"let header of nbpData.headers\" class=\"summary-text\"><span *ngIf=\"header.content\" [innerHTML]=\"header.content\"></span></h3></div>",
        styles: [".button-icon{font-size:2em!important;color:#000;display:inline-block;vertical-align:middle}.nbp-ring-chart{width:100%;padding:10px}.svg-preserve-aspect-container{width:100%;height:100%;position:relative}.svg-preserve-aspect-canvas{display:block;width:100%;height:100%;visibility:hidden}.svg-preserve-aspect{width:100%;height:100%;left:0;position:absolute;top:0}.legend-label{font-family:sans-serif;font-size:1em}.summary-text{font-family:sans-serif;font-size:1em}.summary-value{font-weight:700}.center-title{font-size:1.2em;font-weight:700}.pointer-cursor{cursor:pointer}.center-subtitle{cursor:pointer;font-size:.8em;fill:#90ee90;font-weight:700}h3{margin-top:1px}.chart-heading{margin-top:5px;margin-bottom:15px} /*# sourceMappingURL=nbp-ring-chart.component.css.map */ "],
        providers: [NbpChartService]
    }),
    __metadata$180("design:paramtypes", [])
], NbpBarChartComponent);

var __decorate$205 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata$181 = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
let NbpRingChartComponent = 
/**
 * Componente ring-chart
*/
class NbpRingChartComponent {
    constructor() {
        /** Testo dell' azione custom di selezione (es. Dettagli) */
        this.nbpSelectionLabel = '';
        /** default width */
        this.width = 300;
        /** default height */
        this.height = 400;
        /**
         * Evento emesso al click sul grafico
         * @param {EventEmitter<any>}  nbpOnSelection
         */
        this.nbpOnSelection = new EventEmitter();
        /** larghezza degli anelli */
        this.nbpBarWidth = 15;
        /** spaziatura tra gli anelli */
        this.nbpBarSpacing = 5;
        this._bars = [];
        this._titleSpans = [];
        this._titleLineHeight = 20;
        this._titleStart = 0;
        this._selectionActionStart = 0;
        this._padding = 15;
        this._footerHeight = 80;
    }
    ngOnInit() {
        this.updateSize();
    }
    ngOnChanges(changes) {
        let titleWords = this.nbpData.title.split(' ');
        let lineLength = 10;
        let currentSpan = '';
        titleWords.forEach(word => {
            currentSpan += word;
            currentSpan += ' ';
            if (currentSpan.length > lineLength) {
                this._titleSpans.push(currentSpan);
                currentSpan = '';
            }
        });
        if (currentSpan != '') {
            this._titleSpans.push(currentSpan);
        }
        this._titleStart = -this._titleLineHeight * this._titleSpans.length / 2 + this._titleLineHeight / 2;
        this._selectionActionStart = this._titleLineHeight * this._titleSpans.length / 2 + this._titleLineHeight / 2;
        this.updateSize();
        let initialAngle = Math.PI / 2;
        // TODO rewrite in more functional style
        this.nbpData.barGroups.forEach((barGroup, barGroupIndex) => {
            let stackOnValue = 0;
            barGroup.bars.forEach((bar, barIndex) => {
                if (barIndex > 0) {
                    stackOnValue += barGroup.bars[barIndex - 1].value;
                }
                if (stackOnValue > bar.max) {
                    stackOnValue = bar.max;
                }
                let value = bar.value;
                if (stackOnValue + value > bar.max) {
                    value = bar.max - stackOnValue;
                }
                if (value - bar.max < 0.001) {
                    value *= 0.9999;
                }
                let barView = {
                    id: bar.id,
                    label: bar.label,
                    color: bar.color,
                    value: value,
                    stackOnValue: stackOnValue,
                    path: '',
                    r: 0,
                    lane: barGroupIndex
                };
                this._bars.push(barView);
            });
        });
        this._bars.forEach((bar, index) => {
            bar.r = this._externalRadius - (this.nbpBarWidth * bar.lane) - (this.nbpBarSpacing * bar.lane);
            let stackOnAngle = 2 * Math.PI * (bar.stackOnValue / 100);
            let angle = 2 * Math.PI * (bar.value / 100);
            let angleValue = initialAngle - angle;
            bar.endx = this._chartCenter + bar.r * Math.cos(angleValue - stackOnAngle);
            bar.endy = this._chartCenter - bar.r * Math.sin(angleValue - stackOnAngle);
            bar.startx = this._chartCenter + bar.r * Math.cos(initialAngle - stackOnAngle);
            bar.starty = this._chartCenter - bar.r * Math.sin(initialAngle - stackOnAngle);
            let largeArcFlag = angle <= Math.PI ? "0" : "1";
            let sweepArcFlag = 1;
            bar.path = `M${bar.startx},${bar.starty}  A${bar.r},${bar.r} 0 ${largeArcFlag},${sweepArcFlag} ${bar.endx},${bar.endy}`;
        });
    }
    updateSize() {
        this._chartWidth = this.width - 2 * this._padding;
        this._chartHeight = this.height - 2 * this._padding;
        this._chartEndy = this._padding + this._chartHeight - this._footerHeight; //TODO refactor naming
        let radius = Math.min(this._chartWidth / 2, this._chartEndy / 2);
        this._chartCenter = this._padding + radius;
        this._externalRadius = radius - this.nbpBarWidth / 2;
    }
    _onAction(value) {
        console.log('nbpChartComponent - Emiting: nbpOnSelection', value);
        this.nbpOnSelection.emit(value);
    }
};
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "nbpSelectionLabel", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "width", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "height", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "nbpData", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Number)
], NbpRingChartComponent.prototype, "testTrigger", void 0);
__decorate$205([
    Output(),
    __metadata$181("design:type", EventEmitter)
], NbpRingChartComponent.prototype, "nbpOnSelection", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "nbpBarWidth", void 0);
__decorate$205([
    Input(),
    __metadata$181("design:type", Object)
], NbpRingChartComponent.prototype, "nbpBarSpacing", void 0);
NbpRingChartComponent = __decorate$205([
    Component({
        selector: 'nbp-ring-chart',template: "<div class=\"nbp-ring-chart\"><section class=\"chart-heading\"><h3 *ngFor=\"let header of nbpData.headers\" class=\"summary-text text-center\"><span *ngIf=\"header.content\" [innerHTML]=\"header.content\"></span><nbp-tooltip *ngIf=\"header.tooltipContent\" nbpPosition=\"Right\" nbpVisibilityStrategy=\"click\" [nbpText]=\"header.tooltipContent\"><span class=\"icon button-icon icon-question-circle-o\"></span></nbp-tooltip></h3></section><div class=\"svg-preserve-aspect-container\"><canvas class=\"svg-preserve-aspect-canvas\" height=\"400\" width=\"300\"></canvas><svg viewBox=\"0 0 300 400\" class=\"svg-preserve-aspect\"><defs><filter id=\"dropshadow\" x=\"-40%\" y=\"-40%\" width=\"180%\" height=\"180%\" filterUnits=\"userSpaceOnUse\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/><feOffset dx=\"5\" dy=\"5\" result=\"offsetblur\"/><feOffset dx=\"-5\" dy=\"-5\" result=\"offsetblur\"/><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter></defs><svg:path *ngFor=\"let bar of _bars\" [attr.d]=\"bar.path\" [style.stroke]=\"bar.color\" [style.stroke-width]=\"nbpBarWidth\" style=\"fill:none;\"/><svg:g [attr.transform]=\"'translate('+_chartCenter+' '+_chartCenter+')'\" (click)=\"_onAction('Default')\"><svg:text *ngFor=\"let titleSpan of _titleSpans; let index=index\" [attr.y]=\"_titleStart + (index * _titleLineHeight)\" class=\"center-title\" text-anchor=\"middle\" alignment-baseline=\"central\">{{titleSpan}}</svg:text><svg:text *ngIf=\"nbpSelectionLabel\" [attr.y]=\"_selectionActionStart\" class=\"center-subtitle\" text-anchor=\"middle\" alignment-baseline=\"central\">{{nbpSelectionLabel}} &gt;</svg:text></svg:g><svg:g [attr.transform]=\"'translate(0 '+_chartEndy+')'\"><svg:g *ngFor=\"let bar of _bars; let index=index\" [attr.transform]=\"'translate(8 '+(index * 20)+')'\"><svg:circle x=\"7\" y=\"10\" r=\"7\" [style.fill]=\"bar.color\"></svg:circle><svg:text x=\"20\" y=\"0\" alignment-baseline=\"central\" class=\"legend-label\">{{bar.label}}</svg:text></svg:g></svg:g></svg></div></div>",
        styles: [".button-icon{font-size:2em!important;color:#000;display:inline-block;vertical-align:middle}.nbp-ring-chart{width:100%;padding:10px}.svg-preserve-aspect-container{width:100%;height:100%;position:relative}.svg-preserve-aspect-canvas{display:block;width:100%;height:100%;visibility:hidden}.svg-preserve-aspect{width:100%;height:100%;left:0;position:absolute;top:0}.legend-label{font-family:sans-serif;font-size:1em}.summary-text{font-family:sans-serif;font-size:1em}.summary-value{font-weight:700}.center-title{font-size:1.2em;font-weight:700}.pointer-cursor{cursor:pointer}.center-subtitle{cursor:pointer;font-size:.8em;fill:#90ee90;font-weight:700}h3{margin-top:1px}.chart-heading{margin-top:5px;margin-bottom:15px} /*# sourceMappingURL=nbp-ring-chart.component.css.map */ "],
        providers: [NbpChartService]
    })
    /**
     * Componente ring-chart
    */
    ,
    __metadata$181("design:paramtypes", [])
], NbpRingChartComponent);

var __decorate$202 = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
let NbpChartModule = 
/** Module containing charting components */
class NbpChartModule {
};
NbpChartModule = __decorate$202([
    NgModule({
        imports: [
            CommonModule,
            NbpModule
        ],
        declarations: [
            NbpRingChartComponent,
            NbpBarChartComponent
        ],
        providers: [],
        exports: [
            NbpRingChartComponent,
            NbpBarChartComponent
        ]
    })
    /** Module containing charting components */
], NbpChartModule);

// TODO CHARTS cleanup

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
const CJLIB_MODULES = [
    NbpModule,
    NbpChartModule,
    CjModule
];
let CjLibModule = class CjLibModule {
};
CjLibModule = __decorate([
    NgModule({
        imports: CJLIB_MODULES,
        exports: CJLIB_MODULES
    })
], CjLibModule);

// export * from './core';
// export * from './forms/index';

export { APP_CONFIG, APP_ALERT_DEF, CjLibModule, NbpModule_noBrowserAnimation, NbpModule, RplDatepickerModule, NbpDatepickerGenericComponent, RplCalendarModule, NbpCalendarGenericComponent, NbpButtonComponent, NbpButtonGenerationComponent, NbpLabelComponent, NbpInputTextComponent, NbpInputContainerComponent, NbpCheckboxComponent, NbpFooterComponent, NbpHeaderComponent, NbpHeaderLightComponent, NbpNavigationHeaderComponent, NbpTableComponent, NbpModalComponent, NbpComboComponent, NbpComboMultiComponent, NbpDatepickerHtml5Component, NbpSwitchComponent, NpbSwitchDispalyType$1 as NpbSwitchDispalyType, NbpCustomerInfoComponent, NbpAccordionComponent, NbpAccordionButtonComponent, NbpAccordionShowmoreComponent, NbpAccordionShowmoreCircleComponent, NbpRadioComponent, NbpProgressComponent, NbpProgressStickyContentComponent, NbpFormContainerComponent, NbpFormAutoScrollDirective, NbpPagingComponent, NbpPaginationComponent, NbpLoadingComponent, NbpBreadcrumbComponent, NbpTooltipComponent, NbpBurgerMenuComponent, NbpIconComponent, NbpLoggedUserComponent, NbpPanelComponent, NbpTableColumnComponent, NbpCustomerNameComponent, NbpFeedbackComponent, NbpDataContainerComponent, NbpButtonType, NbpAccordionEvent, NbpDataSource, INbpDataSource, NbpFeedbackType, NbpDatepickerComponent, NbpSequenzialeGenericComponent, NbpSequenzialeSottostepGenericComponent, NbpDividingLineComponent, NbpTitledPanelComponent, NbpSelectionPanelComponent, NbpShadowedPanelComponent, NbpSpinnerComponent, NbpTabBarComponent, NbpLoadingService, NbpLoadingInterceptor, GlobalLoadingIdentificationService, NbpDebugInfoComponent, NbpErrorAdviceComponent, NbpSignTypeSelectComponent, NbpSignInfoHeaderComponent, NbpRadioSelectionComponent, NbpSignSpilayerComponent, NbpPaperlessSignComponent, NbpSignComponent, NbpAutocompleteDatasource, NbpPendingLoadingStatusService, NbpStepNavigabiliComponent, NbpComboFilterComponent, NbpToggleTabsetComponent, NbpToggleTabComponent, NbpSwitchBinaryComponent, NbpAccordionLightComponent, NbpAlertBoxComponent, NbpSliceAndEllipsisPipe, NbpImportoPipe, NbpEllipsisDirective, NbpPaperSignComponent, DownloadService, NbpHeaderGenericComponent, NbpFloaterComponent, SmoothScrollToDirective, NbpFilterComponent, NbpSpinnerGenericComponent, NbpStickyTabGenericComponent, NbpHeaderGenericNoTranslateComponent, NbpBurgerMenuGenericNoTranslateComponent, NbpBurgerMenuGenericComponent, NbpMenuOperationComponent, NbpCustomerInfoGenericComponent, NbpLoggedUserGenericComponent, NbpSwitchGenericComponent, NbpCustomValidationService, NbpBoxWithEllipsisComponent, NbpFormatterDirective, EqualValidator, ArrayRequiredValidator, MaxSelectionValidator, NbpCheckboxRequiredValidator, ContainsValidator, CustomValidator, NbpModalDialogComponent, NbpModalDialogService, NbpEmbeddingService, NbpViewSettingsService, NbpWrapperComponent, NbpSliderComponent, NbpSliderKeyPointsComponent, NouisliderModule, NbpPaginationLettersComponent, NbpUploadFileComponent, FileUploadModule, NbpBottomPageButtonComponent, NbpSliderRangeComponent, NbpSliderStoricoComponent, NbpIndexAlphabeticComponent, NbpOnBoardingComponent, NbpEtichettaCheckComponent, NbpSelMercatoComponent, NbpEtichettaFiltroComponent, NbpSearchBoxComponent, ClickOutsideModule, NbpAutoFocusInModalDirective, NbpCalendarDateModel, NbpStyle, NbpSize, NbpFontSize, NbpPipe, NbpChannel, NbpLoadingStatus, NbpAlertType, NbpStepDimension, NbpEmbeddingMessageType, NbpChartModule, NbpBarChartComponent, NbpRingChartComponent, CjModule, CjBodyComponent, CjWizardComponent, CjWizardPageComponent, CjWizardStepComponent, CjShoppingCartComponent, CjContextService, ICjCustomContextService, CjCustomContextService, CjContextClientService, CjCustomContextClientService, TestCjWizardContextSource, CjPrivacyComponent, CjPrivacyClientService, CjPrivacyService, ShoppingCartUtility, ApplicationStatusService, ServerEventLoggerService, ConsoleEventLoggerService, CjErrorModalComponent, CjAutocompleteComponent, CjSignatureComponent, MockSignatureDatasource, CjApplicationAlertComponent, CjEmbeddingTestComponent, CjEmbeddingParametersResolver, CjEmbeddingEnableGuard, SignDescription, SignType, GlobalErrorHandlerService };
