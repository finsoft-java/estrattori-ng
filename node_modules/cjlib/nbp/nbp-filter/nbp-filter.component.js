var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { NbpDataSource } from './../nbp-datasource/nbp-datasource.service';
import { NbpStyle } from './../nbp-commons/nbp-commons.enums';
var nextId = 0;
var NbpFilterComponent = (function () {
    function NbpFilterComponent() {
        /**
        * colore componente selettore
        * Valori possibili: check, default, outline, primary, profile, secondary
        */
        this.backgroundgray = NbpStyle.BACKGROUNDGRAY;
        this.backgroundgreen = NbpStyle.BACKGROUNDGREEN;
        this.check = NbpStyle.CHECK;
        this.default = NbpStyle.DEFAULT;
        this.outline = NbpStyle.OUTLINE;
        this.primary = NbpStyle.PRIMARY;
        this.profile = NbpStyle.PROFILE;
        this.secondary = NbpStyle.SECONDARY;
        this.opened = false;
        /**
        * id univoco che identifica il selettore
        * Se nessun id Ã¨ fornito e' auto-generato: select-1,select-2,select-3,.....
        */
        this.id = "select-" + ++nextId;
        this.message = "Eventuale sezione";
        /**
         * Evento generato dal tasto conferma
         */
        this.searchEvent = new EventEmitter();
        /**
         * Evento generato dal tasto annulla
         */
        this.deleteEvent = new EventEmitter();
        this.labelVirgola = "";
        this.valoriFiltriSettati = "";
    }
    NbpFilterComponent.prototype.ngOnInit = function () {
        this.clearFields();
    };
    NbpFilterComponent.prototype.toggle = function () {
        this.opened = !this.opened;
    };
    NbpFilterComponent.prototype.searchFields = function () {
        var _this = this;
        this.opened = false;
        this.valoriFiltriSettati = "";
        this.results = [];
        this.selectedItems.forEach(function (element) {
            if (element.value)
                if (_this.valoriFiltriSettati) {
                    if (_this.labelVirgola)
                        _this.valoriFiltriSettati = _this.valoriFiltriSettati + ", " + _this.labelVirgola;
                    _this.labelVirgola = element.label;
                }
                else
                    _this.valoriFiltriSettati = element.label;
            if (element.type == "combo")
                _this.results.push({
                    type: "combo",
                    value: element.value
                });
            if (element.type == "input")
                _this.results.push({
                    type: "input",
                    value: element.value
                });
        });
        this.searchEvent.emit(this.results);
    };
    NbpFilterComponent.prototype.clearFields = function () {
        var _this = this;
        this.valoriFiltriSettati = "";
        this.searchEvent.emit([]);
        this.itemsDataSource = new Array();
        this.selectedItems = new Array();
        this.itemsView.forEach(function (element) {
            _this.itemsDataSource.push(new NbpDataSource(element.data));
            if (element.type == "combo")
                _this.selectedItems.push({
                    type: "combo",
                    label: element.label,
                    value: null
                });
            if (element.type == "input")
                _this.selectedItems.push({
                    type: "input",
                    label: element.label,
                    value: null
                });
        });
    };
    NbpFilterComponent.prototype.annulla = function () {
        this.valoriFiltriSettati = "";
        this.searchEvent.emit([]);
        this.deleteEvent.emit();
    };
    return NbpFilterComponent;
}());
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpFilterComponent.prototype, "id", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], NbpFilterComponent.prototype, "itemsView", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NbpFilterComponent.prototype, "message", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], NbpFilterComponent.prototype, "searchEvent", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], NbpFilterComponent.prototype, "deleteEvent", void 0);
NbpFilterComponent = __decorate([
    Component({
        selector: 'nbp-filter',
        template: "<div class=\"pull-right hover\" style=\"margin-right:40px\"><div style=\"display:inline-block\" [ngClass]=\"opened ? 'success-container-open' : 'success-container-close'\"><span (click)=\"toggle()\" class=\"success-icon\" [ngClass]=\"{'icomoon-FiltroInLista2': !opened, 'icomoon-FiltroInLista22': opened}\"></span> <span (click)=\"toggle()\" class=\"success-icon on-hover icomoon-FiltroInLista22\" *ngIf=\"!opened\"></span></div><div style=\"display:inline-block;\" class=\"centraCercaFiltra\"><div (click)=\"toggle()\" class=\"cercaFiltra1\">CERCA</div><div (click)=\"toggle()\" class=\"cercaFiltra2\">E FILTRA</div></div></div><div class=\"row\" *ngIf=\"valoriFiltriSettati\" style=\"margin-top:20px\"><div class=\"hoverCancellaFiltri\" style=\"display:table; margin-left:9px\"><div style=\"display:table-cell;  vertical-align: middle;\">Ricerca effettuata per <span style=\"font-weight: bold;\">{{valoriFiltriSettati}}</span> <span *ngIf=\"labelVirgola\">e </span><span style=\"font-weight: bold;\">{{labelVirgola}}</span></div><div style=\"display:table-cell;width:35px\"></div><div style=\"display:table-cell; vertical-align: middle;\" class=\"icon-valori-filtri-settati\"><span (click)=\"clearFields()\" class=\"icomoon-Modifica_gomma success-icon-gomma\"></span></div><div style=\"display:table-cell;width:12px\"></div><div style=\"display:table-cell; vertical-align: middle;\" (click)=\"clearFields()\" class=\"cancella-filtri hoverCancellaFiltri\">CANCELLA FILTRI</div></div></div><div class=\"col-md-24 col-sm-24 col-xs-24\" style=\"margin-top:-4px\"><div *ngIf=\"opened\" style=\"text-align:right\"><div class=\"row arrow-filter\" style=\"margin-bottom:-7px; z-index: 1;\"></div><div class=\"row filter-panel\" style=\"z-index: 0;\"><div class=\"row text-center mrg-t-20 info-filter mrg-b--10\"><span>Eventuale <strong>guida</strong> o su come utilizzare i <strong>filtri e la ricerca</strong></span><br><span>o introduzione all'argomento trattato.</span></div><nbp-dividing-line class=\"row\" nbpTitle=\"{{message}}\"></nbp-dividing-line><div class=\"row\" style=\"color:rgb(50, 50, 50); text-align:center;\"><ng-container *ngFor=\"let item of itemsView; index as idx;\"><div *ngIf=\"idx % 3 == 0\" class=\"col col-md-1 col-sm-1 col-xs-1\"></div><div *ngIf=\"item.type=='combo'\" class=\"col col-md-6 col-sm-6 col-xs-6\"><nbp-input-container [nbpLabel]=\"item.label\"><nbp-combo [name]=\"item.id\" [nbpDataSource]=\"itemsDataSource[idx]\" [placeholder]=\"item.placeholder\" [nbpViewField]=\"item.viewField\" [required]=\"item.required\" [(ngModel)]=\"selectedItems[idx].value\"></nbp-combo></nbp-input-container></div><div *ngIf=\"item.type=='input'\" class=\"col col-md-6 col-sm-6 col-xs-6\"><nbp-input-container [nbpLabel]=\"item.label\" style=\"font-family:Arial\"><nbp-input-text [name]=\"item.id\" [placeholder]=\"item.placeholder\" [required]=\"required\" [(ngModel)]=\"selectedItems[idx].value\"></nbp-input-text></nbp-input-container></div><div class=\"col col-md-2 col-sm-2 col-xs-2\"></div></ng-container></div><div class=\"row button-group-filter\"><div class=\"col-md-1 col-sm-1 col-xs-1\"></div><div class=\"col-md-3 col-sm-3 col-xs-3\" style=\"text-align:left\"><nbp-button [nbpLabel]=\"'Annulla'\" [nbpStyle]=\"backgroundgreen\" (nbpClick)=\"annulla()\"></nbp-button></div><div class=\"col-md-4 col-sm-4 col-xs-4\" style=\"cursor: pointer; text-align:left\" (click)=\"clearFields()\"><div style=\"min-width: 150px;\"><span (click)=\"clearFields()\" class=\"gomma icomoon-Modifica_gomma\" style=\"margin-left:.3em;\"></span><div (click)=\"clearFields()\" style=\"display:inline-block;color:black;margin-left:.65em;\"><div class=\"gomma_txt\">CANCELLA</div><div class=\"gomma_txt\" style=\"margin-top: -5px;\">TUTTI I CAMPI</div></div></div></div><div class=\"col-md-12 col-sm-11 col-xs-11\"></div><div class=\"col-md-3 col-sm-3 col-xs-3\"><nbp-button [nbpLabel]=\"'Cerca'\" [nbpStyle]=\"primary\" (nbpClick)=\"searchFields()\"></nbp-button></div></div></div></div></div>",
        styles: [".navbar-default{background:0 0;border:none}#main-header{margin:0;position:relative}.main-header-container{padding:0;width:100%!important}.main-content{min-height:100%;animation:fadein 1s;padding-top:1.25em}.footer{background-color:#323232;padding-top:.625em;padding-bottom:.625em;margin-top:1.875em;color:#fff;border-bottom:.375em solid #000;position:relative;width:100%;z-index:2}@media (min-width:768px){.main-page{padding-bottom:6.625em}.footer{min-height:.625em;margin-bottom:0;margin-right:2.5em}}@media (min-width:992px){.footer{margin-top:1.25em;margin-right:12.5em}}:host-context(.contrasto-on) .footer{background-color:#000}.success-container-open{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.hover:hover .success-container-close .success-icon.on-hover{display:inline}.hover:hover .success-container-close .success-icon{display:none}.mrg-t-20{margin-top:20px}.mrg-b--10{margin-bottom:-10px}.info-filter{color:#323232}.success-container-close{width:35px;height:35px;cursor:pointer;position:absolute;margin-left:-40px;margin-top:-2px;background-color:#fff;color:#258900}.success-container-close:hover .success-icon.on-hover{display:inline}.success-container-close:hover .success-icon{display:none}.success-container-close .success-icon.on-hover{display:none}.icon-valori-filtri-settati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:relative;background-color:#fff;color:#258900;border:1px solid #258900}.icon-valori-filtri-settati:hover{background-color:#258900;color:#fff}.container-filtrisettati{width:35px;height:35px;cursor:pointer;border-radius:25px;position:absolute;background-color:#fff;color:#258900;border:1px solid #258900}.container-filtrisettati:hover{background-color:#258900;color:#fff}.arrow-filter{display:inline-block;position:relative;width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:12px solid #ccc;margin-right:122px}.arrow-filter::before{content:'';position:absolute;top:2px;width:0;height:0;border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #f2f2f2;left:-10.5px}.success-icon{width:35px;height:35px;font-size:35px;cursor:pointer;position:absolute;top:-15%;left:-1%}.success-icon-gomma{width:20px;height:20px;font-size:20px;cursor:pointer;position:absolute;top:12%;left:20%}.cancella-filtri{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.centraCercaFiltra{margin-top:-1px}.cercaFiltra1{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-left:6px}.cercaFiltra2{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:70px;text-align:left;cursor:pointer;padding:0;border:0;margin:0;margin-top:-2px;margin-left:6px}.ricercaEffettuata{font-family:'Arial Bold',Arial;font-weight:700;font-size:.75em;color:#258900;width:800px;text-align:left;font-size:11px;cursor:pointer;padding:0;border:0;margin:0}.hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#258900;color:#fff}.filter-panel{background-color:#f2f2f2;color:#fff;width:100%;border:.5px solid #ccc}.button-group-filter{margin-top:20px;margin-bottom:20px}.gomma{font-size:2.5em;vertical-align:middle;color:green;background-color:transparent}.gomma_txt{margin-top:.75em;margin:0;padding:0;text-align:left;vertical-align:middle;color:#258900;font-size:.75em;font-weight:700;text-transform:uppercase}:host-context(.contrasto-on) .success-container-open{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close{background-color:#fff;color:#000}:host-context(.contrasto-on) .success-container-close:hover{background-color:#fff;color:#000}:host-context(.contrasto-on) .icon-valori-filtri-settati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .icon-valori-filtri-settati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .container-filtrisettati{background-color:#fff;color:#000;border:1px solid #000}:host-context(.contrasto-on) .container-filtrisettati:hover{background-color:#000;color:#fff}:host-context(.contrasto-on) .arrow-filter{border-bottom:12px solid #000}:host-context(.contrasto-on) .arrow-filter::before{border-bottom:11px solid #fff}:host-context(.contrasto-on) .cancella-filtri{color:#000}:host-context(.contrasto-on) .cercaFiltra1{color:#000}:host-context(.contrasto-on) .cercaFiltra2{color:#000}:host-context(.contrasto-on) .ricercaEffettuata{color:#000}:host-context(.contrasto-on) .hoverCancellaFiltri:hover>.icon-valori-filtri-settati{background-color:#000;color:#fff}:host-context(.contrasto-on) .filter-panel{background-color:#fff;color:#000;border:.5px solid #000}:host-context(.contrasto-on) .gomma{color:#000;background-color:transparent}:host-context(.contrasto-on) .gomma_txt{color:#000} /*# sourceMappingURL=nbp-filter.component.css.map */ "]
    }),
    __metadata("design:paramtypes", [])
], NbpFilterComponent);
export { NbpFilterComponent };
